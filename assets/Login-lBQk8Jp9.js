import{r as a,aa as E,j as e}from"./reachHideWarning-BuDFsbAY.js";import{p as d,a4 as l,E as L}from"./ui-5y7KCIwL.js";import{S as C,g as I}from"./purple-BexrtIPo.js";import"./slugify-qXYEE26i.js";import"./send-BYHlx9KJ.js";import"./moment-DknGAOAq.js";const k=()=>{const t=d.auth().currentUser;return t?{id:t.uid}:null},U=t=>{const n=r=>{t(r?{}:null)};return d.auth().onAuthStateChanged(n)},q=()=>{const[t,n]=a.useState(()=>{const r=k();return{isLoading:!r,user:r}});return a.useEffect(()=>U(u=>{n({isLoading:!1,user:u})}),[]),t},A=async(t,n)=>{try{const r=await d.auth().signInWithEmailAndPassword(t,n);return{}}catch(r){throw console.log(r.toString()),new Error("Error signing in: "+r)}},T=({})=>{const[t,n]=a.useState({}),{isLoading:r,user:u}=q(),g=!!u,[w,h]=a.useState([]),[N,x]=a.useState(!1),[m,p]=a.useState(""),[f,S]=a.useState(""),y=E(),v=()=>{setTimeout(()=>{try{document.querySelector("input.email").focus()}catch{}},512)},b=async()=>{n(null),h([]);let s=0,o={};if(m.length==0&&(s+=1,o={...o,email:{message:"Email is required"}}),f.length==0&&(s+=1,o={...o,password:{message:"Password is required"}}),console.log(s),s>0){n({...o}),console.log(t);const i=Object.keys(t)[0];setTimeout(()=>{try{document.querySelector(`input.${i}`).focus()}catch(c){console.error(c)}},512)}else{x(!0);try{await A(m,f);const{repoUrl:i,token:c,corsProxyUrl:j}=await I();localStorage.repoUrl=i,localStorage.token=c,localStorage.corsProxyUrl=j,document.location.href="/purple"}catch(i){const c=i.message.replace("FirebaseError:","").replace("Firebase:","");p(m),h([c]);try{document.querySelector("input.email").focus()}catch{}}x(!1)}};return a.useEffect(()=>{v()},[]),a.useEffect(()=>{g&&y("/")},[g]),e.jsx("div",{children:e.jsx("div",{className:"d-flex align-items-center auth px-0",children:e.jsx("div",{className:"row w-100 mx-0",children:e.jsx("div",{className:"col-lg-4 mx-auto",children:e.jsxs("div",{className:"auth-form-light text-left py-5 px-4 px-sm-5 twx-relative",children:[e.jsx("div",{className:"brand-logo",children:e.jsx("img",{className:"twx-mx-auto",src:"/assets/images/logo/logo-dark.png",alt:"logo"})}),e.jsx("div",{className:"twx-text-center",children:e.jsx("h6",{className:"font-weight-light",children:"Login untuk melanjutkan"})}),N?e.jsx(e.Fragment,{children:e.jsx(C,{independent:!0,message:"Sedang Login"})}):e.jsxs(l,{className:"pt-3",onSubmit:s=>{try{console.log("hello"),b()}catch{}return s.preventDefault()},children:[e.jsx(l.Group,{className:"d-flex search-field",children:e.jsx(l.Control,{type:"email",placeholder:"Email",size:"lg",className:"h-auto email",onChange:s=>p(s.target.value)})}),e.jsx(l.Group,{className:"d-flex search-field",children:e.jsx(l.Control,{type:"password",placeholder:"Kata Sandi",size:"lg",className:"h-auto password",onChange:s=>S(s.target.value)})}),e.jsx(l.Group,{className:"d-flex search-field",children:w.map((s,o)=>e.jsx("div",{className:"alert alert-danger",children:s},o))}),e.jsx("div",{className:"mt-3",children:e.jsx(L,{type:"submit",size:"sm",className:"text-center btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn",children:e.jsx("span",{className:"twx-mx-auto",children:"LOG IN"})})})]})]})})})})})};export{T as Login,T as default};
//# sourceMappingURL=Login-lBQk8Jp9.js.map
