var xC=Object.defineProperty;var kC=(t,e,r)=>e in t?xC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ze=(t,e,r)=>(kC(t,typeof e!="symbol"?e+"":e,r),r);import{K as un,z as Fe,r as ie,j as F,t as ee,a3 as ng,P as Of,a9 as cn,af as RC,ac as oe,h as ku}from"./reachHideWarning-BuDFsbAY.js";function Et(t){return typeof File<"u"&&t instanceof File||typeof Date<"u"&&t instanceof Date?!1:typeof t=="object"&&t!==null&&!Array.isArray(t)}function OC(t){return t.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),Et(t.additionalItems)}function I_(t){if(t==="")return;if(t===null)return null;if(/\.$/.test(t)||/\.0$/.test(t)||/\.\d*0$/.test(t))return t;const e=Number(t);return typeof e=="number"&&!Number.isNaN(e)?e:t}const vo="__additional_property",Vp="additionalProperties",yl="allOf",Nn="anyOf",fE="const",NC="default",ph="dependencies",DC="enum",dn="__errors",Gi="$id",FC="if",ts="items",MC="_$junk_option_schema_id$_",td="$name",Yr="oneOf",$t="properties",jC="required",Id="submitButtonOptions",Vt="$ref",ig="__rjsf_additionalProperties",pE="__rjsf_rootSchema",LC="ui:field",sg="ui:widget",Oc="ui:options",VC="ui:globalOptions";function Ue(t={},e={}){return Object.keys(t).filter(r=>r.indexOf("ui:")===0).reduce((r,n)=>{const i=t[n];return n===sg&&Et(i)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),r):n===Oc&&Et(i)?{...r,...i}:{...r,[n.substring(3)]:i}},{...e})}function mE(t,e={},r){if(!t.additionalProperties)return!1;const{expandable:n=!0}=Ue(e);return n===!1?n:t.maxProperties!==void 0&&r?Object.keys(r).length<t.maxProperties:!0}var UC=typeof un=="object"&&un&&un.Object===Object&&un,gE=UC,BC=gE,zC=typeof self=="object"&&self&&self.Object===Object&&self,qC=BC||zC||Function("return this")(),zn=qC,HC=zn,KC=HC.Symbol,_o=KC,T_=_o,yE=Object.prototype,GC=yE.hasOwnProperty,WC=yE.toString,fc=T_?T_.toStringTag:void 0;function YC(t){var e=GC.call(t,fc),r=t[fc];try{t[fc]=void 0;var n=!0}catch{}var i=WC.call(t);return n&&(e?t[fc]=r:delete t[fc]),i}var QC=YC,XC=Object.prototype,JC=XC.toString;function ZC(t){return JC.call(t)}var ex=ZC,$_=_o,tx=QC,rx=ex,nx="[object Null]",ix="[object Undefined]",A_=$_?$_.toStringTag:void 0;function sx(t){return t==null?t===void 0?ix:nx:A_&&A_ in Object(t)?tx(t):rx(t)}var yi=sx;function ax(t,e){return function(r){return t(e(r))}}var vE=ax,ox=vE,cx=ox(Object.getPrototypeOf,Object),mh=cx;function lx(t){return t!=null&&typeof t=="object"}var tn=lx,ux=yi,dx=mh,hx=tn,fx="[object Object]",px=Function.prototype,mx=Object.prototype,_E=px.toString,gx=mx.hasOwnProperty,yx=_E.call(Object);function vx(t){if(!hx(t)||ux(t)!=fx)return!1;var e=dx(t);if(e===null)return!0;var r=gx.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&_E.call(r)==yx}var wo=vx;const ag=Fe(wo);function Up(t){const e={[dn]:[],addError(r){this[dn].push(r)}};if(Array.isArray(t))return t.reduce((r,n,i)=>({...r,[i]:Up(n)}),e);if(ag(t)){const r=t;return Object.keys(r).reduce((n,i)=>({...n,[i]:Up(r[i])}),e)}return e}function _x(){this.__data__=[],this.size=0}var wx=_x;function bx(t,e){return t===e||t!==t&&e!==e}var bo=bx,Ex=bo;function Sx(t,e){for(var r=t.length;r--;)if(Ex(t[r][0],e))return r;return-1}var gh=Sx,Ix=gh,Tx=Array.prototype,$x=Tx.splice;function Ax(t){var e=this.__data__,r=Ix(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():$x.call(e,r,1),--this.size,!0}var Px=Ax,Cx=gh;function xx(t){var e=this.__data__,r=Cx(e,t);return r<0?void 0:e[r][1]}var kx=xx,Rx=gh;function Ox(t){return Rx(this.__data__,t)>-1}var Nx=Ox,Dx=gh;function Fx(t,e){var r=this.__data__,n=Dx(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Mx=Fx,jx=wx,Lx=Px,Vx=kx,Ux=Nx,Bx=Mx;function Eo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Eo.prototype.clear=jx;Eo.prototype.delete=Lx;Eo.prototype.get=Vx;Eo.prototype.has=Ux;Eo.prototype.set=Bx;var yh=Eo,zx=yh;function qx(){this.__data__=new zx,this.size=0}var Hx=qx;function Kx(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Gx=Kx;function Wx(t){return this.__data__.get(t)}var Yx=Wx;function Qx(t){return this.__data__.has(t)}var Xx=Qx;function Jx(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rr=Jx;const hn=Fe(Rr);var Zx=yi,ek=Rr,tk="[object AsyncFunction]",rk="[object Function]",nk="[object GeneratorFunction]",ik="[object Proxy]";function sk(t){if(!ek(t))return!1;var e=Zx(t);return e==rk||e==nk||e==tk||e==ik}var vh=sk,ak=zn,ok=ak["__core-js_shared__"],ck=ok,Nf=ck,P_=function(){var t=/[^.]+$/.exec(Nf&&Nf.keys&&Nf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function lk(t){return!!P_&&P_ in t}var uk=lk,dk=Function.prototype,hk=dk.toString;function fk(t){if(t!=null){try{return hk.call(t)}catch{}try{return t+""}catch{}}return""}var wE=fk,pk=vh,mk=uk,gk=Rr,yk=wE,vk=/[\\^$.*+?()[\]{}|]/g,_k=/^\[object .+?Constructor\]$/,wk=Function.prototype,bk=Object.prototype,Ek=wk.toString,Sk=bk.hasOwnProperty,Ik=RegExp("^"+Ek.call(Sk).replace(vk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tk(t){if(!gk(t)||mk(t))return!1;var e=pk(t)?Ik:_k;return e.test(yk(t))}var $k=Tk;function Ak(t,e){return t==null?void 0:t[e]}var Pk=Ak,Ck=$k,xk=Pk;function kk(t,e){var r=xk(t,e);return Ck(r)?r:void 0}var ia=kk,Rk=ia,Ok=zn,Nk=Rk(Ok,"Map"),og=Nk,Dk=ia,Fk=Dk(Object,"create"),_h=Fk,C_=_h;function Mk(){this.__data__=C_?C_(null):{},this.size=0}var jk=Mk;function Lk(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Vk=Lk,Uk=_h,Bk="__lodash_hash_undefined__",zk=Object.prototype,qk=zk.hasOwnProperty;function Hk(t){var e=this.__data__;if(Uk){var r=e[t];return r===Bk?void 0:r}return qk.call(e,t)?e[t]:void 0}var Kk=Hk,Gk=_h,Wk=Object.prototype,Yk=Wk.hasOwnProperty;function Qk(t){var e=this.__data__;return Gk?e[t]!==void 0:Yk.call(e,t)}var Xk=Qk,Jk=_h,Zk="__lodash_hash_undefined__";function eR(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Jk&&e===void 0?Zk:e,this}var tR=eR,rR=jk,nR=Vk,iR=Kk,sR=Xk,aR=tR;function So(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}So.prototype.clear=rR;So.prototype.delete=nR;So.prototype.get=iR;So.prototype.has=sR;So.prototype.set=aR;var oR=So,x_=oR,cR=yh,lR=og;function uR(){this.size=0,this.__data__={hash:new x_,map:new(lR||cR),string:new x_}}var dR=uR;function hR(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var fR=hR,pR=fR;function mR(t,e){var r=t.__data__;return pR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var wh=mR,gR=wh;function yR(t){var e=gR(this,t).delete(t);return this.size-=e?1:0,e}var vR=yR,_R=wh;function wR(t){return _R(this,t).get(t)}var bR=wR,ER=wh;function SR(t){return ER(this,t).has(t)}var IR=SR,TR=wh;function $R(t,e){var r=TR(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var AR=$R,PR=dR,CR=vR,xR=bR,kR=IR,RR=AR;function Io(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Io.prototype.clear=PR;Io.prototype.delete=CR;Io.prototype.get=xR;Io.prototype.has=kR;Io.prototype.set=RR;var cg=Io,OR=yh,NR=og,DR=cg,FR=200;function MR(t,e){var r=this.__data__;if(r instanceof OR){var n=r.__data__;if(!NR||n.length<FR-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new DR(n)}return r.set(t,e),this.size=r.size,this}var jR=MR,LR=yh,VR=Hx,UR=Gx,BR=Yx,zR=Xx,qR=jR;function To(t){var e=this.__data__=new LR(t);this.size=e.size}To.prototype.clear=VR;To.prototype.delete=UR;To.prototype.get=BR;To.prototype.has=zR;To.prototype.set=qR;var bh=To,HR="__lodash_hash_undefined__";function KR(t){return this.__data__.set(t,HR),this}var GR=KR;function WR(t){return this.__data__.has(t)}var YR=WR,QR=cg,XR=GR,JR=YR;function Td(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new QR;++e<r;)this.add(t[e])}Td.prototype.add=Td.prototype.push=XR;Td.prototype.has=JR;var Eh=Td;function ZR(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var eO=ZR;function tO(t,e){return t.has(e)}var Sh=tO,rO=Eh,nO=eO,iO=Sh,sO=1,aO=2;function oO(t,e,r,n,i,s){var a=r&sO,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var l=s.get(t),u=s.get(e);if(l&&u)return l==e&&u==t;var h=-1,p=!0,f=r&aO?new rO:void 0;for(s.set(t,e),s.set(e,t);++h<o;){var m=t[h],g=e[h];if(n)var y=a?n(g,m,h,e,t,s):n(m,g,h,t,e,s);if(y!==void 0){if(y)continue;p=!1;break}if(f){if(!nO(e,function(v,w){if(!iO(f,w)&&(m===v||i(m,v,r,n,s)))return f.push(w)})){p=!1;break}}else if(!(m===g||i(m,g,r,n,s))){p=!1;break}}return s.delete(t),s.delete(e),p}var bE=oO,cO=zn,lO=cO.Uint8Array,EE=lO;function uO(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var dO=uO;function hO(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var lg=hO,k_=_o,R_=EE,fO=bo,pO=bE,mO=dO,gO=lg,yO=1,vO=2,_O="[object Boolean]",wO="[object Date]",bO="[object Error]",EO="[object Map]",SO="[object Number]",IO="[object RegExp]",TO="[object Set]",$O="[object String]",AO="[object Symbol]",PO="[object ArrayBuffer]",CO="[object DataView]",O_=k_?k_.prototype:void 0,Df=O_?O_.valueOf:void 0;function xO(t,e,r,n,i,s,a){switch(r){case CO:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case PO:return!(t.byteLength!=e.byteLength||!s(new R_(t),new R_(e)));case _O:case wO:case SO:return fO(+t,+e);case bO:return t.name==e.name&&t.message==e.message;case IO:case $O:return t==e+"";case EO:var o=mO;case TO:var c=n&yO;if(o||(o=gO),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;n|=vO,a.set(t,e);var u=pO(o(t),o(e),n,i,s,a);return a.delete(t),u;case AO:if(Df)return Df.call(t)==Df.call(e)}return!1}var kO=xO;function RO(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ug=RO,OO=Array.isArray,Ht=OO,NO=ug,DO=Ht;function FO(t,e,r){var n=e(t);return DO(t)?n:NO(n,r(t))}var SE=FO;function MO(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}var jO=MO;function LO(){return[]}var IE=LO,VO=jO,UO=IE,BO=Object.prototype,zO=BO.propertyIsEnumerable,N_=Object.getOwnPropertySymbols,qO=N_?function(t){return t==null?[]:(t=Object(t),VO(N_(t),function(e){return zO.call(t,e)}))}:UO,dg=qO;function HO(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var TE=HO,KO=yi,GO=tn,WO="[object Arguments]";function YO(t){return GO(t)&&KO(t)==WO}var QO=YO,D_=QO,XO=tn,$E=Object.prototype,JO=$E.hasOwnProperty,ZO=$E.propertyIsEnumerable,e2=D_(function(){return arguments}())?D_:function(t){return XO(t)&&JO.call(t,"callee")&&!ZO.call(t,"callee")},vl=e2,$d={exports:{}};function t2(){return!1}var r2=t2;$d.exports;(function(t,e){var r=zn,n=r2,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?r.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||n;t.exports=l})($d,$d.exports);var $o=$d.exports,n2=9007199254740991,i2=/^(?:0|[1-9]\d*)$/;function s2(t,e){var r=typeof t;return e=e??n2,!!e&&(r=="number"||r!="symbol"&&i2.test(t))&&t>-1&&t%1==0&&t<e}var Ih=s2,a2=9007199254740991;function o2(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=a2}var hg=o2,c2=yi,l2=hg,u2=tn,d2="[object Arguments]",h2="[object Array]",f2="[object Boolean]",p2="[object Date]",m2="[object Error]",g2="[object Function]",y2="[object Map]",v2="[object Number]",_2="[object Object]",w2="[object RegExp]",b2="[object Set]",E2="[object String]",S2="[object WeakMap]",I2="[object ArrayBuffer]",T2="[object DataView]",$2="[object Float32Array]",A2="[object Float64Array]",P2="[object Int8Array]",C2="[object Int16Array]",x2="[object Int32Array]",k2="[object Uint8Array]",R2="[object Uint8ClampedArray]",O2="[object Uint16Array]",N2="[object Uint32Array]",ft={};ft[$2]=ft[A2]=ft[P2]=ft[C2]=ft[x2]=ft[k2]=ft[R2]=ft[O2]=ft[N2]=!0;ft[d2]=ft[h2]=ft[I2]=ft[f2]=ft[T2]=ft[p2]=ft[m2]=ft[g2]=ft[y2]=ft[v2]=ft[_2]=ft[w2]=ft[b2]=ft[E2]=ft[S2]=!1;function D2(t){return u2(t)&&l2(t.length)&&!!ft[c2(t)]}var F2=D2;function M2(t){return function(e){return t(e)}}var sa=M2,Ad={exports:{}};Ad.exports;(function(t,e){var r=gE,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s&&r.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(Ad,Ad.exports);var fg=Ad.exports,j2=F2,L2=sa,F_=fg,M_=F_&&F_.isTypedArray,V2=M_?L2(M_):j2,_l=V2,U2=TE,B2=vl,z2=Ht,q2=$o,H2=Ih,K2=_l,G2=Object.prototype,W2=G2.hasOwnProperty;function Y2(t,e){var r=z2(t),n=!r&&B2(t),i=!r&&!n&&q2(t),s=!r&&!n&&!i&&K2(t),a=r||n||i||s,o=a?U2(t.length,String):[],c=o.length;for(var l in t)(e||W2.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||H2(l,c)))&&o.push(l);return o}var AE=Y2,Q2=Object.prototype;function X2(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Q2;return t===r}var Th=X2,J2=vE,Z2=J2(Object.keys,Object),eN=Z2,tN=Th,rN=eN,nN=Object.prototype,iN=nN.hasOwnProperty;function sN(t){if(!tN(t))return rN(t);var e=[];for(var r in Object(t))iN.call(t,r)&&r!="constructor"&&e.push(r);return e}var PE=sN,aN=vh,oN=hg;function cN(t){return t!=null&&oN(t.length)&&!aN(t)}var aa=cN,lN=AE,uN=PE,dN=aa;function hN(t){return dN(t)?lN(t):uN(t)}var wl=hN,fN=SE,pN=dg,mN=wl;function gN(t){return fN(t,mN,pN)}var CE=gN,j_=CE,yN=1,vN=Object.prototype,_N=vN.hasOwnProperty;function wN(t,e,r,n,i,s){var a=r&yN,o=j_(t),c=o.length,l=j_(e),u=l.length;if(c!=u&&!a)return!1;for(var h=c;h--;){var p=o[h];if(!(a?p in e:_N.call(e,p)))return!1}var f=s.get(t),m=s.get(e);if(f&&m)return f==e&&m==t;var g=!0;s.set(t,e),s.set(e,t);for(var y=a;++h<c;){p=o[h];var v=t[p],w=e[p];if(n)var $=a?n(w,v,p,e,t,s):n(v,w,p,t,e,s);if(!($===void 0?v===w||i(v,w,r,n,s):$)){g=!1;break}y||(y=p=="constructor")}if(g&&!y){var A=t.constructor,P=e.constructor;A!=P&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof P=="function"&&P instanceof P)&&(g=!1)}return s.delete(t),s.delete(e),g}var bN=wN,EN=ia,SN=zn,IN=EN(SN,"DataView"),TN=IN,$N=ia,AN=zn,PN=$N(AN,"Promise"),CN=PN,xN=ia,kN=zn,RN=xN(kN,"Set"),xE=RN,ON=ia,NN=zn,DN=ON(NN,"WeakMap"),FN=DN,Bp=TN,zp=og,qp=CN,Hp=xE,Kp=FN,kE=yi,Ao=wE,L_="[object Map]",MN="[object Object]",V_="[object Promise]",U_="[object Set]",B_="[object WeakMap]",z_="[object DataView]",jN=Ao(Bp),LN=Ao(zp),VN=Ao(qp),UN=Ao(Hp),BN=Ao(Kp),Ps=kE;(Bp&&Ps(new Bp(new ArrayBuffer(1)))!=z_||zp&&Ps(new zp)!=L_||qp&&Ps(qp.resolve())!=V_||Hp&&Ps(new Hp)!=U_||Kp&&Ps(new Kp)!=B_)&&(Ps=function(t){var e=kE(t),r=e==MN?t.constructor:void 0,n=r?Ao(r):"";if(n)switch(n){case jN:return z_;case LN:return L_;case VN:return V_;case UN:return U_;case BN:return B_}return e});var bl=Ps,Ff=bh,zN=bE,qN=kO,HN=bN,q_=bl,H_=Ht,K_=$o,KN=_l,GN=1,G_="[object Arguments]",W_="[object Array]",Ru="[object Object]",WN=Object.prototype,Y_=WN.hasOwnProperty;function YN(t,e,r,n,i,s){var a=H_(t),o=H_(e),c=a?W_:q_(t),l=o?W_:q_(e);c=c==G_?Ru:c,l=l==G_?Ru:l;var u=c==Ru,h=l==Ru,p=c==l;if(p&&K_(t)){if(!K_(e))return!1;a=!0,u=!1}if(p&&!u)return s||(s=new Ff),a||KN(t)?zN(t,e,r,n,i,s):qN(t,e,c,r,n,i,s);if(!(r&GN)){var f=u&&Y_.call(t,"__wrapped__"),m=h&&Y_.call(e,"__wrapped__");if(f||m){var g=f?t.value():t,y=m?e.value():e;return s||(s=new Ff),i(g,y,r,n,s)}}return p?(s||(s=new Ff),HN(t,e,r,n,i,s)):!1}var QN=YN,XN=QN,Q_=tn;function RE(t,e,r,n,i){return t===e?!0:t==null||e==null||!Q_(t)&&!Q_(e)?t!==t&&e!==e:XN(t,e,r,n,RE,i)}var $h=RE,JN=$h;function ZN(t,e,r){r=typeof r=="function"?r:void 0;var n=r?r(t,e):void 0;return n===void 0?JN(t,e,void 0,r):!!n}var eD=ZN;const tD=Fe(eD);function $r(t,e){return tD(t,e,(r,n)=>{if(typeof r=="function"&&typeof n=="function")return!0})}var rD=yi,nD=tn,iD="[object Symbol]";function sD(t){return typeof t=="symbol"||nD(t)&&rD(t)==iD}var Po=sD,aD=Ht,oD=Po,cD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lD=/^\w*$/;function uD(t,e){if(aD(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||oD(t)?!0:lD.test(t)||!cD.test(t)||e!=null&&t in Object(e)}var pg=uD,OE=cg,dD="Expected a function";function mg(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(dD);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(mg.Cache||OE),r}mg.Cache=OE;var hD=mg,fD=hD,pD=500;function mD(t){var e=fD(t,function(n){return r.size===pD&&r.clear(),n}),r=e.cache;return e}var gD=mD,yD=gD,vD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_D=/\\(\\)?/g,wD=yD(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(vD,function(r,n,i,s){e.push(i?s.replace(_D,"$1"):n||r)}),e}),NE=wD;function bD(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var vi=bD,X_=_o,ED=vi,SD=Ht,ID=Po,TD=1/0,J_=X_?X_.prototype:void 0,Z_=J_?J_.toString:void 0;function DE(t){if(typeof t=="string")return t;if(SD(t))return ED(t,DE)+"";if(ID(t))return Z_?Z_.call(t):"";var e=t+"";return e=="0"&&1/t==-TD?"-0":e}var $D=DE,AD=$D;function PD(t){return t==null?"":AD(t)}var FE=PD,CD=Ht,xD=pg,kD=NE,RD=FE;function OD(t,e){return CD(t)?t:xD(t,e)?[t]:kD(RD(t))}var Co=OD,ND=Po,DD=1/0;function FD(t){if(typeof t=="string"||ND(t))return t;var e=t+"";return e=="0"&&1/t==-DD?"-0":e}var oa=FD,MD=Co,jD=oa;function LD(t,e){e=MD(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[jD(e[r++])];return r&&r==n?t:void 0}var El=LD,VD=El;function UD(t,e,r){var n=t==null?void 0:VD(t,e);return n===void 0?r:n}var ME=UD;const fe=Fe(ME);var BD=PE,zD=bl,qD=vl,HD=Ht,KD=aa,GD=$o,WD=Th,YD=_l,QD="[object Map]",XD="[object Set]",JD=Object.prototype,ZD=JD.hasOwnProperty;function eF(t){if(t==null)return!0;if(KD(t)&&(HD(t)||typeof t=="string"||typeof t.splice=="function"||GD(t)||YD(t)||qD(t)))return!t.length;var e=zD(t);if(e==QD||e==XD)return!t.size;if(WD(t))return!BD(t).length;for(var r in t)if(ZD.call(t,r))return!1;return!0}var tF=eF;const ls=Fe(tF);var Ah={},rF=/~/,nF=/~[01]/g;function iF(t){switch(t){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+t)}function jE(t){return rF.test(t)?t.replace(nF,iF):t}function sF(t,e,r){for(var n,i,s=1,a=e.length;s<a;){if(e[s]==="constructor"||e[s]==="prototype"||e[s]==="__proto__")return t;if(n=jE(e[s++]),i=a>s,typeof t[n]>"u"&&(Array.isArray(t)&&n==="-"&&(n=t.length),i&&(e[s]!==""&&e[s]<1/0||e[s]==="-"?t[n]=[]:t[n]={})),!i)break;t=t[n]}var o=t[n];return r===void 0?delete t[n]:t[n]=r,o}function gg(t){if(typeof t=="string"){if(t=t.split("/"),t[0]==="")return t;throw new Error("Invalid JSON pointer.")}else if(Array.isArray(t)){for(const e of t)if(typeof e!="string"&&typeof e!="number")throw new Error("Invalid JSON pointer. Must be of type string or number.");return t}throw new Error("Invalid JSON pointer.")}function LE(t,e){if(typeof t!="object")throw new Error("Invalid input object.");e=gg(e);var r=e.length;if(r===1)return t;for(var n=1;n<r;){if(t=t[jE(e[n++])],r===n)return t;if(typeof t!="object"||t===null)return}}function VE(t,e,r){if(typeof t!="object")throw new Error("Invalid input object.");if(e=gg(e),e.length===0)throw new Error("Invalid JSON pointer for set.");return sF(t,e,r)}function aF(t){var e=gg(t);return{get:function(r){return LE(r,e)},set:function(r,n){return VE(r,e,n)}}}Ah.get=LE;Ah.set=VE;Ah.compile=aF;function oF(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var yg=oF,cF=ia,lF=function(){try{var t=cF(Object,"defineProperty");return t({},"",{}),t}catch{}}(),UE=lF,ew=UE;function uF(t,e,r){e=="__proto__"&&ew?ew(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var vg=uF,dF=vg,hF=bo,fF=Object.prototype,pF=fF.hasOwnProperty;function mF(t,e,r){var n=t[e];(!(pF.call(t,e)&&hF(n,r))||r===void 0&&!(e in t))&&dF(t,e,r)}var _g=mF,gF=_g,yF=vg;function vF(t,e,r,n){var i=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var o=e[s],c=n?n(r[o],t[o],o,r,t):void 0;c===void 0&&(c=t[o]),i?yF(r,o,c):gF(r,o,c)}return r}var xo=vF,_F=xo,wF=wl;function bF(t,e){return t&&_F(e,wF(e),t)}var EF=bF;function SF(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var IF=SF,TF=Rr,$F=Th,AF=IF,PF=Object.prototype,CF=PF.hasOwnProperty;function xF(t){if(!TF(t))return AF(t);var e=$F(t),r=[];for(var n in t)n=="constructor"&&(e||!CF.call(t,n))||r.push(n);return r}var kF=xF,RF=AE,OF=kF,NF=aa;function DF(t){return NF(t)?RF(t,!0):OF(t)}var ko=DF,FF=xo,MF=ko;function jF(t,e){return t&&FF(e,MF(e),t)}var LF=jF,Pd={exports:{}};Pd.exports;(function(t,e){var r=zn,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s?r.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var h=l.length,p=o?o(h):new l.constructor(h);return l.copy(p),p}t.exports=c})(Pd,Pd.exports);var BE=Pd.exports;function VF(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Ph=VF,UF=xo,BF=dg;function zF(t,e){return UF(t,BF(t),e)}var qF=zF,HF=ug,KF=mh,GF=dg,WF=IE,YF=Object.getOwnPropertySymbols,QF=YF?function(t){for(var e=[];t;)HF(e,GF(t)),t=KF(t);return e}:WF,zE=QF,XF=xo,JF=zE;function ZF(t,e){return XF(t,JF(t),e)}var eM=ZF,tM=SE,rM=zE,nM=ko;function iM(t){return tM(t,nM,rM)}var qE=iM,sM=Object.prototype,aM=sM.hasOwnProperty;function oM(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&aM.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var cM=oM,tw=EE;function lM(t){var e=new t.constructor(t.byteLength);return new tw(e).set(new tw(t)),e}var wg=lM,uM=wg;function dM(t,e){var r=e?uM(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var hM=dM,fM=/\w*$/;function pM(t){var e=new t.constructor(t.source,fM.exec(t));return e.lastIndex=t.lastIndex,e}var mM=pM,rw=_o,nw=rw?rw.prototype:void 0,iw=nw?nw.valueOf:void 0;function gM(t){return iw?Object(iw.call(t)):{}}var yM=gM,vM=wg;function _M(t,e){var r=e?vM(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var HE=_M,wM=wg,bM=hM,EM=mM,SM=yM,IM=HE,TM="[object Boolean]",$M="[object Date]",AM="[object Map]",PM="[object Number]",CM="[object RegExp]",xM="[object Set]",kM="[object String]",RM="[object Symbol]",OM="[object ArrayBuffer]",NM="[object DataView]",DM="[object Float32Array]",FM="[object Float64Array]",MM="[object Int8Array]",jM="[object Int16Array]",LM="[object Int32Array]",VM="[object Uint8Array]",UM="[object Uint8ClampedArray]",BM="[object Uint16Array]",zM="[object Uint32Array]";function qM(t,e,r){var n=t.constructor;switch(e){case OM:return wM(t);case TM:case $M:return new n(+t);case NM:return bM(t,r);case DM:case FM:case MM:case jM:case LM:case VM:case UM:case BM:case zM:return IM(t,r);case AM:return new n;case PM:case kM:return new n(t);case CM:return EM(t);case xM:return new n;case RM:return SM(t)}}var HM=qM,KM=Rr,sw=Object.create,GM=function(){function t(){}return function(e){if(!KM(e))return{};if(sw)return sw(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),KE=GM,WM=KE,YM=mh,QM=Th;function XM(t){return typeof t.constructor=="function"&&!QM(t)?WM(YM(t)):{}}var GE=XM,JM=bl,ZM=tn,ej="[object Map]";function tj(t){return ZM(t)&&JM(t)==ej}var rj=tj,nj=rj,ij=sa,aw=fg,ow=aw&&aw.isMap,sj=ow?ij(ow):nj,aj=sj,oj=bl,cj=tn,lj="[object Set]";function uj(t){return cj(t)&&oj(t)==lj}var dj=uj,hj=dj,fj=sa,cw=fg,lw=cw&&cw.isSet,pj=lw?fj(lw):hj,mj=pj,gj=bh,yj=yg,vj=_g,_j=EF,wj=LF,bj=BE,Ej=Ph,Sj=qF,Ij=eM,Tj=CE,$j=qE,Aj=bl,Pj=cM,Cj=HM,xj=GE,kj=Ht,Rj=$o,Oj=aj,Nj=Rr,Dj=mj,Fj=wl,Mj=ko,jj=1,Lj=2,Vj=4,WE="[object Arguments]",Uj="[object Array]",Bj="[object Boolean]",zj="[object Date]",qj="[object Error]",YE="[object Function]",Hj="[object GeneratorFunction]",Kj="[object Map]",Gj="[object Number]",QE="[object Object]",Wj="[object RegExp]",Yj="[object Set]",Qj="[object String]",Xj="[object Symbol]",Jj="[object WeakMap]",Zj="[object ArrayBuffer]",eL="[object DataView]",tL="[object Float32Array]",rL="[object Float64Array]",nL="[object Int8Array]",iL="[object Int16Array]",sL="[object Int32Array]",aL="[object Uint8Array]",oL="[object Uint8ClampedArray]",cL="[object Uint16Array]",lL="[object Uint32Array]",ct={};ct[WE]=ct[Uj]=ct[Zj]=ct[eL]=ct[Bj]=ct[zj]=ct[tL]=ct[rL]=ct[nL]=ct[iL]=ct[sL]=ct[Kj]=ct[Gj]=ct[QE]=ct[Wj]=ct[Yj]=ct[Qj]=ct[Xj]=ct[aL]=ct[oL]=ct[cL]=ct[lL]=!0;ct[qj]=ct[YE]=ct[Jj]=!1;function rd(t,e,r,n,i,s){var a,o=e&jj,c=e&Lj,l=e&Vj;if(r&&(a=i?r(t,n,i,s):r(t)),a!==void 0)return a;if(!Nj(t))return t;var u=kj(t);if(u){if(a=Pj(t),!o)return Ej(t,a)}else{var h=Aj(t),p=h==YE||h==Hj;if(Rj(t))return bj(t,o);if(h==QE||h==WE||p&&!i){if(a=c||p?{}:xj(t),!o)return c?Ij(t,wj(a,t)):Sj(t,_j(a,t))}else{if(!ct[h])return i?t:{};a=Cj(t,h,o)}}s||(s=new gj);var f=s.get(t);if(f)return f;s.set(t,a),Dj(t)?t.forEach(function(y){a.add(rd(y,e,r,y,t,s))}):Oj(t)&&t.forEach(function(y,v){a.set(v,rd(y,e,r,v,t,s))});var m=l?c?$j:Tj:c?Mj:Fj,g=u?void 0:m(t);return yj(g||t,function(y,v){g&&(v=y,y=t[v]),vj(a,v,rd(y,e,r,v,t,s))}),a}var XE=rd;function uL(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var JE=uL;function dL(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}var hL=dL,fL=El,pL=hL;function mL(t,e){return e.length<2?t:fL(t,pL(e,0,-1))}var gL=mL,yL=Co,vL=JE,_L=gL,wL=oa;function bL(t,e){return e=yL(e,t),t=_L(t,e),t==null||delete t[wL(vL(e))]}var ZE=bL,EL=wo;function SL(t){return EL(t)?void 0:t}var IL=SL,uw=_o,TL=vl,$L=Ht,dw=uw?uw.isConcatSpreadable:void 0;function AL(t){return $L(t)||TL(t)||!!(dw&&t&&t[dw])}var PL=AL,CL=ug,xL=PL;function eS(t,e,r,n,i){var s=-1,a=t.length;for(r||(r=xL),i||(i=[]);++s<a;){var o=t[s];e>0&&r(o)?e>1?eS(o,e-1,r,n,i):CL(i,o):n||(i[i.length]=o)}return i}var Ch=eS,kL=Ch;function RL(t){var e=t==null?0:t.length;return e?kL(t,1):[]}var bg=RL;function OL(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var tS=OL,NL=tS,hw=Math.max;function DL(t,e,r){return e=hw(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=hw(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(a),NL(t,this,o)}}var rS=DL;function FL(t){return function(){return t}}var ML=FL;function jL(t){return t}var Sl=jL,LL=ML,fw=UE,VL=Sl,UL=fw?function(t,e){return fw(t,"toString",{configurable:!0,enumerable:!1,value:LL(e),writable:!0})}:VL,BL=UL,zL=800,qL=16,HL=Date.now;function KL(t){var e=0,r=0;return function(){var n=HL(),i=qL-(n-r);if(r=n,i>0){if(++e>=zL)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var GL=KL,WL=BL,YL=GL,QL=YL(WL),nS=QL,XL=bg,JL=rS,ZL=nS;function eV(t){return ZL(JL(t,void 0,XL),t+"")}var iS=eV,tV=vi,rV=XE,nV=ZE,iV=Co,sV=xo,aV=IL,oV=iS,cV=qE,lV=1,uV=2,dV=4,hV=oV(function(t,e){var r={};if(t==null)return r;var n=!1;e=tV(e,function(s){return s=iV(s,t),n||(n=s.length>1),s}),sV(t,cV(t),r),n&&(r=rV(r,lV|uV|dV,aV));for(var i=e.length;i--;)nV(r,e[i]);return r}),fV=hV;const Cd=Fe(fV);function Eg(t,e){const r=e[t];return[Cd(e,[t]),r]}function sS(t,e={},r=[]){const n=t||"";let i;if(n.startsWith("#"))i=decodeURIComponent(n.substring(1));else throw new Error(`Could not find a definition for ${t}.`);const s=Ah.get(e,i);if(s===void 0)throw new Error(`Could not find a definition for ${t}.`);const a=s[Vt];if(a){if(r.includes(a)){if(r.length===1)throw new Error(`Definition for ${t} is a circular reference`);const[u,...h]=r,p=[...h,n,u].join(" -> ");throw new Error(`Definition for ${u} contains a circular reference through ${p}`)}const[o,c]=Eg(Vt,s),l=sS(c,e,[...r,n]);return Object.keys(o).length>0?{...o,...l}:l}return s}function aS(t,e={}){return sS(t,e,[])}var pV=Object.prototype,mV=pV.hasOwnProperty;function gV(t,e){return t!=null&&mV.call(t,e)}var yV=gV,vV=Co,_V=vl,wV=Ht,bV=Ih,EV=hg,SV=oa;function IV(t,e,r){e=vV(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var a=SV(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&EV(i)&&bV(a,i)&&(wV(t)||_V(t)))}var oS=IV,TV=yV,$V=oS;function AV(t,e){return t!=null&&$V(t,e,TV)}var PV=AV;const gr=Fe(PV);var CV=yi,xV=tn,kV="[object Number]";function RV(t){return typeof t=="number"||xV(t)&&CV(t)==kV}var OV=RV;const cS=Fe(OV);var NV=yi,DV=Ht,FV=tn,MV="[object String]";function jV(t){return typeof t=="string"||!DV(t)&&FV(t)&&NV(t)==MV}var LV=jV;const Sg=Fe(LV);function VV(t,e,r,n){var i=-1,s=t==null?0:t.length;for(n&&s&&(r=t[++i]);++i<s;)r=e(r,t[i],i,t);return r}var UV=VV;function BV(t){return function(e,r,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var c=a[t?o:++i];if(r(s[c],c,s)===!1)break}return e}}var zV=BV,qV=zV,HV=qV(),lS=HV,KV=lS,GV=wl;function WV(t,e){return t&&KV(t,e,GV)}var uS=WV,YV=aa;function QV(t,e){return function(r,n){if(r==null)return r;if(!YV(r))return t(r,n);for(var i=r.length,s=e?i:-1,a=Object(r);(e?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var XV=QV,JV=uS,ZV=XV,eU=ZV(JV),Ig=eU,tU=bh,rU=$h,nU=1,iU=2;function sU(t,e,r,n){var i=r.length,s=i,a=!n;if(t==null)return!s;for(t=Object(t);i--;){var o=r[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=r[i];var c=o[0],l=t[c],u=o[1];if(a&&o[2]){if(l===void 0&&!(c in t))return!1}else{var h=new tU;if(n)var p=n(l,u,c,t,e,h);if(!(p===void 0?rU(u,l,nU|iU,n,h):p))return!1}}return!0}var aU=sU,oU=Rr;function cU(t){return t===t&&!oU(t)}var dS=cU,lU=dS,uU=wl;function dU(t){for(var e=uU(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,lU(i)]}return e}var hU=dU;function fU(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var hS=fU,pU=aU,mU=hU,gU=hS;function yU(t){var e=mU(t);return e.length==1&&e[0][2]?gU(e[0][0],e[0][1]):function(r){return r===t||pU(r,t,e)}}var vU=yU;function _U(t,e){return t!=null&&e in Object(t)}var wU=_U,bU=wU,EU=oS;function SU(t,e){return t!=null&&EU(t,e,bU)}var fS=SU,IU=$h,TU=ME,$U=fS,AU=pg,PU=dS,CU=hS,xU=oa,kU=1,RU=2;function OU(t,e){return AU(t)&&PU(e)?CU(xU(t),e):function(r){var n=TU(r,t);return n===void 0&&n===e?$U(r,t):IU(e,n,kU|RU)}}var NU=OU;function DU(t){return function(e){return e==null?void 0:e[t]}}var FU=DU,MU=El;function jU(t){return function(e){return MU(e,t)}}var LU=jU,VU=FU,UU=LU,BU=pg,zU=oa;function qU(t){return BU(t)?VU(zU(t)):UU(t)}var HU=qU,KU=vU,GU=NU,WU=Sl,YU=Ht,QU=HU;function XU(t){return typeof t=="function"?t:t==null?WU:typeof t=="object"?YU(t)?GU(t[0],t[1]):KU(t):QU(t)}var Tg=XU;function JU(t,e,r,n,i){return i(t,function(s,a,o){r=n?(n=!1,s):e(r,s,a,o)}),r}var ZU=JU,e4=UV,t4=Ig,r4=Tg,n4=ZU,i4=Ht;function s4(t,e,r){var n=i4(t)?e4:n4,i=arguments.length<3;return n(t,r4(e),r,i,t4)}var a4=s4;const o4=Fe(a4);var c4=Sl;function l4(t){return typeof t=="function"?t:c4}var pS=l4,u4=/\s/;function d4(t){for(var e=t.length;e--&&u4.test(t.charAt(e)););return e}var h4=d4,f4=h4,p4=/^\s+/;function m4(t){return t&&t.slice(0,f4(t)+1).replace(p4,"")}var g4=m4,y4=g4,pw=Rr,v4=Po,mw=NaN,_4=/^[-+]0x[0-9a-f]+$/i,w4=/^0b[01]+$/i,b4=/^0o[0-7]+$/i,E4=parseInt;function S4(t){if(typeof t=="number")return t;if(v4(t))return mw;if(pw(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=pw(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=y4(t);var r=w4.test(t);return r||b4.test(t)?E4(t.slice(2),r?2:8):_4.test(t)?mw:+t}var I4=S4,T4=I4,gw=1/0,$4=17976931348623157e292;function A4(t){if(!t)return t===0?t:0;if(t=T4(t),t===gw||t===-gw){var e=t<0?-1:1;return e*$4}return t===t?t:0}var P4=A4,C4=P4;function x4(t){var e=C4(t),r=e%1;return e===e?r?e-r:e:0}var k4=x4,R4=TE,O4=pS,N4=k4,D4=9007199254740991,Mf=4294967295,F4=Math.min;function M4(t,e){if(t=N4(t),t<1||t>D4)return[];var r=Mf,n=F4(t,Mf);e=O4(e),t-=Mf;for(var i=R4(n,e);++r<t;)e(r);return i}var j4=M4;const mS=Fe(j4);function gS(t,e,r){var n;if(t&&r){const i=fe(t,r);if(i===void 0)return;for(let s=0;s<e.length;s++){const a=e[s],o=fe(a,[$t,r],{});if(!(o.type==="object"||o.type==="array")&&(o.const===i||!((n=o.enum)===null||n===void 0)&&n.includes(i)))return s}}}function yS(t,e,r,n,i){if(e===void 0)return 0;const s=gS(e,r,i);if(cS(s))return s;for(let a=0;a<r.length;a++){const o=r[a];if(i&&gr(o,[$t,i])){const c=fe(e,i),l=fe(o,[$t,i],{});if(t.isValid(l,c,n))return a}else if(o[$t]){const c={anyOf:Object.keys(o[$t]).map(u=>({required:[u]}))};let l;if(o.anyOf){const{...u}=o;u.allOf?u.allOf=u.allOf.slice():u.allOf=[],u.allOf.push(c),l=u}else l=Object.assign({},o,c);if(delete l.required,t.isValid(l,e,n))return a}else if(t.isValid(o,e,n))return a}return 0}function $g(t,e,r,n,i){return yS(t,e,r,n,i)}var L4=$h;function V4(t,e){return L4(t,e)}var Ag=V4;const Bs=Fe(Ag);var U4=_g,B4=Co,z4=Ih,yw=Rr,q4=oa;function H4(t,e,r,n){if(!yw(t))return t;e=B4(e,t);for(var i=-1,s=e.length,a=s-1,o=t;o!=null&&++i<s;){var c=q4(e[i]),l=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=a){var u=o[c];l=n?n(u,c,o):void 0,l===void 0&&(l=yw(u)?u:z4(e[i+1])?[]:{})}U4(o,c,l),o=o[c]}return t}var vS=H4,K4=vS;function G4(t,e,r){return t==null?t:K4(t,e,r)}var W4=G4;const or=Fe(W4);var Y4=yg,Q4=KE,X4=uS,J4=Tg,Z4=mh,e3=Ht,t3=$o,r3=vh,n3=Rr,i3=_l;function s3(t,e,r){var n=e3(t),i=n||t3(t)||i3(t);if(e=J4(e),r==null){var s=t&&t.constructor;i?r=n?new s:[]:n3(t)?r=r3(s)?Q4(Z4(t)):{}:r={}}return(i?Y4:X4)(t,function(a,o,c){return e(r,a,o,c)}),r}var a3=s3;const o3=Fe(a3);var c3=vg,l3=bo;function u3(t,e,r){(r!==void 0&&!l3(t[e],r)||r===void 0&&!(e in t))&&c3(t,e,r)}var _S=u3,d3=aa,h3=tn;function f3(t){return h3(t)&&d3(t)}var xh=f3;function p3(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var wS=p3,m3=xo,g3=ko;function y3(t){return m3(t,g3(t))}var v3=y3,vw=_S,_3=BE,w3=HE,b3=Ph,E3=GE,_w=vl,ww=Ht,S3=xh,I3=$o,T3=vh,$3=Rr,A3=wo,P3=_l,bw=wS,C3=v3;function x3(t,e,r,n,i,s,a){var o=bw(t,r),c=bw(e,r),l=a.get(c);if(l){vw(t,r,l);return}var u=s?s(o,c,r+"",t,e,a):void 0,h=u===void 0;if(h){var p=ww(c),f=!p&&I3(c),m=!p&&!f&&P3(c);u=c,p||f||m?ww(o)?u=o:S3(o)?u=b3(o):f?(h=!1,u=_3(c,!0)):m?(h=!1,u=w3(c,!0)):u=[]:A3(c)||_w(c)?(u=o,_w(o)?u=C3(o):(!$3(o)||T3(o))&&(u=E3(c))):h=!1}h&&(a.set(c,u),i(u,c,n,s,a),a.delete(c)),vw(t,r,u)}var k3=x3,R3=bh,O3=_S,N3=lS,D3=k3,F3=Rr,M3=ko,j3=wS;function bS(t,e,r,n,i){t!==e&&N3(e,function(s,a){if(i||(i=new R3),F3(s))D3(t,e,a,r,bS,n,i);else{var o=n?n(j3(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),O3(t,a,o)}},M3)}var Pg=bS,L3=Sl,V3=rS,U3=nS;function B3(t,e){return U3(V3(t,e,L3),t+"")}var ys=B3,z3=bo,q3=aa,H3=Ih,K3=Rr;function G3(t,e,r){if(!K3(r))return!1;var n=typeof e;return(n=="number"?q3(r)&&H3(e,r.length):n=="string"&&e in r)?z3(r[e],t):!1}var Cg=G3,W3=ys,Y3=Cg;function Q3(t){return W3(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&Y3(r[0],r[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var o=r[n];o&&t(e,o,n,s)}return e})}var ES=Q3,X3=Pg,J3=ES,Z3=J3(function(t,e,r){X3(t,e,r)}),e9=Z3;const t9=Fe(e9);var r9=Ch,n9=1/0;function i9(t){var e=t==null?0:t.length;return e?r9(t,n9):[]}var xg=i9;const s9=Fe(xg);function a9(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var o9=a9;function c9(t){return t!==t}var l9=c9;function u9(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var d9=u9,h9=o9,f9=l9,p9=d9;function m9(t,e,r){return e===e?p9(t,e,r):h9(t,f9,r)}var SS=m9,g9=SS;function y9(t,e){var r=t==null?0:t.length;return!!r&&g9(t,e,0)>-1}var kg=y9;function v9(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Rg=v9;function _9(){}var w9=_9,jf=xE,b9=w9,E9=lg,S9=1/0,I9=jf&&1/E9(new jf([,-0]))[1]==S9?function(t){return new jf(t)}:b9,T9=I9,$9=Eh,A9=kg,P9=Rg,C9=Sh,x9=T9,k9=lg,R9=200;function O9(t,e,r){var n=-1,i=A9,s=t.length,a=!0,o=[],c=o;if(r)a=!1,i=P9;else if(s>=R9){var l=e?null:x9(t);if(l)return k9(l);a=!1,i=C9,c=new $9}else c=e?[]:o;e:for(;++n<s;){var u=t[n],h=e?e(u):u;if(u=r||u!==0?u:0,a&&h===h){for(var p=c.length;p--;)if(c[p]===h)continue e;e&&c.push(h),o.push(u)}else i(c,h,r)||(c!==o&&c.push(h),o.push(u))}return o}var Og=O9,N9=Og;function D9(t){return t&&t.length?N9(t):[]}var kh=D9;const F9=Fe(kh);var M9=XE,j9=1,L9=4;function V9(t){return M9(t,j9|L9)}var IS=V9;const TS=Fe(IS);var U9=Ig,B9=aa;function z9(t,e){var r=-1,n=B9(t)?Array(t.length):[];return U9(t,function(i,s,a){n[++r]=e(i,s,a)}),n}var q9=z9;function H9(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var K9=H9,Ew=Po;function G9(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,s=Ew(t),a=e!==void 0,o=e===null,c=e===e,l=Ew(e);if(!o&&!l&&!s&&t>e||s&&a&&c&&!o&&!l||n&&a&&c||!r&&c||!i)return 1;if(!n&&!s&&!l&&t<e||l&&r&&i&&!n&&!s||o&&r&&i||!a&&i||!c)return-1}return 0}var W9=G9,Y9=W9;function Q9(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,a=i.length,o=r.length;++n<a;){var c=Y9(i[n],s[n]);if(c){if(n>=o)return c;var l=r[n];return c*(l=="desc"?-1:1)}}return t.index-e.index}var X9=Q9,Lf=vi,J9=El,Z9=Tg,e6=q9,t6=K9,r6=sa,n6=X9,i6=Sl,s6=Ht;function a6(t,e,r){e.length?e=Lf(e,function(s){return s6(s)?function(a){return J9(a,s.length===1?s[0]:s)}:s}):e=[i6];var n=-1;e=Lf(e,r6(Z9));var i=e6(t,function(s,a,o){var c=Lf(e,function(l){return l(s)});return{criteria:c,index:++n,value:s}});return t6(i,function(s,a){return n6(s,a,r)})}var o6=a6,c6=Ch,l6=o6,u6=ys,Sw=Cg,d6=u6(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Sw(t,e[0],e[1])?e=[]:r>2&&Sw(e[0],e[1],e[2])&&(e=[e[0]]),l6(t,c6(e,1),[])}),$S=d6,h6=Og;function f6(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?h6(t,void 0,e):[]}var Ng=f6,p6=ys,m6=bo,g6=Cg,y6=ko,AS=Object.prototype,v6=AS.hasOwnProperty,_6=p6(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&g6(e[0],e[1],i)&&(n=1);++r<n;)for(var s=e[r],a=y6(s),o=-1,c=a.length;++o<c;){var l=a[o],u=t[l];(u===void 0||m6(u,AS[l])&&!v6.call(t,l))&&(t[l]=s[l])}return t}),w6=_6,b6=Eh,E6=kg,S6=Rg,I6=vi,T6=sa,Iw=Sh,$6=Math.min;function A6(t,e,r){for(var n=r?S6:E6,i=t[0].length,s=t.length,a=s,o=Array(s),c=1/0,l=[];a--;){var u=t[a];a&&e&&(u=I6(u,T6(e))),c=$6(u.length,c),o[a]=!r&&(e||i>=120&&u.length>=120)?new b6(a&&u):void 0}u=t[0];var h=-1,p=o[0];e:for(;++h<i&&l.length<c;){var f=u[h],m=e?e(f):f;if(f=r||f!==0?f:0,!(p?Iw(p,m):n(l,m,r))){for(a=s;--a;){var g=o[a];if(!(g?Iw(g,m):n(t[a],m,r)))continue e}p&&p.push(m),l.push(f)}}return l}var PS=A6,P6=xh;function C6(t){return P6(t)?t:[]}var CS=C6,x6=vi,k6=PS,R6=ys,O6=CS,N6=JE,D6=R6(function(t){var e=N6(t),r=x6(t,O6);return e=typeof e=="function"?e:void 0,e&&r.pop(),r.length&&r[0]===t[0]?k6(r,void 0,e):[]}),xS=D6,F6=yi,M6=tn,j6="[object Boolean]";function L6(t){return t===!0||t===!1||M6(t)&&F6(t)==j6}var V6=L6,mn=Ag,U6=$S,Dg=kh,Tw=Ng,B6=w6,z6=xS,xd=wo,Vf=V6,$w=t=>Array.isArray(t)?t:[t],Qr=t=>t===void 0,Ou=t=>xd(t)||Array.isArray(t)?Object.keys(t):[],Da=(t,e)=>t.hasOwnProperty(e),Qa=t=>U6(Dg(t)),Aw=t=>Qr(t)||Array.isArray(t)&&t.length===0,q6=(t,e,r,n)=>e&&Da(e,r)&&t&&Da(t,r)&&n(t[r],e[r]),Uf=(t,e)=>Qr(t)&&e===0||Qr(e)&&t===0||mn(t,e),H6=(t,e)=>Qr(t)&&e===!1||Qr(e)&&t===!1||mn(t,e),Pw=t=>Qr(t)||mn(t,{})||t===!0,Nu=t=>Qr(t)||mn(t,{}),Cw=t=>Qr(t)||xd(t)||t===!0||t===!1;function xw(t,e){return Aw(t)&&Aw(e)?!0:mn(Qa(t),Qa(e))}function K6(t,e){return t=$w(t),e=$w(e),mn(Qa(t),Qa(e))}function nd(t,e,r,n){var i=Dg(Ou(t).concat(Ou(e)));return Nu(t)&&Nu(e)?!0:Nu(t)&&Ou(e).length||Nu(e)&&Ou(t).length?!1:i.every(function(s){var a=t[s],o=e[s];return Array.isArray(a)&&Array.isArray(o)?mn(Qa(t),Qa(e)):Array.isArray(a)&&!Array.isArray(o)||Array.isArray(o)&&!Array.isArray(a)?!1:q6(t,e,s,n)})}function G6(t,e,r,n){return xd(t)&&xd(e)?n(t,e):Array.isArray(t)&&Array.isArray(e)?nd(t,e,r,n):mn(t,e)}function Bf(t,e,r,n){var i=Tw(t,n),s=Tw(e,n),a=z6(i,s,n);return a.length===Math.max(i.length,s.length)}var W6={title:mn,uniqueItems:H6,minLength:Uf,minItems:Uf,minProperties:Uf,required:xw,enum:xw,type:K6,items:G6,anyOf:Bf,allOf:Bf,oneOf:Bf,properties:nd,patternProperties:nd,dependencies:nd},Y6=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],Q6=["additionalProperties","additionalItems","contains","propertyNames","not"];function Gp(t,e,r){if(r=B6(r,{ignore:[]}),Pw(t)&&Pw(e))return!0;if(!Cw(t)||!Cw(e))throw new Error("Either of the values are not a JSON schema.");if(t===e)return!0;if(Vf(t)&&Vf(e))return t===e;if(t===void 0&&e===!1||e===void 0&&t===!1||Qr(t)&&!Qr(e)||!Qr(t)&&Qr(e))return!1;var n=Dg(Object.keys(t).concat(Object.keys(e)));if(r.ignore.length&&(n=n.filter(s=>r.ignore.indexOf(s)===-1)),!n.length)return!0;function i(s,a){return Gp(s,a,r)}return n.every(function(s){var a=t[s],o=e[s];if(Q6.indexOf(s)!==-1)return Gp(a,o,r);var c=W6[s];if(c||(c=mn),mn(a,o))return!0;if(Y6.indexOf(s)===-1&&(!Da(t,s)&&Da(e,s)||Da(t,s)&&!Da(e,s)))return a===o;var l=c(a,o,s,i);if(!Vf(l))throw new Error("Comparer must return true or false");return l})}var Fg=Gp;function X6(t){return Object.prototype.toString.call(t)==="[object Array]"}var Mg=Array.isArray||X6;function J6(t){return(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")&&t.valueOf()===t.valueOf()}var Z6=J6,eB=Z6;function tB(t){return eB(t)&&t%1===0}var rB=tB,nB=Mg,iB=rB;function sB(t){var e;if(!nB(t)||(e=t.length,!e))return!1;for(var r=0;r<e;r++)if(!iB(t[r]))return!1;return!0}var kS=sB;function aB(t){return typeof t=="function"}var RS=aB,oB=Mg,kw=kS,cB=RS,Du=Math.pow(2,31)-1;function Rw(t,e){var r=1,n;if(t===0)return e;if(e===0)return t;for(;t%2===0&&e%2===0;)t=t/2,e=e/2,r=r*2;for(;t%2===0;)t=t/2;for(;e;){for(;e%2===0;)e=e/2;t>e&&(n=e,e=t,t=n),e=e-t}return r*t}function Ow(t,e){var r=0,n;if(t===0)return e;if(e===0)return t;for(;!(t&1)&&!(e&1);)t>>>=1,e>>>=1,r++;for(;!(t&1);)t>>>=1;for(;e;){for(;!(e&1);)e>>>=1;t>e&&(n=e,e=t,t=n),e=e-t}return t<<r}function lB(){var t=arguments.length,e,r,n,i,s,a,o;for(e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];if(kw(e)){if(t===2)return s=e[0],a=e[1],s<0&&(s=-s),a<0&&(a=-a),s<=Du&&a<=Du?Ow(s,a):Rw(s,a);n=e}else if(oB(e[0]))if(t>1){if(n=e[0],r=e[1],!cB(r))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+r+"`.")}else n=e[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(i=n.length,i<2)return null;if(r){for(s=new Array(i),o=0;o<i;o++)s[o]=r(n[o],o);n=s}if(t<3&&!kw(n))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+n+"`.");for(o=0;o<i;o++)s=n[o],s<0&&(n[o]=-s);for(s=n[0],o=1;o<i;o++)a=n[o],a<=Du&&s<=Du?s=Ow(s,a):s=Rw(s,a);return s}var uB=lB,Nw=uB,dB=Mg,Dw=kS,hB=RS;function fB(){var t=arguments.length,e,r,n,i,s,a,o;for(e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];if(Dw(e)){if(t===2)return s=e[0],a=e[1],s<0&&(s=-s),a<0&&(a=-a),s===0||a===0?0:s/Nw(s,a)*a;n=e}else if(dB(e[0]))if(t>1){if(n=e[0],r=e[1],!hB(r))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+r+"`.")}else n=e[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(i=n.length,i<2)return null;if(r){for(s=new Array(i),o=0;o<i;o++)s[o]=r(n[o],o);n=s}if(t<3&&!Dw(n))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+n+"`.");for(o=0;o<i;o++)s=n[o],s<0&&(n[o]=-s);for(s=n[0],o=1;o<i;o++){if(a=n[o],s===0||a===0)return 0;s=s/Nw(s,a)*a}return s}var pB=fB,mB=Pg,Fw=Rr;function OS(t,e,r,n,i,s){return Fw(t)&&Fw(e)&&(s.set(e,t),mB(t,e,void 0,OS,s),s.delete(e)),t}var gB=OS,yB=Pg,vB=ES,_B=vB(function(t,e,r,n){yB(t,e,r,n)}),wB=_B,bB=tS,EB=ys,SB=gB,IB=wB,TB=EB(function(t){return t.push(void 0,SB),bB(IB,void 0,t)}),$B=TB,AB=vi,PB=PS,CB=ys,xB=CS,kB=CB(function(t){var e=AB(t,xB);return e.length&&e[0]===t[0]?PB(e):[]}),RB=kB;function OB(t,e,r,n){for(var i=r-1,s=t.length;++i<s;)if(n(t[i],e))return i;return-1}var NB=OB,DB=vi,FB=SS,MB=NB,jB=sa,LB=Ph,VB=Array.prototype,Mw=VB.splice;function UB(t,e,r,n){var i=n?MB:FB,s=-1,a=e.length,o=t;for(t===e&&(e=LB(e)),r&&(o=DB(t,jB(r)));++s<a;)for(var c=0,l=e[s],u=r?r(l):l;(c=i(o,u,c,n))>-1;)o!==t&&Mw.call(o,c,1),Mw.call(t,c,1);return t}var BB=UB,zB=BB;function qB(t,e){return t&&t.length&&e&&e.length?zB(t,e):t}var HB=qB,KB=yg,GB=Ig,WB=pS,YB=Ht;function QB(t,e){var r=YB(t)?KB:GB;return r(t,WB(e))}var NS=QB,XB=Eh,JB=kg,ZB=Rg,e5=vi,t5=sa,r5=Sh,n5=200;function i5(t,e,r,n){var i=-1,s=JB,a=!0,o=t.length,c=[],l=e.length;if(!o)return c;r&&(e=e5(e,t5(r))),n?(s=ZB,a=!1):e.length>=n5&&(s=r5,a=!1,e=new XB(e));e:for(;++i<o;){var u=t[i],h=r==null?u:r(u);if(u=n||u!==0?u:0,a&&h===h){for(var p=l;p--;)if(e[p]===h)continue e;c.push(u)}else s(e,h,n)||c.push(u)}return c}var s5=i5,a5=s5,o5=ys,c5=xh,l5=o5(function(t,e){return c5(t)?a5(t,e):[]}),u5=l5;const d5=bg,h5=xg,DS=wo,f5=kh,p5=Ng,m5=u5;function g5(t){for(const e in t)FS(t,e)&&MS(t[e])&&delete t[e];return t}const y5=t=>f5(h5(t.map(jg))),v5=(t,e)=>t.map(r=>r&&r[e]),FS=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),jg=t=>DS(t)||Array.isArray(t)?Object.keys(t):[],_5=t=>t!==void 0,w5=t=>DS(t)||t===!0||t===!1,MS=t=>!jg(t).length&&t!==!1&&t!==!0,b5=(t,...e)=>m5.apply(null,[t].concat(d5(e)));var jS={allUniqueKeys:y5,deleteUndefinedProps:g5,getValues:v5,has:FS,isEmptySchema:MS,isSchema:w5,keys:jg,notUndefined:_5,uniqWith:p5,withoutArr:b5};const E5=Fg,S5=NS,{allUniqueKeys:I5,deleteUndefinedProps:T5,getValues:$5,keys:pc,notUndefined:A5,uniqWith:P5,withoutArr:jw}=jS;function C5(t){S5(t,function(e,r){e===!1&&delete t[r]})}function Lw(t,e){return I5(t).reduce(function(n,i){const s=$5(t,i),a=P5(s.filter(A5),E5);return n[i]=e(a,i),n},{})}var x5={keywords:["properties","patternProperties","additionalProperties"],resolver(t,e,r,n){n.ignoreAdditionalProperties||(t.forEach(function(s){const a=t.filter(u=>u!==s),o=pc(s.properties),l=pc(s.patternProperties).map(u=>new RegExp(u));a.forEach(function(u){const h=pc(u.properties),p=h.filter(m=>l.some(g=>g.test(m)));jw(h,o,p).forEach(function(m){u.properties[m]=r.properties([u.properties[m],s.additionalProperties],m)})})}),t.forEach(function(s){const a=t.filter(c=>c!==s),o=pc(s.patternProperties);s.additionalProperties===!1&&a.forEach(function(c){const l=pc(c.patternProperties);jw(l,o).forEach(h=>delete c.patternProperties[h])})}));const i={additionalProperties:r.additionalProperties(t.map(s=>s.additionalProperties)),patternProperties:Lw(t.map(s=>s.patternProperties),r.patternProperties),properties:Lw(t.map(s=>s.properties),r.properties)};return i.additionalProperties===!1&&C5(i.properties),T5(i)}};const k5=Fg,R5=NS,{allUniqueKeys:O5,deleteUndefinedProps:N5,has:D5,isSchema:LS,notUndefined:VS,uniqWith:F5}=jS;function M5(t){R5(t,function(e,r){e===!1&&t.splice(r,1)})}function j5(t,e){return t.map(function(r){if(r)if(Array.isArray(r.items)){const n=r.items[e];if(LS(n))return n;if(D5(r,"additionalItems"))return r.additionalItems}else return r.items})}function L5(t){return t.map(function(e){if(e)return Array.isArray(e.items)?e.additionalItems:e.items})}function V5(t,e,r){return O5(r).reduce(function(i,s){const a=j5(t,s),o=F5(a.filter(VS),k5);return i[s]=e(o,s),i},[])}var U5={keywords:["items","additionalItems"],resolver(t,e,r){const n=t.map(o=>o.items),i=n.filter(VS),s={};i.every(LS)?s.items=r.items(n):s.items=V5(t,r.items,n);let a;return i.every(Array.isArray)?a=t.map(o=>o.additionalItems):i.some(Array.isArray)&&(a=L5(t)),a&&(s.additionalItems=r.additionalItems(a)),s.additionalItems===!1&&Array.isArray(s.items)&&M5(s.items),N5(s)}};const US=IS,kd=Fg,B5=pB,z5=$B,BS=bg,Lg=xg,q5=RB,H5=xS,Wp=Ag,Xa=wo,K5=HB,zS=$S,Vg=kh,La=Ng,qS=x5,HS=U5,Fu=(t,e)=>t.indexOf(e)!==-1,G5=t=>Xa(t)||t===!0||t===!1,W5=t=>t===!1,KS=t=>t===!0,Rh=(t,e,r)=>r(t),GS=t=>zS(Vg(Lg(t))),Rd=t=>t!==void 0,WS=t=>Vg(Lg(t.map(ez))),Ro=t=>t[0],Y5=t=>GS(t),Il=t=>Math.max.apply(Math,t),Tl=t=>Math.min.apply(Math,t),Q5=t=>t.some(KS),X5=t=>La(BS(t),Wp);function J5(t){return function(e,r){return kd({[t]:e},{[t]:r})}}function YS(t){let{allOf:e=[],...r}=t;return r=Xa(t)?r:t,[r,...e.map(YS)]}function QS(t,e){return t.map(r=>r&&r[e])}function Z5(t,e){return t.map(function(r,n){try{return e(r,n)}catch{return}}).filter(Rd)}function ez(t){return Xa(t)||Array.isArray(t)?Object.keys(t):[]}function Yp(t,e){if(e=e||[],!t.length)return e;const r=t.slice(0).shift(),n=t.slice(1);return e.length?Yp(n,BS(e.map(i=>r.map(s=>[s].concat(i))))):Yp(n,r.map(i=>i))}function XS(t,e){let r;try{r=t.map(function(n){return JSON.stringify(n,null,2)}).join(`
`)}catch{r=t.join(", ")}throw new Error('Could not resolve values for path:"'+e.join(".")+`". They are probably incompatible. Values: 
`+r)}function tz(t,e,r,n,i,s){if(t.length){const a=i.complexResolvers[e];if(!a||!a.resolver)throw new Error("No resolver found for "+e);const o=r.map(h=>t.reduce((p,f)=>(h[f]!==void 0&&(p[f]=h[f]),p),{})),c=La(o,kd),l=a.keywords.reduce((h,p)=>({...h,[p]:(f,m=[])=>n(f,null,s.concat(p,m))}),{}),u=a.resolver(c,s.concat(e),l,i);return Xa(u)||XS(c,s.concat(e)),u}}function rz(t){return{required:t}}const nz=["properties","patternProperties","definitions","dependencies"],iz=["anyOf","oneOf"],sz=["additionalProperties","additionalItems","contains","propertyNames","not","items"],Ye={type(t){if(t.some(Array.isArray)){const e=t.map(function(n){return Array.isArray(n)?n:[n]}),r=q5.apply(null,e);if(r.length===1)return r[0];if(r.length>1)return Vg(r)}},dependencies(t,e,r){return WS(t).reduce(function(i,s){const a=QS(t,s);let o=La(a.filter(Rd),Wp);const c=o.filter(Array.isArray);if(c.length){if(c.length===o.length)i[s]=GS(o);else{const l=o.filter(G5),u=c.map(rz);i[s]=r(l.concat(u),s)}return i}return o=La(o,kd),i[s]=r(o,s),i},{})},oneOf(t,e,r){const n=Yp(US(t)),i=Z5(n,r),s=La(i,kd);if(s.length)return s},not(t){return{anyOf:t}},pattern(t){return t.map(e=>"(?="+e+")").join("")},multipleOf(t){let e=t.slice(0),r=1;for(;e.some(n=>!Number.isInteger(n));)e=e.map(n=>n*10),r=r*10;return B5(e)/r},enum(t){const e=H5.apply(null,t.concat(Wp));if(e.length)return zS(e)}};Ye.$id=Ro;Ye.$ref=Ro;Ye.$schema=Ro;Ye.additionalItems=Rh;Ye.additionalProperties=Rh;Ye.anyOf=Ye.oneOf;Ye.contains=Rh;Ye.default=Ro;Ye.definitions=Ye.dependencies;Ye.description=Ro;Ye.examples=X5;Ye.exclusiveMaximum=Tl;Ye.exclusiveMinimum=Il;Ye.items=HS;Ye.maximum=Tl;Ye.maxItems=Tl;Ye.maxLength=Tl;Ye.maxProperties=Tl;Ye.minimum=Il;Ye.minItems=Il;Ye.minLength=Il;Ye.minProperties=Il;Ye.properties=qS;Ye.propertyNames=Rh;Ye.required=Y5;Ye.title=Ro;Ye.uniqueItems=Q5;const az={properties:qS,items:HS};function Ug(t,e,r){e=z5(e,{ignoreAdditionalProperties:!1,resolvers:Ye,complexResolvers:az,deep:!0});const n=Object.entries(e.complexResolvers);function i(o,c,l){o=US(o.filter(Rd)),l=l||[];const u=Xa(c)?c:{};if(!o.length)return;if(o.some(W5))return!1;if(o.every(KS))return!0;o=o.filter(Xa);const h=WS(o);if(e.deep&&Fu(h,"allOf"))return Ug({allOf:o},e);const p=n.map(([f,m])=>h.filter(g=>m.keywords.includes(g)));return p.forEach(f=>K5(h,f)),h.forEach(function(f){const m=QS(o,f),g=La(m.filter(Rd),J5(f));if(g.length===1&&Fu(iz,f))u[f]=g[0].map(y=>i([y],y));else if(g.length===1&&!Fu(nz,f)&&!Fu(sz,f))u[f]=g[0];else{const y=e.resolvers[f]||e.resolvers.defaultResolver;if(!y)throw new Error("No resolver found for key "+f+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const v=(w,$=[])=>i(w,null,l.concat(f,$));u[f]=y(g,l.concat(f),v,e),u[f]===void 0?XS(g,l.concat(f)):u[f]===void 0&&delete u[f]}}),n.reduce((f,[m,g],y)=>({...f,...tz(p[y],m,o,i,e,l)}),u)}const s=Lg(YS(t));return i(s)}Ug.options={resolvers:Ye};var oz=Ug;const cz=Fe(oz);function Ja(t){let e;const r=fe(t,"discriminator.propertyName",void 0);return Sg(r)?e=r:r!==void 0&&console.warn(`Expecting discriminator to be a string, got "${typeof r}" instead`),e}function Qc(t){return Array.isArray(t)?"array":typeof t=="string"?"string":t==null?"null":typeof t=="boolean"?"boolean":isNaN(t)?typeof t=="object"?"object":"string":"number"}var lz=Ch,uz=ys,dz=Og,hz=xh,fz=uz(function(t){return dz(lz(t,1,hz,!0))}),pz=fz;const mz=Fe(pz);function us(t){let{type:e}=t;return!e&&t.const?Qc(t.const):!e&&t.enum?"string":!e&&(t.properties||t.additionalProperties)?"object":(Array.isArray(e)&&(e.length===2&&e.includes("null")?e=e.find(r=>r!=="null"):e=e[0]),e)}function di(t,e){const r=Object.assign({},t);return Object.keys(e).reduce((n,i)=>{const s=t?t[i]:{},a=e[i];return t&&i in t&&Et(a)?n[i]=di(s,a):t&&e&&(us(t)==="object"||us(e)==="object")&&i===jC&&Array.isArray(s)&&Array.isArray(a)?n[i]=mz(s,a):n[i]=a,n},r)}function Mr(t,e,r={},n){return Dn(t,e,r,n)[0]}function gz(t,e,r,n,i,s){const{if:a,then:o,else:c,...l}=e,u=t.isValid(a,s||{},r);let h=[l],p=[];if(n)o&&typeof o!="boolean"&&(p=p.concat(Dn(t,o,r,s,n,i))),c&&typeof c!="boolean"&&(p=p.concat(Dn(t,c,r,s,n,i)));else{const f=u?o:c;f&&typeof f!="boolean"&&(p=p.concat(Dn(t,f,r,s,n,i)))}return p.length&&(h=p.map(f=>di(l,f))),h.flatMap(f=>Dn(t,f,r,s,n,i))}function JS(t){return t.reduce((r,n)=>n.length>1?n.flatMap(i=>mS(r.length,s=>[...r[s]].concat(i))):(r.forEach(i=>i.push(n[0])),r),[[]])}function yz(t,e,r,n,i,s){const a=ZS(t,e,r,n,i,s);if(a.length>1||a[0]!==e)return a;if(ph in e)return eI(t,e,r,n,i,s).flatMap(c=>Dn(t,c,r,s,n,i));if(yl in e&&Array.isArray(e.allOf)){const o=e.allOf.map(l=>Dn(t,l,r,s,n,i));return JS(o).map(l=>({...e,allOf:l}))}return[e]}function ZS(t,e,r,n,i,s){const a=Xc(e,r,i);return a!==e?Dn(t,a,r,s,n,i):[e]}function Xc(t,e,r){if(!Et(t))return t;let n=t;if(Vt in n){const{$ref:i,...s}=n;if(r.includes(i))return n;r.push(i),n={...aS(i,e),...s}}if($t in n){const i=[],s=o3(n[$t],(a,o,c)=>{const l=[...r];a[c]=Xc(o,e,l),i.push(l)},{});t9(r,F9(s9(i))),n={...n,[$t]:s}}return ts in n&&!Array.isArray(n.items)&&typeof n.items!="boolean"&&(n={...n,items:Xc(n.items,e,r)}),Bs(t,n)?t:n}function vz(t,e,r,n){const i={...e,properties:{...e.properties}},s=n&&Et(n)?n:{};return Object.keys(s).forEach(a=>{if(a in i.properties)return;let o={};typeof i.additionalProperties!="boolean"?Vt in i.additionalProperties?o=Mr(t,{$ref:fe(i.additionalProperties,[Vt])},r,s):"type"in i.additionalProperties?o={...i.additionalProperties}:Nn in i.additionalProperties||Yr in i.additionalProperties?o={type:"object",...i.additionalProperties}:o={type:Qc(fe(s,[a]))}:o={type:Qc(fe(s,[a]))},i.properties[a]=o,or(i.properties,[a,vo],!0)}),i}function Dn(t,e,r,n,i=!1,s=[]){return Et(e)?yz(t,e,r,i,s,n).flatMap(o=>{let c=o;if(FC in c)return gz(t,c,r,i,s,n);if(yl in c){if(i){const{allOf:u,...h}=c;return[...u,h]}try{c=cz(c,{deep:!1})}catch(u){console.warn(`could not merge subschemas in allOf:
`,u);const{allOf:h,...p}=c;return p}}return Vp in c&&c.additionalProperties!==!1?vz(t,c,r,n):c}):[{}]}function _z(t,e,r,n,i){let s;const{oneOf:a,anyOf:o,...c}=e;if(Array.isArray(a)?s=a:Array.isArray(o)&&(s=o),s){const l=i===void 0&&n?{}:i,u=Ja(e);s=s.map(p=>Xc(p,r,[]));const h=$g(t,l,s,r,u);if(n)return s.map(p=>di(c,p));e=di(c,s[h])}return[e]}function eI(t,e,r,n,i,s){const{dependencies:a,...o}=e;return _z(t,o,r,n,s).flatMap(l=>tI(t,a,l,r,n,i,s))}function tI(t,e,r,n,i,s,a){let o=[r];for(const c in e){if(!i&&fe(a,[c])===void 0||r.properties&&!(c in r.properties))continue;const[l,u]=Eg(c,e);return Array.isArray(u)?o[0]=wz(r,u):Et(u)&&(o=bz(t,r,n,c,u,i,s,a)),o.flatMap(h=>tI(t,l,h,n,i,s,a))}return o}function wz(t,e){if(!e)return t;const r=Array.isArray(t.required)?Array.from(new Set([...t.required,...e])):e;return{...t,required:r}}function bz(t,e,r,n,i,s,a,o){return Dn(t,i,r,o,s,a).flatMap(l=>{const{oneOf:u,...h}=l;if(e=di(e,h),u===void 0)return e;const p=u.map(m=>typeof m=="boolean"||!(Vt in m)?[m]:ZS(t,m,r,s,a,o));return JS(p).flatMap(m=>Ez(t,e,r,n,m,s,a,o))})}function Ez(t,e,r,n,i,s,a,o){const c=i.filter(l=>{if(typeof l=="boolean"||!l||!l.properties)return!1;const{[n]:u}=l.properties;if(u){const h={type:"object",properties:{[n]:u}};return t.isValid(h,o,r)||s}return!1});return!s&&c.length!==1?(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[e]):c.flatMap(l=>{const u=l,[h]=Eg(n,u.properties),p={...u,properties:h};return Dn(t,p,r,o,s,a).map(m=>di(e,m))})}const Sz={type:"object",$id:MC,properties:{__not_really_there__:{type:"number"}}};function Qp(t,e,r,n={}){let i=0;return r&&(hn(r.properties)?i+=o4(r.properties,(s,a,o)=>{const c=fe(n,o);if(typeof a=="boolean")return s;if(gr(a,Vt)){const l=Mr(t,a,e,c);return s+Qp(t,e,l,c||{})}if((gr(a,Yr)||gr(a,Nn))&&c){const l=gr(a,Yr)?Yr:Nn,u=Ja(a);return s+Jc(t,e,c,fe(a,l),-1,u)}if(a.type==="object")return s+Qp(t,e,a,c||{});if(a.type===Qc(c)){let l=s+1;return a.default?l+=c===a.default?1:-1:a.const&&(l+=c===a.const?1:-1),l}return s},0):Sg(r.type)&&r.type===Qc(n)&&(i+=1)),i}function Jc(t,e,r,n,i=-1,s){const a=n.map(h=>Xc(h,e,[])),o=gS(r,n,s);if(cS(o))return o;const c=a.reduce((h,p,f)=>($g(t,r,[Sz,p],e,s)===1&&h.push(f),h),[]);if(c.length===1)return c[0];c.length||mS(a.length,h=>c.push(h));const l=new Set,{bestIndex:u}=c.reduce((h,p)=>{const{bestScore:f}=h,m=a[p],g=Qp(t,e,m,r);return l.add(g),g>f?{bestIndex:p,bestScore:g}:h},{bestIndex:i,bestScore:0});return l.size===1&&i>=0?i:u}function Xp(t){return Array.isArray(t.items)&&t.items.length>0&&t.items.every(e=>Et(e))}function Od(t,e,r=!1){if(Array.isArray(e)){const n=Array.isArray(t)?t:[],i=e.map((s,a)=>n[a]?Od(n[a],s,r):s);return r&&i.length<n.length&&i.push(...n.slice(i.length)),i}if(Et(e)){const n=Object.assign({},t);return Object.keys(e).reduce((i,s)=>(i[s]=Od(t?fe(t,s):{},fe(e,s),r),i),n)}return e}function Oo(t,e,r=!1){return Object.keys(e).reduce((n,i)=>{const s=t?t[i]:{},a=e[i];if(t&&i in t&&Et(a))n[i]=Oo(s,a,r);else if(r&&Array.isArray(s)&&Array.isArray(a)){let o=a;r==="preventDuplicates"&&(o=a.reduce((c,l)=>(s.includes(l)||c.push(l),c),[])),n[i]=s.concat(o)}else n[i]=a;return n},Object.assign({},t))}function Iz(t){return Array.isArray(t.enum)&&t.enum.length===1||fE in t}function rI(t,e,r={}){const n=Mr(t,e,r,void 0),i=n.oneOf||n.anyOf;return Array.isArray(n.enum)?!0:Array.isArray(i)?i.every(s=>typeof s!="boolean"&&Iz(s)):!1}function Bg(t,e,r){return!e.uniqueItems||!e.items||typeof e.items=="boolean"?!1:rI(t,e.items,r)}var Za;(function(t){t[t.Ignore=0]="Ignore",t[t.Invert=1]="Invert",t[t.Fallback=2]="Fallback"})(Za||(Za={}));function zf(t,e=Za.Ignore,r=-1){if(r>=0){if(Array.isArray(t.items)&&r<t.items.length){const n=t.items[r];if(typeof n!="boolean")return n}}else if(t.items&&!Array.isArray(t.items)&&typeof t.items!="boolean")return t.items;return e!==Za.Ignore&&Et(t.additionalItems)?t.additionalItems:{}}function Vw(t,e,r,n,i,s=[],a={}){const{emptyObjectFields:o="populateAllDefaults"}=a;if(n)t[e]=r;else if(o!=="skipDefaults")if(Et(r)){const c=i===void 0?s.includes(e):i;o==="skipEmptyDefaults"?ls(r)||(t[e]=r):(!ls(r)||s.includes(e))&&(c||o!=="populateRequiredDefaults")&&(t[e]=r)}else r!==void 0&&(o==="populateAllDefaults"||o==="skipEmptyDefaults"||s.includes(e))&&(t[e]=r)}function ji(t,e,{parentDefaults:r,rawFormData:n,rootSchema:i={},includeUndefinedValues:s=!1,_recurseList:a=[],experimental_defaultFormStateBehavior:o=void 0,required:c}={}){var l,u,h,p;const f=Et(n)?n:{},m=Et(e)?e:{};let g=r,y=null,v=a;if(Et(g)&&Et(m.default))g=Oo(g,m.default);else if(NC in m)g=m.default;else if(Vt in m){const w=m[Vt];a.includes(w)||(v=a.concat(w),y=aS(w,i))}else if(ph in m)y=eI(t,m,i,!1,[],f)[0];else if(Xp(m))g=m.items.map((w,$)=>ji(t,w,{rootSchema:i,includeUndefinedValues:s,_recurseList:a,experimental_defaultFormStateBehavior:o,parentDefaults:Array.isArray(r)?r[$]:void 0,rawFormData:f,required:c}));else if(Yr in m){const{oneOf:w,...$}=m;if(w.length===0)return;const A=Ja(m);y=w[Jc(t,i,ls(f)?void 0:f,w,0,A)],y=di($,y)}else if(Nn in m){const{anyOf:w,...$}=m;if(w.length===0)return;const A=Ja(m);y=w[Jc(t,i,ls(f)?void 0:f,w,0,A)],y=di($,y)}if(y)return ji(t,y,{rootSchema:i,includeUndefinedValues:s,_recurseList:v,experimental_defaultFormStateBehavior:o,parentDefaults:g,rawFormData:f,required:c});switch(g===void 0&&(g=m.default),us(m)){case"object":{const w=(o==null?void 0:o.allOf)==="populateDefaults"&&yl in m?Mr(t,m,i,f):m,$=Object.keys(w.properties||{}).reduce((A,P)=>{var O;const E=ji(t,fe(w,[$t,P]),{rootSchema:i,_recurseList:a,experimental_defaultFormStateBehavior:o,includeUndefinedValues:s===!0,parentDefaults:fe(g,[P]),rawFormData:fe(f,[P]),required:(O=w.required)===null||O===void 0?void 0:O.includes(P)});return Vw(A,P,E,s,c,w.required,o),A},{});if(w.additionalProperties){const A=Et(w.additionalProperties)?w.additionalProperties:{},P=new Set;Et(g)&&Object.keys(g).filter(E=>!w.properties||!w.properties[E]).forEach(E=>P.add(E));const O=[];Object.keys(f).filter(E=>!w.properties||!w.properties[E]).forEach(E=>{P.add(E),O.push(E)}),P.forEach(E=>{var b;const I=ji(t,A,{rootSchema:i,_recurseList:a,experimental_defaultFormStateBehavior:o,includeUndefinedValues:s===!0,parentDefaults:fe(g,[E]),rawFormData:fe(f,[E]),required:(b=w.required)===null||b===void 0?void 0:b.includes(E)});Vw($,E,I,s,c,O)})}return $}case"array":{const w=((l=o==null?void 0:o.arrayMinItems)===null||l===void 0?void 0:l.populate)==="never",$=((u=o==null?void 0:o.arrayMinItems)===null||u===void 0?void 0:u.populate)==="requiredOnly",A=(o==null?void 0:o.emptyObjectFields)==="skipEmptyDefaults",P=(p=(h=o==null?void 0:o.arrayMinItems)===null||h===void 0?void 0:h.computeSkipPopulate)!==null&&p!==void 0?p:()=>!1,O=A?void 0:[];if(Array.isArray(g)&&(g=g.map((R,x)=>{const Q=zf(m,Za.Fallback,x);return ji(t,Q,{rootSchema:i,_recurseList:a,experimental_defaultFormStateBehavior:o,parentDefaults:R,required:c})})),Array.isArray(n)){const R=zf(m);w?g=n:g=n.map((x,Q)=>ji(t,R,{rootSchema:i,_recurseList:a,experimental_defaultFormStateBehavior:o,rawFormData:x,parentDefaults:fe(g,[Q]),required:c}))}if(w)return g??O;if($&&!c)return g||void 0;const E=Array.isArray(g)?g.length:0;if(!m.minItems||Bg(t,m,i)||P(t,m,i)||m.minItems<=E)return g||O;const b=g||[],I=zf(m,Za.Invert),T=I.default,C=new Array(m.minItems-E).fill(ji(t,I,{parentDefaults:T,rootSchema:i,_recurseList:a,experimental_defaultFormStateBehavior:o,required:c}));return b.concat(C)}}return g}function nI(t,e,r,n,i=!1,s){if(!Et(e))throw new Error("Invalid schema: "+e);const a=Mr(t,e,n,r),o=ji(t,a,{rootSchema:n,includeUndefinedValues:i,experimental_defaultFormStateBehavior:s,rawFormData:r});if(r==null||typeof r=="number"&&isNaN(r))return o;const{mergeExtraDefaults:c}=(s==null?void 0:s.arrayMinItems)||{};return Et(r)||Array.isArray(r)?Od(o,r,c):r}function iI(t={}){return"widget"in Ue(t)&&Ue(t).widget!=="hidden"}function sI(t,e,r={},n){if(r[sg]==="files")return!0;if(e.items){const i=Mr(t,e.items,n);return i.type==="string"&&i.format==="data-url"}return!1}function Tz(t,e,r={},n,i){const s=Ue(r,i),{label:a=!0}=s;let o=!!a;const c=us(e);return c==="array"&&(o=Bg(t,e,n)||sI(t,e,r,n)||iI(r)),c==="object"&&(o=!1),c==="boolean"&&!r[sg]&&(o=!1),r[LC]&&(o=!1),o}function $z(t,e,r){if(!r)return e;const{errors:n,errorSchema:i}=e;let s=t.toErrorList(r),a=r;return ls(i)||(a=Oo(i,r,!0),s=[...n].concat(s)),{errorSchema:a,errors:s}}const Ia=Symbol("no Value");function Jp(t,e,r,n,i={}){let s;if(gr(r,$t)){const a={};if(gr(n,$t)){const l=fe(n,$t,{});Object.keys(l).forEach(u=>{gr(i,u)&&(a[u]=void 0)})}const o=Object.keys(fe(r,$t,{})),c={};o.forEach(l=>{const u=fe(i,l);let h=fe(n,[$t,l],{}),p=fe(r,[$t,l],{});gr(h,Vt)&&(h=Mr(t,h,e,u)),gr(p,Vt)&&(p=Mr(t,p,e,u));const f=fe(h,"type"),m=fe(p,"type");if(!f||f===m)if(gr(a,l)&&delete a[l],m==="object"||m==="array"&&Array.isArray(u)){const g=Jp(t,e,p,h,u);(g!==void 0||m==="array")&&(c[l]=g)}else{const g=fe(p,"default",Ia),y=fe(h,"default",Ia);g!==Ia&&g!==u&&(y===u?a[l]=g:fe(p,"readOnly")===!0&&(a[l]=void 0));const v=fe(p,"const",Ia),w=fe(h,"const",Ia);v!==Ia&&v!==u&&(a[l]=w===u?v:void 0)}}),s={...typeof i=="string"||Array.isArray(i)?void 0:i,...a,...c}}else if(fe(n,"type")==="array"&&fe(r,"type")==="array"&&Array.isArray(i)){let a=fe(n,"items"),o=fe(r,"items");if(typeof a=="object"&&typeof o=="object"&&!Array.isArray(a)&&!Array.isArray(o)){gr(a,Vt)&&(a=Mr(t,a,e,i)),gr(o,Vt)&&(o=Mr(t,o,e,i));const c=fe(a,"type"),l=fe(o,"type");if(!c||c===l){const u=fe(r,"maxItems",-1);l==="object"?s=i.reduce((h,p)=>{const f=Jp(t,e,o,a,p);return f!==void 0&&(u<0||h.length<u)&&h.push(f),h},[]):s=u>0&&i.length>u?i.slice(0,u):i}}else typeof a=="boolean"&&typeof o=="boolean"&&a===o&&(s=i)}return s}function id(t,e,r,n,i,s,a,o=[]){if(Vt in e||ph in e||yl in e){const u=Mr(t,e,s,a);if(o.findIndex(p=>Bs(p,u))===-1)return id(t,u,r,n,i,s,a,o.concat(u))}if(ts in e&&!fe(e,[ts,Vt]))return id(t,fe(e,ts),r,n,i,s,a,o);const l={$id:i||r};if(us(e)==="object"&&$t in e)for(const u in e.properties){const h=fe(e,[$t,u]),p=l[Gi]+n+u;l[u]=id(t,Et(h)?h:{},r,n,p,s,fe(a,[u]),o)}return l}function Az(t,e,r,n,i,s="root",a="_"){return id(t,e,s,a,r,n,i)}function Cs(t,e,r,n,i,s=[]){if(Vt in e||ph in e||yl in e){const o=Mr(t,e,n,i);if(s.findIndex(l=>Bs(l,o))===-1)return Cs(t,o,r,n,i,s.concat(o))}let a={[td]:r.replace(/^\./,"")};if(Yr in e||Nn in e){const o=Yr in e?e.oneOf:e.anyOf,c=Ja(e),l=Jc(t,n,i,o,0,c),u=o[l];a={...a,...Cs(t,u,r,n,i,s)}}if(Vp in e&&e[Vp]!==!1&&or(a,ig,!0),ts in e&&Array.isArray(i)){const{items:o,additionalItems:c}=e;Array.isArray(o)?i.forEach((l,u)=>{o[u]?a[u]=Cs(t,o[u],`${r}.${u}`,n,l,s):c?a[u]=Cs(t,c,`${r}.${u}`,n,l,s):console.warn(`Unable to generate path schema for "${r}.${u}". No schema defined for it`)}):i.forEach((l,u)=>{a[u]=Cs(t,o,`${r}.${u}`,n,l,s)})}else if($t in e)for(const o in e.properties){const c=fe(e,[$t,o]);a[o]=Cs(t,c,`${r}.${o}`,n,fe(i,[o]),s)}return a}function Pz(t,e,r="",n,i){return Cs(t,e,r,n,i)}class Cz{constructor(e,r,n){this.rootSchema=r,this.validator=e,this.experimental_defaultFormStateBehavior=n}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,r,n={}){return!e||!r?!1:this.validator!==e||!$r(this.rootSchema,r)||!$r(this.experimental_defaultFormStateBehavior,n)}getDefaultFormState(e,r,n=!1){return nI(this.validator,e,r,this.rootSchema,n,this.experimental_defaultFormStateBehavior)}getDisplayLabel(e,r,n){return Tz(this.validator,e,r,this.rootSchema,n)}getClosestMatchingOption(e,r,n,i){return Jc(this.validator,this.rootSchema,e,r,n,i)}getFirstMatchingOption(e,r,n){return $g(this.validator,e,r,this.rootSchema,n)}getMatchingOption(e,r,n){return yS(this.validator,e,r,this.rootSchema,n)}isFilesArray(e,r){return sI(this.validator,e,r,this.rootSchema)}isMultiSelect(e){return Bg(this.validator,e,this.rootSchema)}isSelect(e){return rI(this.validator,e,this.rootSchema)}mergeValidationData(e,r){return $z(this.validator,e,r)}retrieveSchema(e,r){return Mr(this.validator,e,this.rootSchema,r)}sanitizeDataForNewSchema(e,r,n){return Jp(this.validator,this.rootSchema,e,r,n)}toIdSchema(e,r,n,i="root",s="_"){return Az(this.validator,e,r,this.rootSchema,n,i,s)}toPathSchema(e,r,n){return Pz(this.validator,e,r,this.rootSchema,n)}}function xz(t,e,r={}){return new Cz(t,e,r)}function kz(t){var e;if(t.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const n=t.slice(5).split(";base64,");if(n.length!==2)throw new Error("File is invalid: dataURI must be base64");const[i,s]=n,[a,...o]=i.split(";"),c=a||"",l=decodeURI(((e=o.map(u=>u.split("=")).find(([u])=>u==="name"))===null||e===void 0?void 0:e[1])||"unknown");try{const u=atob(s),h=new Array(u.length);for(let f=0;f<u.length;f++)h[f]=u.charCodeAt(f);return{blob:new window.Blob([new Uint8Array(h)],{type:c}),name:l}}catch(u){throw new Error("File is invalid: "+u.message)}}function Rz(t,e){let r=t;if(Array.isArray(e)){const n=r.split(/(%\d)/);e.forEach((i,s)=>{const a=n.findIndex(o=>o===`%${s+1}`);a>=0&&(n[a]=i)}),r=n.join("")}return r}function Oz(t,e){return Rz(t,e)}function qt(t,e=[],r){if(Array.isArray(t))return t.map(s=>qt(s,e)).filter(s=>s!==r);const n=t===""||t===null?-1:Number(t),i=e[n];return i?i.value:r}function aI(t,e,r=[]){const n=qt(t,r);return Array.isArray(e)?e.filter(i=>!Bs(i,n)):Bs(n,e)?void 0:e}function $l(t,e){return Array.isArray(e)?e.some(r=>Bs(r,t)):Bs(e,t)}function oI(t,e=[],r=!1){const n=e.map((i,s)=>$l(i.value,t)?String(s):void 0).filter(i=>typeof i<"u");return r?n:n[0]}function Nz(t){return t==null}var Dz=Nz;const Fz=Fe(Dz);function cI(t,e,r=[]){const n=qt(t,r);if(!Fz(n)){const i=r.findIndex(o=>n===o.value),s=r.map(({value:o})=>o);return e.slice(0,i).concat(n,e.slice(i)).sort((o,c)=>+(s.indexOf(o)>s.indexOf(c)))}return e}class Mz{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let n=Array.isArray(e)&&e.length>0||typeof e=="string"?fe(this.errorSchema,e):this.errorSchema;return!n&&e&&(n={},or(this.errorSchema,e,n)),n}resetAllErrors(e){return this.errorSchema=e?TS(e):{},this}addErrors(e,r){const n=this.getOrCreateErrorBlock(r);let i=fe(n,dn);return Array.isArray(i)||(i=[],n[dn]=i),Array.isArray(e)?i.push(...e):i.push(e),this}setErrors(e,r){const n=this.getOrCreateErrorBlock(r),i=Array.isArray(e)?[...e]:[e];return or(n,dn,i),this}clearErrors(e){const r=this.getOrCreateErrorBlock(e);return or(r,dn,[]),this}}function jz(t,e,r=[1900,new Date().getFullYear()+2],n="YMD"){const{day:i,month:s,year:a,hour:o,minute:c,second:l}=t,u={type:"day",range:[1,31],value:i},h={type:"month",range:[1,12],value:s},p={type:"year",range:r,value:a},f=[];switch(n){case"MDY":f.push(h,u,p);break;case"DMY":f.push(u,h,p);break;case"YMD":default:f.push(p,h,u)}return e&&f.push({type:"hour",range:[0,23],value:o},{type:"minute",range:[0,59],value:c},{type:"second",range:[0,59],value:l}),f}function Lz(t){const e={};return t.multipleOf&&(e.step=t.multipleOf),(t.minimum||t.minimum===0)&&(e.min=t.minimum),(t.maximum||t.maximum===0)&&(e.max=t.maximum),e}function lI(t,e,r={},n=!0){const i={type:e||"text",...Lz(t)};return r.inputType?i.type=r.inputType:e||(t.type==="number"?(i.type="number",n&&i.step===void 0&&(i.step="any")):t.type==="integer"&&(i.type="number",i.step===void 0&&(i.step=1))),r.autocomplete&&(i.autoComplete=r.autocomplete),i}const Uw={props:{disabled:!1},submitText:"Submit",norender:!1};function uI(t={}){const e=Ue(t);if(e&&e[Id]){const r=e[Id];return{...Uw,...r}}return Uw}function De(t,e,r={}){const{templates:n}=e;return t==="ButtonTemplates"?n[t]:r[t]||n[t]}var dI={exports:{}},rt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=Symbol.for("react.element"),qg=Symbol.for("react.portal"),Oh=Symbol.for("react.fragment"),Nh=Symbol.for("react.strict_mode"),Dh=Symbol.for("react.profiler"),Fh=Symbol.for("react.provider"),Mh=Symbol.for("react.context"),Vz=Symbol.for("react.server_context"),jh=Symbol.for("react.forward_ref"),Lh=Symbol.for("react.suspense"),Vh=Symbol.for("react.suspense_list"),Uh=Symbol.for("react.memo"),Bh=Symbol.for("react.lazy"),Uz=Symbol.for("react.offscreen"),hI;hI=Symbol.for("react.module.reference");function rn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case zg:switch(t=t.type,t){case Oh:case Dh:case Nh:case Lh:case Vh:return t;default:switch(t=t&&t.$$typeof,t){case Vz:case Mh:case jh:case Bh:case Uh:case Fh:return t;default:return e}}case qg:return e}}}rt.ContextConsumer=Mh;rt.ContextProvider=Fh;rt.Element=zg;rt.ForwardRef=jh;rt.Fragment=Oh;rt.Lazy=Bh;rt.Memo=Uh;rt.Portal=qg;rt.Profiler=Dh;rt.StrictMode=Nh;rt.Suspense=Lh;rt.SuspenseList=Vh;rt.isAsyncMode=function(){return!1};rt.isConcurrentMode=function(){return!1};rt.isContextConsumer=function(t){return rn(t)===Mh};rt.isContextProvider=function(t){return rn(t)===Fh};rt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===zg};rt.isForwardRef=function(t){return rn(t)===jh};rt.isFragment=function(t){return rn(t)===Oh};rt.isLazy=function(t){return rn(t)===Bh};rt.isMemo=function(t){return rn(t)===Uh};rt.isPortal=function(t){return rn(t)===qg};rt.isProfiler=function(t){return rn(t)===Dh};rt.isStrictMode=function(t){return rn(t)===Nh};rt.isSuspense=function(t){return rn(t)===Lh};rt.isSuspenseList=function(t){return rn(t)===Vh};rt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Oh||t===Dh||t===Nh||t===Lh||t===Vh||t===Uz||typeof t=="object"&&t!==null&&(t.$$typeof===Bh||t.$$typeof===Uh||t.$$typeof===Fh||t.$$typeof===Mh||t.$$typeof===jh||t.$$typeof===hI||t.getModuleId!==void 0)};rt.typeOf=rn;dI.exports=rt;var Bz=dI.exports;const Bw=Fe(Bz),qf={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function zz(t){let e=fe(t,"MergedWidget");if(!e){const r=t.defaultProps&&t.defaultProps.options||{};e=({options:n,...i})=>F.jsx(t,{options:{...r,...n},...i}),or(t,"MergedWidget",e)}return e}function oi(t,e,r={}){const n=us(t);if(typeof e=="function"||e&&Bw.isForwardRef(ie.createElement(e))||Bw.isMemo(e))return zz(e);if(typeof e!="string")throw new Error(`Unsupported widget definition: ${typeof e}`);if(e in r){const i=r[e];return oi(t,i,r)}if(typeof n=="string"){if(!(n in qf))throw new Error(`No widget for type '${n}'`);if(e in qf[n]){const i=r[qf[n][e]];return oi(t,i,r)}}throw new Error(`No widget '${e}' for type '${n}'`)}function qz(t){let e=0;for(let r=0;r<t.length;r+=1){const n=t.charCodeAt(r);e=(e<<5)-e+n,e=e&e}return e.toString(16)}function Hz(t){const e=new Set;return JSON.stringify(t,(r,n)=>(e.add(r),n)),qz(JSON.stringify(t,Array.from(e).sort()))}function Kz(t,e,r={}){try{return oi(t,e,r),!0}catch(n){const i=n;if(i.message&&(i.message.startsWith("No widget")||i.message.startsWith("Unsupported widget")))return!1;throw n}}function Al(t,e){return`${Sg(t)?t:t[Gi]}__${e}`}function ca(t){return Al(t,"description")}function Hg(t){return Al(t,"error")}function Zc(t){return Al(t,"examples")}function Kg(t){return Al(t,"help")}function Gg(t){return Al(t,"title")}function Ur(t,e=!1){const r=e?` ${Zc(t)}`:"";return`${Hg(t)} ${ca(t)} ${Kg(t)}${r}`}function zh(t,e){return`${t}-${e}`}function Wg(t,e,r){return e?r:t}function Gz(t){return t?new Date(t).toJSON():void 0}function Wz(t){if(DC in t&&Array.isArray(t.enum)&&t.enum.length===1)return t.enum[0];if(fE in t)return t.const;throw new Error("schema cannot be inferred as a constant")}function Nd(t){const e=t;if(e.enumNames,t.enum)return t.enum.map((n,i)=>({label:e.enumNames&&e.enumNames[i]||String(n),value:n}));const r=t.oneOf||t.anyOf;return r&&r.map(n=>{const i=n,s=Wz(i),a=i.title||String(s);return{schema:i,label:a,value:s}})}function Yz(t,e){if(!Array.isArray(e))return t;const r=u=>u.reduce((h,p)=>(h[p]=!0,h),{}),n=u=>u.length>1?`properties '${u.join("', '")}'`:`property '${u[0]}'`,i=r(t),s=e.filter(u=>u==="*"||i[u]),a=r(s),o=t.filter(u=>!a[u]),c=s.indexOf("*");if(c===-1){if(o.length)throw new Error(`uiSchema order list does not contain ${n(o)}`);return s}if(c!==s.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const l=[...s];return l.splice(c,1,...o),l}function Li(t,e){let r=String(t);for(;r.length<e;)r="0"+r;return r}function Hf(t,e=!0){if(!t)return{year:-1,month:-1,day:-1,hour:e?-1:0,minute:e?-1:0,second:e?-1:0};const r=new Date(t);if(Number.isNaN(r.getTime()))throw new Error("Unable to parse date "+t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:e?r.getUTCHours():0,minute:e?r.getUTCMinutes():0,second:e?r.getUTCSeconds():0}}function Nc(t){if(t.const||t.enum&&t.enum.length===1&&t.enum[0]===!0)return!0;if(t.anyOf&&t.anyOf.length===1)return Nc(t.anyOf[0]);if(t.oneOf&&t.oneOf.length===1)return Nc(t.oneOf[0]);if(t.allOf){const e=r=>Nc(r);return t.allOf.some(e)}return!1}function Qz(t,e,r){const{props:n,state:i}=t;return!$r(n,e)||!$r(i,r)}function zw(t,e=!0){const{year:r,month:n,day:i,hour:s=0,minute:a=0,second:o=0}=t,c=Date.UTC(r,n-1,i,s,a,o),l=new Date(c).toJSON();return e?l:l.slice(0,10)}function el(t,e=[]){if(!t)return[];let r=[];return dn in t&&(r=r.concat(t[dn].map(n=>{const i=`.${e.join(".")}`;return{property:i,message:n,stack:`${i} ${n}`}}))),Object.keys(t).reduce((n,i)=>{if(i!==dn){const s=t[i];ag(s)&&(n=n.concat(el(s,[...e,i])))}return n},r)}var Xz=vi,Jz=Ph,Zz=Ht,e8=Po,t8=NE,r8=oa,n8=FE;function i8(t){return Zz(t)?Xz(t,r8):e8(t)?[t]:Jz(t8(n8(t)))}var s8=i8;const fI=Fe(s8);function a8(t){const e=new Mz;return t.length&&t.forEach(r=>{const{property:n,message:i}=r,s=n==="."?[]:fI(n);s.length>0&&s[0]===""&&s.splice(0,1),i&&e.addErrors(i,s)}),e.ErrorSchema}function pI(t){return Object.keys(t).reduce((e,r)=>{if(r==="addError")return e;{const n=t[r];return ag(n)?{...e,[r]:pI(n)}:{...e,[r]:n}}},{})}function o8(t){if(!t)return"";const e=new Date(t),r=Li(e.getFullYear(),4),n=Li(e.getMonth()+1,2),i=Li(e.getDate(),2),s=Li(e.getHours(),2),a=Li(e.getMinutes(),2),o=Li(e.getSeconds(),2),c=Li(e.getMilliseconds(),3);return`${r}-${n}-${i}T${s}:${a}:${o}.${c}`}function sd(t,e){if(!e)return t;const{errors:r,errorSchema:n}=t;let i=el(e),s=e;return ls(n)||(s=Oo(n,e,!0),i=[...r].concat(i)),{errorSchema:s,errors:i}}function c8(t){for(const e in t){const r=t,n=r[e];e===Vt&&typeof n=="string"&&n.startsWith("#")?r[e]=pE+n:r[e]=Yg(n)}return t}function l8(t){for(let e=0;e<t.length;e++)t[e]=Yg(t[e]);return t}function Yg(t){return Array.isArray(t)?l8([...t]):hn(t)?c8({...t}):t}var Be;(function(t){t.ArrayItemTitle="Item",t.MissingItems="Missing items definition",t.YesLabel="Yes",t.NoLabel="No",t.CloseLabel="Close",t.ErrorsLabel="Errors",t.NewStringDefault="New Value",t.AddButton="Add",t.AddItemButton="Add Item",t.CopyButton="Copy",t.MoveDownButton="Move down",t.MoveUpButton="Move up",t.RemoveButton="Remove",t.NowLabel="Now",t.ClearLabel="Clear",t.AriaDateLabel="Select a date",t.PreviewLabel="Preview",t.DecrementAriaLabel="Decrease value by 1",t.IncrementAriaLabel="Increase value by 1",t.UnknownFieldType="Unknown field type %1",t.OptionPrefix="Option %1",t.TitleOptionPrefix="%1 option %2",t.KeyLabel="%1 Key",t.InvalidObjectField='Invalid "%1" object field configuration: <em>%2</em>.',t.UnsupportedField="Unsupported field schema.",t.UnsupportedFieldWithId="Unsupported field schema for field <code>%1</code>.",t.UnsupportedFieldWithReason="Unsupported field schema: <em>%1</em>.",t.UnsupportedFieldWithIdAndReason="Unsupported field schema for field <code>%1</code>: <em>%2</em>.",t.FilesInfo="**%1** (%2, %3 bytes)"})(Be||(Be={}));var u8=El,d8=vS,h8=Co;function f8(t,e,r){for(var n=-1,i=e.length,s={};++n<i;){var a=e[n],o=u8(t,a);r(o,a)&&d8(s,h8(a,t),o)}return s}var p8=f8,m8=p8,g8=fS;function y8(t,e){return m8(t,e,function(r,n){return g8(t,n)})}var v8=y8,_8=v8,w8=iS,b8=w8(function(t,e){return t==null?{}:_8(t,e)}),E8=b8;const S8=Fe(E8);let I8=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function Zp(){return I8()}function qw(t){return Array.isArray(t)?t.map(e=>({key:Zp(),item:e})):[]}function mc(t){return Array.isArray(t)?t.map(e=>e.item):[]}class T8 extends ie.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:i,registry:s}=this.props,{schemaUtils:a}=s;let o=i.items;return Xp(i)&&OC(i)&&(o=i.additionalItems),a.getDefaultFormState(o)},this.onAddClick=i=>{this._handleAddClick(i)},this.onAddIndexClick=i=>s=>{this._handleAddClick(s,i)},this.onCopyIndexClick=i=>s=>{s&&s.preventDefault();const{onChange:a,errorSchema:o}=this.props,{keyedFormData:c}=this.state;let l;if(o){l={};for(const p in o){const f=parseInt(p);f<=i?or(l,[f],o[p]):f>i&&or(l,[f+1],o[p])}}const u={key:Zp(),item:TS(c[i].item)},h=[...c];i!==void 0?h.splice(i+1,0,u):h.push(u),this.setState({keyedFormData:h,updatedKeyedFormData:!0},()=>a(mc(h),l))},this.onDropIndexClick=i=>s=>{s&&s.preventDefault();const{onChange:a,errorSchema:o}=this.props,{keyedFormData:c}=this.state;let l;if(o){l={};for(const h in o){const p=parseInt(h);p<i?or(l,[p],o[h]):p>i&&or(l,[p-1],o[h])}}const u=c.filter((h,p)=>p!==i);this.setState({keyedFormData:u,updatedKeyedFormData:!0},()=>a(mc(u),l))},this.onReorderClick=(i,s)=>a=>{a&&(a.preventDefault(),a.currentTarget.blur());const{onChange:o,errorSchema:c}=this.props;let l;if(c){l={};for(const f in c){const m=parseInt(f);m==i?or(l,[s],c[i]):m==s?or(l,[i],c[s]):or(l,[f],c[m])}}const{keyedFormData:u}=this.state;function h(){const f=u.slice();return f.splice(i,1),f.splice(s,0,u[i]),f}const p=h();this.setState({keyedFormData:p},()=>o(mc(p),l))},this.onChangeForIndex=i=>(s,a,o)=>{const{formData:c,onChange:l,errorSchema:u}=this.props,p=(Array.isArray(c)?c:[]).map((f,m)=>i===m?typeof s>"u"?null:s:f);l(p,u&&u&&{...u,[i]:a},o)},this.onSelectChange=i=>{const{onChange:s,idSchema:a}=this.props;s(i,void 0,a&&a.$id)};const{formData:r=[]}=e,n=qw(r);this.state={keyedFormData:n,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,r){if(r.updatedKeyedFormData)return{updatedKeyedFormData:!1};const n=Array.isArray(e.formData)?e.formData:[],i=r.keyedFormData||[];return{keyedFormData:n.length===i.length?i.map((a,o)=>({key:a.key,item:n[o]})):qw(n)}}get itemTitle(){const{schema:e,registry:r}=this.props,{translateString:n}=r;return fe(e,[ts,"title"],fe(e,[ts,"description"],n(Be.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):e.type!=="null"}canAddItem(e){const{schema:r,uiSchema:n,registry:i}=this.props;let{addable:s}=Ue(n,i.globalUiOptions);return s!==!1&&(r.maxItems!==void 0?s=e.length<r.maxItems:s=!0),s}_handleAddClick(e,r){e&&e.preventDefault();const{onChange:n,errorSchema:i}=this.props,{keyedFormData:s}=this.state;let a;if(i){a={};for(const l in i){const u=parseInt(l);r===void 0||u<r?or(a,[u],i[l]):u>=r&&or(a,[u+1],i[l])}}const o={key:Zp(),item:this._getNewFormDataRow()},c=[...s];r!==void 0?c.splice(r,0,o):c.push(o),this.setState({keyedFormData:c,updatedKeyedFormData:!0},()=>n(mc(c),a))}render(){const{schema:e,uiSchema:r,idSchema:n,registry:i}=this.props,{schemaUtils:s,translateString:a}=i;if(!(ts in e)){const o=Ue(r),c=De("UnsupportedFieldTemplate",i,o);return F.jsx(c,{schema:e,idSchema:n,reason:a(Be.MissingItems),registry:i})}return s.isMultiSelect(e)?this.renderMultiSelect():iI(r)?this.renderCustomWidget():Xp(e)?this.renderFixedArray():s.isFilesArray(e,r)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:r={},errorSchema:n,idSchema:i,name:s,title:a,disabled:o=!1,readonly:c=!1,autofocus:l=!1,required:u=!1,registry:h,onBlur:p,onFocus:f,idPrefix:m,idSeparator:g="_",rawErrors:y}=this.props,{keyedFormData:v}=this.state,w=e.title||a||s,{schemaUtils:$,formContext:A}=h,P=Ue(r),O=hn(e.items)?e.items:{},E=$.retrieveSchema(O),b=mc(this.state.keyedFormData),I=this.canAddItem(b),T={canAdd:I,items:v.map((R,x)=>{const{key:Q,item:re}=R,Ee=re,_e=$.retrieveSchema(O,Ee),me=n?n[x]:void 0,le=i.$id+g+x,Y=$.toIdSchema(_e,le,Ee,m,g);return this.renderArrayFieldItem({key:Q,index:x,name:s&&`${s}-${x}`,title:w?`${w}-${x+1}`:void 0,canAdd:I,canMoveUp:x>0,canMoveDown:x<b.length-1,itemSchema:_e,itemIdSchema:Y,itemErrorSchema:me,itemData:Ee,itemUiSchema:r.items,autofocus:l&&x===0,onBlur:p,onFocus:f,rawErrors:y,totalItems:v.length})}),className:`field field-array field-array-of-${E.type}`,disabled:o,idSchema:i,uiSchema:r,onAddClick:this.onAddClick,readonly:c,required:u,schema:e,title:w,formContext:A,formData:b,rawErrors:y,registry:h},C=De("ArrayFieldTemplate",h,P);return F.jsx(C,{...T})}renderCustomWidget(){var e;const{schema:r,idSchema:n,uiSchema:i,disabled:s=!1,readonly:a=!1,autofocus:o=!1,required:c=!1,hideError:l,placeholder:u,onBlur:h,onFocus:p,formData:f=[],registry:m,rawErrors:g,name:y}=this.props,{widgets:v,formContext:w,globalUiOptions:$,schemaUtils:A}=m,{widget:P,title:O,...E}=Ue(i,$),b=oi(r,P,v),I=(e=O??r.title)!==null&&e!==void 0?e:y,T=A.getDisplayLabel(r,i,$);return F.jsx(b,{id:n.$id,name:y,multiple:!0,onChange:this.onSelectChange,onBlur:h,onFocus:p,options:E,schema:r,uiSchema:i,registry:m,value:f,disabled:s,readonly:a,hideError:l,required:c,label:I,hideLabel:!T,placeholder:u,formContext:w,autofocus:o,rawErrors:g})}renderMultiSelect(){var e;const{schema:r,idSchema:n,uiSchema:i,formData:s=[],disabled:a=!1,readonly:o=!1,autofocus:c=!1,required:l=!1,placeholder:u,onBlur:h,onFocus:p,registry:f,rawErrors:m,name:g}=this.props,{widgets:y,schemaUtils:v,formContext:w,globalUiOptions:$}=f,A=v.retrieveSchema(r.items,s),P=Nd(A),{widget:O="select",title:E,...b}=Ue(i,$),I=oi(r,O,y),T=(e=E??r.title)!==null&&e!==void 0?e:g,C=v.getDisplayLabel(r,i,$);return F.jsx(I,{id:n.$id,name:g,multiple:!0,onChange:this.onSelectChange,onBlur:h,onFocus:p,options:{...b,enumOptions:P},schema:r,uiSchema:i,registry:f,value:s,disabled:a,readonly:o,required:l,label:T,hideLabel:!C,placeholder:u,formContext:w,autofocus:c,rawErrors:m})}renderFiles(){var e;const{schema:r,uiSchema:n,idSchema:i,name:s,disabled:a=!1,readonly:o=!1,autofocus:c=!1,required:l=!1,onBlur:u,onFocus:h,registry:p,formData:f=[],rawErrors:m}=this.props,{widgets:g,formContext:y,globalUiOptions:v,schemaUtils:w}=p,{widget:$="files",title:A,...P}=Ue(n,v),O=oi(r,$,g),E=(e=A??r.title)!==null&&e!==void 0?e:s,b=w.getDisplayLabel(r,n,v);return F.jsx(O,{options:P,id:i.$id,name:s,multiple:!0,onChange:this.onSelectChange,onBlur:u,onFocus:h,schema:r,uiSchema:n,value:f,disabled:a,readonly:o,required:l,registry:p,formContext:y,autofocus:c,rawErrors:m,label:E,hideLabel:!b})}renderFixedArray(){const{schema:e,uiSchema:r={},formData:n=[],errorSchema:i,idPrefix:s,idSeparator:a="_",idSchema:o,name:c,title:l,disabled:u=!1,readonly:h=!1,autofocus:p=!1,required:f=!1,registry:m,onBlur:g,onFocus:y,rawErrors:v}=this.props,{keyedFormData:w}=this.state;let{formData:$=[]}=this.props;const A=e.title||l||c,P=Ue(r),{schemaUtils:O,formContext:E}=m,I=(hn(e.items)?e.items:[]).map((Q,re)=>O.retrieveSchema(Q,n[re])),T=hn(e.additionalItems)?O.retrieveSchema(e.additionalItems,n):null;(!$||$.length<I.length)&&($=$||[],$=$.concat(new Array(I.length-$.length)));const C=this.canAddItem($)&&!!T,R={canAdd:C,className:"field field-array field-array-fixed-items",disabled:u,idSchema:o,formData:n,items:w.map((Q,re)=>{const{key:Ee,item:_e}=Q,me=_e,le=re>=I.length,Y=(le&&hn(e.additionalItems)?O.retrieveSchema(e.additionalItems,me):I[re])||{},V=o.$id+a+re,W=O.toIdSchema(Y,V,me,s,a),U=le?r.additionalItems||{}:Array.isArray(r.items)?r.items[re]:r.items||{},N=i?i[re]:void 0;return this.renderArrayFieldItem({key:Ee,index:re,name:c&&`${c}-${re}`,title:A?`${A}-${re+1}`:void 0,canAdd:C,canRemove:le,canMoveUp:re>=I.length+1,canMoveDown:le&&re<$.length-1,itemSchema:Y,itemData:me,itemUiSchema:U,itemIdSchema:W,itemErrorSchema:N,autofocus:p&&re===0,onBlur:g,onFocus:y,rawErrors:v,totalItems:w.length})}),onAddClick:this.onAddClick,readonly:h,required:f,registry:m,schema:e,uiSchema:r,title:A,formContext:E,errorSchema:i,rawErrors:v},x=De("ArrayFieldTemplate",m,P);return F.jsx(x,{...R})}renderArrayFieldItem(e){const{key:r,index:n,name:i,canAdd:s,canRemove:a=!0,canMoveUp:o,canMoveDown:c,itemSchema:l,itemData:u,itemUiSchema:h,itemIdSchema:p,itemErrorSchema:f,autofocus:m,onBlur:g,onFocus:y,rawErrors:v,totalItems:w,title:$}=e,{disabled:A,hideError:P,idPrefix:O,idSeparator:E,readonly:b,uiSchema:I,registry:T,formContext:C}=this.props,{fields:{ArraySchemaField:R,SchemaField:x},globalUiOptions:Q}=T,re=R||x,{orderable:Ee=!0,removable:_e=!0,copyable:me=!1}=Ue(I,Q),le={moveUp:Ee&&o,moveDown:Ee&&c,copy:me&&s,remove:_e&&a,toolbar:!1};return le.toolbar=Object.keys(le).some(Y=>le[Y]),{children:F.jsx(re,{name:i,title:$,index:n,schema:l,uiSchema:h,formData:u,formContext:C,errorSchema:f,idPrefix:O,idSeparator:E,idSchema:p,required:this.isItemRequired(l),onChange:this.onChangeForIndex(n),onBlur:g,onFocus:y,registry:T,disabled:A,readonly:b,hideError:P,autofocus:m,rawErrors:v}),className:"array-item",disabled:A,canAdd:s,hasCopy:le.copy,hasToolbar:le.toolbar,hasMoveUp:le.moveUp,hasMoveDown:le.moveDown,hasRemove:le.remove,index:n,totalItems:w,key:r,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:b,registry:T,schema:l,uiSchema:h}}}function $8(t){var e,r,n;const{schema:i,name:s,uiSchema:a,idSchema:o,formData:c,registry:l,required:u,disabled:h,readonly:p,hideError:f,autofocus:m,title:g,onChange:y,onFocus:v,onBlur:w,rawErrors:$}=t,{title:A}=i,{widgets:P,formContext:O,translateString:E,globalUiOptions:b}=l,{widget:I="checkbox",title:T,label:C=!0,...R}=Ue(a,b),x=oi(i,I,P),Q=E(Be.YesLabel),re=E(Be.NoLabel);let Ee;const _e=(r=(e=T??A)!==null&&e!==void 0?e:g)!==null&&r!==void 0?r:s;if(Array.isArray(i.oneOf))Ee=Nd({oneOf:i.oneOf.map(me=>{if(hn(me))return{...me,title:me.title||(me.const===!0?Q:re)}}).filter(me=>me)});else{const me=i,le=(n=i.enum)!==null&&n!==void 0?n:[!0,!1];!me.enumNames&&le.length===2&&le.every(Y=>typeof Y=="boolean")?Ee=[{value:le[0],label:le[0]?Q:re},{value:le[1],label:le[1]?Q:re}]:Ee=Nd({enum:le,enumNames:me.enumNames})}return F.jsx(x,{options:{...R,enumOptions:Ee},schema:i,uiSchema:a,id:o.$id,name:s,onChange:y,onFocus:v,onBlur:w,label:_e,hideLabel:!C,value:c,required:u,disabled:h,readonly:p,hideError:f,registry:l,formContext:O,autofocus:m,rawErrors:$})}class Hw extends ie.Component{constructor(e){super(e),this.onOptionChange=a=>{const{selectedOption:o,retrievedOptions:c}=this.state,{formData:l,onChange:u,registry:h}=this.props,{schemaUtils:p}=h,f=a!==void 0?parseInt(a,10):-1;if(f===o)return;const m=f>=0?c[f]:void 0,g=o>=0?c[o]:void 0;let y=p.sanitizeDataForNewSchema(m,g,l);y&&m&&(y=p.getDefaultFormState(m,y,"excludeObjectChildren")),u(y,void 0,this.getFieldId()),this.setState({selectedOption:f})};const{formData:r,options:n,registry:{schemaUtils:i}}=this.props,s=n.map(a=>i.retrieveSchema(a,r));this.state={retrievedOptions:s,selectedOption:this.getMatchingOption(0,r,s)}}componentDidUpdate(e,r){const{formData:n,options:i,idSchema:s}=this.props,{selectedOption:a}=this.state;let o=this.state;if(!$r(e.options,i)){const{registry:{schemaUtils:c}}=this.props,l=i.map(u=>c.retrieveSchema(u,n));o={selectedOption:a,retrievedOptions:l}}if(!$r(n,e.formData)&&s.$id===e.idSchema.$id){const{retrievedOptions:c}=o,l=this.getMatchingOption(a,n,c);r&&l!==a&&(o={selectedOption:l,retrievedOptions:c})}o!==this.state&&this.setState(o)}getMatchingOption(e,r,n){const{schema:i,registry:{schemaUtils:s}}=this.props,a=Ja(i);return s.getClosestMatchingOption(r,n,e,a)}getFieldId(){const{idSchema:e,schema:r}=this.props;return`${e.$id}${r.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:r=!1,errorSchema:n={},formContext:i,onBlur:s,onFocus:a,registry:o,schema:c,uiSchema:l}=this.props,{widgets:u,fields:h,translateString:p,globalUiOptions:f,schemaUtils:m}=o,{SchemaField:g}=h,{selectedOption:y,retrievedOptions:v}=this.state,{widget:w="select",placeholder:$,autofocus:A,autocomplete:P,title:O=c.title,...E}=Ue(l,f),b=oi({type:"number"},w,u),I=fe(n,dn,[]),T=Cd(n,[dn]),C=m.getDisplayLabel(c,l,f),R=y>=0&&v[y]||null;let x;if(R){const{required:le}=c;x=le?di({required:le},R):R}let Q=[];Yr in c&&l&&Yr in l?Array.isArray(l[Yr])?Q=l[Yr]:console.warn(`uiSchema.oneOf is not an array for "${O||e}"`):Nn in c&&l&&Nn in l&&(Array.isArray(l[Nn])?Q=l[Nn]:console.warn(`uiSchema.anyOf is not an array for "${O||e}"`));let re=l;y>=0&&Q.length>y&&(re=Q[y]);const Ee=O?Be.TitleOptionPrefix:Be.OptionPrefix,_e=O?[O]:[],me=v.map((le,Y)=>{const{title:V=le.title}=Ue(Q[Y]);return{label:V||p(Ee,_e.concat(String(Y+1))),value:Y}});return F.jsxs("div",{className:"panel panel-default panel-body",children:[F.jsx("div",{className:"form-group",children:F.jsx(b,{id:this.getFieldId(),name:`${e}${c.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:s,onFocus:a,disabled:r||ls(me),multiple:!1,rawErrors:I,errorSchema:T,value:y>=0?y:void 0,options:{enumOptions:me,...E},registry:o,formContext:i,placeholder:$,autocomplete:P,autofocus:A,label:O??e,hideLabel:!C})}),x&&F.jsx(g,{...this.props,schema:x,uiSchema:re})]})}}const A8=/\.([0-9]*0)*$/,P8=/[0.]0*$/;function C8(t){const{registry:e,onChange:r,formData:n,value:i}=t,[s,a]=ie.useState(i),{StringField:o}=e.fields;let c=n;const l=ie.useCallback(u=>{a(u),`${u}`.charAt(0)==="."&&(u=`0${u}`);const h=typeof u=="string"&&u.match(A8)?I_(u.replace(P8,"")):I_(u);r(h)},[r]);if(typeof s=="string"&&typeof c=="number"){const u=new RegExp(`${c}`.replace(".","\\.")+"\\.?0*$");s.match(u)&&(c=s)}return F.jsx(o,{...t,formData:c,onChange:l})}function ks(){return ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ks.apply(this,arguments)}const x8=["children","options"];var Kw,Gw;(function(t){t.blockQuote="0",t.breakLine="1",t.breakThematic="2",t.codeBlock="3",t.codeFenced="4",t.codeInline="5",t.footnote="6",t.footnoteReference="7",t.gfmTask="8",t.heading="9",t.headingSetext="10",t.htmlBlock="11",t.htmlComment="12",t.htmlSelfClosing="13",t.image="14",t.link="15",t.linkAngleBraceStyleDetector="16",t.linkBareUrlDetector="17",t.linkMailtoDetector="18",t.newlineCoalescer="19",t.orderedList="20",t.paragraph="21",t.ref="22",t.refImage="23",t.refLink="24",t.table="25",t.tableSeparator="26",t.text="27",t.textBolded="28",t.textEmphasized="29",t.textEscaped="30",t.textMarked="31",t.textStrikethroughed="32",t.unorderedList="33"})(Kw||(Kw={})),function(t){t[t.MAX=0]="MAX",t[t.HIGH=1]="HIGH",t[t.MED=2]="MED",t[t.LOW=3]="LOW",t[t.MIN=4]="MIN"}(Gw||(Gw={}));const Ww=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((t,e)=>(t[e.toLowerCase()]=e,t),{for:"htmlFor"}),Yw={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"",quot:""},k8=["style","script"],R8=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,O8=/mailto:/i,N8=/\n{2,}$/,mI=/^(\s*>[\s\S]*?)(?=\n{2,})/,D8=/^ *> ?/gm,F8=/^ {2,}\n/,M8=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,gI=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,yI=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,j8=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,L8=/^(?:\n *)*\n/,V8=/\r\n?/g,U8=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,B8=/^\[\^([^\]]+)]/,z8=/\f/g,q8=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,H8=/^\s*?\[(x|\s)\]/,vI=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,_I=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,wI=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,em=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,K8=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,bI=/^<!--[\s\S]*?(?:-->)/,G8=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,tm=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,W8=/^\{.*\}$/,Y8=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Q8=/^<([^ >]+@[^ >]+)>/,X8=/^<([^ >]+:\/[^ >]+)>/,J8=/-([a-z])?/gi,EI=/^(.*\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,Z8=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,eq=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,tq=/^\[([^\]]*)\] ?\[([^\]]*)\]/,rq=/(\[|\])/g,nq=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,iq=/\t/g,sq=/(^ *\||\| *$)/g,aq=/^ *:-+: *$/,oq=/^ *:-+ *$/,cq=/^ *-+: *$/,qh="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",lq=new RegExp(`^([*_])\\1${qh}\\1\\1(?!\\1)`),uq=new RegExp(`^([*_])${qh}\\1(?!\\1|\\w)`),dq=new RegExp(`^==${qh}==`),hq=new RegExp(`^~~${qh}~~`),fq=/^\\([^0-9A-Za-z\s])/,pq=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,mq=/^\n+/,gq=/^([ \t]*)/,yq=/\\([^\\])/g,Qw=/ *\n+$/,vq=/(?:^|\n)( *)$/,Qg="(?:\\d+\\.)",Xg="(?:[*+-])";function SI(t){return"( *)("+(t===1?Qg:Xg)+") +"}const II=SI(1),TI=SI(2);function $I(t){return new RegExp("^"+(t===1?II:TI))}const _q=$I(1),wq=$I(2);function AI(t){return new RegExp("^"+(t===1?II:TI)+"[^\\n]*(?:\\n(?!\\1"+(t===1?Qg:Xg)+" )[^\\n]*)*(\\n|$)","gm")}const PI=AI(1),CI=AI(2);function xI(t){const e=t===1?Qg:Xg;return new RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const kI=xI(1),RI=xI(2);function Xw(t,e){const r=e===1,n=r?kI:RI,i=r?PI:CI,s=r?_q:wq;return{match(a,o,c){const l=vq.exec(c);return l&&(o.list||!o.inline&&!o.simple)?n.exec(a=l[1]+a):null},order:1,parse(a,o,c){const l=r?+a[2]:void 0,u=a[0].replace(N8,`
`).match(i);let h=!1;return{items:u.map(function(p,f){const m=s.exec(p)[0].length,g=new RegExp("^ {1,"+m+"}","gm"),y=p.replace(g,"").replace(s,""),v=f===u.length-1,w=y.indexOf(`

`)!==-1||v&&h;h=w;const $=c.inline,A=c.list;let P;c.list=!0,w?(c.inline=!1,P=y.replace(Qw,`

`)):(c.inline=!0,P=y.replace(Qw,""));const O=o(P,c);return c.inline=$,c.list=A,O}),ordered:r,start:l}},render:(a,o,c)=>t(a.ordered?"ol":"ul",{key:c.key,start:a.type==="20"?a.start:void 0},a.items.map(function(l,u){return t("li",{key:u},o(l,c))}))}}const bq=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),Eq=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,OI=[mI,gI,yI,vI,wI,_I,bI,EI,PI,kI,CI,RI],Sq=[...OI,/^[^\n]+(?:  \n|\n{2,})/,em,tm];function Iq(t){return t.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Tq(t){return cq.test(t)?"right":aq.test(t)?"center":oq.test(t)?"left":null}function Jw(t,e,r,n){const i=r.inTable;r.inTable=!0;let s=t.trim().split(/( *(?:`[^`]*`|<.*?>.*?<\/.*?>(?!<\/.*?>)|\\\||\|) *)/).reduce((o,c)=>(c.trim()==="|"?o.push(n?{type:"26"}:{type:"27",text:c}):c!==""&&o.push.apply(o,e(c,r)),o),[]);r.inTable=i;let a=[[]];return s.forEach(function(o,c){o.type==="26"?c!==0&&c!==s.length-1&&a.push([]):(o.type!=="27"||s[c+1]!=null&&s[c+1].type!=="26"||(o.text=o.text.trimEnd()),a[a.length-1].push(o))}),a}function $q(t,e,r){r.inline=!0;const n=t[2]?t[2].replace(sq,"").split("|").map(Tq):[],i=t[3]?function(a,o,c){return a.trim().split(`
`).map(function(l){return Jw(l,o,c,!0)})}(t[3],e,r):[],s=Jw(t[1],e,r,!!i.length);return r.inline=!1,i.length?{align:n,cells:i,header:s,type:"25"}:{children:s,type:"21"}}function Zw(t,e){return t.align[e]==null?{}:{textAlign:t.align[e]}}function xi(t){return function(e,r){return r.inline?t.exec(e):null}}function ki(t){return function(e,r){return r.inline||r.simple?t.exec(e):null}}function Jn(t){return function(e,r){return r.inline||r.simple?null:t.exec(e)}}function gc(t){return function(e){return t.exec(e)}}function Aq(t,e,r){if(e.inline||e.simple||r&&!r.endsWith(`
`))return null;let n="";t.split(`
`).every(s=>!OI.some(a=>a.test(s))&&(n+=s+`
`,s.trim()));const i=n.trimEnd();return i==""?null:[n,i]}function Ta(t){try{if(decodeURIComponent(t).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return}catch{return null}return t}function e0(t){return t.replace(yq,"$1")}function ad(t,e,r){const n=r.inline||!1,i=r.simple||!1;r.inline=!0,r.simple=!0;const s=t(e,r);return r.inline=n,r.simple=i,s}function Pq(t,e,r){const n=r.inline||!1,i=r.simple||!1;r.inline=!1,r.simple=!0;const s=t(e,r);return r.inline=n,r.simple=i,s}function Cq(t,e,r){const n=r.inline||!1;r.inline=!1;const i=t(e,r);return r.inline=n,i}const Kf=(t,e,r)=>({children:ad(e,t[1],r)});function Gf(){return{}}function Wf(){return null}function xq(...t){return t.filter(Boolean).join(" ")}function Yf(t,e,r){let n=t;const i=e.split(".");for(;i.length&&(n=n[i[0]],n!==void 0);)i.shift();return n||r}function kq(t="",e={}){e.overrides=e.overrides||{},e.slugify=e.slugify||Iq,e.namedCodesToUnicode=e.namedCodesToUnicode?ks({},Yw,e.namedCodesToUnicode):Yw;const r=e.createElement||ie.createElement;function n(f,m,...g){const y=Yf(e.overrides,`${f}.props`,{});return r(function(v,w){const $=Yf(w,v);return $?typeof $=="function"||typeof $=="object"&&"render"in $?$:Yf(w,`${v}.component`,v):v}(f,e.overrides),ks({},m,y,{className:xq(m==null?void 0:m.className,y.className)||void 0}),...g)}function i(f){f=f.replace(q8,"");let m=!1;e.forceInline?m=!0:e.forceBlock||(m=nq.test(f)===!1);const g=u(l(m?f:`${f.trimEnd().replace(mq,"")}

`,{inline:m}));for(;typeof g[g.length-1]=="string"&&!g[g.length-1].trim();)g.pop();if(e.wrapper===null)return g;const y=e.wrapper||(m?"span":"div");let v;if(g.length>1||e.forceWrapper)v=g;else{if(g.length===1)return v=g[0],typeof v=="string"?n("span",{key:"outer"},v):v;v=null}return ie.createElement(y,{key:"outer"},v)}function s(f){const m=f.match(R8);return m?m.reduce(function(g,y,v){const w=y.indexOf("=");if(w!==-1){const $=function(E){return E.indexOf("-")!==-1&&E.match(G8)===null&&(E=E.replace(J8,function(b,I){return I.toUpperCase()})),E}(y.slice(0,w)).trim(),A=function(E){const b=E[0];return(b==='"'||b==="'")&&E.length>=2&&E[E.length-1]===b?E.slice(1,-1):E}(y.slice(w+1).trim()),P=Ww[$]||$,O=g[P]=function(E,b){return E==="style"?b.split(/;\s?/).reduce(function(I,T){const C=T.slice(0,T.indexOf(":"));return I[C.trim().replace(/(-[a-z])/g,R=>R[1].toUpperCase())]=T.slice(C.length+1).trim(),I},{}):E==="href"||E==="src"?Ta(b):(b.match(W8)&&(b=b.slice(1,b.length-1)),b==="true"||b!=="false"&&b)}($,A);typeof O=="string"&&(em.test(O)||tm.test(O))&&(g[P]=ie.cloneElement(i(O.trim()),{key:v}))}else y!=="style"&&(g[Ww[y]||y]=!0);return g},{}):null}const a=[],o={},c={0:{match:Jn(mI),order:1,parse:(f,m,g)=>({children:m(f[0].replace(D8,""),g)}),render:(f,m,g)=>n("blockquote",{key:g.key},m(f.children,g))},1:{match:gc(F8),order:1,parse:Gf,render:(f,m,g)=>n("br",{key:g.key})},2:{match:Jn(M8),order:1,parse:Gf,render:(f,m,g)=>n("hr",{key:g.key})},3:{match:Jn(yI),order:0,parse:f=>({lang:void 0,text:f[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(f,m,g)=>n("pre",{key:g.key},n("code",ks({},f.attrs,{className:f.lang?`lang-${f.lang}`:""}),f.text))},4:{match:Jn(gI),order:0,parse:f=>({attrs:s(f[3]||""),lang:f[2]||void 0,text:f[4],type:"3"})},5:{match:ki(j8),order:3,parse:f=>({text:f[2]}),render:(f,m,g)=>n("code",{key:g.key},f.text)},6:{match:Jn(U8),order:0,parse:f=>(a.push({footnote:f[2],identifier:f[1]}),{}),render:Wf},7:{match:xi(B8),order:1,parse:f=>({target:`#${e.slugify(f[1])}`,text:f[1]}),render:(f,m,g)=>n("a",{key:g.key,href:Ta(f.target)},n("sup",{key:g.key},f.text))},8:{match:xi(H8),order:1,parse:f=>({completed:f[1].toLowerCase()==="x"}),render:(f,m,g)=>n("input",{checked:f.completed,key:g.key,readOnly:!0,type:"checkbox"})},9:{match:Jn(e.enforceAtxHeadings?_I:vI),order:1,parse:(f,m,g)=>({children:ad(m,f[2],g),id:e.slugify(f[2]),level:f[1].length}),render:(f,m,g)=>n(`h${f.level}`,{id:f.id,key:g.key},m(f.children,g))},10:{match:Jn(wI),order:0,parse:(f,m,g)=>({children:ad(m,f[1],g),level:f[2]==="="?1:2,type:"9"})},11:{match:gc(em),order:1,parse(f,m,g){const[,y]=f[3].match(gq),v=new RegExp(`^${y}`,"gm"),w=f[3].replace(v,""),$=(A=w,Sq.some(b=>b.test(A))?Cq:ad);var A;const P=f[1].toLowerCase(),O=k8.indexOf(P)!==-1,E={attrs:s(f[2]),noInnerParse:O,tag:(O?P:f[1]).trim()};return g.inAnchor=g.inAnchor||P==="a",O?E.text=f[3]:E.children=$(m,w,g),g.inAnchor=!1,E},render:(f,m,g)=>n(f.tag,ks({key:g.key},f.attrs),f.text||m(f.children,g))},13:{match:gc(tm),order:1,parse:f=>({attrs:s(f[2]||""),tag:f[1].trim()}),render:(f,m,g)=>n(f.tag,ks({},f.attrs,{key:g.key}))},12:{match:gc(bI),order:1,parse:()=>({}),render:Wf},14:{match:ki(Eq),order:1,parse:f=>({alt:f[1],target:e0(f[2]),title:f[3]}),render:(f,m,g)=>n("img",{key:g.key,alt:f.alt||void 0,title:f.title||void 0,src:Ta(f.target)})},15:{match:xi(bq),order:3,parse:(f,m,g)=>({children:Pq(m,f[1],g),target:e0(f[2]),title:f[3]}),render:(f,m,g)=>n("a",{key:g.key,href:Ta(f.target),title:f.title},m(f.children,g))},16:{match:xi(X8),order:0,parse:f=>({children:[{text:f[1],type:"27"}],target:f[1],type:"15"})},17:{match:(f,m)=>m.inAnchor?null:xi(Y8)(f,m),order:0,parse:f=>({children:[{text:f[1],type:"27"}],target:f[1],title:void 0,type:"15"})},18:{match:xi(Q8),order:0,parse(f){let m=f[1],g=f[1];return O8.test(g)||(g="mailto:"+g),{children:[{text:m.replace("mailto:",""),type:"27"}],target:g,type:"15"}}},20:Xw(n,1),33:Xw(n,2),19:{match:Jn(L8),order:3,parse:Gf,render:()=>`
`},21:{match:Aq,order:3,parse:Kf,render:(f,m,g)=>n("p",{key:g.key},m(f.children,g))},22:{match:xi(Z8),order:0,parse:f=>(o[f[1]]={target:f[2],title:f[4]},{}),render:Wf},23:{match:ki(eq),order:0,parse:f=>({alt:f[1]||void 0,ref:f[2]}),render:(f,m,g)=>o[f.ref]?n("img",{key:g.key,alt:f.alt,src:Ta(o[f.ref].target),title:o[f.ref].title}):null},24:{match:xi(tq),order:0,parse:(f,m,g)=>({children:m(f[1],g),fallbackChildren:m(f[0].replace(rq,"\\$1"),g),ref:f[2]}),render:(f,m,g)=>o[f.ref]?n("a",{key:g.key,href:Ta(o[f.ref].target),title:o[f.ref].title},m(f.children,g)):n("span",{key:g.key},m(f.fallbackChildren,g))},25:{match:Jn(EI),order:1,parse:$q,render(f,m,g){const y=f;return n("table",{key:g.key},n("thead",null,n("tr",null,y.header.map(function(v,w){return n("th",{key:w,style:Zw(y,w)},m(v,g))}))),n("tbody",null,y.cells.map(function(v,w){return n("tr",{key:w},v.map(function($,A){return n("td",{key:A,style:Zw(y,A)},m($,g))}))})))}},27:{match:gc(pq),order:4,parse:f=>({text:f[0].replace(K8,(m,g)=>e.namedCodesToUnicode[g]?e.namedCodesToUnicode[g]:m)}),render:f=>f.text},28:{match:ki(lq),order:2,parse:(f,m,g)=>({children:m(f[2],g)}),render:(f,m,g)=>n("strong",{key:g.key},m(f.children,g))},29:{match:ki(uq),order:3,parse:(f,m,g)=>({children:m(f[2],g)}),render:(f,m,g)=>n("em",{key:g.key},m(f.children,g))},30:{match:ki(fq),order:1,parse:f=>({text:f[1],type:"27"})},31:{match:ki(dq),order:3,parse:Kf,render:(f,m,g)=>n("mark",{key:g.key},m(f.children,g))},32:{match:ki(hq),order:3,parse:Kf,render:(f,m,g)=>n("del",{key:g.key},m(f.children,g))}};e.disableParsingRawHTML===!0&&(delete c[11],delete c[13]);const l=function(f){let m=Object.keys(f);function g(y,v){let w=[],$="";for(;y;){let A=0;for(;A<m.length;){const P=m[A],O=f[P],E=O.match(y,v,$);if(E){const b=E[0];y=y.substring(b.length);const I=O.parse(E,g,v);I.type==null&&(I.type=P),w.push(I),$=b;break}A++}}return w}return m.sort(function(y,v){let w=f[y].order,$=f[v].order;return w!==$?w-$:y<v?-1:1}),function(y,v){return g(function(w){return w.replace(V8,`
`).replace(z8,"").replace(iq,"    ")}(y),v)}}(c),u=(h=function(f,m){return function(g,y,v){const w=f[g.type].render;return m?m(()=>w(g,y,v),g,y,v):w(g,y,v)}}(c,e.renderRule),function f(m,g={}){if(Array.isArray(m)){const y=g.key,v=[];let w=!1;for(let $=0;$<m.length;$++){g.key=$;const A=f(m[$],g),P=typeof A=="string";P&&w?v[v.length-1]+=A:A!==null&&v.push(A),w=P}return g.key=y,v}return h(m,f,g)});var h;const p=i(t);return a.length?n("div",null,p,n("footer",{key:"footer"},a.map(function(f){return n("div",{id:e.slugify(f.identifier),key:f.identifier},f.identifier,u(l(f.footnote,{inline:!0})))}))):p}const Hh=t=>{let{children:e="",options:r}=t,n=function(i,s){if(i==null)return{};var a,o,c={},l=Object.keys(i);for(o=0;o<l.length;o++)s.indexOf(a=l[o])>=0||(c[a]=i[a]);return c}(t,x8);return ie.cloneElement(kq(e,r),n)};var Rq=ZE;function Oq(t,e){return t==null?!0:Rq(t,e)}var Nq=Oq;const Dq=Fe(Nq);class Fq extends ie.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,r=!1)=>(n,i,s)=>{const{formData:a,onChange:o,errorSchema:c}=this.props;n===void 0&&r&&(n="");const l={...a,[e]:n};o(l,c&&c&&{...c,[e]:i},s)},this.onDropPropertyClick=e=>r=>{r.preventDefault();const{onChange:n,formData:i}=this.props,s={...i};Dq(s,e),n(s)},this.getAvailableKey=(e,r)=>{const{uiSchema:n,registry:i}=this.props,{duplicateKeySuffixSeparator:s="-"}=Ue(n,i.globalUiOptions);let a=0,o=e;for(;gr(r,o);)o=`${e}${s}${++a}`;return o},this.onKeyChange=e=>(r,n)=>{if(e===r)return;const{formData:i,onChange:s,errorSchema:a}=this.props;r=this.getAvailableKey(r,i);const o={...i},c={[e]:r},l=Object.keys(o).map(h=>({[c[h]||h]:o[h]})),u=Object.assign({},...l);this.setState({wasPropertyKeyModified:!0}),s(u,a&&a&&{...a,[r]:n})},this.handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:r,onChange:n,registry:i}=this.props,s={...r};let a;if(hn(e.additionalProperties)){a=e.additionalProperties.type;let c=e.additionalProperties;if(Vt in c){const{schemaUtils:l}=i;c=l.retrieveSchema({$ref:c[Vt]},r),a=c.type}!a&&(Nn in c||Yr in c)&&(a="object")}const o=this.getAvailableKey("newKey",s);or(s,o,this.getDefaultValue(a)),n(s)}}isRequired(e){const{schema:r}=this.props;return Array.isArray(r.required)&&r.required.indexOf(e)!==-1}getDefaultValue(e){const{registry:{translateString:r}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return r(Be.NewStringDefault)}}render(){var e,r,n,i;const{schema:s,uiSchema:a={},formData:o,errorSchema:c,idSchema:l,name:u,required:h=!1,disabled:p=!1,readonly:f=!1,hideError:m,idPrefix:g,idSeparator:y,onBlur:v,onFocus:w,registry:$,title:A}=this.props,{fields:P,formContext:O,schemaUtils:E,translateString:b,globalUiOptions:I}=$,{SchemaField:T}=P,C=E.retrieveSchema(s,o),R=Ue(a,I),{properties:x={}}=C,Q=(n=(r=(e=R.title)!==null&&e!==void 0?e:C.title)!==null&&r!==void 0?r:A)!==null&&n!==void 0?n:u,re=(i=R.description)!==null&&i!==void 0?i:C.description;let Ee;try{const le=Object.keys(x);Ee=Yz(le,R.order)}catch(le){return F.jsxs("div",{children:[F.jsx("p",{className:"config-error",style:{color:"red"},children:F.jsx(Hh,{children:b(Be.InvalidObjectField,[u||"root",le.message])})}),F.jsx("pre",{children:JSON.stringify(C)})]})}const _e=De("ObjectFieldTemplate",$,R),me={title:R.label===!1?"":Q,description:R.label===!1?void 0:re,properties:Ee.map(le=>{const Y=gr(C,[$t,le,vo]),V=Y?a.additionalProperties:a[le],W=Ue(V).widget==="hidden",U=fe(l,[le],{});return{content:F.jsx(T,{name:le,required:this.isRequired(le),schema:fe(C,[$t,le],{}),uiSchema:V,errorSchema:fe(c,le),idSchema:U,idPrefix:g,idSeparator:y,formData:fe(o,le),formContext:O,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(le),onChange:this.onPropertyChange(le,Y),onBlur:v,onFocus:w,registry:$,disabled:p,readonly:f,hideError:m,onDropPropertyClick:this.onDropPropertyClick},le),name:le,readonly:f,disabled:p,required:h,hidden:W}}),readonly:f,disabled:p,required:h,idSchema:l,uiSchema:a,errorSchema:c,schema:C,formData:o,formContext:O,registry:$};return F.jsx(_e,{...me,onAddClick:this.handleAddClick})}}const Mq={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function jq(t,e,r,n){const i=e.field,{fields:s,translateString:a}=n;if(typeof i=="function")return i;if(typeof i=="string"&&i in s)return s[i];const o=us(t),c=Array.isArray(o)?o[0]:o||"",l=t.$id;let u=Mq[c];return l&&l in s&&(u=l),!u&&(t.anyOf||t.oneOf)?()=>null:u in s?s[u]:()=>{const h=De("UnsupportedFieldTemplate",n,e);return F.jsx(h,{schema:t,idSchema:r,reason:a(Be.UnknownFieldType,[String(t.type)]),registry:n})}}function Lq(t){const{schema:e,idSchema:r,uiSchema:n,formData:i,errorSchema:s,idPrefix:a,idSeparator:o,name:c,onChange:l,onKeyChange:u,onDropPropertyClick:h,required:p,registry:f,wasPropertyKeyModified:m=!1}=t,{formContext:g,schemaUtils:y,globalUiOptions:v}=f,w=Ue(n,v),$=De("FieldTemplate",f,w),A=De("DescriptionFieldTemplate",f,w),P=De("FieldHelpTemplate",f,w),O=De("FieldErrorTemplate",f,w),E=y.retrieveSchema(e,i),b=r[Gi],I=Oo(y.toIdSchema(E,b,i,a,o),r),T=ie.useCallback((nt,It,dr)=>l(nt,It,dr||b),[b,l]),C=jq(E,w,I,f),R=!!(t.disabled||w.disabled),x=!!(t.readonly||w.readonly||t.schema.readOnly||E.readOnly),Q=w.hideError,re=Q===void 0?t.hideError:!!Q,Ee=!!(t.autofocus||w.autofocus);if(Object.keys(E).length===0)return null;const _e=y.getDisplayLabel(E,n,v),{__errors:me,...le}=s||{},Y=Cd(n,["ui:classNames","classNames","ui:style"]);Oc in Y&&(Y[Oc]=Cd(Y[Oc],["classNames","style"]));const V=F.jsx(C,{...t,onChange:T,idSchema:I,schema:E,uiSchema:Y,disabled:R,readonly:x,hideError:re,autofocus:Ee,errorSchema:le,formContext:g,rawErrors:me}),W=I[Gi];let U;m?U=c:U=vo in E?c:w.title||t.schema.title||E.title||t.title||c;const N=w.description||t.schema.description||E.description||"",M=w.enableMarkdownInDescription?F.jsx(Hh,{children:N}):N,K=w.help,Z=w.widget==="hidden",ae=["form-group","field",`field-${us(E)}`];!re&&me&&me.length>0&&ae.push("field-error has-error has-danger"),n!=null&&n.classNames&&ae.push(n.classNames),w.classNames&&ae.push(w.classNames);const Ie=F.jsx(P,{help:K,idSchema:I,schema:E,uiSchema:n,hasErrors:!re&&me&&me.length>0,registry:f}),Te=re||(E.anyOf||E.oneOf)&&!y.isSelect(E)?void 0:F.jsx(O,{errors:me,errorSchema:s,idSchema:I,schema:E,uiSchema:n,registry:f}),Me={description:F.jsx(A,{id:ca(W),description:M,schema:E,uiSchema:n,registry:f}),rawDescription:N,help:Ie,rawHelp:typeof K=="string"?K:void 0,errors:Te,rawErrors:re?void 0:me,id:W,label:U,hidden:Z,onChange:l,onKeyChange:u,onDropPropertyClick:h,required:p,disabled:R,readonly:x,hideError:re,displayLabel:_e,classNames:ae.join(" ").trim(),style:w.style,formContext:g,formData:i,schema:E,uiSchema:n,registry:f},$e=f.fields.AnyOfField,Qe=f.fields.OneOfField,ut=(n==null?void 0:n["ui:field"])&&(n==null?void 0:n["ui:fieldReplacesAnyOrOneOf"])===!0;return F.jsx($,{...Me,children:F.jsxs(F.Fragment,{children:[V,E.anyOf&&!ut&&!y.isSelect(E)&&F.jsx($e,{name:c,disabled:R,readonly:x,hideError:re,errorSchema:s,formData:i,formContext:g,idPrefix:a,idSchema:I,idSeparator:o,onBlur:t.onBlur,onChange:t.onChange,onFocus:t.onFocus,options:E.anyOf.map(nt=>y.retrieveSchema(hn(nt)?nt:{},i)),registry:f,schema:E,uiSchema:n}),E.oneOf&&!ut&&!y.isSelect(E)&&F.jsx(Qe,{name:c,disabled:R,readonly:x,hideError:re,errorSchema:s,formData:i,formContext:g,idPrefix:a,idSchema:I,idSeparator:o,onBlur:t.onBlur,onChange:t.onChange,onFocus:t.onFocus,options:E.oneOf.map(nt=>y.retrieveSchema(hn(nt)?nt:{},i)),registry:f,schema:E,uiSchema:n})]})})}class Vq extends ie.Component{shouldComponentUpdate(e){return!$r(this.props,e)}render(){return F.jsx(Lq,{...this.props})}}function Uq(t){var e;const{schema:r,name:n,uiSchema:i,idSchema:s,formData:a,required:o,disabled:c=!1,readonly:l=!1,autofocus:u=!1,onChange:h,onBlur:p,onFocus:f,registry:m,rawErrors:g,hideError:y}=t,{title:v,format:w}=r,{widgets:$,formContext:A,schemaUtils:P,globalUiOptions:O}=m,E=P.isSelect(r)?Nd(r):void 0;let b=E?"select":"text";w&&Kz(r,w,$)&&(b=w);const{widget:I=b,placeholder:T="",title:C,...R}=Ue(i),x=P.getDisplayLabel(r,i,O),Q=(e=C??v)!==null&&e!==void 0?e:n,re=oi(r,I,$);return F.jsx(re,{options:{...R,enumOptions:E},schema:r,uiSchema:i,id:s.$id,name:n,label:Q,hideLabel:!x,hideError:y,value:a,onChange:h,onBlur:p,onFocus:f,required:o,disabled:c,readonly:l,formContext:A,autofocus:u,registry:m,placeholder:T,rawErrors:g})}function Bq(t){const{formData:e,onChange:r}=t;return ie.useEffect(()=>{e===void 0&&r(null)},[e,r]),null}function zq(){return{AnyOfField:Hw,ArrayField:T8,BooleanField:$8,NumberField:C8,ObjectField:Fq,OneOfField:Hw,SchemaField:Vq,StringField:Uq,NullField:Bq}}function qq(t){const{idSchema:e,description:r,registry:n,schema:i,uiSchema:s}=t,a=Ue(s,n.globalUiOptions),{label:o=!0}=a;if(!r||!o)return null;const c=De("DescriptionFieldTemplate",n,a);return F.jsx(c,{id:ca(e),description:r,schema:i,uiSchema:s,registry:n})}function Hq(t){const{children:e,className:r,disabled:n,hasToolbar:i,hasMoveDown:s,hasMoveUp:a,hasRemove:o,hasCopy:c,index:l,onCopyIndexClick:u,onDropIndexClick:h,onReorderClick:p,readonly:f,registry:m,uiSchema:g}=t,{CopyButton:y,MoveDownButton:v,MoveUpButton:w,RemoveButton:$}=m.templates.ButtonTemplates,A={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return F.jsxs("div",{className:r,children:[F.jsx("div",{className:i?"col-xs-9":"col-xs-12",children:e}),i&&F.jsx("div",{className:"col-xs-3 array-item-toolbox",children:F.jsxs("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(a||s)&&F.jsx(w,{style:A,disabled:n||f||!a,onClick:p(l,l-1),uiSchema:g,registry:m}),(a||s)&&F.jsx(v,{style:A,disabled:n||f||!s,onClick:p(l,l+1),uiSchema:g,registry:m}),c&&F.jsx(y,{style:A,disabled:n||f,onClick:u(l),uiSchema:g,registry:m}),o&&F.jsx($,{style:A,disabled:n||f,onClick:h(l),uiSchema:g,registry:m})]})})]})}function Kq(t){const{canAdd:e,className:r,disabled:n,idSchema:i,uiSchema:s,items:a,onAddClick:o,readonly:c,registry:l,required:u,schema:h,title:p}=t,f=Ue(s),m=De("ArrayFieldDescriptionTemplate",l,f),g=De("ArrayFieldItemTemplate",l,f),y=De("ArrayFieldTitleTemplate",l,f),{ButtonTemplates:{AddButton:v}}=l.templates;return F.jsxs("fieldset",{className:r,id:i.$id,children:[F.jsx(y,{idSchema:i,title:f.title||p,required:u,schema:h,uiSchema:s,registry:l}),F.jsx(m,{idSchema:i,description:f.description||h.description,schema:h,uiSchema:s,registry:l}),F.jsx("div",{className:"row array-item-list",children:a&&a.map(({key:w,...$})=>F.jsx(g,{...$},w))}),e&&F.jsx(v,{className:"array-item-add",onClick:o,disabled:n||c,uiSchema:s,registry:l})]})}function Gq(t){const{idSchema:e,title:r,schema:n,uiSchema:i,required:s,registry:a}=t,o=Ue(i,a.globalUiOptions),{label:c=!0}=o;if(!r||!c)return null;const l=De("TitleFieldTemplate",a,o);return F.jsx(l,{id:Gg(e),title:r,required:s,schema:n,uiSchema:i,registry:a})}function Wq(t){const{id:e,name:r,value:n,readonly:i,disabled:s,autofocus:a,onBlur:o,onFocus:c,onChange:l,onChangeOverride:u,options:h,schema:p,uiSchema:f,formContext:m,registry:g,rawErrors:y,type:v,hideLabel:w,hideError:$,...A}=t;if(!e)throw console.log("No id for",t),new Error(`no id for props ${JSON.stringify(t)}`);const P={...A,...lI(p,v,h)};let O;P.type==="number"||P.type==="integer"?O=n||n===0?n:"":O=n??"";const E=ie.useCallback(({target:{value:T}})=>l(T===""?h.emptyValue:T),[l,h]),b=ie.useCallback(({target:{value:T}})=>o(e,T),[o,e]),I=ie.useCallback(({target:{value:T}})=>c(e,T),[c,e]);return F.jsxs(F.Fragment,{children:[F.jsx("input",{id:e,name:e,className:"form-control",readOnly:i,disabled:s,autoFocus:a,value:O,...P,list:p.examples?Zc(e):void 0,onChange:u||E,onBlur:b,onFocus:I,"aria-describedby":Ur(e,!!p.examples)}),Array.isArray(p.examples)&&F.jsx("datalist",{id:Zc(e),children:p.examples.concat(p.default&&!p.examples.includes(p.default)?[p.default]:[]).map(T=>F.jsx("option",{value:T},T))},`datalist_${e}`)]})}function Yq({uiSchema:t}){const{submitText:e,norender:r,props:n={}}=uI(t);return r?null:F.jsx("div",{children:F.jsx("button",{type:"submit",...n,className:`btn btn-info ${n.className||""}`,children:e})})}function Pl(t){const{iconType:e="default",icon:r,className:n,uiSchema:i,registry:s,...a}=t;return F.jsx("button",{type:"button",className:`btn btn-${e} ${n}`,...a,children:F.jsx("i",{className:`glyphicon glyphicon-${r}`})})}function Qq(t){const{registry:{translateString:e}}=t;return F.jsx(Pl,{title:e(Be.CopyButton),className:"array-item-copy",...t,icon:"copy"})}function Xq(t){const{registry:{translateString:e}}=t;return F.jsx(Pl,{title:e(Be.MoveDownButton),className:"array-item-move-down",...t,icon:"arrow-down"})}function Jq(t){const{registry:{translateString:e}}=t;return F.jsx(Pl,{title:e(Be.MoveUpButton),className:"array-item-move-up",...t,icon:"arrow-up"})}function Zq(t){const{registry:{translateString:e}}=t;return F.jsx(Pl,{title:e(Be.RemoveButton),className:"array-item-remove",...t,iconType:"danger",icon:"remove"})}function eH({className:t,onClick:e,disabled:r,registry:n}){const{translateString:i}=n;return F.jsx("div",{className:"row",children:F.jsx("p",{className:`col-xs-3 col-xs-offset-9 text-right ${t}`,children:F.jsx(Pl,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:i(Be.AddButton),onClick:e,disabled:r,registry:n})})})}function tH(){return{SubmitButton:Yq,AddButton:eH,CopyButton:Qq,MoveDownButton:Xq,MoveUpButton:Jq,RemoveButton:Zq}}function rH(t){const{id:e,description:r}=t;return r?typeof r=="string"?F.jsx("p",{id:e,className:"field-description",children:r}):F.jsx("div",{id:e,className:"field-description",children:r}):null}function nH({errors:t,registry:e}){const{translateString:r}=e;return F.jsxs("div",{className:"panel panel-danger errors",children:[F.jsx("div",{className:"panel-heading",children:F.jsx("h3",{className:"panel-title",children:r(Be.ErrorsLabel)})}),F.jsx("ul",{className:"list-group",children:t.map((n,i)=>F.jsx("li",{className:"list-group-item text-danger",children:n.stack},i))})]})}const iH="*";function NI(t){const{label:e,required:r,id:n}=t;return e?F.jsxs("label",{className:"control-label",htmlFor:n,children:[e,r&&F.jsx("span",{className:"required",children:iH})]}):null}function sH(t){const{id:e,label:r,children:n,errors:i,help:s,description:a,hidden:o,required:c,displayLabel:l,registry:u,uiSchema:h}=t,p=Ue(h),f=De("WrapIfAdditionalTemplate",u,p);return o?F.jsx("div",{className:"hidden",children:n}):F.jsxs(f,{...t,children:[l&&F.jsx(NI,{label:r,required:c,id:e}),l&&a?a:null,n,i,s]})}function aH(t){const{errors:e=[],idSchema:r}=t;if(e.length===0)return null;const n=Hg(r);return F.jsx("div",{children:F.jsx("ul",{id:n,className:"error-detail bs-callout bs-callout-info",children:e.filter(i=>!!i).map((i,s)=>F.jsx("li",{className:"text-danger",children:i},s))})})}function oH(t){const{idSchema:e,help:r}=t;if(!r)return null;const n=Kg(e);return typeof r=="string"?F.jsx("p",{id:n,className:"help-block",children:r}):F.jsx("div",{id:n,className:"help-block",children:r})}function cH(t){const{description:e,disabled:r,formData:n,idSchema:i,onAddClick:s,properties:a,readonly:o,registry:c,required:l,schema:u,title:h,uiSchema:p}=t,f=Ue(p),m=De("TitleFieldTemplate",c,f),g=De("DescriptionFieldTemplate",c,f),{ButtonTemplates:{AddButton:y}}=c.templates;return F.jsxs("fieldset",{id:i.$id,children:[h&&F.jsx(m,{id:Gg(i),title:h,required:l,schema:u,uiSchema:p,registry:c}),e&&F.jsx(g,{id:ca(i),description:e,schema:u,uiSchema:p,registry:c}),a.map(v=>v.content),mE(u,p,n)&&F.jsx(y,{className:"object-property-expand",onClick:s(u),disabled:r||o,uiSchema:p,registry:c})]})}const lH="*";function uH(t){const{id:e,title:r,required:n}=t;return F.jsxs("legend",{id:e,children:[r,n&&F.jsx("span",{className:"required",children:lH})]})}function dH(t){const{schema:e,idSchema:r,reason:n,registry:i}=t,{translateString:s}=i;let a=Be.UnsupportedField;const o=[];return r&&r.$id&&(a=Be.UnsupportedFieldWithId,o.push(r.$id)),n&&(a=a===Be.UnsupportedField?Be.UnsupportedFieldWithReason:Be.UnsupportedFieldWithIdAndReason,o.push(n)),F.jsxs("div",{className:"unsupported-field",children:[F.jsx("p",{children:F.jsx(Hh,{children:s(a,o)})}),e&&F.jsx("pre",{children:JSON.stringify(e,null,2)})]})}function hH(t){const{id:e,classNames:r,style:n,disabled:i,label:s,onKeyChange:a,onDropPropertyClick:o,readonly:c,required:l,schema:u,children:h,uiSchema:p,registry:f}=t,{templates:m,translateString:g}=f,{RemoveButton:y}=m.ButtonTemplates,v=g(Be.KeyLabel,[s]);return vo in u?F.jsx("div",{className:r,style:n,children:F.jsxs("div",{className:"row",children:[F.jsx("div",{className:"col-xs-5 form-additional",children:F.jsxs("div",{className:"form-group",children:[F.jsx(NI,{label:v,required:l,id:`${e}-key`}),F.jsx("input",{className:"form-control",type:"text",id:`${e}-key`,onBlur:$=>a($.target.value),defaultValue:s})]})}),F.jsx("div",{className:"form-additional form-group col-xs-5",children:h}),F.jsx("div",{className:"col-xs-2",children:F.jsx(y,{className:"array-item-remove btn-block",style:{border:"0"},disabled:i||c,onClick:o(s),uiSchema:p,registry:f})})]})}):F.jsx("div",{className:r,style:n,children:h})}function fH(){return{ArrayFieldDescriptionTemplate:qq,ArrayFieldItemTemplate:Hq,ArrayFieldTemplate:Kq,ArrayFieldTitleTemplate:Gq,ButtonTemplates:tH(),BaseInputTemplate:Wq,DescriptionFieldTemplate:rH,ErrorListTemplate:nH,FieldTemplate:sH,FieldErrorTemplate:aH,FieldHelpTemplate:oH,ObjectFieldTemplate:cH,TitleFieldTemplate:uH,UnsupportedFieldTemplate:dH,WrapIfAdditionalTemplate:hH}}function pH(t,e){const r=[];for(let n=t;n<=e;n++)r.push({value:n,label:Li(n,2)});return r}function mH(t){return Object.values(t).every(e=>e!==-1)}function gH({type:t,range:e,value:r,select:n,rootId:i,name:s,disabled:a,readonly:o,autofocus:c,registry:l,onBlur:u,onFocus:h}){const p=i+"_"+t,{SelectWidget:f}=l.widgets;return F.jsx(f,{schema:{type:"integer"},id:p,name:s,className:"form-control",options:{enumOptions:pH(e[0],e[1])},placeholder:t,value:r,disabled:a,readonly:o,autofocus:c,onChange:m=>n(t,m),onBlur:u,onFocus:h,registry:l,label:"","aria-describedby":Ur(i)})}function yH({time:t=!1,disabled:e=!1,readonly:r=!1,autofocus:n=!1,options:i,id:s,name:a,registry:o,onBlur:c,onFocus:l,onChange:u,value:h}){const{translateString:p}=o,[f,m]=ie.useState(h),[g,y]=ie.useReducer((A,P)=>({...A,...P}),Hf(h,t));ie.useEffect(()=>{const A=zw(g,t);mH(g)&&A!==h?u(A):f!==h&&(m(h),y(Hf(h,t)))},[t,h,u,g,f]);const v=ie.useCallback((A,P)=>{y({[A]:P})},[]),w=ie.useCallback(A=>{if(A.preventDefault(),e||r)return;const P=Hf(new Date().toJSON(),t);u(zw(P,t))},[e,r,t]),$=ie.useCallback(A=>{A.preventDefault(),!(e||r)&&u(void 0)},[e,r,u]);return F.jsxs("ul",{className:"list-inline",children:[jz(g,t,i.yearsRange,i.format).map((A,P)=>F.jsx("li",{className:"list-inline-item",children:F.jsx(gH,{rootId:s,name:a,select:v,...A,disabled:e,readonly:r,registry:o,onBlur:c,onFocus:l,autofocus:n&&P===0})},P)),(i.hideNowButton!=="undefined"?!i.hideNowButton:!0)&&F.jsx("li",{className:"list-inline-item",children:F.jsx("a",{href:"#",className:"btn btn-info btn-now",onClick:w,children:p(Be.NowLabel)})}),(i.hideClearButton!=="undefined"?!i.hideClearButton:!0)&&F.jsx("li",{className:"list-inline-item",children:F.jsx("a",{href:"#",className:"btn btn-warning btn-clear",onClick:$,children:p(Be.ClearLabel)})})]})}function vH({time:t=!0,...e}){const{AltDateWidget:r}=e.registry.widgets;return F.jsx(r,{time:t,...e})}function _H({schema:t,uiSchema:e,options:r,id:n,value:i,disabled:s,readonly:a,label:o,hideLabel:c,autofocus:l=!1,onBlur:u,onFocus:h,onChange:p,registry:f}){var m;const g=De("DescriptionFieldTemplate",f,r),y=Nc(t),v=ie.useCallback(P=>p(P.target.checked),[p]),w=ie.useCallback(P=>u(n,P.target.checked),[u,n]),$=ie.useCallback(P=>h(n,P.target.checked),[h,n]),A=(m=r.description)!==null&&m!==void 0?m:t.description;return F.jsxs("div",{className:`checkbox ${s||a?"disabled":""}`,children:[!c&&!!A&&F.jsx(g,{id:ca(n),description:A,schema:t,uiSchema:e,registry:f}),F.jsxs("label",{children:[F.jsx("input",{type:"checkbox",id:n,name:n,checked:typeof i>"u"?!1:i,required:y,disabled:s||a,autoFocus:l,onChange:v,onBlur:w,onFocus:$,"aria-describedby":Ur(n)}),Wg(F.jsx("span",{children:o}),c)]})]})}function wH({id:t,disabled:e,options:{inline:r=!1,enumOptions:n,enumDisabled:i,emptyValue:s},value:a,autofocus:o=!1,readonly:c,onChange:l,onBlur:u,onFocus:h}){const p=Array.isArray(a)?a:[a],f=ie.useCallback(({target:{value:g}})=>u(t,qt(g,n,s)),[u,t]),m=ie.useCallback(({target:{value:g}})=>h(t,qt(g,n,s)),[h,t]);return F.jsx("div",{className:"checkboxes",id:t,children:Array.isArray(n)&&n.map((g,y)=>{const v=$l(g.value,p),w=Array.isArray(i)&&i.indexOf(g.value)!==-1,$=e||w||c?"disabled":"",A=O=>{O.target.checked?l(cI(y,p,n)):l(aI(y,p,n))},P=F.jsxs("span",{children:[F.jsx("input",{type:"checkbox",id:zh(t,y),name:t,checked:v,value:String(y),disabled:e||w||c,autoFocus:o&&y===0,onChange:A,onBlur:f,onFocus:m,"aria-describedby":Ur(t)}),F.jsx("span",{children:g.label})]});return r?F.jsx("label",{className:`checkbox-inline ${$}`,children:P},y):F.jsx("div",{className:`checkbox ${$}`,children:F.jsx("label",{children:P})},y)})})}function bH(t){const{disabled:e,readonly:r,options:n,registry:i}=t,s=De("BaseInputTemplate",i,n);return F.jsx(s,{type:"color",...t,disabled:e||r})}function EH(t){const{onChange:e,options:r,registry:n}=t,i=De("BaseInputTemplate",n,r),s=ie.useCallback(a=>e(a||void 0),[e]);return F.jsx(i,{type:"date",...t,onChange:s})}function SH(t){const{onChange:e,value:r,options:n,registry:i}=t,s=De("BaseInputTemplate",i,n);return F.jsx(s,{type:"datetime-local",...t,value:o8(r),onChange:a=>e(Gz(a))})}function IH(t){const{options:e,registry:r}=t,n=De("BaseInputTemplate",r,e);return F.jsx(n,{type:"email",...t})}function TH(t,e){return t===null?null:t.replace(";base64",`;name=${encodeURIComponent(e)};base64`)}function $H(t){const{name:e,size:r,type:n}=t;return new Promise((i,s)=>{const a=new window.FileReader;a.onerror=s,a.onload=o=>{var c;typeof((c=o.target)===null||c===void 0?void 0:c.result)=="string"?i({dataURL:TH(o.target.result,e),name:e,size:r,type:n}):i({dataURL:null,name:e,size:r,type:n})},a.readAsDataURL(t)})}function AH(t){return Promise.all(Array.from(t).map($H))}function PH({fileInfo:t,registry:e}){const{translateString:r}=e,{dataURL:n,type:i,name:s}=t;return n?["image/jpeg","image/png"].includes(i)?F.jsx("img",{src:n,style:{maxWidth:"100%"},className:"file-preview"}):F.jsxs(F.Fragment,{children:[" ",F.jsx("a",{download:`preview-${s}`,href:n,className:"file-download",children:r(Be.PreviewLabel)})]}):null}function CH({filesInfo:t,registry:e,preview:r,onRemove:n,options:i}){if(t.length===0)return null;const{translateString:s}=e,{RemoveButton:a}=De("ButtonTemplates",e,i);return F.jsx("ul",{className:"file-info",children:t.map((o,c)=>{const{name:l,size:u,type:h}=o,p=()=>n(c);return F.jsxs("li",{children:[F.jsx(Hh,{children:s(Be.FilesInfo,[l,h,String(u)])}),r&&F.jsx(PH,{fileInfo:o,registry:e}),F.jsx(a,{onClick:p,registry:e})]},c)})})}function xH(t){return t.reduce((e,r)=>{if(!r)return e;try{const{blob:n,name:i}=kz(r);return[...e,{dataURL:r,name:i,size:n.size,type:n.type}]}catch{return e}},[])}function kH(t){const{disabled:e,readonly:r,required:n,multiple:i,onChange:s,value:a,options:o,registry:c}=t,l=De("BaseInputTemplate",c,o),u=ie.useCallback(f=>{f.target.files&&AH(f.target.files).then(m=>{const g=m.map(y=>y.dataURL);s(i?a.concat(g[0]):g[0])})},[i,a,s]),h=ie.useMemo(()=>xH(Array.isArray(a)?a:[a]),[a]),p=ie.useCallback(f=>{if(i){const m=a.filter((g,y)=>y!==f);s(m)}else s(void 0)},[i,a,s]);return F.jsxs("div",{children:[F.jsx(l,{...t,disabled:e||r,type:"file",required:a?!1:n,onChangeOverride:u,value:"",accept:o.accept?String(o.accept):void 0}),F.jsx(CH,{filesInfo:h,onRemove:p,registry:c,preview:o.filePreview,options:o})]})}function RH({id:t,value:e}){return F.jsx("input",{type:"hidden",id:t,name:t,value:typeof e>"u"?"":e})}function OH(t){const{options:e,registry:r}=t,n=De("BaseInputTemplate",r,e);return F.jsx(n,{type:"password",...t})}function NH({options:t,value:e,required:r,disabled:n,readonly:i,autofocus:s=!1,onBlur:a,onFocus:o,onChange:c,id:l}){const{enumOptions:u,enumDisabled:h,inline:p,emptyValue:f}=t,m=ie.useCallback(({target:{value:y}})=>a(l,qt(y,u,f)),[a,l]),g=ie.useCallback(({target:{value:y}})=>o(l,qt(y,u,f)),[o,l]);return F.jsx("div",{className:"field-radio-group",id:l,children:Array.isArray(u)&&u.map((y,v)=>{const w=$l(y.value,e),$=Array.isArray(h)&&h.indexOf(y.value)!==-1,A=n||$||i?"disabled":"",P=()=>c(y.value),O=F.jsxs("span",{children:[F.jsx("input",{type:"radio",id:zh(l,v),checked:w,name:l,required:r,value:String(v),disabled:n||$||i,autoFocus:s&&v===0,onChange:P,onBlur:m,onFocus:g,"aria-describedby":Ur(l)}),F.jsx("span",{children:y.label})]});return p?F.jsx("label",{className:`radio-inline ${A}`,children:O},v):F.jsx("div",{className:`radio ${A}`,children:F.jsx("label",{children:O})},v)})})}function DH(t){const{value:e,registry:{templates:{BaseInputTemplate:r}}}=t;return F.jsxs("div",{className:"field-range-wrapper",children:[F.jsx(r,{type:"range",...t}),F.jsx("span",{className:"range-view",children:e})]})}function Qf(t,e){return e?Array.from(t.target.options).slice().filter(r=>r.selected).map(r=>r.value):t.target.value}function FH({schema:t,id:e,options:r,value:n,required:i,disabled:s,readonly:a,multiple:o=!1,autofocus:c=!1,onChange:l,onBlur:u,onFocus:h,placeholder:p}){const{enumOptions:f,enumDisabled:m,emptyValue:g}=r,y=o?[]:"",v=ie.useCallback(P=>{const O=Qf(P,o);return h(e,qt(O,f,g))},[h,e,t,o,r]),w=ie.useCallback(P=>{const O=Qf(P,o);return u(e,qt(O,f,g))},[u,e,t,o,r]),$=ie.useCallback(P=>{const O=Qf(P,o);return l(qt(O,f,g))},[l,t,o,r]),A=oI(n,f,o);return F.jsxs("select",{id:e,name:e,multiple:o,className:"form-control",value:typeof A>"u"?y:A,required:i,disabled:s||a,autoFocus:c,onBlur:w,onFocus:v,onChange:$,"aria-describedby":Ur(e),children:[!o&&t.default===void 0&&F.jsx("option",{value:"",children:p}),Array.isArray(f)&&f.map(({value:P,label:O},E)=>{const b=m&&m.indexOf(P)!==-1;return F.jsx("option",{value:String(E),disabled:b,children:O},E)})]})}function DI({id:t,options:e={},placeholder:r,value:n,required:i,disabled:s,readonly:a,autofocus:o=!1,onChange:c,onBlur:l,onFocus:u}){const h=ie.useCallback(({target:{value:m}})=>c(m===""?e.emptyValue:m),[c,e.emptyValue]),p=ie.useCallback(({target:{value:m}})=>l(t,m),[l,t]),f=ie.useCallback(({target:{value:m}})=>u(t,m),[t,u]);return F.jsx("textarea",{id:t,name:t,className:"form-control",value:n||"",placeholder:r,required:i,disabled:s,readOnly:a,autoFocus:o,rows:e.rows,onBlur:p,onFocus:f,onChange:h,"aria-describedby":Ur(t)})}DI.defaultProps={autofocus:!1,options:{}};function MH(t){const{options:e,registry:r}=t,n=De("BaseInputTemplate",r,e);return F.jsx(n,{...t})}function jH(t){const{onChange:e,options:r,registry:n}=t,i=De("BaseInputTemplate",n,r),s=ie.useCallback(a=>e(a?`${a}:00`:void 0),[e]);return F.jsx(i,{type:"time",...t,onChange:s})}function LH(t){const{options:e,registry:r}=t,n=De("BaseInputTemplate",r,e);return F.jsx(n,{type:"url",...t})}function VH(t){const{options:e,registry:r}=t,n=De("BaseInputTemplate",r,e);return F.jsx(n,{type:"number",...t})}function UH(){return{AltDateWidget:yH,AltDateTimeWidget:vH,CheckboxWidget:_H,CheckboxesWidget:wH,ColorWidget:bH,DateWidget:EH,DateTimeWidget:SH,EmailWidget:IH,FileWidget:kH,HiddenWidget:RH,PasswordWidget:OH,RadioWidget:NH,RangeWidget:DH,SelectWidget:FH,TextWidget:MH,TextareaWidget:DI,TimeWidget:jH,UpDownWidget:VH,URLWidget:LH}}function BH(){return{fields:zq(),templates:fH(),widgets:UH(),rootSchema:{},formContext:{},translateString:Oz}}let zH=class extends ie.Component{constructor(e){if(super(e),this.getUsedFormData=(r,n)=>{if(n.length===0&&typeof r!="object")return r;const i=S8(r,n);return Array.isArray(r)?Object.keys(i).map(s=>i[s]):i},this.getFieldNames=(r,n)=>{const i=(s,a=[],o=[[]])=>(Object.keys(s).forEach(c=>{if(typeof s[c]=="object"){const l=o.map(u=>[...u,c]);s[c][ig]&&s[c][td]!==""?a.push(s[c][td]):i(s[c],a,l)}else c===td&&s[c]!==""&&o.forEach(l=>{const u=fe(n,l);(typeof u!="object"||ls(u)||Array.isArray(u)&&u.every(h=>typeof h!="object"))&&a.push(l)})}),a);return i(r)},this.onChange=(r,n,i)=>{const{extraErrors:s,omitExtraData:a,liveOmit:o,noValidate:c,liveValidate:l,onChange:u}=this.props,{schemaUtils:h,schema:p,retrievedSchema:f}=this.state;(Et(r)||Array.isArray(r))&&(r=this.getStateFromProps(this.props,r,f).formData);const m=!c&&l;let g={formData:r,schema:p},y=r,v;if(a===!0&&o===!0){v=h.retrieveSchema(p,r);const w=h.toPathSchema(v,"",r),$=this.getFieldNames(w,r);y=this.getUsedFormData(r,$),g={formData:y}}if(m){const w=this.validate(y,p,h,f);let $=w.errors,A=w.errorSchema;const P=$,O=A;if(s){const E=sd(w,s);A=E.errorSchema,$=E.errors}g={formData:y,errors:$,errorSchema:A,schemaValidationErrors:P,schemaValidationErrorSchema:O}}else if(!c&&n){const w=s?Oo(n,s,"preventDuplicates"):n;g={formData:y,errorSchema:w,errors:el(w)}}v&&(g.retrievedSchema=v),this.setState(g,()=>u&&u({...this.state,...g},i))},this.reset=()=>{const{onChange:r}=this.props,s={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(s,()=>r&&r({...this.state,...s}))},this.onBlur=(r,n)=>{const{onBlur:i}=this.props;i&&i(r,n)},this.onFocus=(r,n)=>{const{onFocus:i}=this.props;i&&i(r,n)},this.onSubmit=r=>{if(r.preventDefault(),r.target!==r.currentTarget)return;r.persist();const{omitExtraData:n,extraErrors:i,noValidate:s,onSubmit:a}=this.props;let{formData:o}=this.state;const{schema:c,schemaUtils:l}=this.state;if(n===!0){const u=l.retrieveSchema(c,o),h=l.toPathSchema(u,"",o),p=this.getFieldNames(h,o);o=this.getUsedFormData(o,p)}if(s||this.validateForm()){const u=i||{},h=i?el(i):[];this.setState({formData:o,errors:h,errorSchema:u,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{a&&a({...this.state,formData:o,status:"submitted"},r)})}},this.submit=()=>{if(this.formElement.current){const r=new CustomEvent("submit",{cancelable:!0});r.preventDefault(),this.formElement.current.dispatchEvent(r),this.formElement.current.requestSubmit()}},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!$r(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=ie.createRef()}getSnapshotBeforeUpdate(e,r){if(!$r(this.props,e)){const n=!$r(e.schema,this.props.schema),i=!$r(e.formData,this.props.formData),s=this.getStateFromProps(this.props,this.props.formData,n||i?void 0:this.state.retrievedSchema,n),a=!$r(s,r);return{nextState:s,shouldUpdate:a}}return{shouldUpdate:!1}}componentDidUpdate(e,r,n){if(n.shouldUpdate){const{nextState:i}=n;!$r(i.formData,this.props.formData)&&!$r(i.formData,r.formData)&&this.props.onChange&&this.props.onChange(i),this.setState(i)}}getStateFromProps(e,r,n,i=!1){const s=this.state||{},a="schema"in e?e.schema:this.props.schema,o=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},c=typeof r<"u",l="liveValidate"in e?e.liveValidate:this.props.liveValidate,u=c&&!e.noValidate&&l,h=a,p="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior;let f=s.schemaUtils;(!f||f.doesSchemaUtilsDiffer(e.validator,h,p))&&(f=xz(e.validator,h,p));const m=f.getDefaultFormState(a,r),g=n??f.retrieveSchema(a,m),y=()=>e.noValidate||i?{errors:[],errorSchema:{}}:e.liveValidate?{errors:s.errors||[],errorSchema:s.errorSchema||{}}:{errors:s.schemaValidationErrors||[],errorSchema:s.schemaValidationErrorSchema||{}};let v,w,$=s.schemaValidationErrors,A=s.schemaValidationErrorSchema;if(u){const E=this.validate(m,a,f,g);v=E.errors,w=E.errorSchema,$=v,A=w}else{const E=y();v=E.errors,w=E.errorSchema}if(e.extraErrors){const E=sd({errorSchema:w,errors:v},e.extraErrors);w=E.errorSchema,v=E.errors}const P=f.toIdSchema(g,o["ui:rootFieldId"],m,e.idPrefix,e.idSeparator);return{schemaUtils:f,schema:a,uiSchema:o,idSchema:P,formData:m,edit:c,errors:v,errorSchema:w,schemaValidationErrors:$,schemaValidationErrorSchema:A,retrievedSchema:g}}shouldComponentUpdate(e,r){return Qz(this,e,r)}validate(e,r=this.props.schema,n,i){const s=n||this.state.schemaUtils,{customValidate:a,transformErrors:o,uiSchema:c}=this.props,l=i??s.retrieveSchema(r,e);return s.getValidator().validateFormData(e,l,a,o,c)}renderErrors(e){const{errors:r,errorSchema:n,schema:i,uiSchema:s}=this.state,{formContext:a}=this.props,o=Ue(s),c=De("ErrorListTemplate",e,o);return r&&r.length?F.jsx(c,{errors:r,errorSchema:n||{},schema:i,uiSchema:s,formContext:a,registry:e}):null}getRegistry(){var e;const{translateString:r,uiSchema:n={}}=this.props,{schemaUtils:i}=this.state,{fields:s,templates:a,widgets:o,formContext:c,translateString:l}=BH();return{fields:{...s,...this.props.fields},templates:{...a,...this.props.templates,ButtonTemplates:{...a.ButtonTemplates,...(e=this.props.templates)===null||e===void 0?void 0:e.ButtonTemplates}},widgets:{...o,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||c,schemaUtils:i,translateString:r||l,globalUiOptions:n[VC]}}focusOnError(e){const{idPrefix:r="root",idSeparator:n="_"}=this.props,{property:i}=e,s=fI(i);s[0]===""?s[0]=r:s.unshift(r);const a=s.join(n);let o=this.formElement.current.elements[a];o||(o=this.formElement.current.querySelector(`input[id^=${a}`)),o&&o.length&&(o=o[0]),o&&o.focus()}validateForm(){const{extraErrors:e,extraErrorsBlockSubmit:r,focusOnFirstError:n,onError:i}=this.props,{formData:s,errors:a}=this.state,o=this.validate(s);let c=o.errors,l=o.errorSchema;const u=c,h=l,p=c.length>0||e&&r;if(p){if(e){const f=sd(o,e);l=f.errorSchema,c=f.errors}n&&(typeof n=="function"?n(c[0]):this.focusOnError(c[0])),this.setState({errors:c,errorSchema:l,schemaValidationErrors:u,schemaValidationErrorSchema:h},()=>{i?i(c):console.error("Form validation failed",c)})}else a.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!p}render(){const{children:e,id:r,idPrefix:n,idSeparator:i,className:s="",tagName:a,name:o,method:c,target:l,action:u,autoComplete:h,enctype:p,acceptcharset:f,acceptCharset:m,noHtml5Validate:g=!1,disabled:y=!1,readonly:v=!1,formContext:w,showErrorList:$="top",_internalFormWrapper:A}=this.props,{schema:P,uiSchema:O,formData:E,errorSchema:b,idSchema:I}=this.state,T=this.getRegistry(),{SchemaField:C}=T.fields,{SubmitButton:R}=T.templates.ButtonTemplates,x=A?a:void 0,Q=A||a||"form";let{[Id]:re={}}=Ue(O);y&&(re={...re,props:{...re.props,disabled:!0}});const Ee={[Oc]:{[Id]:re}};return F.jsxs(Q,{className:s||"rjsf",id:r,name:o,method:c,target:l,action:u,autoComplete:h,encType:p,acceptCharset:m||f,noValidate:g,onSubmit:this.onSubmit,as:x,ref:this.formElement,children:[$==="top"&&this.renderErrors(T),F.jsx(C,{name:"",schema:P,uiSchema:O,errorSchema:b,idSchema:I,idPrefix:n,idSeparator:i,formContext:w,formData:E,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:T,disabled:y,readonly:v}),e||F.jsx(R,{uiSchema:Ee,registry:T}),$==="bottom"&&this.renderErrors(T)]})}};function qH(t){return ie.forwardRef(({fields:e,widgets:r,templates:n,...i},s)=>{var a;return e={...t==null?void 0:t.fields,...e},r={...t==null?void 0:t.widgets,...r},n={...t==null?void 0:t.templates,...n,ButtonTemplates:{...(a=t==null?void 0:t.templates)===null||a===void 0?void 0:a.ButtonTemplates,...n==null?void 0:n.ButtonTemplates}},F.jsx(zH,{...t,...i,fields:e,widgets:r,templates:n,ref:s})})}function ze(){return ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ze.apply(null,arguments)}function lt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var FI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,n(o)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(FI);var HH=FI.exports;const yt=Fe(HH);var Jg=ee.createContext({});Jg.Consumer;Jg.Provider;function Ot(t,e){var r=ie.useContext(Jg);return t||r[e]||e}function KH(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];n.apply(this,o),i.apply(this,o)}},null)}var GH=["as","disabled","onKeyDown"];function t0(t){return!t||t.trim()==="#"}var MI=ee.forwardRef(function(t,e){var r=t.as,n=r===void 0?"a":r,i=t.disabled,s=t.onKeyDown,a=lt(t,GH),o=function(u){var h=a.href,p=a.onClick;if((i||t0(h))&&u.preventDefault(),i){u.stopPropagation();return}p&&p(u)},c=function(u){u.key===" "&&(u.preventDefault(),o(u))};return t0(a.href)&&(a.role=a.role||"button",a.href=a.href||"#"),i&&(a.tabIndex=-1,a["aria-disabled"]=!0),ee.createElement(n,ze({ref:e},a,{onClick:o,onKeyDown:KH(c,s)}))});MI.displayName="SafeAnchor";var WH=["bsPrefix","variant","size","active","className","block","type","as"],YH={variant:"primary",active:!1,disabled:!1},Cl=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.variant,i=t.size,s=t.active,a=t.className,o=t.block,c=t.type,l=t.as,u=lt(t,WH),h=Ot(r,"btn"),p=yt(a,h,s&&"active",n&&h+"-"+n,o&&h+"-block",i&&h+"-"+i);if(u.href)return ee.createElement(MI,ze({},u,{as:l,ref:e,className:yt(p,u.disabled&&"disabled")}));e&&(u.ref=e),c?u.type=c:l||(u.type="button");var f=l||"button";return ee.createElement(f,ze({},u,{className:p}))});Cl.displayName="Button";Cl.defaultProps=YH;var QH=[{id:"fa",name:"Font Awesome",projectUrl:"https://fontawesome.com/",license:"CC BY 4.0 License",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"},{id:"io",name:"Ionicons 4",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"io5",name:"Ionicons 5",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"md",name:"Material Design icons",projectUrl:"http://google.github.io/material-design-icons/",license:"Apache License Version 2.0",licenseUrl:"https://github.com/google/material-design-icons/blob/master/LICENSE"},{id:"ti",name:"Typicons",projectUrl:"http://s-ings.com/typicons/",license:"CC BY-SA 3.0",licenseUrl:"https://creativecommons.org/licenses/by-sa/3.0/"},{id:"go",name:"Github Octicons icons",projectUrl:"https://octicons.github.com/",license:"MIT",licenseUrl:"https://github.com/primer/octicons/blob/master/LICENSE"},{id:"fi",name:"Feather",projectUrl:"https://feathericons.com/",license:"MIT",licenseUrl:"https://github.com/feathericons/feather/blob/master/LICENSE"},{id:"gi",name:"Game Icons",projectUrl:"https://game-icons.net/",license:"CC BY 3.0",licenseUrl:"https://creativecommons.org/licenses/by/3.0/"},{id:"wi",name:"Weather Icons",projectUrl:"https://erikflowers.github.io/weather-icons/",license:"SIL OFL 1.1",licenseUrl:"http://scripts.sil.org/OFL"},{id:"di",name:"Devicons",projectUrl:"https://vorillaz.github.io/devicons/",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ai",name:"Ant Design Icons",projectUrl:"https://github.com/ant-design/ant-design-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"bs",name:"Bootstrap Icons",projectUrl:"https://github.com/twbs/icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ri",name:"Remix Icon",projectUrl:"https://github.com/Remix-Design/RemixIcon",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"fc",name:"Flat Color Icons",projectUrl:"https://github.com/icons8/flat-color-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"gr",name:"Grommet-Icons",projectUrl:"https://github.com/grommet/grommet-icons",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"hi",name:"Heroicons",projectUrl:"https://github.com/refactoringui/heroicons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"si",name:"Simple Icons",projectUrl:"https://simpleicons.org/",license:"CC0 1.0 Universal",licenseUrl:"https://creativecommons.org/publicdomain/zero/1.0/"},{id:"im",name:"IcoMoon Free",projectUrl:"https://github.com/Keyamoon/IcoMoon-Free",license:"CC BY 4.0 License"},{id:"bi",name:"BoxIcons",projectUrl:"https://github.com/atisawd/boxicons",license:"CC BY 4.0 License"},{id:"cg",name:"css.gg",projectUrl:"https://github.com/astrit/css.gg",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"vsc",name:"VS Code Icons",projectUrl:"https://github.com/microsoft/vscode-codicons",license:"CC BY 4.0",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"}],Zg={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rm=ee.createContext&&ee.createContext(Zg),rs=function(){return rs=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rs.apply(this,arguments)},XH=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function jI(t){return t&&t.map(function(e,r){return ee.createElement(e.tag,rs({key:r},e.attr),jI(e.child))})}function JH(t){return function(e){return ee.createElement(LI,rs({attr:rs({},t.attr)},e),jI(t.child))}}function LI(t){var e=function(r){var n=t.attr,i=t.size,s=t.title,a=XH(t,["attr","size","title"]),o=i||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),ee.createElement("svg",rs({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:rs(rs({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&ee.createElement("title",null,s),t.children)};return rm!==void 0?ee.createElement(rm.Consumer,null,function(r){return e(r)}):e(Zg)}const ZH=Object.freeze(Object.defineProperty({__proto__:null,DefaultContext:Zg,GenIcon:JH,IconBase:LI,IconContext:rm,IconsManifest:QH},Symbol.toStringTag,{value:"Module"})),xl=ng(ZH);var e7=xl.GenIcon,t7=function(e){return e7({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 3.5a.5.5 0 01.5.5v4a.5.5 0 01-.5.5H4a.5.5 0 010-1h3.5V4a.5.5 0 01.5-.5z",clipRule:"evenodd"}},{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8a.5.5 0 01.5-.5h4a.5.5 0 010 1H8.5V12a.5.5 0 01-1 0V8z",clipRule:"evenodd"}}]})(e)};function r7({uiSchema:t,registry:e,...r}){const{translateString:n}=e;return F.jsx(Cl,{...r,style:{width:"100%"},className:`ml-1 ${r.className}`,title:n(Be.AddItemButton),children:F.jsx(t7,{})})}var n7=["bsPrefix","className","noGutters","as"],i7=["xl","lg","md","sm","xs"],s7={noGutters:!1},ds=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.className,i=t.noGutters,s=t.as,a=s===void 0?"div":s,o=lt(t,n7),c=Ot(r,"row"),l=c+"-cols",u=[];return i7.forEach(function(h){var p=o[h];delete o[h];var f;p!=null&&typeof p=="object"?f=p.cols:f=p;var m=h!=="xs"?"-"+h:"";f!=null&&u.push(""+l+m+"-"+f)}),ee.createElement(a,ze({ref:e},o,{className:yt.apply(void 0,[n,c,i&&"no-gutters"].concat(u))}))});ds.displayName="Row";ds.defaultProps=s7;var a7=["bsPrefix","className","as"],o7=["xl","lg","md","sm","xs"],Xr=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.className,i=t.as,s=i===void 0?"div":i,a=lt(t,a7),o=Ot(r,"col"),c=[],l=[];return o7.forEach(function(u){var h=a[u];delete a[u];var p,f,m;if(typeof h=="object"&&h!=null){var g=h.span;p=g===void 0?!0:g,f=h.offset,m=h.order}else p=h;var y=u!=="xs"?"-"+u:"";p&&c.push(p===!0?""+o+y:""+o+y+"-"+p),m!=null&&l.push("order"+y+"-"+m),f!=null&&l.push("offset"+y+"-"+f)}),c.length||c.push(o),ee.createElement(s,ze({},a,{ref:e,className:yt.apply(void 0,[n].concat(c,l))}))});Xr.displayName="Col";function c7(t){const{children:e,disabled:r,hasToolbar:n,hasCopy:i,hasMoveDown:s,hasMoveUp:a,hasRemove:o,index:c,onCopyIndexClick:l,onDropIndexClick:u,onReorderClick:h,readonly:p,registry:f,uiSchema:m}=t,{CopyButton:g,MoveDownButton:y,MoveUpButton:v,RemoveButton:w}=f.templates.ButtonTemplates,$={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return F.jsx("div",{children:F.jsxs(ds,{className:"mb-2  d-flex align-items-center",children:[F.jsx(Xr,{xs:"9",lg:"9",children:e}),F.jsx(Xr,{xs:"3",lg:"3",className:"py-4",children:n&&F.jsxs("div",{className:"d-flex flex-row",children:[(a||s)&&F.jsx("div",{className:"m-0 p-0",children:F.jsx(v,{className:"array-item-move-up",style:$,disabled:r||p||!a,onClick:h(c,c-1),uiSchema:m,registry:f})}),(a||s)&&F.jsx("div",{className:"m-0 p-0",children:F.jsx(y,{style:$,disabled:r||p||!s,onClick:h(c,c+1),uiSchema:m,registry:f})}),i&&F.jsx("div",{className:"m-0 p-0",children:F.jsx(g,{style:$,disabled:r||p,onClick:l(c),uiSchema:m,registry:f})}),o&&F.jsx("div",{className:"m-0 p-0",children:F.jsx(w,{style:$,disabled:r||p,onClick:u(c),uiSchema:m,registry:f})})]})})]})})}var l7=["bsPrefix","fluid","as","className"],u7={fluid:!1},tl=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.fluid,i=t.as,s=i===void 0?"div":i,a=t.className,o=lt(t,l7),c=Ot(r,"container"),l=typeof n=="string"?"-"+n:"-fluid";return ee.createElement(s,ze({ref:e},o,{className:yt(a,n?""+c+l:c)}))});tl.displayName="Container";tl.defaultProps=u7;function d7(t){const{canAdd:e,disabled:r,idSchema:n,uiSchema:i,items:s,onAddClick:a,readonly:o,registry:c,required:l,schema:u,title:h}=t,p=Ue(i),f=De("ArrayFieldDescriptionTemplate",c,p),m=De("ArrayFieldItemTemplate",c,p),g=De("ArrayFieldTitleTemplate",c,p),{ButtonTemplates:{AddButton:y}}=c.templates;return F.jsx("div",{children:F.jsx(ds,{className:"p-0 m-0",children:F.jsxs(Xr,{className:"p-0 m-0",children:[F.jsx(g,{idSchema:n,title:p.title||h,schema:u,uiSchema:i,required:l,registry:c}),F.jsx(f,{idSchema:n,description:p.description||u.description,schema:u,uiSchema:i,registry:c}),F.jsxs(tl,{fluid:!0,className:"p-0 m-0",children:[s&&s.map(({key:v,...w})=>F.jsx(m,{...w},v)),e&&F.jsx(tl,{className:"",children:F.jsxs(ds,{className:"mt-2",children:[F.jsx(Xr,{xs:9}),F.jsx(Xr,{xs:3,className:"py-4 col-lg-3 col-3",children:F.jsx(y,{className:"array-item-add",onClick:a,disabled:r||o,uiSchema:i,registry:c})})]})})]},`array-item-list-${n.$id}`)]})})})}var r0={exports:{}},nm={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){function i(a,o,c,l,u,h){var p=l||"<<anonymous>>",f=h||c;if(o[c]==null)return a?new Error("Required "+u+" `"+f+"` was not specified "+("in `"+p+"`.")):null;for(var m=arguments.length,g=Array(m>6?m-6:0),y=6;y<m;y++)g[y-6]=arguments[y];return n.apply(void 0,[o,c,p,u,f].concat(g))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(nm,nm.exports);var h7=nm.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=h7,n=i(r);function i(a){return a&&a.__esModule?a:{default:a}}function s(){for(var a=arguments.length,o=Array(a),c=0;c<a;c++)o[c]=arguments[c];function l(){for(var u=arguments.length,h=Array(u),p=0;p<u;p++)h[p]=arguments[p];var f=null;return o.forEach(function(m){if(f==null){var g=m.apply(void 0,h);g!=null&&(f=g)}}),f}return(0,n.default)(l)}t.exports=e.default})(r0,r0.exports);var f7=["as","className","type","tooltip"],p7={type:Of.string,tooltip:Of.bool,as:Of.elementType},kl=ee.forwardRef(function(t,e){var r=t.as,n=r===void 0?"div":r,i=t.className,s=t.type,a=s===void 0?"valid":s,o=t.tooltip,c=o===void 0?!1:o,l=lt(t,f7);return ee.createElement(n,ze({},l,{ref:e,className:yt(i,a+"-"+(c?"tooltip":"feedback"))}))});kl.displayName="Feedback";kl.propTypes=p7;var gn=ee.createContext({controlId:void 0}),m7=["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"],ey=ee.forwardRef(function(t,e){var r=t.id,n=t.bsPrefix,i=t.bsCustomPrefix,s=t.className,a=t.type,o=a===void 0?"checkbox":a,c=t.isValid,l=c===void 0?!1:c,u=t.isInvalid,h=u===void 0?!1:u,p=t.isStatic,f=t.as,m=f===void 0?"input":f,g=lt(t,m7),y=ie.useContext(gn),v=y.controlId,w=y.custom,$=w?[i,"custom-control-input"]:[n,"form-check-input"],A=$[0],P=$[1];return n=Ot(A,P),ee.createElement(m,ze({},g,{ref:e,type:o,id:r||v,className:yt(s,n,l&&"is-valid",h&&"is-invalid",p&&"position-static")}))});ey.displayName="FormCheckInput";var g7=["bsPrefix","bsCustomPrefix","className","htmlFor"],ty=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.bsCustomPrefix,i=t.className,s=t.htmlFor,a=lt(t,g7),o=ie.useContext(gn),c=o.controlId,l=o.custom,u=l?[n,"custom-control-label"]:[r,"form-check-label"],h=u[0],p=u[1];return r=Ot(h,p),ee.createElement("label",ze({},a,{ref:e,htmlFor:s||c,className:yt(i,r)}))});ty.displayName="FormCheckLabel";var y7=["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"],la=ee.forwardRef(function(t,e){var r=t.id,n=t.bsPrefix,i=t.bsCustomPrefix,s=t.inline,a=s===void 0?!1:s,o=t.disabled,c=o===void 0?!1:o,l=t.isValid,u=l===void 0?!1:l,h=t.isInvalid,p=h===void 0?!1:h,f=t.feedbackTooltip,m=f===void 0?!1:f,g=t.feedback,y=t.className,v=t.style,w=t.title,$=w===void 0?"":w,A=t.type,P=A===void 0?"checkbox":A,O=t.label,E=t.children,b=t.custom,I=t.as,T=I===void 0?"input":I,C=lt(t,y7),R=P==="switch"?!0:b,x=R?[i,"custom-control"]:[n,"form-check"],Q=x[0],re=x[1];n=Ot(Q,re);var Ee=ie.useContext(gn),_e=Ee.controlId,me=ie.useMemo(function(){return{controlId:r||_e,custom:R}},[_e,R,r]),le=R||O!=null&&O!==!1&&!E,Y=ee.createElement(ey,ze({},C,{type:P==="switch"?"checkbox":P,ref:e,isValid:u,isInvalid:p,isStatic:!le,disabled:c,as:T}));return ee.createElement(gn.Provider,{value:me},ee.createElement("div",{style:v,className:yt(y,n,R&&"custom-"+P,a&&n+"-inline")},E||ee.createElement(ee.Fragment,null,Y,le&&ee.createElement(ty,{title:$},O),(u||p)&&ee.createElement(kl,{type:u?"valid":"invalid",tooltip:m},g))))});la.displayName="FormCheck";la.Input=ey;la.Label=ty;var v7=["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"],ry=ee.forwardRef(function(t,e){var r=t.id,n=t.bsPrefix,i=t.bsCustomPrefix,s=t.className,a=t.isValid,o=t.isInvalid,c=t.lang,l=t.as,u=l===void 0?"input":l,h=lt(t,v7),p=ie.useContext(gn),f=p.controlId,m=p.custom,g="file",y=m?[i,"custom-file-input"]:[n,"form-control-file"],v=y[0],w=y[1];return n=Ot(v,w),ee.createElement(u,ze({},h,{ref:e,id:r||f,type:g,lang:c,className:yt(s,n,a&&"is-valid",o&&"is-invalid")}))});ry.displayName="FormFileInput";var _7=["bsPrefix","bsCustomPrefix","className","htmlFor"],Dd=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.bsCustomPrefix,i=t.className,s=t.htmlFor,a=lt(t,_7),o=ie.useContext(gn),c=o.controlId,l=o.custom,u=l?[n,"custom-file-label"]:[r,"form-file-label"],h=u[0],p=u[1];return r=Ot(h,p),ee.createElement("label",ze({},a,{ref:e,htmlFor:s||c,className:yt(i,r),"data-browse":a["data-browse"]}))});Dd.displayName="FormFileLabel";var w7=["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"],Kh=ee.forwardRef(function(t,e){var r=t.id,n=t.bsPrefix,i=t.bsCustomPrefix,s=t.disabled,a=s===void 0?!1:s,o=t.isValid,c=o===void 0?!1:o,l=t.isInvalid,u=l===void 0?!1:l,h=t.feedbackTooltip,p=h===void 0?!1:h,f=t.feedback,m=t.className,g=t.style,y=t.label,v=t.children,w=t.custom,$=t.lang,A=t["data-browse"],P=t.as,O=P===void 0?"div":P,E=t.inputAs,b=E===void 0?"input":E,I=lt(t,w7),T=w?[i,"custom"]:[n,"form-file"],C=T[0],R=T[1];n=Ot(C,R);var x="file",Q=ie.useContext(gn),re=Q.controlId,Ee=ie.useMemo(function(){return{controlId:r||re,custom:w}},[re,w,r]),_e=y!=null&&y!==!1&&!v,me=ee.createElement(ry,ze({},I,{ref:e,isValid:c,isInvalid:u,disabled:a,as:b,lang:$}));return ee.createElement(gn.Provider,{value:Ee},ee.createElement(O,{style:g,className:yt(m,n,w&&"custom-"+x)},v||ee.createElement(ee.Fragment,null,w?ee.createElement(ee.Fragment,null,me,_e&&ee.createElement(Dd,{"data-browse":A},y)):ee.createElement(ee.Fragment,null,_e&&ee.createElement(Dd,null,y),me),(c||u)&&ee.createElement(kl,{type:c?"valid":"invalid",tooltip:p},f))))});Kh.displayName="FormFile";Kh.Input=ry;Kh.Label=Dd;var b7=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],VI=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.bsCustomPrefix,i=t.type,s=t.size,a=t.htmlSize,o=t.id,c=t.className,l=t.isValid,u=l===void 0?!1:l,h=t.isInvalid,p=h===void 0?!1:h,f=t.plaintext,m=t.readOnly,g=t.custom,y=t.as,v=y===void 0?"input":y,w=lt(t,b7),$=ie.useContext(gn),A=$.controlId,P=g?[n,"custom"]:[r,"form-control"],O=P[0],E=P[1];r=Ot(O,E);var b;if(f){var I;b=(I={},I[r+"-plaintext"]=!0,I)}else if(i==="file"){var T;b=(T={},T[r+"-file"]=!0,T)}else if(i==="range"){var C;b=(C={},C[r+"-range"]=!0,C)}else if(v==="select"&&g){var R;b=(R={},R[r+"-select"]=!0,R[r+"-select-"+s]=s,R)}else{var x;b=(x={},x[r]=!0,x[r+"-"+s]=s,x)}return ee.createElement(v,ze({},w,{type:i,size:a,ref:e,readOnly:m,id:o||A,className:yt(c,b,u&&"is-valid",p&&"is-invalid")}))});VI.displayName="FormControl";const UI=Object.assign(VI,{Feedback:kl});var E7=["bsPrefix","className","children","controlId","as"],BI=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.className,i=t.children,s=t.controlId,a=t.as,o=a===void 0?"div":a,c=lt(t,E7);r=Ot(r,"form-group");var l=ie.useMemo(function(){return{controlId:s}},[s]);return ee.createElement(gn.Provider,{value:l},ee.createElement(o,ze({},c,{ref:e,className:yt(n,r)}),i))});BI.displayName="FormGroup";var S7=["as","bsPrefix","column","srOnly","className","htmlFor"],I7={column:!1,srOnly:!1},ny=ee.forwardRef(function(t,e){var r=t.as,n=r===void 0?"label":r,i=t.bsPrefix,s=t.column,a=t.srOnly,o=t.className,c=t.htmlFor,l=lt(t,S7),u=ie.useContext(gn),h=u.controlId;i=Ot(i,"form-label");var p="col-form-label";typeof s=="string"&&(p=p+" "+p+"-"+s);var f=yt(o,i,a&&"sr-only",s&&p);return c=c||h,s?ee.createElement(Xr,ze({ref:e,as:"label",className:f,htmlFor:c},l)):ee.createElement(n,ze({ref:e,className:f,htmlFor:c},l))});ny.displayName="FormLabel";ny.defaultProps=I7;var T7=["bsPrefix","className","as","muted"],zI=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.className,i=t.as,s=i===void 0?"small":i,a=t.muted,o=lt(t,T7);return r=Ot(r,"form-text"),ee.createElement(s,ze({},o,{ref:e,className:yt(n,r,a&&"text-muted")}))});zI.displayName="FormText";var Gh=ee.forwardRef(function(t,e){return ee.createElement(la,ze({},t,{ref:e,type:"switch"}))});Gh.displayName="Switch";Gh.Input=la.Input;Gh.Label=la.Label;var $7=/-(.)/g;function A7(t){return t.replace($7,function(e,r){return r.toUpperCase()})}var P7=["className","bsPrefix","as"],C7=function(e){return e[0].toUpperCase()+A7(e).slice(1)};function nn(t,e){var r=e===void 0?{}:e,n=r.displayName,i=n===void 0?C7(t):n,s=r.Component,a=r.defaultProps,o=ee.forwardRef(function(c,l){var u=c.className,h=c.bsPrefix,p=c.as,f=p===void 0?s||"div":p,m=lt(c,P7),g=Ot(h,t);return ee.createElement(f,ze({ref:l,className:yt(u,g)},m))});return o.defaultProps=a,o.displayName=i,o}var x7=["bsPrefix","inline","className","validated","as"],k7=nn("form-row"),R7={inline:!1},gt=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.inline,i=t.className,s=t.validated,a=t.as,o=a===void 0?"form":a,c=lt(t,x7);return r=Ot(r,"form"),ee.createElement(o,ze({},c,{ref:e,className:yt(i,s&&"was-validated",n&&r+"-inline")}))});gt.displayName="Form";gt.defaultProps=R7;gt.Row=k7;gt.Group=BI;gt.Control=UI;gt.Check=la;gt.File=Kh;gt.Switch=Gh;gt.Label=ny;gt.Text=zI;function O7({id:t,placeholder:e,required:r,readonly:n,disabled:i,type:s,value:a,onChange:o,onChangeOverride:c,onBlur:l,onFocus:u,autofocus:h,options:p,schema:f,rawErrors:m=[],children:g,extraProps:y}){const v={...y,...lI(f,s,p)},w=({target:{value:P}})=>o(P===""?p.emptyValue:P),$=({target:{value:P}})=>l(t,P),A=({target:{value:P}})=>u(t,P);return F.jsxs(F.Fragment,{children:[F.jsx(gt.Control,{id:t,name:t,placeholder:e,autoFocus:h,required:r,disabled:i,readOnly:n,className:m.length>0?"is-invalid":"",list:f.examples?Zc(t):void 0,...v,value:a||a===0?a:"",onChange:c||w,onBlur:$,onFocus:A,"aria-describedby":Ur(t,!!f.examples)}),g,Array.isArray(f.examples)?F.jsx("datalist",{id:Zc(t),children:f.examples.concat(f.default&&!f.examples.includes(f.default)?[f.default]:[]).map(P=>F.jsx("option",{value:P},P))}):null]})}function N7({id:t,description:e}){return e?F.jsx("div",{children:F.jsx("div",{id:t,className:"mb-3",children:e})}):null}const qI=function(t){return ee.forwardRef(function(e,r){return ee.createElement("div",ze({},e,{ref:r,className:yt(e.className,t)}))})};var HI=ee.createContext(null);HI.displayName="CardContext";var D7=["bsPrefix","className","variant","as"],F7={variant:null},iy=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.className,i=t.variant,s=t.as,a=s===void 0?"img":s,o=lt(t,D7),c=Ot(r,"card-img");return ee.createElement(a,ze({ref:e,className:yt(i?c+"-"+i:c,n)},o))});iy.displayName="CardImg";iy.defaultProps=F7;var M7=["bsPrefix","className","bg","text","border","body","children","as"],j7=qI("h5"),L7=qI("h6"),KI=nn("card-body"),V7=nn("card-title",{Component:j7}),U7=nn("card-subtitle",{Component:L7}),B7=nn("card-link",{Component:"a"}),z7=nn("card-text",{Component:"p"}),q7=nn("card-header"),H7=nn("card-footer"),K7=nn("card-img-overlay"),G7={body:!1},Cr=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.className,i=t.bg,s=t.text,a=t.border,o=t.body,c=t.children,l=t.as,u=l===void 0?"div":l,h=lt(t,M7),p=Ot(r,"card"),f=ie.useMemo(function(){return{cardHeaderBsPrefix:p+"-header"}},[p]);return ee.createElement(HI.Provider,{value:f},ee.createElement(u,ze({ref:e},h,{className:yt(n,p,i&&"bg-"+i,s&&"text-"+s,a&&"border-"+a)}),o?ee.createElement(KI,null,c):c))});Cr.displayName="Card";Cr.defaultProps=G7;Cr.Img=iy;Cr.Title=V7;Cr.Subtitle=U7;Cr.Body=KI;Cr.Link=B7;Cr.Text=z7;Cr.Header=q7;Cr.Footer=H7;Cr.ImgOverlay=K7;function n0(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function W7(t){var e=Y7(t,"string");return typeof e=="symbol"?e:String(e)}function Y7(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Q7(t,e,r){var n=ie.useRef(t!==void 0),i=ie.useState(e),s=i[0],a=i[1],o=t!==void 0,c=n.current;return n.current=o,!o&&c&&s!==e&&a(e),[o?t:s,ie.useCallback(function(l){for(var u=arguments.length,h=new Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];r&&r.apply(void 0,[l].concat(h)),a(l)},[r])]}function X7(t,e){return Object.keys(e).reduce(function(r,n){var i,s=r,a=s[n0(n)],o=s[n],c=lt(s,[n0(n),n].map(W7)),l=e[n],u=Q7(o,a,t[l]),h=u[0],p=u[1];return ze({},c,(i={},i[n]=h,i[l]=p,i))},t)}var J7=Function.prototype.bind.call(Function.prototype.call,[].slice);function Z7(t,e){return J7(t.querySelectorAll(e))}function eK(){const[,t]=ie.useReducer(e=>!e,!1);return t}const i0=t=>!t||typeof t=="function"?t:e=>{t.current=e};function tK(t,e){const r=i0(t),n=i0(e);return i=>{r&&r(i),n&&n(i)}}function rK(t,e){return ie.useMemo(()=>tK(t,e),[t,e])}var sy=ee.createContext(null);sy.displayName="NavContext";var im=ee.createContext(null),GI=function(e,r){return r===void 0&&(r=null),e!=null?String(e):r||null},nK=ee.createContext(null),iK=["as","onSelect","activeKey","role","onKeyDown"],s0=function(){},sK=ee.forwardRef(function(t,e){var r=t.as,n=r===void 0?"ul":r,i=t.onSelect,s=t.activeKey,a=t.role,o=t.onKeyDown,c=lt(t,iK),l=eK(),u=ie.useRef(!1),h=ie.useContext(im),p=ie.useContext(nK),f,m;p&&(a=a||"tablist",s=p.activeKey,f=p.getControlledId,m=p.getControllerId);var g=ie.useRef(null),y=function(P){var O=g.current;if(!O)return null;var E=Z7(O,"[data-rb-event-key]:not(.disabled)"),b=O.querySelector(".active");if(!b)return null;var I=E.indexOf(b);if(I===-1)return null;var T=I+P;return T>=E.length&&(T=0),T<0&&(T=E.length-1),E[T]},v=function(P,O){P!=null&&(i&&i(P,O),h&&h(P,O))},w=function(P){o&&o(P);var O;switch(P.key){case"ArrowLeft":case"ArrowUp":O=y(-1);break;case"ArrowRight":case"ArrowDown":O=y(1);break;default:return}O&&(P.preventDefault(),v(O.dataset.rbEventKey,P),u.current=!0,l())};ie.useEffect(function(){if(g.current&&u.current){var A=g.current.querySelector("[data-rb-event-key].active");A&&A.focus()}u.current=!1});var $=rK(e,g);return ee.createElement(im.Provider,{value:v},ee.createElement(sy.Provider,{value:{role:a,activeKey:GI(s),getControlledId:f||s0,getControllerId:m||s0}},ee.createElement(n,ze({},c,{onKeyDown:w,ref:$,role:a}))))});function aK(t){const e=ie.useRef(t);return ie.useEffect(()=>{e.current=t},[t]),e}function oK(t){const e=aK(t);return ie.useCallback(function(...r){return e.current&&e.current(...r)},[e])}var cK=["active","className","eventKey","onSelect","onClick","as"],lK={disabled:!1},WI=ee.forwardRef(function(t,e){var r=t.active,n=t.className,i=t.eventKey,s=t.onSelect,a=t.onClick,o=t.as,c=lt(t,cK),l=GI(i,c.href),u=ie.useContext(im),h=ie.useContext(sy),p=r;if(h){!c.role&&h.role==="tablist"&&(c.role="tab");var f=h.getControllerId(l),m=h.getControlledId(l);c["data-rb-event-key"]=l,c.id=f||c.id,c["aria-controls"]=m||c["aria-controls"],p=r==null&&l!=null?h.activeKey===l:r}c.role==="tab"&&(c.disabled&&(c.tabIndex=-1,c["aria-disabled"]=!0),c["aria-selected"]=p);var g=oK(function(y){a&&a(y),l!=null&&(s&&s(l,y),u&&u(l,y))});return ee.createElement(o,ze({},c,{ref:e,onClick:g,className:yt(n,p&&"active")}))});WI.defaultProps=lK;var uK=["bsPrefix","active","disabled","className","variant","action","as","onClick"],dK={variant:void 0,active:!1,disabled:!1},ay=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.active,i=t.disabled,s=t.className,a=t.variant,o=t.action,c=t.as,l=t.onClick,u=lt(t,uK);r=Ot(r,"list-group-item");var h=ie.useCallback(function(p){if(i){p.preventDefault(),p.stopPropagation();return}l&&l(p)},[i,l]);return i&&u.tabIndex===void 0&&(u.tabIndex=-1,u["aria-disabled"]=!0),ee.createElement(WI,ze({ref:e},u,{as:c||(o?u.href?"a":"button":"div"),onClick:h,className:yt(s,r,n&&"active",i&&"disabled",a&&r+"-"+a,o&&r+"-action")}))});ay.defaultProps=dK;ay.displayName="ListGroupItem";var hK=["className","bsPrefix","variant","horizontal","as"],fK={variant:void 0,horizontal:void 0},zs=ee.forwardRef(function(t,e){var r=X7(t,{activeKey:"onSelect"}),n=r.className,i=r.bsPrefix,s=r.variant,a=r.horizontal,o=r.as,c=o===void 0?"div":o,l=lt(r,hK),u=Ot(i,"list-group"),h;return a?h=a===!0?"horizontal":"horizontal-"+a:h=null,ee.createElement(sK,ze({ref:e},l,{as:c,className:yt(n,u,s&&u+"-"+s,h&&u+"-"+h)}))});zs.defaultProps=fK;zs.displayName="ListGroup";zs.Item=ay;function pK({errors:t,registry:e}){const{translateString:r}=e;return F.jsxs(Cr,{border:"danger",className:"mb-4",children:[F.jsx(Cr.Header,{className:"alert-danger",children:r(Be.ErrorsLabel)}),F.jsx(Cr.Body,{className:"p-0",children:F.jsx(zs,{children:t.map((n,i)=>F.jsx(zs.Item,{className:"border-0",children:F.jsx("span",{children:n.stack})},i))})})]})}var mK=xl.GenIcon,gK=function(e){return mK({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M352 115h90c3.3 0 6-2.7 6-6 0-8.2-3.7-16-10-21.3l-77.1-64.2c-4.9-4.1-14.2-7.4-20.6-7.4-4.1 0-7.4 3.3-7.4 7.4V96c.1 10.5 8.6 19 19.1 19z"}},{tag:"path",attr:{d:"M307 96V16H176c-17.6 0-32 14.4-32 32v336c0 17.6 14.4 32 32 32h240c17.6 0 32-14.4 32-32V141h-96c-24.8 0-45-20.2-45-45z"}},{tag:"path",attr:{d:"M116 412V80H96c-17.6 0-32 14.4-32 32v352c0 17.6 14.4 32 32 32h256c17.6 0 32-14.4 32-32v-20H148c-17.6 0-32-14.4-32-32z"}}]})(e)},yK=xl.GenIcon,vK=function(e){return yK({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M368.5 240h-225c-8.8 0-16 7.2-16 16 0 4.4 1.8 8.4 4.7 11.3 2.9 2.9 6.9 4.7 11.3 4.7h225c8.8 0 16-7.2 16-16s-7.2-16-16-16z"}}]})(e)},_K=xl.GenIcon,wK=function(e){return _K({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M868 545.5L536.1 163a31.96 31.96 0 0 0-48.3 0L156 545.5a7.97 7.97 0 0 0 6 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]})(e)},bK=xl.GenIcon,EK=function(e){return bK({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0 0 48.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]})(e)};function Wh(t){const{icon:e,iconType:r,className:n,uiSchema:i,registry:s,...a}=t;return F.jsx(Cl,{block:r==="block",...a,variant:t.variant||"light",size:"sm",children:e})}function SK(t){const{registry:{translateString:e}}=t;return F.jsx(Wh,{title:e(Be.CopyButton),...t,icon:F.jsx(gK,{})})}function IK(t){const{registry:{translateString:e}}=t;return F.jsx(Wh,{title:e(Be.MoveDownButton),...t,icon:F.jsx(EK,{})})}function TK(t){const{registry:{translateString:e}}=t;return F.jsx(Wh,{title:e(Be.MoveUpButton),...t,icon:F.jsx(wK,{})})}function $K(t){const{registry:{translateString:e}}=t;return F.jsx(Wh,{title:e(Be.RemoveButton),...t,variant:"danger",icon:F.jsx(vK,{})})}function AK(t){const{errors:e=[],idSchema:r}=t;if(e.length===0)return null;const n=Hg(r);return F.jsx(zs,{as:"ul",id:n,children:e.map((i,s)=>F.jsx(zs.Item,{as:"li",className:"border-0 m-0 p-0",children:F.jsx("small",{className:"m-0 text-danger",children:i})},s))})}function PK(t){const{idSchema:e,help:r,hasErrors:n}=t;if(!r)return null;const i=Kg(e);return F.jsx(gt.Text,{className:n?"text-danger":"text-muted",id:i,children:r})}function CK({id:t,children:e,displayLabel:r,rawErrors:n=[],errors:i,help:s,description:a,rawDescription:o,classNames:c,style:l,disabled:u,label:h,hidden:p,onDropPropertyClick:f,onKeyChange:m,readonly:g,required:y,schema:v,uiSchema:w,registry:$}){const A=Ue(w),P=De("WrapIfAdditionalTemplate",$,A);return p?F.jsx("div",{className:"hidden",children:e}):F.jsx(P,{classNames:c,style:l,disabled:u,id:t,label:h,onDropPropertyClick:f,onKeyChange:m,readonly:g,required:y,schema:v,uiSchema:w,registry:$,children:F.jsxs(gt.Group,{children:[r&&F.jsxs(gt.Label,{htmlFor:t,className:n.length>0?"text-danger":"",children:[h,y?"*":null]}),e,r&&o&&F.jsx(gt.Text,{className:n.length>0?"text-danger":"text-muted",children:a}),i,s]})})}function xK({description:t,title:e,properties:r,required:n,uiSchema:i,idSchema:s,schema:a,formData:o,onAddClick:c,disabled:l,readonly:u,registry:h}){const p=Ue(i),f=De("TitleFieldTemplate",h,p),m=De("DescriptionFieldTemplate",h,p),{ButtonTemplates:{AddButton:g}}=h.templates;return F.jsxs(F.Fragment,{children:[e&&F.jsx(f,{id:Gg(s),title:e,required:n,schema:a,uiSchema:i,registry:h}),t&&F.jsx(m,{id:ca(s),description:t,schema:a,uiSchema:i,registry:h}),F.jsxs(tl,{fluid:!0,className:"p-0",children:[r.map((y,v)=>F.jsx(ds,{style:{marginBottom:"10px"},className:y.hidden?"d-none":void 0,children:F.jsxs(Xr,{xs:12,children:[" ",y.content]})},v)),mE(a,i,o)?F.jsx(ds,{children:F.jsx(Xr,{xs:{offset:9,span:3},className:"py-4",children:F.jsx(g,{onClick:c(a),disabled:l||u,className:"object-property-expand",uiSchema:i,registry:h})})}):null]})]})}function kK(t){const{submitText:e,norender:r,props:n}=uI(t.uiSchema);return r?null:F.jsx("div",{children:F.jsx(Cl,{variant:"primary",type:"submit",...n,children:e})})}function RK({id:t,title:e,uiSchema:r}){const n=Ue(r);return F.jsxs("div",{id:t,className:"my-1",children:[F.jsx("h5",{children:n.title||e}),F.jsx("hr",{className:"border-0 bg-secondary",style:{height:"1px"}})]})}function OK({classNames:t,style:e,children:r,disabled:n,id:i,label:s,onDropPropertyClick:a,onKeyChange:o,readonly:c,required:l,schema:u,uiSchema:h,registry:p}){const{templates:f,translateString:m}=p,{RemoveButton:g}=f.ButtonTemplates,y=m(Be.KeyLabel,[s]);if(!(vo in u))return F.jsx("div",{className:t,style:e,children:r});const w=({target:A})=>o(A.value),$=`${i}-key`;return F.jsxs(ds,{className:t,style:e,children:[F.jsx(Xr,{xs:5,children:F.jsxs(gt.Group,{children:[F.jsx(gt.Label,{htmlFor:$,children:y}),F.jsx(gt.Control,{required:l,defaultValue:s,disabled:n||c,id:$,name:$,onBlur:c?void 0:w,type:"text"})]})}),F.jsx(Xr,{xs:5,children:r}),F.jsx(Xr,{xs:2,className:"py-4",children:F.jsx(g,{iconType:"block",className:"w-100",disabled:n||c,onClick:a(s),uiSchema:h,registry:p})})]},$)}function NK(){return{ArrayFieldItemTemplate:c7,ArrayFieldTemplate:d7,BaseInputTemplate:O7,ButtonTemplates:{AddButton:r7,CopyButton:SK,MoveDownButton:IK,MoveUpButton:TK,RemoveButton:$K,SubmitButton:kK},DescriptionFieldTemplate:N7,ErrorListTemplate:pK,FieldErrorTemplate:AK,FieldHelpTemplate:PK,FieldTemplate:CK,ObjectFieldTemplate:xK,TitleFieldTemplate:RK,WrapIfAdditionalTemplate:OK}}function DK(t){const{id:e,value:r,disabled:n,readonly:i,label:s,hideLabel:a,schema:o,autofocus:c,options:l,onChange:u,onBlur:h,onFocus:p,registry:f,uiSchema:m}=t,g=Nc(o),y=De("DescriptionFieldTemplate",f,l),v=({target:{checked:P}})=>u(P),w=({target:{checked:P}})=>h(e,P),$=({target:{checked:P}})=>p(e,P),A=l.description||o.description;return F.jsxs(gt.Group,{className:`checkbox ${n||i?"disabled":""}`,"aria-describedby":Ur(e),children:[!a&&!!A&&F.jsx(y,{id:ca(e),description:A,schema:o,uiSchema:m,registry:f}),F.jsx(gt.Check,{id:e,name:e,label:Wg(s,a||!s),checked:typeof r>"u"?!1:r,required:g,disabled:n||i,autoFocus:c,onChange:v,type:"checkbox",onBlur:w,onFocus:$})]})}function FK({id:t,disabled:e,options:r,value:n,autofocus:i,readonly:s,required:a,onChange:o,onBlur:c,onFocus:l}){const{enumOptions:u,enumDisabled:h,inline:p,emptyValue:f}=r,m=Array.isArray(n)?n:[n],g=w=>({target:{checked:$}})=>{o($?cI(w,m,u):aI(w,m,u))},y=({target:{value:w}})=>c(t,qt(w,u,f)),v=({target:{value:w}})=>l(t,qt(w,u,f));return F.jsx(gt.Group,{children:Array.isArray(u)&&u.map((w,$)=>{const A=$l(w.value,m),P=Array.isArray(h)&&h.indexOf(w.value)!==-1;return F.jsx(gt.Check,{inline:p,custom:!0,required:a,checked:A,className:"bg-transparent border-0",type:"checkbox",id:zh(t,$),name:t,label:w.label,autoFocus:i&&$===0,onChange:g($),onBlur:y,onFocus:v,disabled:e||P||s,"aria-describedby":Ur(t)},w.value)})})}function MK({id:t,options:e,value:r,required:n,disabled:i,readonly:s,onChange:a,onBlur:o,onFocus:c}){const{enumOptions:l,enumDisabled:u,emptyValue:h}=e,p=({target:{value:y}})=>a(qt(y,l,h)),f=({target:{value:y}})=>o(t,qt(y,l,h)),m=({target:{value:y}})=>c(t,qt(y,l,h)),g=!!(e&&e.inline);return F.jsx(gt.Group,{className:"mb-0",children:Array.isArray(l)&&l.map((y,v)=>{const w=Array.isArray(u)&&u.indexOf(y.value)!==-1,$=$l(y.value,r);return F.jsx(gt.Check,{inline:g,label:y.label,id:zh(t,v),name:t,type:"radio",disabled:i||w||s,checked:$,required:n,value:String(v),onChange:p,onBlur:f,onFocus:m,"aria-describedby":Ur(t)},v)})})}function jK(t){const{value:e,label:r,hideLabel:n,options:i,registry:s}=t,a=De("BaseInputTemplate",s,i);return F.jsx(a,{...t,extraProps:{label:Wg(r||void 0,n)},children:F.jsx("span",{className:"range-view",children:e})})}function LK({schema:t,id:e,options:r,required:n,disabled:i,readonly:s,value:a,multiple:o,autofocus:c,onChange:l,onBlur:u,onFocus:h,placeholder:p,rawErrors:f=[]}){const{enumOptions:m,enumDisabled:g,emptyValue:y}=r,v=o?[]:"";function w(A,P){return P?[].slice.call(A.target.options).filter(O=>O.selected).map(O=>O.value):A.target.value}const $=oI(a,m,o);return F.jsxs(gt.Control,{as:"select",bsPrefix:"custom-select",id:e,name:e,value:typeof $>"u"?v:$,required:n,multiple:o,disabled:i||s,autoFocus:c,className:f.length>0?"is-invalid":"",onBlur:u&&(A=>{const P=w(A,o);u(e,qt(P,m,y))}),onFocus:h&&(A=>{const P=w(A,o);h(e,qt(P,m,y))}),onChange:A=>{const P=w(A,o);l(qt(P,m,y))},"aria-describedby":Ur(e),children:[!o&&t.default===void 0&&F.jsx("option",{value:"",children:p}),m.map(({value:A,label:P},O)=>{const E=Array.isArray(g)&&g.indexOf(A)!=-1;return F.jsx("option",{id:P,value:String(O),disabled:E,children:P},O)})]})}var VK=["bsPrefix","size","hasValidation","className","as"],UK=nn("input-group-append"),BK=nn("input-group-prepend"),oy=nn("input-group-text",{Component:"span"}),zK=function(e){return ee.createElement(oy,null,ee.createElement("input",ze({type:"checkbox"},e)))},qK=function(e){return ee.createElement(oy,null,ee.createElement("input",ze({type:"radio"},e)))},ua=ee.forwardRef(function(t,e){var r=t.bsPrefix,n=t.size,i=t.hasValidation,s=t.className,a=t.as,o=a===void 0?"div":a,c=lt(t,VK);return r=Ot(r,"input-group"),ee.createElement(o,ze({ref:e},c,{className:yt(s,r,n&&r+"-"+n,i&&"has-validation")}))});ua.displayName="InputGroup";ua.Text=oy;ua.Radio=qK;ua.Checkbox=zK;ua.Append=UK;ua.Prepend=BK;function HK({id:t,placeholder:e,value:r,required:n,disabled:i,autofocus:s,readonly:a,onBlur:o,onFocus:c,onChange:l,options:u}){const h=({target:{value:m}})=>l(m===""?u.emptyValue:m),p=({target:{value:m}})=>o(t,m),f=({target:{value:m}})=>c(t,m);return F.jsx(ua,{children:F.jsx(UI,{id:t,name:t,as:"textarea",placeholder:e,disabled:i,readOnly:a,value:r,required:n,autoFocus:s,rows:u.rows||5,onChange:h,onBlur:p,onFocus:f,"aria-describedby":Ur(t)})})}function KK(){return{CheckboxWidget:DK,CheckboxesWidget:FK,RadioWidget:MK,RangeWidget:jK,SelectWidget:LK,TextareaWidget:HK}}function GK(){return{templates:NK(),widgets:KK()}}function WK(){return qH(GK())}const hhe=WK();var sm={exports:{}},YI={},fn={},eo={},Rl={},ke={},rl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(w){if(super(),!t.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce(($,A)=>`${$}${A}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce(($,A)=>(A instanceof r&&($[A.str]=($[A.str]||0)+1),$),{})}}t._Code=n,t.nil=new n("");function i(v,...w){const $=[v[0]];let A=0;for(;A<w.length;)o($,w[A]),$.push(v[++A]);return new n($)}t._=i;const s=new n("+");function a(v,...w){const $=[f(v[0])];let A=0;for(;A<w.length;)$.push(s),o($,w[A]),$.push(s,f(v[++A]));return c($),new n($)}t.str=a;function o(v,w){w instanceof n?v.push(...w._items):w instanceof r?v.push(w):v.push(h(w))}t.addCodeArg=o;function c(v){let w=1;for(;w<v.length-1;){if(v[w]===s){const $=l(v[w-1],v[w+1]);if($!==void 0){v.splice(w-1,3,$);continue}v[w++]="+"}w++}}function l(v,w){if(w==='""')return v;if(v==='""')return w;if(typeof v=="string")return w instanceof r||v[v.length-1]!=='"'?void 0:typeof w!="string"?`${v.slice(0,-1)}${w}"`:w[0]==='"'?v.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(v instanceof r))return`"${v}${w.slice(1)}`}function u(v,w){return w.emptyStr()?v:v.emptyStr()?w:a`${v}${w}`}t.strConcat=u;function h(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:f(Array.isArray(v)?v.join(","):v)}function p(v){return new n(f(v))}t.stringify=p;function f(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=f;function m(v){return typeof v=="string"&&t.IDENTIFIER.test(v)?new n(`.${v}`):i`[${v}]`}t.getProperty=m;function g(v){if(typeof v=="string"&&t.IDENTIFIER.test(v))return new n(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}t.getEsmExportName=g;function y(v){return new n(v.toString())}t.regexpCode=y})(rl);var am={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=rl;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:l,parent:u}={}){this._names={},this._prefixes=l,this._parent=u}toName(l){return l instanceof e.Name?l:this.name(l)}name(l){return new e.Name(this._newName(l))}_newName(l){const u=this._names[l]||this._nameGroup(l);return`${l}${u.index++}`}_nameGroup(l){var u,h;if(!((h=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||h===void 0)&&h.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}t.Scope=i;class s extends e.Name{constructor(l,u){super(u),this.prefix=l}setValue(l,{property:u,itemIndex:h}){this.value=l,this.scopePath=(0,e._)`.${new e.Name(u)}[${h}]`}}t.ValueScopeName=s;const a=(0,e._)`\n`;class o extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?a:e.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,u){var h;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const p=this.toName(l),{prefix:f}=p,m=(h=u.key)!==null&&h!==void 0?h:u.ref;let g=this._values[f];if(g){const w=g.get(m);if(w)return w}else g=this._values[f]=new Map;g.set(m,p);const y=this._scope[f]||(this._scope[f]=[]),v=y.length;return y[v]=u.ref,p.setValue(u,{property:f,itemIndex:v}),p}getValue(l,u){const h=this._values[l];if(h)return h.get(u)}scopeRefs(l,u=this._values){return this._reduceValues(u,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,e._)`${l}${h.scopePath}`})}scopeCode(l=this._values,u,h){return this._reduceValues(l,p=>{if(p.value===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return p.value.code},u,h)}_reduceValues(l,u,h={},p){let f=e.nil;for(const m in l){const g=l[m];if(!g)continue;const y=h[m]=h[m]||new Map;g.forEach(v=>{if(y.has(v))return;y.set(v,n.Started);let w=u(v);if(w){const $=this.opts.es5?t.varKinds.var:t.varKinds.const;f=(0,e._)`${f}${$} ${v} = ${w};${this.opts._n}`}else if(w=p==null?void 0:p(v))f=(0,e._)`${f}${w}${this.opts._n}`;else throw new r(v);y.set(v,n.Completed)})}return f}}t.ValueScope=o})(am);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=rl,r=am;var n=rl;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=am;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(N,M){return this}}class a extends s{constructor(N,M,K){super(),this.varKind=N,this.name=M,this.rhs=K}render({es5:N,_n:M}){const K=N?r.varKinds.var:this.varKind,Z=this.rhs===void 0?"":` = ${this.rhs}`;return`${K} ${this.name}${Z};`+M}optimizeNames(N,M){if(N[this.name.str])return this.rhs&&(this.rhs=Q(this.rhs,N,M)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class o extends s{constructor(N,M,K){super(),this.lhs=N,this.rhs=M,this.sideEffects=K}render({_n:N}){return`${this.lhs} = ${this.rhs};`+N}optimizeNames(N,M){if(!(this.lhs instanceof e.Name&&!N[this.lhs.str]&&!this.sideEffects))return this.rhs=Q(this.rhs,N,M),this}get names(){const N=this.lhs instanceof e.Name?{}:{...this.lhs.names};return x(N,this.rhs)}}class c extends o{constructor(N,M,K,Z){super(N,K,Z),this.op=M}render({_n:N}){return`${this.lhs} ${this.op}= ${this.rhs};`+N}}class l extends s{constructor(N){super(),this.label=N,this.names={}}render({_n:N}){return`${this.label}:`+N}}class u extends s{constructor(N){super(),this.label=N,this.names={}}render({_n:N}){return`break${this.label?` ${this.label}`:""};`+N}}class h extends s{constructor(N){super(),this.error=N}render({_n:N}){return`throw ${this.error};`+N}get names(){return this.error.names}}class p extends s{constructor(N){super(),this.code=N}render({_n:N}){return`${this.code};`+N}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(N,M){return this.code=Q(this.code,N,M),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class f extends s{constructor(N=[]){super(),this.nodes=N}render(N){return this.nodes.reduce((M,K)=>M+K.render(N),"")}optimizeNodes(){const{nodes:N}=this;let M=N.length;for(;M--;){const K=N[M].optimizeNodes();Array.isArray(K)?N.splice(M,1,...K):K?N[M]=K:N.splice(M,1)}return N.length>0?this:void 0}optimizeNames(N,M){const{nodes:K}=this;let Z=K.length;for(;Z--;){const ae=K[Z];ae.optimizeNames(N,M)||(re(N,ae.names),K.splice(Z,1))}return K.length>0?this:void 0}get names(){return this.nodes.reduce((N,M)=>R(N,M.names),{})}}class m extends f{render(N){return"{"+N._n+super.render(N)+"}"+N._n}}class g extends f{}class y extends m{}y.kind="else";class v extends m{constructor(N,M){super(M),this.condition=N}render(N){let M=`if(${this.condition})`+super.render(N);return this.else&&(M+="else "+this.else.render(N)),M}optimizeNodes(){super.optimizeNodes();const N=this.condition;if(N===!0)return this.nodes;let M=this.else;if(M){const K=M.optimizeNodes();M=this.else=Array.isArray(K)?new y(K):K}if(M)return N===!1?M instanceof v?M:M.nodes:this.nodes.length?this:new v(Ee(N),M instanceof v?[M]:M.nodes);if(!(N===!1||!this.nodes.length))return this}optimizeNames(N,M){var K;if(this.else=(K=this.else)===null||K===void 0?void 0:K.optimizeNames(N,M),!!(super.optimizeNames(N,M)||this.else))return this.condition=Q(this.condition,N,M),this}get names(){const N=super.names;return x(N,this.condition),this.else&&R(N,this.else.names),N}}v.kind="if";class w extends m{}w.kind="for";class $ extends w{constructor(N){super(),this.iteration=N}render(N){return`for(${this.iteration})`+super.render(N)}optimizeNames(N,M){if(super.optimizeNames(N,M))return this.iteration=Q(this.iteration,N,M),this}get names(){return R(super.names,this.iteration.names)}}class A extends w{constructor(N,M,K,Z){super(),this.varKind=N,this.name=M,this.from=K,this.to=Z}render(N){const M=N.es5?r.varKinds.var:this.varKind,{name:K,from:Z,to:ae}=this;return`for(${M} ${K}=${Z}; ${K}<${ae}; ${K}++)`+super.render(N)}get names(){const N=x(super.names,this.from);return x(N,this.to)}}class P extends w{constructor(N,M,K,Z){super(),this.loop=N,this.varKind=M,this.name=K,this.iterable=Z}render(N){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(N)}optimizeNames(N,M){if(super.optimizeNames(N,M))return this.iterable=Q(this.iterable,N,M),this}get names(){return R(super.names,this.iterable.names)}}class O extends m{constructor(N,M,K){super(),this.name=N,this.args=M,this.async=K}render(N){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(N)}}O.kind="func";class E extends f{render(N){return"return "+super.render(N)}}E.kind="return";class b extends m{render(N){let M="try"+super.render(N);return this.catch&&(M+=this.catch.render(N)),this.finally&&(M+=this.finally.render(N)),M}optimizeNodes(){var N,M;return super.optimizeNodes(),(N=this.catch)===null||N===void 0||N.optimizeNodes(),(M=this.finally)===null||M===void 0||M.optimizeNodes(),this}optimizeNames(N,M){var K,Z;return super.optimizeNames(N,M),(K=this.catch)===null||K===void 0||K.optimizeNames(N,M),(Z=this.finally)===null||Z===void 0||Z.optimizeNames(N,M),this}get names(){const N=super.names;return this.catch&&R(N,this.catch.names),this.finally&&R(N,this.finally.names),N}}class I extends m{constructor(N){super(),this.error=N}render(N){return`catch(${this.error})`+super.render(N)}}I.kind="catch";class T extends m{render(N){return"finally"+super.render(N)}}T.kind="finally";class C{constructor(N,M={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...M,_n:M.lines?`
`:""},this._extScope=N,this._scope=new r.Scope({parent:N}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(N){return this._scope.name(N)}scopeName(N){return this._extScope.name(N)}scopeValue(N,M){const K=this._extScope.value(N,M);return(this._values[K.prefix]||(this._values[K.prefix]=new Set)).add(K),K}getScopeValue(N,M){return this._extScope.getValue(N,M)}scopeRefs(N){return this._extScope.scopeRefs(N,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(N,M,K,Z){const ae=this._scope.toName(M);return K!==void 0&&Z&&(this._constants[ae.str]=K),this._leafNode(new a(N,ae,K)),ae}const(N,M,K){return this._def(r.varKinds.const,N,M,K)}let(N,M,K){return this._def(r.varKinds.let,N,M,K)}var(N,M,K){return this._def(r.varKinds.var,N,M,K)}assign(N,M,K){return this._leafNode(new o(N,M,K))}add(N,M){return this._leafNode(new c(N,t.operators.ADD,M))}code(N){return typeof N=="function"?N():N!==e.nil&&this._leafNode(new p(N)),this}object(...N){const M=["{"];for(const[K,Z]of N)M.length>1&&M.push(","),M.push(K),(K!==Z||this.opts.es5)&&(M.push(":"),(0,e.addCodeArg)(M,Z));return M.push("}"),new e._Code(M)}if(N,M,K){if(this._blockNode(new v(N)),M&&K)this.code(M).else().code(K).endIf();else if(M)this.code(M).endIf();else if(K)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(N){return this._elseNode(new v(N))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(v,y)}_for(N,M){return this._blockNode(N),M&&this.code(M).endFor(),this}for(N,M){return this._for(new $(N),M)}forRange(N,M,K,Z,ae=this.opts.es5?r.varKinds.var:r.varKinds.let){const Ie=this._scope.toName(N);return this._for(new A(ae,Ie,M,K),()=>Z(Ie))}forOf(N,M,K,Z=r.varKinds.const){const ae=this._scope.toName(N);if(this.opts.es5){const Ie=M instanceof e.Name?M:this.var("_arr",M);return this.forRange("_i",0,(0,e._)`${Ie}.length`,Te=>{this.var(ae,(0,e._)`${Ie}[${Te}]`),K(ae)})}return this._for(new P("of",Z,ae,M),()=>K(ae))}forIn(N,M,K,Z=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(N,(0,e._)`Object.keys(${M})`,K);const ae=this._scope.toName(N);return this._for(new P("in",Z,ae,M),()=>K(ae))}endFor(){return this._endBlockNode(w)}label(N){return this._leafNode(new l(N))}break(N){return this._leafNode(new u(N))}return(N){const M=new E;if(this._blockNode(M),this.code(N),M.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(N,M,K){if(!M&&!K)throw new Error('CodeGen: "try" without "catch" and "finally"');const Z=new b;if(this._blockNode(Z),this.code(N),M){const ae=this.name("e");this._currNode=Z.catch=new I(ae),M(ae)}return K&&(this._currNode=Z.finally=new T,this.code(K)),this._endBlockNode(I,T)}throw(N){return this._leafNode(new h(N))}block(N,M){return this._blockStarts.push(this._nodes.length),N&&this.code(N).endBlock(M),this}endBlock(N){const M=this._blockStarts.pop();if(M===void 0)throw new Error("CodeGen: not in self-balancing block");const K=this._nodes.length-M;if(K<0||N!==void 0&&K!==N)throw new Error(`CodeGen: wrong number of nodes: ${K} vs ${N} expected`);return this._nodes.length=M,this}func(N,M=e.nil,K,Z){return this._blockNode(new O(N,M,K)),Z&&this.code(Z).endFunc(),this}endFunc(){return this._endBlockNode(O)}optimize(N=1){for(;N-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(N){return this._currNode.nodes.push(N),this}_blockNode(N){this._currNode.nodes.push(N),this._nodes.push(N)}_endBlockNode(N,M){const K=this._currNode;if(K instanceof N||M&&K instanceof M)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${M?`${N.kind}/${M.kind}`:N.kind}"`)}_elseNode(N){const M=this._currNode;if(!(M instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=M.else=N,this}get _root(){return this._nodes[0]}get _currNode(){const N=this._nodes;return N[N.length-1]}set _currNode(N){const M=this._nodes;M[M.length-1]=N}}t.CodeGen=C;function R(U,N){for(const M in N)U[M]=(U[M]||0)+(N[M]||0);return U}function x(U,N){return N instanceof e._CodeOrName?R(U,N.names):U}function Q(U,N,M){if(U instanceof e.Name)return K(U);if(!Z(U))return U;return new e._Code(U._items.reduce((ae,Ie)=>(Ie instanceof e.Name&&(Ie=K(Ie)),Ie instanceof e._Code?ae.push(...Ie._items):ae.push(Ie),ae),[]));function K(ae){const Ie=M[ae.str];return Ie===void 0||N[ae.str]!==1?ae:(delete N[ae.str],Ie)}function Z(ae){return ae instanceof e._Code&&ae._items.some(Ie=>Ie instanceof e.Name&&N[Ie.str]===1&&M[Ie.str]!==void 0)}}function re(U,N){for(const M in N)U[M]=(U[M]||0)-(N[M]||0)}function Ee(U){return typeof U=="boolean"||typeof U=="number"||U===null?!U:(0,e._)`!${W(U)}`}t.not=Ee;const _e=V(t.operators.AND);function me(...U){return U.reduce(_e)}t.and=me;const le=V(t.operators.OR);function Y(...U){return U.reduce(le)}t.or=Y;function V(U){return(N,M)=>N===e.nil?M:M===e.nil?N:(0,e._)`${W(N)} ${U} ${W(M)}`}function W(U){return U instanceof e.Name?U:(0,e._)`(${U})`}})(ke);var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.checkStrictMode=ce.getErrorPath=ce.Type=ce.useFunc=ce.setEvaluated=ce.evaluatedPropsToName=ce.mergeEvaluated=ce.eachItem=ce.unescapeJsonPointer=ce.escapeJsonPointer=ce.escapeFragment=ce.unescapeFragment=ce.schemaRefOrVal=ce.schemaHasRulesButRef=ce.schemaHasRules=ce.checkUnknownRules=ce.alwaysValidSchema=ce.toHash=void 0;const at=ke,YK=rl;function QK(t){const e={};for(const r of t)e[r]=!0;return e}ce.toHash=QK;function XK(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(QI(t,e),!XI(e,t.self.RULES.all))}ce.alwaysValidSchema=XK;function QI(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const i=n.RULES.keywords;for(const s in e)i[s]||eT(t,`unknown keyword: "${s}"`)}ce.checkUnknownRules=QI;function XI(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}ce.schemaHasRules=XI;function JK(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}ce.schemaHasRulesButRef=JK;function ZK({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,at._)`${r}`}return(0,at._)`${t}${e}${(0,at.getProperty)(n)}`}ce.schemaRefOrVal=ZK;function eG(t){return JI(decodeURIComponent(t))}ce.unescapeFragment=eG;function tG(t){return encodeURIComponent(cy(t))}ce.escapeFragment=tG;function cy(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}ce.escapeJsonPointer=cy;function JI(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}ce.unescapeJsonPointer=JI;function rG(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}ce.eachItem=rG;function a0({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,s,a,o)=>{const c=a===void 0?s:a instanceof at.Name?(s instanceof at.Name?t(i,s,a):e(i,s,a),a):s instanceof at.Name?(e(i,a,s),s):r(s,a);return o===at.Name&&!(c instanceof at.Name)?n(i,c):c}}ce.mergeEvaluated={props:a0({mergeNames:(t,e,r)=>t.if((0,at._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,at._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,at._)`${r} || {}`).code((0,at._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,at._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,at._)`${r} || {}`),ly(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:ZI}),items:a0({mergeNames:(t,e,r)=>t.if((0,at._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,at._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,at._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,at._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function ZI(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,at._)`{}`);return e!==void 0&&ly(t,r,e),r}ce.evaluatedPropsToName=ZI;function ly(t,e,r){Object.keys(r).forEach(n=>t.assign((0,at._)`${e}${(0,at.getProperty)(n)}`,!0))}ce.setEvaluated=ly;const o0={};function nG(t,e){return t.scopeValue("func",{ref:e,code:o0[e.code]||(o0[e.code]=new YK._Code(e.code))})}ce.useFunc=nG;var om;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(om||(ce.Type=om={}));function iG(t,e,r){if(t instanceof at.Name){const n=e===om.Num;return r?n?(0,at._)`"[" + ${t} + "]"`:(0,at._)`"['" + ${t} + "']"`:n?(0,at._)`"/" + ${t}`:(0,at._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,at.getProperty)(t).toString():"/"+cy(t)}ce.getErrorPath=iG;function eT(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}ce.checkStrictMode=eT;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});const ir=ke,sG={data:new ir.Name("data"),valCxt:new ir.Name("valCxt"),instancePath:new ir.Name("instancePath"),parentData:new ir.Name("parentData"),parentDataProperty:new ir.Name("parentDataProperty"),rootData:new ir.Name("rootData"),dynamicAnchors:new ir.Name("dynamicAnchors"),vErrors:new ir.Name("vErrors"),errors:new ir.Name("errors"),this:new ir.Name("this"),self:new ir.Name("self"),scope:new ir.Name("scope"),json:new ir.Name("json"),jsonPos:new ir.Name("jsonPos"),jsonLen:new ir.Name("jsonLen"),jsonPart:new ir.Name("jsonPart")};qn.default=sG;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=ke,r=ce,n=qn;t.keywordError={message:({keyword:y})=>(0,e.str)`must pass "${y}" keyword validation`},t.keyword$DataError={message:({keyword:y,schemaType:v})=>v?(0,e.str)`"${y}" keyword must be ${v} ($data)`:(0,e.str)`"${y}" keyword is invalid ($data)`};function i(y,v=t.keywordError,w,$){const{it:A}=y,{gen:P,compositeRule:O,allErrors:E}=A,b=h(y,v,w);$??(O||E)?c(P,b):l(A,(0,e._)`[${b}]`)}t.reportError=i;function s(y,v=t.keywordError,w){const{it:$}=y,{gen:A,compositeRule:P,allErrors:O}=$,E=h(y,v,w);c(A,E),P||O||l($,n.default.vErrors)}t.reportExtraError=s;function a(y,v){y.assign(n.default.errors,v),y.if((0,e._)`${n.default.vErrors} !== null`,()=>y.if(v,()=>y.assign((0,e._)`${n.default.vErrors}.length`,v),()=>y.assign(n.default.vErrors,null)))}t.resetErrorsCount=a;function o({gen:y,keyword:v,schemaValue:w,data:$,errsCount:A,it:P}){if(A===void 0)throw new Error("ajv implementation error");const O=y.name("err");y.forRange("i",A,n.default.errors,E=>{y.const(O,(0,e._)`${n.default.vErrors}[${E}]`),y.if((0,e._)`${O}.instancePath === undefined`,()=>y.assign((0,e._)`${O}.instancePath`,(0,e.strConcat)(n.default.instancePath,P.errorPath))),y.assign((0,e._)`${O}.schemaPath`,(0,e.str)`${P.errSchemaPath}/${v}`),P.opts.verbose&&(y.assign((0,e._)`${O}.schema`,w),y.assign((0,e._)`${O}.data`,$))})}t.extendErrors=o;function c(y,v){const w=y.const("err",v);y.if((0,e._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,e._)`[${w}]`),(0,e._)`${n.default.vErrors}.push(${w})`),y.code((0,e._)`${n.default.errors}++`)}function l(y,v){const{gen:w,validateName:$,schemaEnv:A}=y;A.$async?w.throw((0,e._)`new ${y.ValidationError}(${v})`):(w.assign((0,e._)`${$}.errors`,v),w.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function h(y,v,w){const{createErrors:$}=y.it;return $===!1?(0,e._)`{}`:p(y,v,w)}function p(y,v,w={}){const{gen:$,it:A}=y,P=[f(A,w),m(y,w)];return g(y,v,P),$.object(...P)}function f({errorPath:y},{instancePath:v}){const w=v?(0,e.str)`${y}${(0,r.getErrorPath)(v,r.Type.Str)}`:y;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,w)]}function m({keyword:y,it:{errSchemaPath:v}},{schemaPath:w,parentSchema:$}){let A=$?v:(0,e.str)`${v}/${y}`;return w&&(A=(0,e.str)`${A}${(0,r.getErrorPath)(w,r.Type.Str)}`),[u.schemaPath,A]}function g(y,{params:v,message:w},$){const{keyword:A,data:P,schemaValue:O,it:E}=y,{opts:b,propertyName:I,topSchemaRef:T,schemaPath:C}=E;$.push([u.keyword,A],[u.params,typeof v=="function"?v(y):v||(0,e._)`{}`]),b.messages&&$.push([u.message,typeof w=="function"?w(y):w]),b.verbose&&$.push([u.schema,O],[u.parentSchema,(0,e._)`${T}${C}`],[n.default.data,P]),I&&$.push([u.propertyName,I])}})(Rl);Object.defineProperty(eo,"__esModule",{value:!0});eo.boolOrEmptySchema=eo.topBoolOrEmptySchema=void 0;const aG=Rl,oG=ke,cG=qn,lG={message:"boolean schema is false"};function uG(t){const{gen:e,schema:r,validateName:n}=t;r===!1?tT(t,!1):typeof r=="object"&&r.$async===!0?e.return(cG.default.data):(e.assign((0,oG._)`${n}.errors`,null),e.return(!0))}eo.topBoolOrEmptySchema=uG;function dG(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),tT(t)):r.var(e,!0)}eo.boolOrEmptySchema=dG;function tT(t,e){const{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,aG.reportError)(i,lG,void 0,e)}var Mt={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.getRules=qs.isJSONType=void 0;const hG=["string","number","integer","boolean","null","object","array"],fG=new Set(hG);function pG(t){return typeof t=="string"&&fG.has(t)}qs.isJSONType=pG;function mG(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}qs.getRules=mG;var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.shouldUseRule=ci.shouldUseGroup=ci.schemaHasRulesForType=void 0;function gG({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&rT(t,n)}ci.schemaHasRulesForType=gG;function rT(t,e){return e.rules.some(r=>nT(t,r))}ci.shouldUseGroup=rT;function nT(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}ci.shouldUseRule=nT;Object.defineProperty(Mt,"__esModule",{value:!0});Mt.reportTypeError=Mt.checkDataTypes=Mt.checkDataType=Mt.coerceAndCheckDataType=Mt.getJSONTypes=Mt.getSchemaTypes=Mt.DataType=void 0;const yG=qs,vG=ci,_G=Rl,Ce=ke,iT=ce;var Va;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Va||(Mt.DataType=Va={}));function wG(t){const e=sT(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Mt.getSchemaTypes=wG;function sT(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(yG.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Mt.getJSONTypes=sT;function bG(t,e){const{gen:r,data:n,opts:i}=t,s=EG(e,i.coerceTypes),a=e.length>0&&!(s.length===0&&e.length===1&&(0,vG.schemaHasRulesForType)(t,e[0]));if(a){const o=uy(e,n,i.strictNumbers,Va.Wrong);r.if(o,()=>{s.length?SG(t,e,s):dy(t)})}return a}Mt.coerceAndCheckDataType=bG;const aT=new Set(["string","number","integer","boolean","null"]);function EG(t,e){return e?t.filter(r=>aT.has(r)||e==="array"&&r==="array"):[]}function SG(t,e,r){const{gen:n,data:i,opts:s}=t,a=n.let("dataType",(0,Ce._)`typeof ${i}`),o=n.let("coerced",(0,Ce._)`undefined`);s.coerceTypes==="array"&&n.if((0,Ce._)`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,Ce._)`${i}[0]`).assign(a,(0,Ce._)`typeof ${i}`).if(uy(e,i,s.strictNumbers),()=>n.assign(o,i))),n.if((0,Ce._)`${o} !== undefined`);for(const l of r)(aT.has(l)||l==="array"&&s.coerceTypes==="array")&&c(l);n.else(),dy(t),n.endIf(),n.if((0,Ce._)`${o} !== undefined`,()=>{n.assign(i,o),IG(t,o)});function c(l){switch(l){case"string":n.elseIf((0,Ce._)`${a} == "number" || ${a} == "boolean"`).assign(o,(0,Ce._)`"" + ${i}`).elseIf((0,Ce._)`${i} === null`).assign(o,(0,Ce._)`""`);return;case"number":n.elseIf((0,Ce._)`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(o,(0,Ce._)`+${i}`);return;case"integer":n.elseIf((0,Ce._)`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(o,(0,Ce._)`+${i}`);return;case"boolean":n.elseIf((0,Ce._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(o,!1).elseIf((0,Ce._)`${i} === "true" || ${i} === 1`).assign(o,!0);return;case"null":n.elseIf((0,Ce._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(o,null);return;case"array":n.elseIf((0,Ce._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(o,(0,Ce._)`[${i}]`)}}}function IG({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Ce._)`${e} !== undefined`,()=>t.assign((0,Ce._)`${e}[${r}]`,n))}function cm(t,e,r,n=Va.Correct){const i=n===Va.Correct?Ce.operators.EQ:Ce.operators.NEQ;let s;switch(t){case"null":return(0,Ce._)`${e} ${i} null`;case"array":s=(0,Ce._)`Array.isArray(${e})`;break;case"object":s=(0,Ce._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=a((0,Ce._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=a();break;default:return(0,Ce._)`typeof ${e} ${i} ${t}`}return n===Va.Correct?s:(0,Ce.not)(s);function a(o=Ce.nil){return(0,Ce.and)((0,Ce._)`typeof ${e} == "number"`,o,r?(0,Ce._)`isFinite(${e})`:Ce.nil)}}Mt.checkDataType=cm;function uy(t,e,r,n){if(t.length===1)return cm(t[0],e,r,n);let i;const s=(0,iT.toHash)(t);if(s.array&&s.object){const a=(0,Ce._)`typeof ${e} != "object"`;i=s.null?a:(0,Ce._)`!${e} || ${a}`,delete s.null,delete s.array,delete s.object}else i=Ce.nil;s.number&&delete s.integer;for(const a in s)i=(0,Ce.and)(i,cm(a,e,r,n));return i}Mt.checkDataTypes=uy;const TG={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Ce._)`{type: ${t}}`:(0,Ce._)`{type: ${e}}`};function dy(t){const e=$G(t);(0,_G.reportError)(e,TG)}Mt.reportTypeError=dy;function $G(t){const{gen:e,data:r,schema:n}=t,i=(0,iT.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}var Yh={};Object.defineProperty(Yh,"__esModule",{value:!0});Yh.assignDefaults=void 0;const $a=ke,AG=ce;function PG(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const i in r)c0(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,s)=>c0(t,s,i.default))}Yh.assignDefaults=PG;function c0(t,e,r){const{gen:n,compositeRule:i,data:s,opts:a}=t;if(r===void 0)return;const o=(0,$a._)`${s}${(0,$a.getProperty)(e)}`;if(i){(0,AG.checkStrictMode)(t,`default is ignored for: ${o}`);return}let c=(0,$a._)`${o} === undefined`;a.useDefaults==="empty"&&(c=(0,$a._)`${c} || ${o} === null || ${o} === ""`),n.if(c,(0,$a._)`${o} = ${(0,$a.stringify)(r)}`)}var Fn={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.validateUnion=Ne.validateArray=Ne.usePattern=Ne.callValidateCode=Ne.schemaProperties=Ne.allSchemaProperties=Ne.noPropertyInData=Ne.propertyInData=Ne.isOwnProperty=Ne.hasPropFunc=Ne.reportMissingProp=Ne.checkMissingProp=Ne.checkReportMissingProp=void 0;const pt=ke,hy=ce,Ri=qn,CG=ce;function xG(t,e){const{gen:r,data:n,it:i}=t;r.if(py(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,pt._)`${e}`},!0),t.error()})}Ne.checkReportMissingProp=xG;function kG({gen:t,data:e,it:{opts:r}},n,i){return(0,pt.or)(...n.map(s=>(0,pt.and)(py(t,e,s,r.ownProperties),(0,pt._)`${i} = ${s}`)))}Ne.checkMissingProp=kG;function RG(t,e){t.setParams({missingProperty:e},!0),t.error()}Ne.reportMissingProp=RG;function oT(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,pt._)`Object.prototype.hasOwnProperty`})}Ne.hasPropFunc=oT;function fy(t,e,r){return(0,pt._)`${oT(t)}.call(${e}, ${r})`}Ne.isOwnProperty=fy;function OG(t,e,r,n){const i=(0,pt._)`${e}${(0,pt.getProperty)(r)} !== undefined`;return n?(0,pt._)`${i} && ${fy(t,e,r)}`:i}Ne.propertyInData=OG;function py(t,e,r,n){const i=(0,pt._)`${e}${(0,pt.getProperty)(r)} === undefined`;return n?(0,pt.or)(i,(0,pt.not)(fy(t,e,r))):i}Ne.noPropertyInData=py;function cT(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ne.allSchemaProperties=cT;function NG(t,e){return cT(e).filter(r=>!(0,hy.alwaysValidSchema)(t,e[r]))}Ne.schemaProperties=NG;function DG({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:a},o,c,l){const u=l?(0,pt._)`${t}, ${e}, ${n}${i}`:e,h=[[Ri.default.instancePath,(0,pt.strConcat)(Ri.default.instancePath,s)],[Ri.default.parentData,a.parentData],[Ri.default.parentDataProperty,a.parentDataProperty],[Ri.default.rootData,Ri.default.rootData]];a.opts.dynamicRef&&h.push([Ri.default.dynamicAnchors,Ri.default.dynamicAnchors]);const p=(0,pt._)`${u}, ${r.object(...h)}`;return c!==pt.nil?(0,pt._)`${o}.call(${c}, ${p})`:(0,pt._)`${o}(${p})`}Ne.callValidateCode=DG;const FG=(0,pt._)`new RegExp`;function MG({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,pt._)`${i.code==="new RegExp"?FG:(0,CG.useFunc)(t,i)}(${r}, ${n})`})}Ne.usePattern=MG;function jG(t){const{gen:e,data:r,keyword:n,it:i}=t,s=e.name("valid");if(i.allErrors){const o=e.let("valid",!0);return a(()=>e.assign(o,!1)),o}return e.var(s,!0),a(()=>e.break()),s;function a(o){const c=e.const("len",(0,pt._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:hy.Type.Num},s),e.if((0,pt.not)(s),o)})}}Ne.validateArray=jG;function LG(t){const{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,hy.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;const a=e.let("valid",!1),o=e.name("_valid");e.block(()=>r.forEach((c,l)=>{const u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},o);e.assign(a,(0,pt._)`${a} || ${o}`),t.mergeValidEvaluated(u,o)||e.if((0,pt.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}Ne.validateUnion=LG;Object.defineProperty(Fn,"__esModule",{value:!0});Fn.validateKeywordUsage=Fn.validSchemaType=Fn.funcKeywordCode=Fn.macroKeywordCode=void 0;const mr=ke,Rs=qn,VG=Ne,UG=Rl;function BG(t,e){const{gen:r,keyword:n,schema:i,parentSchema:s,it:a}=t,o=e.macro.call(a.self,i,s,a),c=lT(r,n,o);a.opts.validateSchema!==!1&&a.self.validateSchema(o,!0);const l=r.name("valid");t.subschema({schema:o,schemaPath:mr.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Fn.macroKeywordCode=BG;function zG(t,e){var r;const{gen:n,keyword:i,schema:s,parentSchema:a,$data:o,it:c}=t;HG(c,e);const l=!o&&e.compile?e.compile.call(c.self,s,a,c):e.validate,u=lT(n,i,l),h=n.let("valid");t.block$data(h,p),t.ok((r=e.valid)!==null&&r!==void 0?r:h);function p(){if(e.errors===!1)g(),e.modifying&&l0(t),y(()=>t.error());else{const v=e.async?f():m();e.modifying&&l0(t),y(()=>qG(t,v))}}function f(){const v=n.let("ruleErrs",null);return n.try(()=>g((0,mr._)`await `),w=>n.assign(h,!1).if((0,mr._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(v,(0,mr._)`${w}.errors`),()=>n.throw(w))),v}function m(){const v=(0,mr._)`${u}.errors`;return n.assign(v,null),g(mr.nil),v}function g(v=e.async?(0,mr._)`await `:mr.nil){const w=c.opts.passContext?Rs.default.this:Rs.default.self,$=!("compile"in e&&!o||e.schema===!1);n.assign(h,(0,mr._)`${v}${(0,VG.callValidateCode)(t,u,w,$)}`,e.modifying)}function y(v){var w;n.if((0,mr.not)((w=e.valid)!==null&&w!==void 0?w:h),v)}}Fn.funcKeywordCode=zG;function l0(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,mr._)`${n.parentData}[${n.parentDataProperty}]`))}function qG(t,e){const{gen:r}=t;r.if((0,mr._)`Array.isArray(${e})`,()=>{r.assign(Rs.default.vErrors,(0,mr._)`${Rs.default.vErrors} === null ? ${e} : ${Rs.default.vErrors}.concat(${e})`).assign(Rs.default.errors,(0,mr._)`${Rs.default.vErrors}.length`),(0,UG.extendErrors)(t)},()=>t.error())}function HG({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function lT(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,mr.stringify)(r)})}function KG(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Fn.validSchemaType=KG;function GG({schema:t,opts:e,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const a=i.dependencies;if(a!=null&&a.some(o=>!Object.prototype.hasOwnProperty.call(t,o)))throw new Error(`parent schema must have dependencies of ${s}: ${a.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[s])){const c=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Fn.validateKeywordUsage=GG;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.extendSubschemaMode=ns.extendSubschemaData=ns.getSubschema=void 0;const Cn=ke,uT=ce;function WG(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:a}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const o=t.schema[e];return r===void 0?{schema:o,schemaPath:(0,Cn._)`${t.schemaPath}${(0,Cn.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:o[r],schemaPath:(0,Cn._)`${t.schemaPath}${(0,Cn.getProperty)(e)}${(0,Cn.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,uT.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:a,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}ns.getSubschema=WG;function YG(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:a}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:o}=e;if(r!==void 0){const{errorPath:l,dataPathArr:u,opts:h}=e,p=o.let("data",(0,Cn._)`${e.data}${(0,Cn.getProperty)(r)}`,!0);c(p),t.errorPath=(0,Cn.str)`${l}${(0,uT.getErrorPath)(r,n,h.jsPropertySyntax)}`,t.parentDataProperty=(0,Cn._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(i!==void 0){const l=i instanceof Cn.Name?i:o.let("data",i,!0);c(l),a!==void 0&&(t.propertyName=a)}s&&(t.dataTypes=s);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}ns.extendSubschemaData=YG;function QG(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}ns.extendSubschemaMode=QG;var Qt={},dT=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var a=s[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},hT={exports:{}},Wi=hT.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};od(e,n,i,t,"",t)};Wi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function od(t,e,r,n,i,s,a,o,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,s,a,o,c,l);for(var u in n){var h=n[u];if(Array.isArray(h)){if(u in Wi.arrayKeywords)for(var p=0;p<h.length;p++)od(t,e,r,h[p],i+"/"+u+"/"+p,s,i,u,n,p)}else if(u in Wi.propsKeywords){if(h&&typeof h=="object")for(var f in h)od(t,e,r,h[f],i+"/"+u+"/"+XG(f),s,i,u,n,f)}else(u in Wi.keywords||t.allKeys&&!(u in Wi.skipKeywords))&&od(t,e,r,h,i+"/"+u,s,i,u,n)}r(n,i,s,a,o,c,l)}}function XG(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var JG=hT.exports;Object.defineProperty(Qt,"__esModule",{value:!0});Qt.getSchemaRefs=Qt.resolveUrl=Qt.normalizeId=Qt._getFullPath=Qt.getFullPath=Qt.inlineRef=void 0;const ZG=ce,eW=dT,tW=JG,rW=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function nW(t,e=!0){return typeof t=="boolean"?!0:e===!0?!lm(t):e?fT(t)<=e:!1}Qt.inlineRef=nW;const iW=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function lm(t){for(const e in t){if(iW.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(lm)||typeof r=="object"&&lm(r))return!0}return!1}function fT(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!rW.has(r)&&(typeof t[r]=="object"&&(0,ZG.eachItem)(t[r],n=>e+=fT(n)),e===1/0))return 1/0}return e}function pT(t,e="",r){r!==!1&&(e=Ua(e));const n=t.parse(e);return mT(t,n)}Qt.getFullPath=pT;function mT(t,e){return t.serialize(e).split("#")[0]+"#"}Qt._getFullPath=mT;const sW=/#\/?$/;function Ua(t){return t?t.replace(sW,""):""}Qt.normalizeId=Ua;function aW(t,e,r){return r=Ua(r),t.resolve(e,r)}Qt.resolveUrl=aW;const oW=/^[a-z_][-a-z0-9._]*$/i;function cW(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,i=Ua(t[r]||e),s={"":i},a=pT(n,i,!1),o={},c=new Set;return tW(t,{allKeys:!0},(h,p,f,m)=>{if(m===void 0)return;const g=a+p;let y=s[m];typeof h[r]=="string"&&(y=v.call(this,h[r])),w.call(this,h.$anchor),w.call(this,h.$dynamicAnchor),s[p]=y;function v($){const A=this.opts.uriResolver.resolve;if($=Ua(y?A(y,$):$),c.has($))throw u($);c.add($);let P=this.refs[$];return typeof P=="string"&&(P=this.refs[P]),typeof P=="object"?l(h,P.schema,$):$!==Ua(g)&&($[0]==="#"?(l(h,o[$],$),o[$]=h):this.refs[$]=g),$}function w($){if(typeof $=="string"){if(!oW.test($))throw new Error(`invalid anchor "${$}"`);v.call(this,`#${$}`)}}}),o;function l(h,p,f){if(p!==void 0&&!eW(h,p))throw u(f)}function u(h){return new Error(`reference "${h}" resolves to more than one schema`)}}Qt.getSchemaRefs=cW;Object.defineProperty(fn,"__esModule",{value:!0});fn.getData=fn.KeywordCxt=fn.validateFunctionCode=void 0;const gT=eo,u0=Mt,my=ci,Fd=Mt,lW=Yh,Dc=Fn,Xf=ns,pe=ke,Se=qn,uW=Qt,li=ce,yc=Rl;function dW(t){if(_T(t)&&(wT(t),vT(t))){pW(t);return}yT(t,()=>(0,gT.topBoolOrEmptySchema)(t))}fn.validateFunctionCode=dW;function yT({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},s){i.code.es5?t.func(e,(0,pe._)`${Se.default.data}, ${Se.default.valCxt}`,n.$async,()=>{t.code((0,pe._)`"use strict"; ${d0(r,i)}`),fW(t,i),t.code(s)}):t.func(e,(0,pe._)`${Se.default.data}, ${hW(i)}`,n.$async,()=>t.code(d0(r,i)).code(s))}function hW(t){return(0,pe._)`{${Se.default.instancePath}="", ${Se.default.parentData}, ${Se.default.parentDataProperty}, ${Se.default.rootData}=${Se.default.data}${t.dynamicRef?(0,pe._)`, ${Se.default.dynamicAnchors}={}`:pe.nil}}={}`}function fW(t,e){t.if(Se.default.valCxt,()=>{t.var(Se.default.instancePath,(0,pe._)`${Se.default.valCxt}.${Se.default.instancePath}`),t.var(Se.default.parentData,(0,pe._)`${Se.default.valCxt}.${Se.default.parentData}`),t.var(Se.default.parentDataProperty,(0,pe._)`${Se.default.valCxt}.${Se.default.parentDataProperty}`),t.var(Se.default.rootData,(0,pe._)`${Se.default.valCxt}.${Se.default.rootData}`),e.dynamicRef&&t.var(Se.default.dynamicAnchors,(0,pe._)`${Se.default.valCxt}.${Se.default.dynamicAnchors}`)},()=>{t.var(Se.default.instancePath,(0,pe._)`""`),t.var(Se.default.parentData,(0,pe._)`undefined`),t.var(Se.default.parentDataProperty,(0,pe._)`undefined`),t.var(Se.default.rootData,Se.default.data),e.dynamicRef&&t.var(Se.default.dynamicAnchors,(0,pe._)`{}`)})}function pW(t){const{schema:e,opts:r,gen:n}=t;yT(t,()=>{r.$comment&&e.$comment&&ET(t),_W(t),n.let(Se.default.vErrors,null),n.let(Se.default.errors,0),r.unevaluated&&mW(t),bT(t),EW(t)})}function mW(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,pe._)`${r}.evaluated`),e.if((0,pe._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,pe._)`${t.evaluated}.props`,(0,pe._)`undefined`)),e.if((0,pe._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,pe._)`${t.evaluated}.items`,(0,pe._)`undefined`))}function d0(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,pe._)`/*# sourceURL=${r} */`:pe.nil}function gW(t,e){if(_T(t)&&(wT(t),vT(t))){yW(t,e);return}(0,gT.boolOrEmptySchema)(t,e)}function vT({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function _T(t){return typeof t.schema!="boolean"}function yW(t,e){const{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&ET(t),wW(t),bW(t);const s=n.const("_errs",Se.default.errors);bT(t,s),n.var(e,(0,pe._)`${s} === ${Se.default.errors}`)}function wT(t){(0,li.checkUnknownRules)(t),vW(t)}function bT(t,e){if(t.opts.jtd)return h0(t,[],!1,e);const r=(0,u0.getSchemaTypes)(t.schema),n=(0,u0.coerceAndCheckDataType)(t,r);h0(t,r,!n,e)}function vW(t){const{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,li.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function _W(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,li.checkStrictMode)(t,"default is ignored in the schema root")}function wW(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,uW.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function bW(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function ET({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){const s=r.$comment;if(i.$comment===!0)t.code((0,pe._)`${Se.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const a=(0,pe.str)`${n}/$comment`,o=t.scopeValue("root",{ref:e.root});t.code((0,pe._)`${Se.default.self}.opts.$comment(${s}, ${a}, ${o}.schema)`)}}function EW(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=t;r.$async?e.if((0,pe._)`${Se.default.errors} === 0`,()=>e.return(Se.default.data),()=>e.throw((0,pe._)`new ${i}(${Se.default.vErrors})`)):(e.assign((0,pe._)`${n}.errors`,Se.default.vErrors),s.unevaluated&&SW(t),e.return((0,pe._)`${Se.default.errors} === 0`))}function SW({gen:t,evaluated:e,props:r,items:n}){r instanceof pe.Name&&t.assign((0,pe._)`${e}.props`,r),n instanceof pe.Name&&t.assign((0,pe._)`${e}.items`,n)}function h0(t,e,r,n){const{gen:i,schema:s,data:a,allErrors:o,opts:c,self:l}=t,{RULES:u}=l;if(s.$ref&&(c.ignoreKeywordsWithRef||!(0,li.schemaHasRulesButRef)(s,u))){i.block(()=>TT(t,"$ref",u.all.$ref.definition));return}c.jtd||IW(t,e),i.block(()=>{for(const p of u.rules)h(p);h(u.post)});function h(p){(0,my.shouldUseGroup)(s,p)&&(p.type?(i.if((0,Fd.checkDataType)(p.type,a,c.strictNumbers)),f0(t,p),e.length===1&&e[0]===p.type&&r&&(i.else(),(0,Fd.reportTypeError)(t)),i.endIf()):f0(t,p),o||i.if((0,pe._)`${Se.default.errors} === ${n||0}`))}}function f0(t,e){const{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,lW.assignDefaults)(t,e.type),r.block(()=>{for(const s of e.rules)(0,my.shouldUseRule)(n,s)&&TT(t,s.keyword,s.definition,e.type)})}function IW(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(TW(t,e),t.opts.allowUnionTypes||$W(t,e),AW(t,t.dataTypes))}function TW(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{ST(t.dataTypes,r)||gy(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),CW(t,e)}}function $W(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&gy(t,"use allowUnionTypes to allow union type keyword")}function AW(t,e){const r=t.self.RULES.all;for(const n in r){const i=r[n];if(typeof i=="object"&&(0,my.shouldUseRule)(t.schema,i)){const{type:s}=i.definition;s.length&&!s.some(a=>PW(e,a))&&gy(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function PW(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function ST(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function CW(t,e){const r=[];for(const n of t.dataTypes)ST(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function gy(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,li.checkStrictMode)(t,e,t.opts.strictTypes)}class IT{constructor(e,r,n){if((0,Dc.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,li.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",$T(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Dc.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Se.default.errors))}result(e,r,n){this.failResult((0,pe.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,pe.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,pe._)`${r} !== undefined && (${(0,pe.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?yc.reportExtraError:yc.reportError)(this,this.def.error,r)}$dataError(){(0,yc.reportError)(this,this.def.$dataError||yc.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,yc.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=pe.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=pe.nil,r=pe.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:s,def:a}=this;n.if((0,pe.or)((0,pe._)`${i} === undefined`,r)),e!==pe.nil&&n.assign(e,!0),(s.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==pe.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,pe.or)(a(),o());function a(){if(n.length){if(!(r instanceof pe.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,pe._)`${(0,Fd.checkDataTypes)(c,r,s.opts.strictNumbers,Fd.DataType.Wrong)}`}return pe.nil}function o(){if(i.validateSchema){const c=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,pe._)`!${c}(${r})`}return pe.nil}}subschema(e,r){const n=(0,Xf.getSubschema)(this.it,e);(0,Xf.extendSubschemaData)(n,this.it,e),(0,Xf.extendSubschemaMode)(n,e);const i={...this.it,...n,items:void 0,props:void 0};return gW(i,r),i}mergeEvaluated(e,r){const{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=li.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=li.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,pe.Name)),!0}}fn.KeywordCxt=IT;function TT(t,e,r,n){const i=new IT(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,Dc.funcKeywordCode)(i,r):"macro"in r?(0,Dc.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,Dc.funcKeywordCode)(i,r)}const xW=/^\/(?:[^~]|~0|~1)*$/,kW=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function $T(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,s;if(t==="")return Se.default.rootData;if(t[0]==="/"){if(!xW.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,s=Se.default.rootData}else{const l=kW.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);const u=+l[1];if(i=l[2],i==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(s=r[e-u],!i)return s}let a=s;const o=i.split("/");for(const l of o)l&&(s=(0,pe._)`${s}${(0,pe.getProperty)((0,li.unescapeJsonPointer)(l))}`,a=(0,pe._)`${a} && ${s}`);return a;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}fn.getData=$T;var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});class RW extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Ol.default=RW;var No={};Object.defineProperty(No,"__esModule",{value:!0});const Jf=Qt;class OW extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Jf.resolveUrl)(e,r,n),this.missingSchema=(0,Jf.normalizeId)((0,Jf.getFullPath)(e,this.missingRef))}}No.default=OW;var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.resolveSchema=Ar.getCompilingSchema=Ar.resolveRef=Ar.compileSchema=Ar.SchemaEnv=void 0;const an=ke,NW=Ol,$s=qn,ln=Qt,p0=ce,DW=fn;class Qh{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,ln.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Ar.SchemaEnv=Qh;function yy(t){const e=AT.call(this,t);if(e)return e;const r=(0,ln.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,a=new an.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s});let o;t.$async&&(o=a.scopeValue("Error",{ref:NW.default,code:(0,an._)`require("ajv/dist/runtime/validation_error").default`}));const c=a.scopeName("validate");t.validateName=c;const l={gen:a,allErrors:this.opts.allErrors,data:$s.default.data,parentData:$s.default.parentData,parentDataProperty:$s.default.parentDataProperty,dataNames:[$s.default.data],dataPathArr:[an.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,an.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:o,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:an.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,an._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(t),(0,DW.validateFunctionCode)(l),a.optimize(this.opts.code.optimize);const h=a.toString();u=`${a.scopeRefs($s.default.scope)}return ${h}`,this.opts.code.process&&(u=this.opts.code.process(u,t));const f=new Function(`${$s.default.self}`,`${$s.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:h,scopeValues:a._values}),this.opts.unevaluated){const{props:m,items:g}=l;f.evaluated={props:m instanceof an.Name?void 0:m,items:g instanceof an.Name?void 0:g,dynamicProps:m instanceof an.Name,dynamicItems:g instanceof an.Name},f.source&&(f.source.evaluated=(0,an.stringify)(f.evaluated))}return t.validate=f,t}catch(h){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),h}finally{this._compilations.delete(t)}}Ar.compileSchema=yy;function FW(t,e,r){var n;r=(0,ln.resolveUrl)(this.opts.uriResolver,e,r);const i=t.refs[r];if(i)return i;let s=LW.call(this,t,r);if(s===void 0){const a=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:o}=this.opts;a&&(s=new Qh({schema:a,schemaId:o,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=MW.call(this,s)}Ar.resolveRef=FW;function MW(t){return(0,ln.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:yy.call(this,t)}function AT(t){for(const e of this._compilations)if(jW(e,t))return e}Ar.getCompilingSchema=AT;function jW(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function LW(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Xh.call(this,t,e)}function Xh(t,e){const r=this.opts.uriResolver.parse(e),n=(0,ln._getFullPath)(this.opts.uriResolver,r);let i=(0,ln.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return Zf.call(this,r,t);const s=(0,ln.normalizeId)(n),a=this.refs[s]||this.schemas[s];if(typeof a=="string"){const o=Xh.call(this,t,a);return typeof(o==null?void 0:o.schema)!="object"?void 0:Zf.call(this,r,o)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||yy.call(this,a),s===(0,ln.normalizeId)(e)){const{schema:o}=a,{schemaId:c}=this.opts,l=o[c];return l&&(i=(0,ln.resolveUrl)(this.opts.uriResolver,i,l)),new Qh({schema:o,schemaId:c,root:t,baseId:i})}return Zf.call(this,r,a)}}Ar.resolveSchema=Xh;const VW=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Zf(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const o of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,p0.unescapeFragment)(o)];if(c===void 0)return;r=c;const l=typeof r=="object"&&r[this.opts.schemaId];!VW.has(o)&&l&&(e=(0,ln.resolveUrl)(this.opts.uriResolver,e,l))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,p0.schemaHasRulesButRef)(r,this.RULES)){const o=(0,ln.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=Xh.call(this,n,o)}const{schemaId:a}=this.opts;if(s=s||new Qh({schema:r,schemaId:a,root:n,baseId:e}),s.schema!==s.root.schema)return s}const UW="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",BW="Meta-schema for $data reference (JSON AnySchema extension proposal)",zW="object",qW=["$data"],HW={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},KW=!1,GW={$id:UW,description:BW,type:zW,required:qW,properties:HW,additionalProperties:KW};var vy={},um={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(r,n){n(e)})(un,function(r){function n(){for(var j=arguments.length,D=Array(j),L=0;L<j;L++)D[L]=arguments[L];if(D.length>1){D[0]=D[0].slice(0,-1);for(var H=D.length-1,q=1;q<H;++q)D[q]=D[q].slice(1,-1);return D[H]=D[H].slice(1),D.join("")}else return D[0]}function i(j){return"(?:"+j+")"}function s(j){return j===void 0?"undefined":j===null?"null":Object.prototype.toString.call(j).split(" ").pop().split("]").shift().toLowerCase()}function a(j){return j.toUpperCase()}function o(j){return j!=null?j instanceof Array?j:typeof j.length!="number"||j.split||j.setInterval||j.call?[j]:Array.prototype.slice.call(j):[]}function c(j,D){var L=j;if(D)for(var H in D)L[H]=D[H];return L}function l(j){var D="[A-Za-z]",L="[0-9]",H=n(L,"[A-Fa-f]"),q=i(i("%[EFef]"+H+"%"+H+H+"%"+H+H)+"|"+i("%[89A-Fa-f]"+H+"%"+H+H)+"|"+i("%"+H+H)),ue="[\\:\\/\\?\\#\\[\\]\\@]",ge="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Oe=n(ue,ge),Xe=j?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Je=j?"[\\uE000-\\uF8FF]":"[]",Re=n(D,L,"[\\-\\.\\_\\~]",Xe);i(D+n(D,L,"[\\+\\-\\.]")+"*"),i(i(q+"|"+n(Re,ge,"[\\:]"))+"*");var tt=i(i("25[0-5]")+"|"+i("2[0-4]"+L)+"|"+i("1"+L+L)+"|"+i("0?[1-9]"+L)+"|0?0?"+L),dt=i(tt+"\\."+tt+"\\."+tt+"\\."+tt),we=i(H+"{1,4}"),it=i(i(we+"\\:"+we)+"|"+dt),bt=i(i(we+"\\:")+"{6}"+it),ot=i("\\:\\:"+i(we+"\\:")+"{5}"+it),Nr=i(i(we)+"?\\:\\:"+i(we+"\\:")+"{4}"+it),Dr=i(i(i(we+"\\:")+"{0,1}"+we)+"?\\:\\:"+i(we+"\\:")+"{3}"+it),Sr=i(i(i(we+"\\:")+"{0,2}"+we)+"?\\:\\:"+i(we+"\\:")+"{2}"+it),Hr=i(i(i(we+"\\:")+"{0,3}"+we)+"?\\:\\:"+we+"\\:"+it),fr=i(i(i(we+"\\:")+"{0,4}"+we)+"?\\:\\:"+it),tr=i(i(i(we+"\\:")+"{0,5}"+we)+"?\\:\\:"+we),Kr=i(i(i(we+"\\:")+"{0,6}"+we)+"?\\:\\:"),Sn=i([bt,ot,Nr,Dr,Sr,Hr,fr,tr,Kr].join("|")),Gr=i(i(Re+"|"+q)+"+");i("[vV]"+H+"+\\."+n(Re,ge,"[\\:]")+"+"),i(i(q+"|"+n(Re,ge))+"*");var $i=i(q+"|"+n(Re,ge,"[\\:\\@]"));return i(i(q+"|"+n(Re,ge,"[\\@]"))+"+"),i(i($i+"|"+n("[\\/\\?]",Je))+"*"),{NOT_SCHEME:new RegExp(n("[^]",D,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Re,ge),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Re,ge),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Re,ge),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Re,ge),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Re,ge,"[\\:\\@\\/\\?]",Je),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Re,ge,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Re,ge),"g"),UNRESERVED:new RegExp(Re,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Re,Oe),"g"),PCT_ENCODED:new RegExp(q,"g"),IPV4ADDRESS:new RegExp("^("+dt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Sn+")"+i(i("\\%25|\\%(?!"+H+"{2})")+"("+Gr+")")+"?\\]?$")}}var u=l(!1),h=l(!0),p=function(){function j(D,L){var H=[],q=!0,ue=!1,ge=void 0;try{for(var Oe=D[Symbol.iterator](),Xe;!(q=(Xe=Oe.next()).done)&&(H.push(Xe.value),!(L&&H.length===L));q=!0);}catch(Je){ue=!0,ge=Je}finally{try{!q&&Oe.return&&Oe.return()}finally{if(ue)throw ge}}return H}return function(D,L){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return j(D,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(j){if(Array.isArray(j)){for(var D=0,L=Array(j.length);D<j.length;D++)L[D]=j[D];return L}else return Array.from(j)},m=2147483647,g=36,y=1,v=26,w=38,$=700,A=72,P=128,O="-",E=/^xn--/,b=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=g-y,R=Math.floor,x=String.fromCharCode;function Q(j){throw new RangeError(T[j])}function re(j,D){for(var L=[],H=j.length;H--;)L[H]=D(j[H]);return L}function Ee(j,D){var L=j.split("@"),H="";L.length>1&&(H=L[0]+"@",j=L[1]),j=j.replace(I,".");var q=j.split("."),ue=re(q,D).join(".");return H+ue}function _e(j){for(var D=[],L=0,H=j.length;L<H;){var q=j.charCodeAt(L++);if(q>=55296&&q<=56319&&L<H){var ue=j.charCodeAt(L++);(ue&64512)==56320?D.push(((q&1023)<<10)+(ue&1023)+65536):(D.push(q),L--)}else D.push(q)}return D}var me=function(D){return String.fromCodePoint.apply(String,f(D))},le=function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:g},Y=function(D,L){return D+22+75*(D<26)-((L!=0)<<5)},V=function(D,L,H){var q=0;for(D=H?R(D/$):D>>1,D+=R(D/L);D>C*v>>1;q+=g)D=R(D/C);return R(q+(C+1)*D/(D+w))},W=function(D){var L=[],H=D.length,q=0,ue=P,ge=A,Oe=D.lastIndexOf(O);Oe<0&&(Oe=0);for(var Xe=0;Xe<Oe;++Xe)D.charCodeAt(Xe)>=128&&Q("not-basic"),L.push(D.charCodeAt(Xe));for(var Je=Oe>0?Oe+1:0;Je<H;){for(var Re=q,tt=1,dt=g;;dt+=g){Je>=H&&Q("invalid-input");var we=le(D.charCodeAt(Je++));(we>=g||we>R((m-q)/tt))&&Q("overflow"),q+=we*tt;var it=dt<=ge?y:dt>=ge+v?v:dt-ge;if(we<it)break;var bt=g-it;tt>R(m/bt)&&Q("overflow"),tt*=bt}var ot=L.length+1;ge=V(q-Re,ot,Re==0),R(q/ot)>m-ue&&Q("overflow"),ue+=R(q/ot),q%=ot,L.splice(q++,0,ue)}return String.fromCodePoint.apply(String,L)},U=function(D){var L=[];D=_e(D);var H=D.length,q=P,ue=0,ge=A,Oe=!0,Xe=!1,Je=void 0;try{for(var Re=D[Symbol.iterator](),tt;!(Oe=(tt=Re.next()).done);Oe=!0){var dt=tt.value;dt<128&&L.push(x(dt))}}catch(Ai){Xe=!0,Je=Ai}finally{try{!Oe&&Re.return&&Re.return()}finally{if(Xe)throw Je}}var we=L.length,it=we;for(we&&L.push(O);it<H;){var bt=m,ot=!0,Nr=!1,Dr=void 0;try{for(var Sr=D[Symbol.iterator](),Hr;!(ot=(Hr=Sr.next()).done);ot=!0){var fr=Hr.value;fr>=q&&fr<bt&&(bt=fr)}}catch(Ai){Nr=!0,Dr=Ai}finally{try{!ot&&Sr.return&&Sr.return()}finally{if(Nr)throw Dr}}var tr=it+1;bt-q>R((m-ue)/tr)&&Q("overflow"),ue+=(bt-q)*tr,q=bt;var Kr=!0,Sn=!1,Gr=void 0;try{for(var $i=D[Symbol.iterator](),va;!(Kr=(va=$i.next()).done);Kr=!0){var _a=va.value;if(_a<q&&++ue>m&&Q("overflow"),_a==q){for(var Es=ue,Ss=g;;Ss+=g){var wa=Ss<=ge?y:Ss>=ge+v?v:Ss-ge;if(Es<wa)break;var wu=Es-wa,ic=g-wa;L.push(x(Y(wa+wu%ic,0))),Es=R(wu/ic)}L.push(x(Y(Es,0))),ge=V(ue,tr,it==we),ue=0,++it}}}catch(Ai){Sn=!0,Gr=Ai}finally{try{!Kr&&$i.return&&$i.return()}finally{if(Sn)throw Gr}}++ue,++q}return L.join("")},N=function(D){return Ee(D,function(L){return E.test(L)?W(L.slice(4).toLowerCase()):L})},M=function(D){return Ee(D,function(L){return b.test(L)?"xn--"+U(L):L})},K={version:"2.1.0",ucs2:{decode:_e,encode:me},decode:W,encode:U,toASCII:M,toUnicode:N},Z={};function ae(j){var D=j.charCodeAt(0),L=void 0;return D<16?L="%0"+D.toString(16).toUpperCase():D<128?L="%"+D.toString(16).toUpperCase():D<2048?L="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():L="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),L}function Ie(j){for(var D="",L=0,H=j.length;L<H;){var q=parseInt(j.substr(L+1,2),16);if(q<128)D+=String.fromCharCode(q),L+=3;else if(q>=194&&q<224){if(H-L>=6){var ue=parseInt(j.substr(L+4,2),16);D+=String.fromCharCode((q&31)<<6|ue&63)}else D+=j.substr(L,6);L+=6}else if(q>=224){if(H-L>=9){var ge=parseInt(j.substr(L+4,2),16),Oe=parseInt(j.substr(L+7,2),16);D+=String.fromCharCode((q&15)<<12|(ge&63)<<6|Oe&63)}else D+=j.substr(L,9);L+=9}else D+=j.substr(L,3),L+=3}return D}function Te(j,D){function L(H){var q=Ie(H);return q.match(D.UNRESERVED)?q:H}return j.scheme&&(j.scheme=String(j.scheme).replace(D.PCT_ENCODED,L).toLowerCase().replace(D.NOT_SCHEME,"")),j.userinfo!==void 0&&(j.userinfo=String(j.userinfo).replace(D.PCT_ENCODED,L).replace(D.NOT_USERINFO,ae).replace(D.PCT_ENCODED,a)),j.host!==void 0&&(j.host=String(j.host).replace(D.PCT_ENCODED,L).toLowerCase().replace(D.NOT_HOST,ae).replace(D.PCT_ENCODED,a)),j.path!==void 0&&(j.path=String(j.path).replace(D.PCT_ENCODED,L).replace(j.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,ae).replace(D.PCT_ENCODED,a)),j.query!==void 0&&(j.query=String(j.query).replace(D.PCT_ENCODED,L).replace(D.NOT_QUERY,ae).replace(D.PCT_ENCODED,a)),j.fragment!==void 0&&(j.fragment=String(j.fragment).replace(D.PCT_ENCODED,L).replace(D.NOT_FRAGMENT,ae).replace(D.PCT_ENCODED,a)),j}function Me(j){return j.replace(/^0*(.*)/,"$1")||"0"}function $e(j,D){var L=j.match(D.IPV4ADDRESS)||[],H=p(L,2),q=H[1];return q?q.split(".").map(Me).join("."):j}function Qe(j,D){var L=j.match(D.IPV6ADDRESS)||[],H=p(L,3),q=H[1],ue=H[2];if(q){for(var ge=q.toLowerCase().split("::").reverse(),Oe=p(ge,2),Xe=Oe[0],Je=Oe[1],Re=Je?Je.split(":").map(Me):[],tt=Xe.split(":").map(Me),dt=D.IPV4ADDRESS.test(tt[tt.length-1]),we=dt?7:8,it=tt.length-we,bt=Array(we),ot=0;ot<we;++ot)bt[ot]=Re[ot]||tt[it+ot]||"";dt&&(bt[we-1]=$e(bt[we-1],D));var Nr=bt.reduce(function(tr,Kr,Sn){if(!Kr||Kr==="0"){var Gr=tr[tr.length-1];Gr&&Gr.index+Gr.length===Sn?Gr.length++:tr.push({index:Sn,length:1})}return tr},[]),Dr=Nr.sort(function(tr,Kr){return Kr.length-tr.length})[0],Sr=void 0;if(Dr&&Dr.length>1){var Hr=bt.slice(0,Dr.index),fr=bt.slice(Dr.index+Dr.length);Sr=Hr.join(":")+"::"+fr.join(":")}else Sr=bt.join(":");return ue&&(Sr+="%"+ue),Sr}else return j}var ut=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,nt="".match(/(){0}/)[1]===void 0;function It(j){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L={},H=D.iri!==!1?h:u;D.reference==="suffix"&&(j=(D.scheme?D.scheme+":":"")+"//"+j);var q=j.match(ut);if(q){nt?(L.scheme=q[1],L.userinfo=q[3],L.host=q[4],L.port=parseInt(q[5],10),L.path=q[6]||"",L.query=q[7],L.fragment=q[8],isNaN(L.port)&&(L.port=q[5])):(L.scheme=q[1]||void 0,L.userinfo=j.indexOf("@")!==-1?q[3]:void 0,L.host=j.indexOf("//")!==-1?q[4]:void 0,L.port=parseInt(q[5],10),L.path=q[6]||"",L.query=j.indexOf("?")!==-1?q[7]:void 0,L.fragment=j.indexOf("#")!==-1?q[8]:void 0,isNaN(L.port)&&(L.port=j.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?q[4]:void 0)),L.host&&(L.host=Qe($e(L.host,H),H)),L.scheme===void 0&&L.userinfo===void 0&&L.host===void 0&&L.port===void 0&&!L.path&&L.query===void 0?L.reference="same-document":L.scheme===void 0?L.reference="relative":L.fragment===void 0?L.reference="absolute":L.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==L.reference&&(L.error=L.error||"URI is not a "+D.reference+" reference.");var ue=Z[(D.scheme||L.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!ue||!ue.unicodeSupport)){if(L.host&&(D.domainHost||ue&&ue.domainHost))try{L.host=K.toASCII(L.host.replace(H.PCT_ENCODED,Ie).toLowerCase())}catch(ge){L.error=L.error||"Host's domain name can not be converted to ASCII via punycode: "+ge}Te(L,u)}else Te(L,H);ue&&ue.parse&&ue.parse(L,D)}else L.error=L.error||"URI can not be parsed.";return L}function dr(j,D){var L=D.iri!==!1?h:u,H=[];return j.userinfo!==void 0&&(H.push(j.userinfo),H.push("@")),j.host!==void 0&&H.push(Qe($e(String(j.host),L),L).replace(L.IPV6ADDRESS,function(q,ue,ge){return"["+ue+(ge?"%25"+ge:"")+"]"})),(typeof j.port=="number"||typeof j.port=="string")&&(H.push(":"),H.push(String(j.port))),H.length?H.join(""):void 0}var Or=/^\.\.?\//,Gn=/^\/\.(\/|$)/,wn=/^\/\.\.(\/|$)/,bi=/^\/?(?:.|\n)*?(?=\/|$)/;function zr(j){for(var D=[];j.length;)if(j.match(Or))j=j.replace(Or,"");else if(j.match(Gn))j=j.replace(Gn,"/");else if(j.match(wn))j=j.replace(wn,"/"),D.pop();else if(j==="."||j==="..")j="";else{var L=j.match(bi);if(L){var H=L[0];j=j.slice(H.length),D.push(H)}else throw new Error("Unexpected dot segment condition")}return D.join("")}function Bt(j){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=D.iri?h:u,H=[],q=Z[(D.scheme||j.scheme||"").toLowerCase()];if(q&&q.serialize&&q.serialize(j,D),j.host&&!L.IPV6ADDRESS.test(j.host)){if(D.domainHost||q&&q.domainHost)try{j.host=D.iri?K.toUnicode(j.host):K.toASCII(j.host.replace(L.PCT_ENCODED,Ie).toLowerCase())}catch(Oe){j.error=j.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+Oe}}Te(j,L),D.reference!=="suffix"&&j.scheme&&(H.push(j.scheme),H.push(":"));var ue=dr(j,D);if(ue!==void 0&&(D.reference!=="suffix"&&H.push("//"),H.push(ue),j.path&&j.path.charAt(0)!=="/"&&H.push("/")),j.path!==void 0){var ge=j.path;!D.absolutePath&&(!q||!q.absolutePath)&&(ge=zr(ge)),ue===void 0&&(ge=ge.replace(/^\/\//,"/%2F")),H.push(ge)}return j.query!==void 0&&(H.push("?"),H.push(j.query)),j.fragment!==void 0&&(H.push("#"),H.push(j.fragment)),H.join("")}function bn(j,D){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},H=arguments[3],q={};return H||(j=It(Bt(j,L),L),D=It(Bt(D,L),L)),L=L||{},!L.tolerant&&D.scheme?(q.scheme=D.scheme,q.userinfo=D.userinfo,q.host=D.host,q.port=D.port,q.path=zr(D.path||""),q.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(q.userinfo=D.userinfo,q.host=D.host,q.port=D.port,q.path=zr(D.path||""),q.query=D.query):(D.path?(D.path.charAt(0)==="/"?q.path=zr(D.path):((j.userinfo!==void 0||j.host!==void 0||j.port!==void 0)&&!j.path?q.path="/"+D.path:j.path?q.path=j.path.slice(0,j.path.lastIndexOf("/")+1)+D.path:q.path=D.path,q.path=zr(q.path)),q.query=D.query):(q.path=j.path,D.query!==void 0?q.query=D.query:q.query=j.query),q.userinfo=j.userinfo,q.host=j.host,q.port=j.port),q.scheme=j.scheme),q.fragment=D.fragment,q}function Ei(j,D,L){var H=c({scheme:"null"},L);return Bt(bn(It(j,H),It(D,H),H,!0),H)}function vt(j,D){return typeof j=="string"?j=Bt(It(j,D),D):s(j)==="object"&&(j=It(Bt(j,D),D)),j}function Pt(j,D,L){return typeof j=="string"?j=Bt(It(j,L),L):s(j)==="object"&&(j=Bt(j,L)),typeof D=="string"?D=Bt(It(D,L),L):s(D)==="object"&&(D=Bt(D,L)),j===D}function Wn(j,D){return j&&j.toString().replace(!D||!D.iri?u.ESCAPE:h.ESCAPE,ae)}function hr(j,D){return j&&j.toString().replace(!D||!D.iri?u.PCT_ENCODED:h.PCT_ENCODED,Ie)}var En={scheme:"http",domainHost:!0,parse:function(D,L){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},serialize:function(D,L){var H=String(D.scheme).toLowerCase()==="https";return(D.port===(H?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D}},pu={scheme:"https",domainHost:En.domainHost,parse:En.parse,serialize:En.serialize};function Si(j){return typeof j.secure=="boolean"?j.secure:String(j.scheme).toLowerCase()==="wss"}var Ii={scheme:"ws",domainHost:!0,parse:function(D,L){var H=D;return H.secure=Si(H),H.resourceName=(H.path||"/")+(H.query?"?"+H.query:""),H.path=void 0,H.query=void 0,H},serialize:function(D,L){if((D.port===(Si(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var H=D.resourceName.split("?"),q=p(H,2),ue=q[0],ge=q[1];D.path=ue&&ue!=="/"?ue:void 0,D.query=ge,D.resourceName=void 0}return D.fragment=void 0,D}},Xo={scheme:"wss",domainHost:Ii.domainHost,parse:Ii.parse,serialize:Ii.serialize},Jo={},mu="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",qr="[0-9A-Fa-f]",Zo=i(i("%[EFef]"+qr+"%"+qr+qr+"%"+qr+qr)+"|"+i("%[89A-Fa-f]"+qr+"%"+qr+qr)+"|"+i("%"+qr+qr)),gu="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",yu="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",_s=n(yu,'[\\"\\\\]'),ec="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",tc=new RegExp(mu,"g"),Er=new RegExp(Zo,"g"),vu=new RegExp(n("[^]",gu,"[\\.]",'[\\"]',_s),"g"),ws=new RegExp(n("[^]",mu,ec),"g"),_u=ws;function Yn(j){var D=Ie(j);return D.match(tc)?D:j}var rc={scheme:"mailto",parse:function(D,L){var H=D,q=H.to=H.path?H.path.split(","):[];if(H.path=void 0,H.query){for(var ue=!1,ge={},Oe=H.query.split("&"),Xe=0,Je=Oe.length;Xe<Je;++Xe){var Re=Oe[Xe].split("=");switch(Re[0]){case"to":for(var tt=Re[1].split(","),dt=0,we=tt.length;dt<we;++dt)q.push(tt[dt]);break;case"subject":H.subject=hr(Re[1],L);break;case"body":H.body=hr(Re[1],L);break;default:ue=!0,ge[hr(Re[0],L)]=hr(Re[1],L);break}}ue&&(H.headers=ge)}H.query=void 0;for(var it=0,bt=q.length;it<bt;++it){var ot=q[it].split("@");if(ot[0]=hr(ot[0]),L.unicodeSupport)ot[1]=hr(ot[1],L).toLowerCase();else try{ot[1]=K.toASCII(hr(ot[1],L).toLowerCase())}catch(Nr){H.error=H.error||"Email address's domain name can not be converted to ASCII via punycode: "+Nr}q[it]=ot.join("@")}return H},serialize:function(D,L){var H=D,q=o(D.to);if(q){for(var ue=0,ge=q.length;ue<ge;++ue){var Oe=String(q[ue]),Xe=Oe.lastIndexOf("@"),Je=Oe.slice(0,Xe).replace(Er,Yn).replace(Er,a).replace(vu,ae),Re=Oe.slice(Xe+1);try{Re=L.iri?K.toUnicode(Re):K.toASCII(hr(Re,L).toLowerCase())}catch(it){H.error=H.error||"Email address's domain name can not be converted to "+(L.iri?"Unicode":"ASCII")+" via punycode: "+it}q[ue]=Je+"@"+Re}H.path=q.join(",")}var tt=D.headers=D.headers||{};D.subject&&(tt.subject=D.subject),D.body&&(tt.body=D.body);var dt=[];for(var we in tt)tt[we]!==Jo[we]&&dt.push(we.replace(Er,Yn).replace(Er,a).replace(ws,ae)+"="+tt[we].replace(Er,Yn).replace(Er,a).replace(_u,ae));return dt.length&&(H.query=dt.join("&")),H}},Kt=/^([^\:]+)\:(.*)/,nc={scheme:"urn",parse:function(D,L){var H=D.path&&D.path.match(Kt),q=D;if(H){var ue=L.scheme||q.scheme||"urn",ge=H[1].toLowerCase(),Oe=H[2],Xe=ue+":"+(L.nid||ge),Je=Z[Xe];q.nid=ge,q.nss=Oe,q.path=void 0,Je&&(q=Je.parse(q,L))}else q.error=q.error||"URN can not be parsed.";return q},serialize:function(D,L){var H=L.scheme||D.scheme||"urn",q=D.nid,ue=H+":"+(L.nid||q),ge=Z[ue];ge&&(D=ge.serialize(D,L));var Oe=D,Xe=D.nss;return Oe.path=(q||L.nid)+":"+Xe,Oe}},bs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ti={scheme:"urn:uuid",parse:function(D,L){var H=D;return H.uuid=H.nss,H.nss=void 0,!L.tolerant&&(!H.uuid||!H.uuid.match(bs))&&(H.error=H.error||"UUID is not valid."),H},serialize:function(D,L){var H=D;return H.nss=(D.uuid||"").toLowerCase(),H}};Z[En.scheme]=En,Z[pu.scheme]=pu,Z[Ii.scheme]=Ii,Z[Xo.scheme]=Xo,Z[rc.scheme]=rc,Z[nc.scheme]=nc,Z[Ti.scheme]=Ti,r.SCHEMES=Z,r.pctEncChar=ae,r.pctDecChars=Ie,r.parse=It,r.removeDotSegments=zr,r.serialize=Bt,r.resolveComponents=bn,r.resolve=Ei,r.normalize=vt,r.equal=Pt,r.escapeComponent=Wn,r.unescapeComponent=hr,Object.defineProperty(r,"__esModule",{value:!0})})})(um,um.exports);var WW=um.exports;Object.defineProperty(vy,"__esModule",{value:!0});const PT=WW;PT.code='require("ajv/dist/runtime/uri").default';vy.default=PT;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=fn;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=ke;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Ol,i=No,s=qs,a=Ar,o=ke,c=Qt,l=Mt,u=ce,h=GW,p=vy,f=(Y,V)=>new RegExp(Y,V);f.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function $(Y){var V,W,U,N,M,K,Z,ae,Ie,Te,Me,$e,Qe,ut,nt,It,dr,Or,Gn,wn,bi,zr,Bt,bn,Ei;const vt=Y.strict,Pt=(V=Y.code)===null||V===void 0?void 0:V.optimize,Wn=Pt===!0||Pt===void 0?1:Pt||0,hr=(U=(W=Y.code)===null||W===void 0?void 0:W.regExp)!==null&&U!==void 0?U:f,En=(N=Y.uriResolver)!==null&&N!==void 0?N:p.default;return{strictSchema:(K=(M=Y.strictSchema)!==null&&M!==void 0?M:vt)!==null&&K!==void 0?K:!0,strictNumbers:(ae=(Z=Y.strictNumbers)!==null&&Z!==void 0?Z:vt)!==null&&ae!==void 0?ae:!0,strictTypes:(Te=(Ie=Y.strictTypes)!==null&&Ie!==void 0?Ie:vt)!==null&&Te!==void 0?Te:"log",strictTuples:($e=(Me=Y.strictTuples)!==null&&Me!==void 0?Me:vt)!==null&&$e!==void 0?$e:"log",strictRequired:(ut=(Qe=Y.strictRequired)!==null&&Qe!==void 0?Qe:vt)!==null&&ut!==void 0?ut:!1,code:Y.code?{...Y.code,optimize:Wn,regExp:hr}:{optimize:Wn,regExp:hr},loopRequired:(nt=Y.loopRequired)!==null&&nt!==void 0?nt:w,loopEnum:(It=Y.loopEnum)!==null&&It!==void 0?It:w,meta:(dr=Y.meta)!==null&&dr!==void 0?dr:!0,messages:(Or=Y.messages)!==null&&Or!==void 0?Or:!0,inlineRefs:(Gn=Y.inlineRefs)!==null&&Gn!==void 0?Gn:!0,schemaId:(wn=Y.schemaId)!==null&&wn!==void 0?wn:"$id",addUsedSchema:(bi=Y.addUsedSchema)!==null&&bi!==void 0?bi:!0,validateSchema:(zr=Y.validateSchema)!==null&&zr!==void 0?zr:!0,validateFormats:(Bt=Y.validateFormats)!==null&&Bt!==void 0?Bt:!0,unicodeRegExp:(bn=Y.unicodeRegExp)!==null&&bn!==void 0?bn:!0,int32range:(Ei=Y.int32range)!==null&&Ei!==void 0?Ei:!0,uriResolver:En}}class A{constructor(V={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,V=this.opts={...V,...$(V)};const{es5:W,lines:U}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:g,es5:W,lines:U}),this.logger=R(V.logger);const N=V.validateFormats;V.validateFormats=!1,this.RULES=(0,s.getRules)(),P.call(this,y,V,"NOT SUPPORTED"),P.call(this,v,V,"DEPRECATED","warn"),this._metaOpts=T.call(this),V.formats&&b.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),V.keywords&&I.call(this,V.keywords),typeof V.meta=="object"&&this.addMetaSchema(V.meta),E.call(this),V.validateFormats=N}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:V,meta:W,schemaId:U}=this.opts;let N=h;U==="id"&&(N={...h},N.id=N.$id,delete N.$id),W&&V&&this.addMetaSchema(N,N[U],!1)}defaultMeta(){const{meta:V,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof V=="object"?V[W]||V:void 0}validate(V,W){let U;if(typeof V=="string"){if(U=this.getSchema(V),!U)throw new Error(`no schema with key or ref "${V}"`)}else U=this.compile(V);const N=U(W);return"$async"in U||(this.errors=U.errors),N}compile(V,W){const U=this._addSchema(V,W);return U.validate||this._compileSchemaEnv(U)}compileAsync(V,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:U}=this.opts;return N.call(this,V,W);async function N(Te,Me){await M.call(this,Te.$schema);const $e=this._addSchema(Te,Me);return $e.validate||K.call(this,$e)}async function M(Te){Te&&!this.getSchema(Te)&&await N.call(this,{$ref:Te},!0)}async function K(Te){try{return this._compileSchemaEnv(Te)}catch(Me){if(!(Me instanceof i.default))throw Me;return Z.call(this,Me),await ae.call(this,Me.missingSchema),K.call(this,Te)}}function Z({missingSchema:Te,missingRef:Me}){if(this.refs[Te])throw new Error(`AnySchema ${Te} is loaded but ${Me} cannot be resolved`)}async function ae(Te){const Me=await Ie.call(this,Te);this.refs[Te]||await M.call(this,Me.$schema),this.refs[Te]||this.addSchema(Me,Te,W)}async function Ie(Te){const Me=this._loading[Te];if(Me)return Me;try{return await(this._loading[Te]=U(Te))}finally{delete this._loading[Te]}}}addSchema(V,W,U,N=this.opts.validateSchema){if(Array.isArray(V)){for(const K of V)this.addSchema(K,void 0,U,N);return this}let M;if(typeof V=="object"){const{schemaId:K}=this.opts;if(M=V[K],M!==void 0&&typeof M!="string")throw new Error(`schema ${K} must be string`)}return W=(0,c.normalizeId)(W||M),this._checkUnique(W),this.schemas[W]=this._addSchema(V,U,W,N,!0),this}addMetaSchema(V,W,U=this.opts.validateSchema){return this.addSchema(V,W,!0,U),this}validateSchema(V,W){if(typeof V=="boolean")return!0;let U;if(U=V.$schema,U!==void 0&&typeof U!="string")throw new Error("$schema must be a string");if(U=U||this.opts.defaultMeta||this.defaultMeta(),!U)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const N=this.validate(U,V);if(!N&&W){const M="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(M);else throw new Error(M)}return N}getSchema(V){let W;for(;typeof(W=O.call(this,V))=="string";)V=W;if(W===void 0){const{schemaId:U}=this.opts,N=new a.SchemaEnv({schema:{},schemaId:U});if(W=a.resolveSchema.call(this,N,V),!W)return;this.refs[V]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(V){if(V instanceof RegExp)return this._removeAllSchemas(this.schemas,V),this._removeAllSchemas(this.refs,V),this;switch(typeof V){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=O.call(this,V);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[V],delete this.refs[V],this}case"object":{const W=V;this._cache.delete(W);let U=V[this.opts.schemaId];return U&&(U=(0,c.normalizeId)(U),delete this.schemas[U],delete this.refs[U]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(V){for(const W of V)this.addKeyword(W);return this}addKeyword(V,W){let U;if(typeof V=="string")U=V,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=U);else if(typeof V=="object"&&W===void 0){if(W=V,U=W.keyword,Array.isArray(U)&&!U.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Q.call(this,U,W),!W)return(0,u.eachItem)(U,M=>re.call(this,M)),this;_e.call(this,W);const N={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,u.eachItem)(U,N.type.length===0?M=>re.call(this,M,N):M=>N.type.forEach(K=>re.call(this,M,N,K))),this}getKeyword(V){const W=this.RULES.all[V];return typeof W=="object"?W.definition:!!W}removeKeyword(V){const{RULES:W}=this;delete W.keywords[V],delete W.all[V];for(const U of W.rules){const N=U.rules.findIndex(M=>M.keyword===V);N>=0&&U.rules.splice(N,1)}return this}addFormat(V,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[V]=W,this}errorsText(V=this.errors,{separator:W=", ",dataVar:U="data"}={}){return!V||V.length===0?"No errors":V.map(N=>`${U}${N.instancePath} ${N.message}`).reduce((N,M)=>N+W+M)}$dataMetaSchema(V,W){const U=this.RULES.all;V=JSON.parse(JSON.stringify(V));for(const N of W){const M=N.split("/").slice(1);let K=V;for(const Z of M)K=K[Z];for(const Z in U){const ae=U[Z];if(typeof ae!="object")continue;const{$data:Ie}=ae.definition,Te=K[Z];Ie&&Te&&(K[Z]=le(Te))}}return V}_removeAllSchemas(V,W){for(const U in V){const N=V[U];(!W||W.test(U))&&(typeof N=="string"?delete V[U]:N&&!N.meta&&(this._cache.delete(N.schema),delete V[U]))}}_addSchema(V,W,U,N=this.opts.validateSchema,M=this.opts.addUsedSchema){let K;const{schemaId:Z}=this.opts;if(typeof V=="object")K=V[Z];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof V!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(V);if(ae!==void 0)return ae;U=(0,c.normalizeId)(K||U);const Ie=c.getSchemaRefs.call(this,V,U);return ae=new a.SchemaEnv({schema:V,schemaId:Z,meta:W,baseId:U,localRefs:Ie}),this._cache.set(ae.schema,ae),M&&!U.startsWith("#")&&(U&&this._checkUnique(U),this.refs[U]=ae),N&&this.validateSchema(V,!0),ae}_checkUnique(V){if(this.schemas[V]||this.refs[V])throw new Error(`schema with key or id "${V}" already exists`)}_compileSchemaEnv(V){if(V.meta?this._compileMetaSchema(V):a.compileSchema.call(this,V),!V.validate)throw new Error("ajv implementation error");return V.validate}_compileMetaSchema(V){const W=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,V)}finally{this.opts=W}}}A.ValidationError=n.default,A.MissingRefError=i.default,t.default=A;function P(Y,V,W,U="error"){for(const N in Y){const M=N;M in V&&this.logger[U](`${W}: option ${N}. ${Y[M]}`)}}function O(Y){return Y=(0,c.normalizeId)(Y),this.schemas[Y]||this.refs[Y]}function E(){const Y=this.opts.schemas;if(Y)if(Array.isArray(Y))this.addSchema(Y);else for(const V in Y)this.addSchema(Y[V],V)}function b(){for(const Y in this.opts.formats){const V=this.opts.formats[Y];V&&this.addFormat(Y,V)}}function I(Y){if(Array.isArray(Y)){this.addVocabulary(Y);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const V in Y){const W=Y[V];W.keyword||(W.keyword=V),this.addKeyword(W)}}function T(){const Y={...this.opts};for(const V of m)delete Y[V];return Y}const C={log(){},warn(){},error(){}};function R(Y){if(Y===!1)return C;if(Y===void 0)return console;if(Y.log&&Y.warn&&Y.error)return Y;throw new Error("logger must implement log, warn and error methods")}const x=/^[a-z_$][a-z0-9_$:-]*$/i;function Q(Y,V){const{RULES:W}=this;if((0,u.eachItem)(Y,U=>{if(W.keywords[U])throw new Error(`Keyword ${U} is already defined`);if(!x.test(U))throw new Error(`Keyword ${U} has invalid name`)}),!!V&&V.$data&&!("code"in V||"validate"in V))throw new Error('$data keyword must have "code" or "validate" function')}function re(Y,V,W){var U;const N=V==null?void 0:V.post;if(W&&N)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:M}=this;let K=N?M.post:M.rules.find(({type:ae})=>ae===W);if(K||(K={type:W,rules:[]},M.rules.push(K)),M.keywords[Y]=!0,!V)return;const Z={keyword:Y,definition:{...V,type:(0,l.getJSONTypes)(V.type),schemaType:(0,l.getJSONTypes)(V.schemaType)}};V.before?Ee.call(this,K,Z,V.before):K.rules.push(Z),M.all[Y]=Z,(U=V.implements)===null||U===void 0||U.forEach(ae=>this.addKeyword(ae))}function Ee(Y,V,W){const U=Y.rules.findIndex(N=>N.keyword===W);U>=0?Y.rules.splice(U,0,V):(Y.rules.push(V),this.logger.warn(`rule ${W} is not defined`))}function _e(Y){let{metaSchema:V}=Y;V!==void 0&&(Y.$data&&this.opts.$data&&(V=le(V)),Y.validateSchema=this.compile(V,!0))}const me={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function le(Y){return{anyOf:[Y,me]}}})(YI);var _y={},wy={},by={};Object.defineProperty(by,"__esModule",{value:!0});const YW={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};by.default=YW;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.callRef=Hs.getValidate=void 0;const QW=No,m0=Ne,Tr=ke,Aa=qn,g0=Ar,Mu=ce,XW={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:s,validateName:a,opts:o,self:c}=n,{root:l}=s;if((r==="#"||r==="#/")&&i===l.baseId)return h();const u=g0.resolveRef.call(c,l,i,r);if(u===void 0)throw new QW.default(n.opts.uriResolver,i,r);if(u instanceof g0.SchemaEnv)return p(u);return f(u);function h(){if(s===l)return cd(t,a,s,s.$async);const m=e.scopeValue("root",{ref:l});return cd(t,(0,Tr._)`${m}.validate`,l,l.$async)}function p(m){const g=CT(t,m);cd(t,g,m,m.$async)}function f(m){const g=e.scopeValue("schema",o.code.source===!0?{ref:m,code:(0,Tr.stringify)(m)}:{ref:m}),y=e.name("valid"),v=t.subschema({schema:m,dataTypes:[],schemaPath:Tr.nil,topSchemaRef:g,errSchemaPath:r},y);t.mergeEvaluated(v),t.ok(y)}}};function CT(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Tr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Hs.getValidate=CT;function cd(t,e,r,n){const{gen:i,it:s}=t,{allErrors:a,schemaEnv:o,opts:c}=s,l=c.passContext?Aa.default.this:Tr.nil;n?u():h();function u(){if(!o.$async)throw new Error("async schema referenced by sync schema");const m=i.let("valid");i.try(()=>{i.code((0,Tr._)`await ${(0,m0.callValidateCode)(t,e,l)}`),f(e),a||i.assign(m,!0)},g=>{i.if((0,Tr._)`!(${g} instanceof ${s.ValidationError})`,()=>i.throw(g)),p(g),a||i.assign(m,!1)}),t.ok(m)}function h(){t.result((0,m0.callValidateCode)(t,e,l),()=>f(e),()=>p(e))}function p(m){const g=(0,Tr._)`${m}.errors`;i.assign(Aa.default.vErrors,(0,Tr._)`${Aa.default.vErrors} === null ? ${g} : ${Aa.default.vErrors}.concat(${g})`),i.assign(Aa.default.errors,(0,Tr._)`${Aa.default.vErrors}.length`)}function f(m){var g;if(!s.opts.unevaluated)return;const y=(g=r==null?void 0:r.validate)===null||g===void 0?void 0:g.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=Mu.mergeEvaluated.props(i,y.props,s.props));else{const v=i.var("props",(0,Tr._)`${m}.evaluated.props`);s.props=Mu.mergeEvaluated.props(i,v,s.props,Tr.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=Mu.mergeEvaluated.items(i,y.items,s.items));else{const v=i.var("items",(0,Tr._)`${m}.evaluated.items`);s.items=Mu.mergeEvaluated.items(i,v,s.items,Tr.Name)}}}Hs.callRef=cd;Hs.default=XW;Object.defineProperty(wy,"__esModule",{value:!0});const JW=by,ZW=Hs,eY=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",JW.default,ZW.default];wy.default=eY;var Ey={},Sy={};Object.defineProperty(Sy,"__esModule",{value:!0});const Md=ke,Oi=Md.operators,jd={maximum:{okStr:"<=",ok:Oi.LTE,fail:Oi.GT},minimum:{okStr:">=",ok:Oi.GTE,fail:Oi.LT},exclusiveMaximum:{okStr:"<",ok:Oi.LT,fail:Oi.GTE},exclusiveMinimum:{okStr:">",ok:Oi.GT,fail:Oi.LTE}},tY={message:({keyword:t,schemaCode:e})=>(0,Md.str)`must be ${jd[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Md._)`{comparison: ${jd[t].okStr}, limit: ${e}}`},rY={keyword:Object.keys(jd),type:"number",schemaType:"number",$data:!0,error:tY,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Md._)`${r} ${jd[e].fail} ${n} || isNaN(${r})`)}};Sy.default=rY;var Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});const Fc=ke,nY={message:({schemaCode:t})=>(0,Fc.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Fc._)`{multipleOf: ${t}}`},iY={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:nY,code(t){const{gen:e,data:r,schemaCode:n,it:i}=t,s=i.opts.multipleOfPrecision,a=e.let("res"),o=s?(0,Fc._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:(0,Fc._)`${a} !== parseInt(${a})`;t.fail$data((0,Fc._)`(${n} === 0 || (${a} = ${r}/${n}, ${o}))`)}};Iy.default=iY;var Ty={},$y={};Object.defineProperty($y,"__esModule",{value:!0});function xT(t){const e=t.length;let r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}$y.default=xT;xT.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ty,"__esModule",{value:!0});const Os=ke,sY=ce,aY=$y,oY={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,Os.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Os._)`{limit: ${t}}`},cY={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:oY,code(t){const{keyword:e,data:r,schemaCode:n,it:i}=t,s=e==="maxLength"?Os.operators.GT:Os.operators.LT,a=i.opts.unicode===!1?(0,Os._)`${r}.length`:(0,Os._)`${(0,sY.useFunc)(t.gen,aY.default)}(${r})`;t.fail$data((0,Os._)`${a} ${s} ${n}`)}};Ty.default=cY;var Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});const lY=Ne,Ld=ke,uY={message:({schemaCode:t})=>(0,Ld.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Ld._)`{pattern: ${t}}`},dY={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:uY,code(t){const{data:e,$data:r,schema:n,schemaCode:i,it:s}=t,a=s.opts.unicodeRegExp?"u":"",o=r?(0,Ld._)`(new RegExp(${i}, ${a}))`:(0,lY.usePattern)(t,n);t.fail$data((0,Ld._)`!${o}.test(${e})`)}};Ay.default=dY;var Py={};Object.defineProperty(Py,"__esModule",{value:!0});const Mc=ke,hY={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,Mc.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Mc._)`{limit: ${t}}`},fY={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:hY,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?Mc.operators.GT:Mc.operators.LT;t.fail$data((0,Mc._)`Object.keys(${r}).length ${i} ${n}`)}};Py.default=fY;var Cy={};Object.defineProperty(Cy,"__esModule",{value:!0});const vc=Ne,jc=ke,pY=ce,mY={message:({params:{missingProperty:t}})=>(0,jc.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,jc._)`{missingProperty: ${t}}`},gY={keyword:"required",type:"object",schemaType:"array",$data:!0,error:mY,code(t){const{gen:e,schema:r,schemaCode:n,data:i,$data:s,it:a}=t,{opts:o}=a;if(!s&&r.length===0)return;const c=r.length>=o.loopRequired;if(a.allErrors?l():u(),o.strictRequired){const f=t.parentSchema.properties,{definedProperties:m}=t.it;for(const g of r)if((f==null?void 0:f[g])===void 0&&!m.has(g)){const y=a.schemaEnv.baseId+a.errSchemaPath,v=`required property "${g}" is not defined at "${y}" (strictRequired)`;(0,pY.checkStrictMode)(a,v,a.opts.strictRequired)}}function l(){if(c||s)t.block$data(jc.nil,h);else for(const f of r)(0,vc.checkReportMissingProp)(t,f)}function u(){const f=e.let("missing");if(c||s){const m=e.let("valid",!0);t.block$data(m,()=>p(f,m)),t.ok(m)}else e.if((0,vc.checkMissingProp)(t,r,f)),(0,vc.reportMissingProp)(t,f),e.else()}function h(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,vc.noPropertyInData)(e,i,f,o.ownProperties),()=>t.error())})}function p(f,m){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(m,(0,vc.propertyInData)(e,i,f,o.ownProperties)),e.if((0,jc.not)(m),()=>{t.error(),e.break()})},jc.nil)}}};Cy.default=gY;var xy={};Object.defineProperty(xy,"__esModule",{value:!0});const Lc=ke,yY={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,Lc.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Lc._)`{limit: ${t}}`},vY={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:yY,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?Lc.operators.GT:Lc.operators.LT;t.fail$data((0,Lc._)`${r}.length ${i} ${n}`)}};xy.default=vY;var ky={},Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});const kT=dT;kT.code='require("ajv/dist/runtime/equal").default';Nl.default=kT;Object.defineProperty(ky,"__esModule",{value:!0});const ep=Mt,Wt=ke,_Y=ce,wY=Nl,bY={message:({params:{i:t,j:e}})=>(0,Wt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Wt._)`{i: ${t}, j: ${e}}`},EY={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:bY,code(t){const{gen:e,data:r,$data:n,schema:i,parentSchema:s,schemaCode:a,it:o}=t;if(!n&&!i)return;const c=e.let("valid"),l=s.items?(0,ep.getSchemaTypes)(s.items):[];t.block$data(c,u,(0,Wt._)`${a} === false`),t.ok(c);function u(){const m=e.let("i",(0,Wt._)`${r}.length`),g=e.let("j");t.setParams({i:m,j:g}),e.assign(c,!0),e.if((0,Wt._)`${m} > 1`,()=>(h()?p:f)(m,g))}function h(){return l.length>0&&!l.some(m=>m==="object"||m==="array")}function p(m,g){const y=e.name("item"),v=(0,ep.checkDataTypes)(l,y,o.opts.strictNumbers,ep.DataType.Wrong),w=e.const("indices",(0,Wt._)`{}`);e.for((0,Wt._)`;${m}--;`,()=>{e.let(y,(0,Wt._)`${r}[${m}]`),e.if(v,(0,Wt._)`continue`),l.length>1&&e.if((0,Wt._)`typeof ${y} == "string"`,(0,Wt._)`${y} += "_"`),e.if((0,Wt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(g,(0,Wt._)`${w}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,Wt._)`${w}[${y}] = ${m}`)})}function f(m,g){const y=(0,_Y.useFunc)(e,wY.default),v=e.name("outer");e.label(v).for((0,Wt._)`;${m}--;`,()=>e.for((0,Wt._)`${g} = ${m}; ${g}--;`,()=>e.if((0,Wt._)`${y}(${r}[${m}], ${r}[${g}])`,()=>{t.error(),e.assign(c,!1).break(v)})))}}};ky.default=EY;var Ry={};Object.defineProperty(Ry,"__esModule",{value:!0});const dm=ke,SY=ce,IY=Nl,TY={message:"must be equal to constant",params:({schemaCode:t})=>(0,dm._)`{allowedValue: ${t}}`},$Y={keyword:"const",$data:!0,error:TY,code(t){const{gen:e,data:r,$data:n,schemaCode:i,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,dm._)`!${(0,SY.useFunc)(e,IY.default)}(${r}, ${i})`):t.fail((0,dm._)`${s} !== ${r}`)}};Ry.default=$Y;var Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});const Tc=ke,AY=ce,PY=Nl,CY={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Tc._)`{allowedValues: ${t}}`},xY={keyword:"enum",schemaType:"array",$data:!0,error:CY,code(t){const{gen:e,data:r,$data:n,schema:i,schemaCode:s,it:a}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");const o=i.length>=a.opts.loopEnum;let c;const l=()=>c??(c=(0,AY.useFunc)(e,PY.default));let u;if(o||n)u=e.let("valid"),t.block$data(u,h);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const f=e.const("vSchema",s);u=(0,Tc.or)(...i.map((m,g)=>p(f,g)))}t.pass(u);function h(){e.assign(u,!1),e.forOf("v",s,f=>e.if((0,Tc._)`${l()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,m){const g=i[m];return typeof g=="object"&&g!==null?(0,Tc._)`${l()}(${r}, ${f}[${m}])`:(0,Tc._)`${r} === ${g}`}}};Oy.default=xY;Object.defineProperty(Ey,"__esModule",{value:!0});const kY=Sy,RY=Iy,OY=Ty,NY=Ay,DY=Py,FY=Cy,MY=xy,jY=ky,LY=Ry,VY=Oy,UY=[kY.default,RY.default,OY.default,NY.default,DY.default,FY.default,MY.default,jY.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},LY.default,VY.default];Ey.default=UY;var Ny={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.validateAdditionalItems=void 0;const Ns=ke,hm=ce,BY={message:({params:{len:t}})=>(0,Ns.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ns._)`{limit: ${t}}`},zY={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:BY,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,hm.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}RT(t,n)}};function RT(t,e){const{gen:r,schema:n,data:i,keyword:s,it:a}=t;a.items=!0;const o=r.const("len",(0,Ns._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Ns._)`${o} <= ${e.length}`);else if(typeof n=="object"&&!(0,hm.alwaysValidSchema)(a,n)){const l=r.var("valid",(0,Ns._)`${o} <= ${e.length}`);r.if((0,Ns.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,o,u=>{t.subschema({keyword:s,dataProp:u,dataPropType:hm.Type.Num},l),a.allErrors||r.if((0,Ns.not)(l),()=>r.break())})}}Do.validateAdditionalItems=RT;Do.default=zY;var Dy={},Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.validateTuple=void 0;const y0=ke,ld=ce,qY=Ne,HY={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return OT(t,"additionalItems",e);r.items=!0,!(0,ld.alwaysValidSchema)(r,e)&&t.ok((0,qY.validateArray)(t))}};function OT(t,e,r=t.schema){const{gen:n,parentSchema:i,data:s,keyword:a,it:o}=t;u(i),o.opts.unevaluated&&r.length&&o.items!==!0&&(o.items=ld.mergeEvaluated.items(n,r.length,o.items));const c=n.name("valid"),l=n.const("len",(0,y0._)`${s}.length`);r.forEach((h,p)=>{(0,ld.alwaysValidSchema)(o,h)||(n.if((0,y0._)`${l} > ${p}`,()=>t.subschema({keyword:a,schemaProp:p,dataProp:p},c)),t.ok(c))});function u(h){const{opts:p,errSchemaPath:f}=o,m=r.length,g=m===h.minItems&&(m===h.maxItems||h[e]===!1);if(p.strictTuples&&!g){const y=`"${a}" is ${m}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,ld.checkStrictMode)(o,y,p.strictTuples)}}}Fo.validateTuple=OT;Fo.default=HY;Object.defineProperty(Dy,"__esModule",{value:!0});const KY=Fo,GY={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,KY.validateTuple)(t,"items")};Dy.default=GY;var Fy={};Object.defineProperty(Fy,"__esModule",{value:!0});const v0=ke,WY=ce,YY=Ne,QY=Do,XY={message:({params:{len:t}})=>(0,v0.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,v0._)`{limit: ${t}}`},JY={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:XY,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,WY.alwaysValidSchema)(n,e)&&(i?(0,QY.validateAdditionalItems)(t,i):t.ok((0,YY.validateArray)(t)))}};Fy.default=JY;var My={};Object.defineProperty(My,"__esModule",{value:!0});const Wr=ke,ju=ce,ZY={message:({params:{min:t,max:e}})=>e===void 0?(0,Wr.str)`must contain at least ${t} valid item(s)`:(0,Wr.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Wr._)`{minContains: ${t}}`:(0,Wr._)`{minContains: ${t}, maxContains: ${e}}`},eQ={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ZY,code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;let a,o;const{minContains:c,maxContains:l}=n;s.opts.next?(a=c===void 0?1:c,o=l):a=1;const u=e.const("len",(0,Wr._)`${i}.length`);if(t.setParams({min:a,max:o}),o===void 0&&a===0){(0,ju.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(o!==void 0&&a>o){(0,ju.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,ju.alwaysValidSchema)(s,r)){let g=(0,Wr._)`${u} >= ${a}`;o!==void 0&&(g=(0,Wr._)`${g} && ${u} <= ${o}`),t.pass(g);return}s.items=!0;const h=e.name("valid");o===void 0&&a===1?f(h,()=>e.if(h,()=>e.break())):a===0?(e.let(h,!0),o!==void 0&&e.if((0,Wr._)`${i}.length > 0`,p)):(e.let(h,!1),p()),t.result(h,()=>t.reset());function p(){const g=e.name("_valid"),y=e.let("count",0);f(g,()=>e.if(g,()=>m(y)))}function f(g,y){e.forRange("i",0,u,v=>{t.subschema({keyword:"contains",dataProp:v,dataPropType:ju.Type.Num,compositeRule:!0},g),y()})}function m(g){e.code((0,Wr._)`${g}++`),o===void 0?e.if((0,Wr._)`${g} >= ${a}`,()=>e.assign(h,!0).break()):(e.if((0,Wr._)`${g} > ${o}`,()=>e.assign(h,!1).break()),a===1?e.assign(h,!0):e.if((0,Wr._)`${g} >= ${a}`,()=>e.assign(h,!0)))}}};My.default=eQ;var NT={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=ke,r=ce,n=Ne;t.error={message:({params:{property:c,depsCount:l,deps:u}})=>{const h=l===1?"property":"properties";return(0,e.str)`must have ${h} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:l,deps:u,missingProperty:h}})=>(0,e._)`{property: ${c},
    missingProperty: ${h},
    depsCount: ${l},
    deps: ${u}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[l,u]=s(c);a(c,l),o(c,u)}};function s({schema:c}){const l={},u={};for(const h in c){if(h==="__proto__")continue;const p=Array.isArray(c[h])?l:u;p[h]=c[h]}return[l,u]}function a(c,l=c.schema){const{gen:u,data:h,it:p}=c;if(Object.keys(l).length===0)return;const f=u.let("missing");for(const m in l){const g=l[m];if(g.length===0)continue;const y=(0,n.propertyInData)(u,h,m,p.opts.ownProperties);c.setParams({property:m,depsCount:g.length,deps:g.join(", ")}),p.allErrors?u.if(y,()=>{for(const v of g)(0,n.checkReportMissingProp)(c,v)}):(u.if((0,e._)`${y} && (${(0,n.checkMissingProp)(c,g,f)})`),(0,n.reportMissingProp)(c,f),u.else())}}t.validatePropertyDeps=a;function o(c,l=c.schema){const{gen:u,data:h,keyword:p,it:f}=c,m=u.name("valid");for(const g in l)(0,r.alwaysValidSchema)(f,l[g])||(u.if((0,n.propertyInData)(u,h,g,f.opts.ownProperties),()=>{const y=c.subschema({keyword:p,schemaProp:g},m);c.mergeValidEvaluated(y,m)},()=>u.var(m,!0)),c.ok(m))}t.validateSchemaDeps=o,t.default=i})(NT);var jy={};Object.defineProperty(jy,"__esModule",{value:!0});const DT=ke,tQ=ce,rQ={message:"property name must be valid",params:({params:t})=>(0,DT._)`{propertyName: ${t.propertyName}}`},nQ={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:rQ,code(t){const{gen:e,schema:r,data:n,it:i}=t;if((0,tQ.alwaysValidSchema)(i,r))return;const s=e.name("valid");e.forIn("key",n,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},s),e.if((0,DT.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};jy.default=nQ;var Jh={};Object.defineProperty(Jh,"__esModule",{value:!0});const Lu=Ne,on=ke,iQ=qn,Vu=ce,sQ={message:"must NOT have additional properties",params:({params:t})=>(0,on._)`{additionalProperty: ${t.additionalProperty}}`},aQ={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:sQ,code(t){const{gen:e,schema:r,parentSchema:n,data:i,errsCount:s,it:a}=t;if(!s)throw new Error("ajv implementation error");const{allErrors:o,opts:c}=a;if(a.props=!0,c.removeAdditional!=="all"&&(0,Vu.alwaysValidSchema)(a,r))return;const l=(0,Lu.allSchemaProperties)(n.properties),u=(0,Lu.allSchemaProperties)(n.patternProperties);h(),t.ok((0,on._)`${s} === ${iQ.default.errors}`);function h(){e.forIn("key",i,y=>{!l.length&&!u.length?m(y):e.if(p(y),()=>m(y))})}function p(y){let v;if(l.length>8){const w=(0,Vu.schemaRefOrVal)(a,n.properties,"properties");v=(0,Lu.isOwnProperty)(e,w,y)}else l.length?v=(0,on.or)(...l.map(w=>(0,on._)`${y} === ${w}`)):v=on.nil;return u.length&&(v=(0,on.or)(v,...u.map(w=>(0,on._)`${(0,Lu.usePattern)(t,w)}.test(${y})`))),(0,on.not)(v)}function f(y){e.code((0,on._)`delete ${i}[${y}]`)}function m(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),o||e.break();return}if(typeof r=="object"&&!(0,Vu.alwaysValidSchema)(a,r)){const v=e.name("valid");c.removeAdditional==="failing"?(g(y,v,!1),e.if((0,on.not)(v),()=>{t.reset(),f(y)})):(g(y,v),o||e.if((0,on.not)(v),()=>e.break()))}}function g(y,v,w){const $={keyword:"additionalProperties",dataProp:y,dataPropType:Vu.Type.Str};w===!1&&Object.assign($,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema($,v)}}};Jh.default=aQ;var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});const oQ=fn,_0=Ne,tp=ce,w0=Jh,cQ={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&w0.default.code(new oQ.KeywordCxt(s,w0.default,"additionalProperties"));const a=(0,_0.allSchemaProperties)(r);for(const h of a)s.definedProperties.add(h);s.opts.unevaluated&&a.length&&s.props!==!0&&(s.props=tp.mergeEvaluated.props(e,(0,tp.toHash)(a),s.props));const o=a.filter(h=>!(0,tp.alwaysValidSchema)(s,r[h]));if(o.length===0)return;const c=e.name("valid");for(const h of o)l(h)?u(h):(e.if((0,_0.propertyInData)(e,i,h,s.opts.ownProperties)),u(h),s.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(h),t.ok(c);function l(h){return s.opts.useDefaults&&!s.compositeRule&&r[h].default!==void 0}function u(h){t.subschema({keyword:"properties",schemaProp:h,dataProp:h},c)}}};Ly.default=cQ;var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});const b0=Ne,Uu=ke,E0=ce,S0=ce,lQ={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:i,it:s}=t,{opts:a}=s,o=(0,b0.allSchemaProperties)(r),c=o.filter(g=>(0,E0.alwaysValidSchema)(s,r[g]));if(o.length===0||c.length===o.length&&(!s.opts.unevaluated||s.props===!0))return;const l=a.strictSchema&&!a.allowMatchingProperties&&i.properties,u=e.name("valid");s.props!==!0&&!(s.props instanceof Uu.Name)&&(s.props=(0,S0.evaluatedPropsToName)(e,s.props));const{props:h}=s;p();function p(){for(const g of o)l&&f(g),s.allErrors?m(g):(e.var(u,!0),m(g),e.if(u))}function f(g){for(const y in l)new RegExp(g).test(y)&&(0,E0.checkStrictMode)(s,`property ${y} matches pattern ${g} (use allowMatchingProperties)`)}function m(g){e.forIn("key",n,y=>{e.if((0,Uu._)`${(0,b0.usePattern)(t,g)}.test(${y})`,()=>{const v=c.includes(g);v||t.subschema({keyword:"patternProperties",schemaProp:g,dataProp:y,dataPropType:S0.Type.Str},u),s.opts.unevaluated&&h!==!0?e.assign((0,Uu._)`${h}[${y}]`,!0):!v&&!s.allErrors&&e.if((0,Uu.not)(u),()=>e.break())})})}}};Vy.default=lQ;var Uy={};Object.defineProperty(Uy,"__esModule",{value:!0});const uQ=ce,dQ={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,uQ.alwaysValidSchema)(n,r)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Uy.default=dQ;var By={};Object.defineProperty(By,"__esModule",{value:!0});const hQ=Ne,fQ={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:hQ.validateUnion,error:{message:"must match a schema in anyOf"}};By.default=fQ;var zy={};Object.defineProperty(zy,"__esModule",{value:!0});const ud=ke,pQ=ce,mQ={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,ud._)`{passingSchemas: ${t.passing}}`},gQ={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:mQ,code(t){const{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;const s=r,a=e.let("valid",!1),o=e.let("passing",null),c=e.name("_valid");t.setParams({passing:o}),e.block(l),t.result(a,()=>t.reset(),()=>t.error(!0));function l(){s.forEach((u,h)=>{let p;(0,pQ.alwaysValidSchema)(i,u)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},c),h>0&&e.if((0,ud._)`${c} && ${a}`).assign(a,!1).assign(o,(0,ud._)`[${o}, ${h}]`).else(),e.if(c,()=>{e.assign(a,!0),e.assign(o,h),p&&t.mergeEvaluated(p,ud.Name)})})}}};zy.default=gQ;var qy={};Object.defineProperty(qy,"__esModule",{value:!0});const yQ=ce,vQ={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=e.name("valid");r.forEach((s,a)=>{if((0,yQ.alwaysValidSchema)(n,s))return;const o=t.subschema({keyword:"allOf",schemaProp:a},i);t.ok(i),t.mergeEvaluated(o)})}};qy.default=vQ;var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});const Vd=ke,FT=ce,_Q={message:({params:t})=>(0,Vd.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Vd._)`{failingKeyword: ${t.ifClause}}`},wQ={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:_Q,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,FT.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const i=I0(n,"then"),s=I0(n,"else");if(!i&&!s)return;const a=e.let("valid",!0),o=e.name("_valid");if(c(),t.reset(),i&&s){const u=e.let("ifClause");t.setParams({ifClause:u}),e.if(o,l("then",u),l("else",u))}else i?e.if(o,l("then")):e.if((0,Vd.not)(o),l("else"));t.pass(a,()=>t.error(!0));function c(){const u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},o);t.mergeEvaluated(u)}function l(u,h){return()=>{const p=t.subschema({keyword:u},o);e.assign(a,o),t.mergeValidEvaluated(p,a),h?e.assign(h,(0,Vd._)`${u}`):t.setParams({ifClause:u})}}}};function I0(t,e){const r=t.schema[e];return r!==void 0&&!(0,FT.alwaysValidSchema)(t,r)}Hy.default=wQ;var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});const bQ=ce,EQ={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,bQ.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Ky.default=EQ;Object.defineProperty(Ny,"__esModule",{value:!0});const SQ=Do,IQ=Dy,TQ=Fo,$Q=Fy,AQ=My,PQ=NT,CQ=jy,xQ=Jh,kQ=Ly,RQ=Vy,OQ=Uy,NQ=By,DQ=zy,FQ=qy,MQ=Hy,jQ=Ky;function LQ(t=!1){const e=[OQ.default,NQ.default,DQ.default,FQ.default,MQ.default,jQ.default,CQ.default,xQ.default,PQ.default,kQ.default,RQ.default];return t?e.push(IQ.default,$Q.default):e.push(SQ.default,TQ.default),e.push(AQ.default),e}Ny.default=LQ;var Gy={},Wy={};Object.defineProperty(Wy,"__esModule",{value:!0});const Ct=ke,VQ={message:({schemaCode:t})=>(0,Ct.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Ct._)`{format: ${t}}`},UQ={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:VQ,code(t,e){const{gen:r,data:n,$data:i,schema:s,schemaCode:a,it:o}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:h}=o;if(!c.validateFormats)return;i?p():f();function p(){const m=r.scopeValue("formats",{ref:h.formats,code:c.code.formats}),g=r.const("fDef",(0,Ct._)`${m}[${a}]`),y=r.let("fType"),v=r.let("format");r.if((0,Ct._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(y,(0,Ct._)`${g}.type || "string"`).assign(v,(0,Ct._)`${g}.validate`),()=>r.assign(y,(0,Ct._)`"string"`).assign(v,g)),t.fail$data((0,Ct.or)(w(),$()));function w(){return c.strictSchema===!1?Ct.nil:(0,Ct._)`${a} && !${v}`}function $(){const A=u.$async?(0,Ct._)`(${g}.async ? await ${v}(${n}) : ${v}(${n}))`:(0,Ct._)`${v}(${n})`,P=(0,Ct._)`(typeof ${v} == "function" ? ${A} : ${v}.test(${n}))`;return(0,Ct._)`${v} && ${v} !== true && ${y} === ${e} && !${P}`}}function f(){const m=h.formats[s];if(!m){w();return}if(m===!0)return;const[g,y,v]=$(m);g===e&&t.pass(A());function w(){if(c.strictSchema===!1){h.logger.warn(P());return}throw new Error(P());function P(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function $(P){const O=P instanceof RegExp?(0,Ct.regexpCode)(P):c.code.formats?(0,Ct._)`${c.code.formats}${(0,Ct.getProperty)(s)}`:void 0,E=r.scopeValue("formats",{key:s,ref:P,code:O});return typeof P=="object"&&!(P instanceof RegExp)?[P.type||"string",P.validate,(0,Ct._)`${E}.validate`]:["string",P,E]}function A(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Ct._)`await ${v}(${n})`}return typeof y=="function"?(0,Ct._)`${v}(${n})`:(0,Ct._)`${v}.test(${n})`}}}};Wy.default=UQ;Object.defineProperty(Gy,"__esModule",{value:!0});const BQ=Wy,zQ=[BQ.default];Gy.default=zQ;var to={};Object.defineProperty(to,"__esModule",{value:!0});to.contentVocabulary=to.metadataVocabulary=void 0;to.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];to.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(_y,"__esModule",{value:!0});const qQ=wy,HQ=Ey,KQ=Ny,GQ=Gy,T0=to,WQ=[qQ.default,HQ.default,(0,KQ.default)(),GQ.default,T0.metadataVocabulary,T0.contentVocabulary];_y.default=WQ;var Yy={},Zh={};Object.defineProperty(Zh,"__esModule",{value:!0});Zh.DiscrError=void 0;var $0;(function(t){t.Tag="tag",t.Mapping="mapping"})($0||(Zh.DiscrError=$0={}));Object.defineProperty(Yy,"__esModule",{value:!0});const ka=ke,fm=Zh,A0=Ar,YQ=No,QQ=ce,XQ={message:({params:{discrError:t,tagName:e}})=>t===fm.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,ka._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},JQ={keyword:"discriminator",type:"object",schemaType:"object",error:XQ,code(t){const{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{oneOf:a}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const o=n.propertyName;if(typeof o!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),l=e.const("tag",(0,ka._)`${r}${(0,ka.getProperty)(o)}`);e.if((0,ka._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:fm.DiscrError.Tag,tag:l,tagName:o})),t.ok(c);function u(){const f=p();e.if(!1);for(const m in f)e.elseIf((0,ka._)`${l} === ${m}`),e.assign(c,h(f[m]));e.else(),t.error(!1,{discrError:fm.DiscrError.Mapping,tag:l,tagName:o}),e.endIf()}function h(f){const m=e.name("valid"),g=t.subschema({keyword:"oneOf",schemaProp:f},m);return t.mergeEvaluated(g,ka.Name),m}function p(){var f;const m={},g=v(i);let y=!0;for(let A=0;A<a.length;A++){let P=a[A];if(P!=null&&P.$ref&&!(0,QQ.schemaHasRulesButRef)(P,s.self.RULES)){const E=P.$ref;if(P=A0.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E),P instanceof A0.SchemaEnv&&(P=P.schema),P===void 0)throw new YQ.default(s.opts.uriResolver,s.baseId,E)}const O=(f=P==null?void 0:P.properties)===null||f===void 0?void 0:f[o];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${o}"`);y=y&&(g||v(P)),w(O,A)}if(!y)throw new Error(`discriminator: "${o}" must be required`);return m;function v({required:A}){return Array.isArray(A)&&A.includes(o)}function w(A,P){if(A.const)$(A.const,P);else if(A.enum)for(const O of A.enum)$(O,P);else throw new Error(`discriminator: "properties/${o}" must have "const" or "enum"`)}function $(A,P){if(typeof A!="string"||A in m)throw new Error(`discriminator: "${o}" values must be unique strings`);m[A]=P}}}};Yy.default=JQ;const ZQ="http://json-schema.org/draft-07/schema#",eX="http://json-schema.org/draft-07/schema#",tX="Core schema meta-schema",rX={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},nX=["object","boolean"],iX={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},sX={$schema:ZQ,$id:eX,title:tX,definitions:rX,type:nX,properties:iX,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=YI,n=_y,i=Yy,s=sX,a=["/properties"],o="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(m,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var l=fn;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=ke;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=Ol;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return h.default}});var p=No;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return p.default}})})(sm,sm.exports);var MT=sm.exports;const aX=Fe(MT);var pm={exports:{}},jT={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(I,T){return{validate:I,compare:T}}t.fullFormats={date:e(s,a),time:e(c,l),"date-time":e(h,p),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:g,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:b,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:v,int32:{type:"number",validate:A},int64:{type:"number",validate:P},float:{type:"number",validate:O},double:{type:"number",validate:O},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,l),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,p),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function r(I){return I%4===0&&(I%100!==0||I%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(I){const T=n.exec(I);if(!T)return!1;const C=+T[1],R=+T[2],x=+T[3];return R>=1&&R<=12&&x>=1&&x<=(R===2&&r(C)?29:i[R])}function a(I,T){if(I&&T)return I>T?1:I<T?-1:0}const o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function c(I,T){const C=o.exec(I);if(!C)return!1;const R=+C[1],x=+C[2],Q=+C[3],re=C[5];return(R<=23&&x<=59&&Q<=59||R===23&&x===59&&Q===60)&&(!T||re!=="")}function l(I,T){if(!(I&&T))return;const C=o.exec(I),R=o.exec(T);if(C&&R)return I=C[1]+C[2]+C[3]+(C[4]||""),T=R[1]+R[2]+R[3]+(R[4]||""),I>T?1:I<T?-1:0}const u=/t|\s/i;function h(I){const T=I.split(u);return T.length===2&&s(T[0])&&c(T[1],!0)}function p(I,T){if(!(I&&T))return;const[C,R]=I.split(u),[x,Q]=T.split(u),re=a(C,x);if(re!==void 0)return re||l(R,Q)}const f=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function g(I){return f.test(I)&&m.test(I)}const y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function v(I){return y.lastIndex=0,y.test(I)}const w=-(2**31),$=2**31-1;function A(I){return Number.isInteger(I)&&I<=$&&I>=w}function P(I){return Number.isInteger(I)}function O(){return!0}const E=/[^\\]\\Z/;function b(I){if(E.test(I))return!1;try{return new RegExp(I),!0}catch{return!1}}})(jT);var LT={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=MT,r=ke,n=r.operators,i={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},s={message:({keyword:o,schemaCode:c})=>r.str`should be ${i[o].okStr} ${c}`,params:({keyword:o,schemaCode:c})=>r._`{comparison: ${i[o].okStr}, limit: ${c}}`};t.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:s,code(o){const{gen:c,data:l,schemaCode:u,keyword:h,it:p}=o,{opts:f,self:m}=p;if(!f.validateFormats)return;const g=new e.KeywordCxt(p,m.RULES.all.format.definition,"format");g.$data?y():v();function y(){const $=c.scopeValue("formats",{ref:m.formats,code:f.code.formats}),A=c.const("fmt",r._`${$}[${g.schemaCode}]`);o.fail$data(r.or(r._`typeof ${A} != "object"`,r._`${A} instanceof RegExp`,r._`typeof ${A}.compare != "function"`,w(A)))}function v(){const $=g.schema,A=m.formats[$];if(!A||A===!0)return;if(typeof A!="object"||A instanceof RegExp||typeof A.compare!="function")throw new Error(`"${h}": format "${$}" does not define "compare" function`);const P=c.scopeValue("formats",{key:$,ref:A,code:f.code.formats?r._`${f.code.formats}${r.getProperty($)}`:void 0});o.fail$data(w(P))}function w($){return r._`${$}.compare(${l}, ${u}) ${i[h].fail} 0`}},dependencies:["format"]};const a=o=>(o.addKeyword(t.formatLimitDefinition),o);t.default=a})(LT);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=jT,n=LT,i=ke,s=new i.Name("fullFormats"),a=new i.Name("fastFormats"),o=(l,u={keywords:!0})=>{if(Array.isArray(u))return c(l,u,r.fullFormats,s),l;const[h,p]=u.mode==="fast"?[r.fastFormats,a]:[r.fullFormats,s],f=u.formats||r.formatNames;return c(l,f,h,p),u.keywords&&n.default(l),l};o.get=(l,u="full")=>{const p=(u==="fast"?r.fastFormats:r.fullFormats)[l];if(!p)throw new Error(`Unknown format "${l}"`);return p};function c(l,u,h,p){var f,m;(f=(m=l.opts.code).formats)!==null&&f!==void 0||(m.formats=i._`require("ajv-formats/dist/formats").${p}`);for(const g of u)l.addFormat(g,h[g])}t.exports=e=o,Object.defineProperty(e,"__esModule",{value:!0}),e.default=o})(pm,pm.exports);var oX=pm.exports;const P0=Fe(oX),cX={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0},lX=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,uX=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function dX(t,e,r={},n,i=aX){const s=new i({...cX,...r});return n?P0(s,n):n!==!1&&P0(s),s.addFormat("data-url",uX),s.addFormat("color",lX),s.addKeyword(vo),s.addKeyword(ig),Array.isArray(t)&&s.addMetaSchema(t),hn(e)&&Object.keys(e).forEach(a=>{s.addFormat(a,e[a])}),s}function hX(t=[],e){return t.map(r=>{const{instancePath:n,keyword:i,params:s,schemaPath:a,parentSchema:o,...c}=r;let{message:l=""}=c,u=n.replace(/\//g,"."),h=`${u} ${l}`.trim();if("missingProperty"in s){u=u?`${u}.${s.missingProperty}`:s.missingProperty;const p=s.missingProperty,f=Ue(fe(e,`${u.replace(/^\./,"")}`)).title;if(f)l=l.replace(p,f);else{const m=fe(o,[$t,p,"title"]);m&&(l=l.replace(p,m))}h=l}else{const p=Ue(fe(e,`${u.replace(/^\./,"")}`)).title;if(p)h=`'${p}' ${l}`.trim();else{const f=o==null?void 0:o.title;f&&(h=`'${f}' ${l}`.trim())}}return{name:i,property:u,message:l,params:s,stack:h,schemaPath:a}})}function fX(t,e,r,n,i,s,a){const{validationError:o}=e;let c=hX(e.errors,a);o&&(c=[...c,{stack:o.message}]),typeof s=="function"&&(c=s(c,a));let l=a8(c);if(o&&(l={...l,$schema:{__errors:[o.message]}}),typeof i!="function")return{errors:c,errorSchema:l};const u=nI(t,n,r,n,!0),h=i(u,Up(u),a),p=pI(h);return sd({errors:c,errorSchema:l},p)}class pX{constructor(e,r){const{additionalMetaSchemas:n,customFormats:i,ajvOptionsOverrides:s,ajvFormatOptions:a,AjvClass:o}=e;this.ajv=dX(n,i,s,a,o),this.localizer=r}toErrorList(e,r=[]){return el(e,r)}rawValidation(e,r){let n,i;e[Gi]&&(i=this.ajv.getSchema(e[Gi]));try{i===void 0&&(i=this.ajv.compile(e)),i(r)}catch(a){n=a}let s;return i&&(typeof this.localizer=="function"&&this.localizer(i.errors),s=i.errors||void 0,i.errors=null),{errors:s,validationError:n}}validateFormData(e,r,n,i,s){const a=this.rawValidation(r,e);return fX(this,a,e,r,n,i,s)}isValid(e,r,n){var i,s;const a=(i=n[Gi])!==null&&i!==void 0?i:pE;try{this.ajv.addSchema(n,a);const o=Yg(e),c=(s=o[Gi])!==null&&s!==void 0?s:Hz(o);let l;return l=this.ajv.getSchema(c),l===void 0&&(l=this.ajv.addSchema(o,c).getSchema(c)||this.ajv.compile(o)),l(r)}catch(o){return console.warn("Error encountered compiling schema:",o),!1}finally{this.ajv.removeSchema(a)}}}function mX(t={},e){return new pX(t,e)}const fhe=mX(),gX="object",yX=["name","shortAddress","address","whatsapp","phone","email","googleMapEmbedUrl","googleMapUrl"],vX={name:{type:"string",title:"Nama"},address:{type:"string",title:"Alamat Lengkap"},shortAddress:{type:"string",title:"Alamat Singkat"},whatsapp:{type:"string",title:"Nomor Whatapp"},phone:{type:"string",title:"Nomor Telepon"},email:{type:"string",title:"Alamat Email"},googleMapUrl:{type:"string",title:"Google Map Url"},googleMapEmbedUrl:{type:"string",title:"Google Map Embed Url"}},phe={type:gX,required:yX,properties:vX},_X={"ui:autofocus":!0,"ui:emptyValue":"","ui:enableMarkdownInDescription":!0},wX={"ui:widget":"textarea"},bX={"ui:widget":"textarea"},EX={"ui:options":{inputType:"tel"}},SX={"ui:options":{inputType:"tel"}},IX={"ui:options":{inputType:"email"}},TX={"ui:widget":"textarea"},mhe={name:_X,address:wX,shortAddress:bX,whatsapp:EX,phone:SX,email:IX,googleMapEmbedUrl:TX},$X=t=>{let e=t.split("/");return`/${e[e.length-1]}`};var jr=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof cn>"u"||typeof cn.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||jr.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||jr.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||jr.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=jr.DEFAULT_MAX_PENDING};jr.DEFAULT_TIMEOUT=0;jr.DEFAULT_MAX_OCCUPATION_TIME=0;jr.DEFAULT_MAX_EXECUTION_TIME=0;jr.DEFAULT_MAX_PENDING=1e3;jr.prototype.acquire=function(t,e,r,n){if(Array.isArray(t))return this._acquireBatch(t,e,r,n);if(typeof e!="function")throw new Error("You must pass a function to execute");var i=null,s=null,a=null;typeof r!="function"&&(n=r,r=null,a=new this.Promise(function(w,$){i=w,s=$})),n=n||{};var o=!1,c=null,l=null,u=null,h=this,p=function(w,$,A){l&&(clearTimeout(l),l=null),u&&(clearTimeout(u),u=null),w&&(h.queues[t]&&h.queues[t].length===0&&delete h.queues[t],h.domainReentrant&&delete h.domains[t]),o||(a?$?s($):i(A):typeof r=="function"&&r($,A),o=!0),w&&h.queues[t]&&h.queues[t].length>0&&h.queues[t].shift()()},f=function(w){if(o)return p(w);c&&(clearTimeout(c),c=null),h.domainReentrant&&w&&(h.domains[t]=cn.domain);var $=n.maxExecutionTime||h.maxExecutionTime;if($&&(u=setTimeout(function(){h.queues[t]&&p(w,new Error("Maximum execution time is exceeded "+t))},$)),e.length===1){var A=!1;try{e(function(P,O){A||(A=!0,p(w,P,O))})}catch(P){A||(A=!0,p(w,P))}}else h._promiseTry(function(){return e()}).then(function(P){p(w,void 0,P)},function(P){p(w,P)})};h.domainReentrant&&cn.domain&&(f=cn.domain.bind(f));var m=n.maxPending||h.maxPending;if(!h.queues[t])h.queues[t]=[],f(!0);else if(h.domainReentrant&&cn.domain&&cn.domain===h.domains[t])f(!1);else if(h.queues[t].length>=m)p(!1,new Error("Too many pending tasks in queue "+t));else{var g=function(){f(!0)};n.skipQueue?h.queues[t].unshift(g):h.queues[t].push(g);var y=n.timeout||h.timeout;y&&(c=setTimeout(function(){c=null,p(!1,new Error("async-lock timed out in queue "+t))},y))}var v=n.maxOccupationTime||h.maxOccupationTime;if(v&&(l=setTimeout(function(){h.queues[t]&&p(!1,new Error("Maximum occupation time is exceeded in queue "+t))},v)),a)return a};jr.prototype._acquireBatch=function(t,e,r,n){typeof r!="function"&&(n=r,r=null);var i=this,s=function(o,c){return function(l){i.acquire(o,c,l,n)}},a=t.reduceRight(function(o,c){return s(c,o)},e);if(typeof r=="function")a(r);else return new this.Promise(function(o,c){a.length===1?a(function(l,u){l?c(l):o(u)}):o(a())})};jr.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};jr.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};var AX=jr,PX=AX;const Ud=Fe(PX);var mm={exports:{}};typeof Object.create=="function"?mm.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:mm.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var CX=mm.exports,gm={exports:{}};const xX=ng(RC);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=xX,n=r.Buffer;function i(a,o){for(var c in a)o[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(a,o,c){return n(a,o,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,c)},s.alloc=function(a,o,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=n(a);return o!==void 0?typeof c=="string"?l.fill(o,c):l.fill(o):l.fill(0),l},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(gm,gm.exports);var VT=gm.exports,UT=VT.Buffer;function ef(t,e){this._block=UT.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}ef.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=UT.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,a=0;a<i;){for(var o=s%n,c=Math.min(i-a,n-o),l=0;l<c;l++)r[o+l]=t[a+l];s+=c,a+=c,s%n===0&&this._update(r)}return this._len+=i,this};ef.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};ef.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var kX=ef,RX=CX,BT=kX,OX=VT.Buffer,NX=[1518500249,1859775393,-1894007588,-899497514],DX=new Array(80);function Dl(){this.init(),this._w=DX,BT.call(this,64,56)}RX(Dl,BT);Dl.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function FX(t){return t<<1|t>>>31}function MX(t){return t<<5|t>>>27}function jX(t){return t<<30|t>>>2}function LX(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Dl.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=t.readInt32BE(o*4);for(;o<80;++o)e[o]=FX(e[o-3]^e[o-8]^e[o-14]^e[o-16]);for(var c=0;c<80;++c){var l=~~(c/20),u=MX(r)+LX(l,n,i,s)+a+e[c]+NX[l]|0;a=s,s=i,i=jX(n),n=r,r=u}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};Dl.prototype._hash=function(){var t=OX.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var VX=Dl;const zT=Fe(VX);var qT={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function r(){for(var b=0,I=new Array(256),T=0;T!=256;++T)b=T,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,I[T]=b;return typeof Int32Array<"u"?new Int32Array(I):I}var n=r();function i(b){var I=0,T=0,C=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)R[C]=b[C];for(C=0;C!=256;++C)for(T=b[C],I=256+C;I<4096;I+=256)T=R[I]=T>>>8^b[T&255];var x=[];for(C=1;C!=16;++C)x[C-1]=typeof Int32Array<"u"?R.subarray(C*256,C*256+256):R.slice(C*256,C*256+256);return x}var s=i(n),a=s[0],o=s[1],c=s[2],l=s[3],u=s[4],h=s[5],p=s[6],f=s[7],m=s[8],g=s[9],y=s[10],v=s[11],w=s[12],$=s[13],A=s[14];function P(b,I){for(var T=I^-1,C=0,R=b.length;C<R;)T=T>>>8^n[(T^b.charCodeAt(C++))&255];return~T}function O(b,I){for(var T=I^-1,C=b.length-15,R=0;R<C;)T=A[b[R++]^T&255]^$[b[R++]^T>>8&255]^w[b[R++]^T>>16&255]^v[b[R++]^T>>>24]^y[b[R++]]^g[b[R++]]^m[b[R++]]^f[b[R++]]^p[b[R++]]^h[b[R++]]^u[b[R++]]^l[b[R++]]^c[b[R++]]^o[b[R++]]^a[b[R++]]^n[b[R++]];for(C+=15;R<C;)T=T>>>8^n[(T^b[R++])&255];return~T}function E(b,I){for(var T=I^-1,C=0,R=b.length,x=0,Q=0;C<R;)x=b.charCodeAt(C++),x<128?T=T>>>8^n[(T^x)&255]:x<2048?(T=T>>>8^n[(T^(192|x>>6&31))&255],T=T>>>8^n[(T^(128|x&63))&255]):x>=55296&&x<57344?(x=(x&1023)+64,Q=b.charCodeAt(C++)&1023,T=T>>>8^n[(T^(240|x>>8&7))&255],T=T>>>8^n[(T^(128|x>>2&63))&255],T=T>>>8^n[(T^(128|Q>>6&15|(x&3)<<4))&255],T=T>>>8^n[(T^(128|Q&63))&255]):(T=T>>>8^n[(T^(224|x>>12&15))&255],T=T>>>8^n[(T^(128|x>>6&63))&255],T=T>>>8^n[(T^(128|x&63))&255]);return~T}e.table=n,e.bstr=P,e.buf=O,e.str=E})})(qT);const UX=Fe(qT);var _i={};(function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(s,a){return Object.prototype.hasOwnProperty.call(s,a)}t.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var c in o)r(o,c)&&(s[c]=o[c])}}return s},t.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var n={arraySet:function(s,a,o,c,l){if(a.subarray&&s.subarray){s.set(a.subarray(o,o+c),l);return}for(var u=0;u<c;u++)s[l+u]=a[o+u]},flattenChunks:function(s){var a,o,c,l,u,h;for(c=0,a=0,o=s.length;a<o;a++)c+=s[a].length;for(h=new Uint8Array(c),l=0,a=0,o=s.length;a<o;a++)u=s[a],h.set(u,l),l+=u.length;return h}},i={arraySet:function(s,a,o,c,l){for(var u=0;u<c;u++)s[l+u]=a[o+u]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(e)})(_i);var Fl={},Hn={},Mo={},BX=_i,zX=4,C0=0,x0=1,qX=2;function jo(t){for(var e=t.length;--e>=0;)t[e]=0}var HX=0,HT=1,KX=2,GX=3,WX=258,Qy=29,Ml=256,nl=Ml+1+Qy,Ba=30,Xy=19,KT=2*nl+1,Fs=15,rp=16,YX=7,Jy=256,GT=16,WT=17,YT=18,ym=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],dd=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],QX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],QT=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],XX=512,ti=new Array((nl+2)*2);jo(ti);var Vc=new Array(Ba*2);jo(Vc);var il=new Array(XX);jo(il);var sl=new Array(WX-GX+1);jo(sl);var Zy=new Array(Qy);jo(Zy);var Bd=new Array(Ba);jo(Bd);function np(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}var XT,JT,ZT;function ip(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function e$(t){return t<256?il[t]:il[256+(t>>>7)]}function al(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Pr(t,e,r){t.bi_valid>rp-r?(t.bi_buf|=e<<t.bi_valid&65535,al(t,t.bi_buf),t.bi_buf=e>>rp-t.bi_valid,t.bi_valid+=r-rp):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function xn(t,e,r){Pr(t,r[e*2],r[e*2+1])}function t$(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function JX(t){t.bi_valid===16?(al(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function ZX(t,e){var r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,h,p,f,m,g=0;for(p=0;p<=Fs;p++)t.bl_count[p]=0;for(r[t.heap[t.heap_max]*2+1]=0,l=t.heap_max+1;l<KT;l++)u=t.heap[l],p=r[r[u*2+1]*2+1]+1,p>c&&(p=c,g++),r[u*2+1]=p,!(u>n)&&(t.bl_count[p]++,f=0,u>=o&&(f=a[u-o]),m=r[u*2],t.opt_len+=m*(p+f),s&&(t.static_len+=m*(i[u*2+1]+f)));if(g!==0){do{for(p=c-1;t.bl_count[p]===0;)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(p=c;p!==0;p--)for(u=t.bl_count[p];u!==0;)h=t.heap[--l],!(h>n)&&(r[h*2+1]!==p&&(t.opt_len+=(p-r[h*2+1])*r[h*2],r[h*2+1]=p),u--)}}function r$(t,e,r){var n=new Array(Fs+1),i=0,s,a;for(s=1;s<=Fs;s++)n[s]=i=i+r[s-1]<<1;for(a=0;a<=e;a++){var o=t[a*2+1];o!==0&&(t[a*2]=t$(n[o]++,o))}}function eJ(){var t,e,r,n,i,s=new Array(Fs+1);for(r=0,n=0;n<Qy-1;n++)for(Zy[n]=r,t=0;t<1<<ym[n];t++)sl[r++]=n;for(sl[r-1]=n,i=0,n=0;n<16;n++)for(Bd[n]=i,t=0;t<1<<dd[n];t++)il[i++]=n;for(i>>=7;n<Ba;n++)for(Bd[n]=i<<7,t=0;t<1<<dd[n]-7;t++)il[256+i++]=n;for(e=0;e<=Fs;e++)s[e]=0;for(t=0;t<=143;)ti[t*2+1]=8,t++,s[8]++;for(;t<=255;)ti[t*2+1]=9,t++,s[9]++;for(;t<=279;)ti[t*2+1]=7,t++,s[7]++;for(;t<=287;)ti[t*2+1]=8,t++,s[8]++;for(r$(ti,nl+1,s),t=0;t<Ba;t++)Vc[t*2+1]=5,Vc[t*2]=t$(t,5);XT=new np(ti,ym,Ml+1,nl,Fs),JT=new np(Vc,dd,0,Ba,Fs),ZT=new np(new Array(0),QX,0,Xy,YX)}function n$(t){var e;for(e=0;e<nl;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Ba;e++)t.dyn_dtree[e*2]=0;for(e=0;e<Xy;e++)t.bl_tree[e*2]=0;t.dyn_ltree[Jy*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function i$(t){t.bi_valid>8?al(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function tJ(t,e,r,n){i$(t),al(t,r),al(t,~r),BX.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function k0(t,e,r,n){var i=e*2,s=r*2;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]}function sp(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&k0(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!k0(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function R0(t,e,r){var n,i,s=0,a,o;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],i=t.pending_buf[t.l_buf+s],s++,n===0?xn(t,i,e):(a=sl[i],xn(t,a+Ml+1,e),o=ym[a],o!==0&&(i-=Zy[a],Pr(t,i,o)),n--,a=e$(n),xn(t,a,r),o=dd[a],o!==0&&(n-=Bd[a],Pr(t,n,o)));while(s<t.last_lit);xn(t,Jy,e)}function vm(t,e){var r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems,a,o,c=-1,l;for(t.heap_len=0,t.heap_max=KT,a=0;a<s;a++)r[a*2]!==0?(t.heap[++t.heap_len]=c=a,t.depth[a]=0):r[a*2+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,r[l*2]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=n[l*2+1]);for(e.max_code=c,a=t.heap_len>>1;a>=1;a--)sp(t,r,a);l=s;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],sp(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,r[l*2]=r[a*2]+r[o*2],t.depth[l]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,r[a*2+1]=r[o*2+1]=l,t.heap[1]=l++,sp(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],ZX(t,e),r$(r,c,t.bl_count)}function O0(t,e,r){var n,i=-1,s,a=e[0*2+1],o=0,c=7,l=4;for(a===0&&(c=138,l=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)&&(o<l?t.bl_tree[s*2]+=o:s!==0?(s!==i&&t.bl_tree[s*2]++,t.bl_tree[GT*2]++):o<=10?t.bl_tree[WT*2]++:t.bl_tree[YT*2]++,o=0,i=s,a===0?(c=138,l=3):s===a?(c=6,l=3):(c=7,l=4))}function N0(t,e,r){var n,i=-1,s,a=e[0*2+1],o=0,c=7,l=4;for(a===0&&(c=138,l=3),n=0;n<=r;n++)if(s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)){if(o<l)do xn(t,s,t.bl_tree);while(--o!==0);else s!==0?(s!==i&&(xn(t,s,t.bl_tree),o--),xn(t,GT,t.bl_tree),Pr(t,o-3,2)):o<=10?(xn(t,WT,t.bl_tree),Pr(t,o-3,3)):(xn(t,YT,t.bl_tree),Pr(t,o-11,7));o=0,i=s,a===0?(c=138,l=3):s===a?(c=6,l=3):(c=7,l=4)}}function rJ(t){var e;for(O0(t,t.dyn_ltree,t.l_desc.max_code),O0(t,t.dyn_dtree,t.d_desc.max_code),vm(t,t.bl_desc),e=Xy-1;e>=3&&t.bl_tree[QT[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function nJ(t,e,r,n){var i;for(Pr(t,e-257,5),Pr(t,r-1,5),Pr(t,n-4,4),i=0;i<n;i++)Pr(t,t.bl_tree[QT[i]*2+1],3);N0(t,t.dyn_ltree,e-1),N0(t,t.dyn_dtree,r-1)}function iJ(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return C0;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return x0;for(r=32;r<Ml;r++)if(t.dyn_ltree[r*2]!==0)return x0;return C0}var D0=!1;function sJ(t){D0||(eJ(),D0=!0),t.l_desc=new ip(t.dyn_ltree,XT),t.d_desc=new ip(t.dyn_dtree,JT),t.bl_desc=new ip(t.bl_tree,ZT),t.bi_buf=0,t.bi_valid=0,n$(t)}function s$(t,e,r,n){Pr(t,(HX<<1)+(n?1:0),3),tJ(t,e,r)}function aJ(t){Pr(t,HT<<1,3),xn(t,Jy,ti),JX(t)}function oJ(t,e,r,n){var i,s,a=0;t.level>0?(t.strm.data_type===qX&&(t.strm.data_type=iJ(t)),vm(t,t.l_desc),vm(t,t.d_desc),a=rJ(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&e!==-1?s$(t,e,r,n):t.strategy===zX||s===i?(Pr(t,(HT<<1)+(n?1:0),3),R0(t,ti,Vc)):(Pr(t,(KX<<1)+(n?1:0),3),nJ(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),R0(t,t.dyn_ltree,t.dyn_dtree)),n$(t),n&&i$(t)}function cJ(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(sl[r]+Ml+1)*2]++,t.dyn_dtree[e$(e)*2]++),t.last_lit===t.lit_bufsize-1}Mo._tr_init=sJ;Mo._tr_stored_block=s$;Mo._tr_flush_block=oJ;Mo._tr_tally=cJ;Mo._tr_align=aJ;function lJ(t,e,r,n){for(var i=t&65535|0,s=t>>>16&65535|0,a=0;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0}var a$=lJ;function uJ(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var dJ=uJ();function hJ(t,e,r,n){var i=dJ,s=n+r;t^=-1;for(var a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1}var o$=hJ,ev={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yr=_i,Jr=Mo,c$=a$,Vi=o$,fJ=ev,da=0,pJ=1,mJ=3,is=4,F0=5,kn=0,M0=1,Zr=-2,gJ=-3,ap=-5,yJ=-1,vJ=1,Bu=2,_J=3,wJ=4,bJ=0,EJ=2,tf=8,SJ=9,IJ=15,TJ=8,$J=29,AJ=256,_m=AJ+1+$J,PJ=30,CJ=19,xJ=2*_m+1,kJ=15,je=3,Yi=258,pn=Yi+je+1,RJ=32,rf=42,wm=69,hd=73,fd=91,pd=103,Ms=113,$c=666,jt=1,jl=2,Ks=3,Lo=4,OJ=3;function Qi(t,e){return t.msg=fJ[e],e}function j0(t){return(t<<1)-(t>4?9:0)}function Bi(t){for(var e=t.length;--e>=0;)t[e]=0}function Ui(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(yr.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function Xt(t,e){Jr._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Ui(t.strm)}function We(t,e){t.pending_buf[t.pending++]=e}function _c(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function NJ(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,yr.arraySet(e,t.input,t.next_in,i,r),t.state.wrap===1?t.adler=c$(t.adler,e,i,r):t.state.wrap===2&&(t.adler=Vi(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function l$(t,e){var r=t.max_chain_length,n=t.strstart,i,s,a=t.prev_length,o=t.nice_match,c=t.strstart>t.w_size-pn?t.strstart-(t.w_size-pn):0,l=t.window,u=t.w_mask,h=t.prev,p=t.strstart+Yi,f=l[n+a-1],m=l[n+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(i=e,!(l[i+a]!==m||l[i+a-1]!==f||l[i]!==l[n]||l[++i]!==l[n+1])){n+=2,i++;do;while(l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&n<p);if(s=Yi-(p-n),n=p-Yi,s>a){if(t.match_start=e,a=s,s>=o)break;f=l[n+a-1],m=l[n+a]}}while((e=h[e&u])>c&&--r!==0);return a<=t.lookahead?a:t.lookahead}function Gs(t){var e=t.w_size,r,n,i,s,a;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-pn)){yr.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do i=t.head[--r],t.head[r]=i>=e?i-e:0;while(--n);n=e,r=n;do i=t.prev[--r],t.prev[r]=i>=e?i-e:0;while(--n);s+=e}if(t.strm.avail_in===0)break;if(n=NJ(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=n,t.lookahead+t.insert>=je)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+je-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<je)););}while(t.lookahead<pn&&t.strm.avail_in!==0)}function DJ(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Gs(t),t.lookahead===0&&e===da)return jt;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Xt(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-pn&&(Xt(t,!1),t.strm.avail_out===0))return jt}return t.insert=0,e===is?(Xt(t,!0),t.strm.avail_out===0?Ks:Lo):(t.strstart>t.block_start&&(Xt(t,!1),t.strm.avail_out===0),jt)}function op(t,e){for(var r,n;;){if(t.lookahead<pn){if(Gs(t),t.lookahead<pn&&e===da)return jt;if(t.lookahead===0)break}if(r=0,t.lookahead>=je&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+je-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-pn&&(t.match_length=l$(t,r)),t.match_length>=je)if(n=Jr._tr_tally(t,t.strstart-t.match_start,t.match_length-je),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=je){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+je-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=Jr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Xt(t,!1),t.strm.avail_out===0))return jt}return t.insert=t.strstart<je-1?t.strstart:je-1,e===is?(Xt(t,!0),t.strm.avail_out===0?Ks:Lo):t.last_lit&&(Xt(t,!1),t.strm.avail_out===0)?jt:jl}function Pa(t,e){for(var r,n,i;;){if(t.lookahead<pn){if(Gs(t),t.lookahead<pn&&e===da)return jt;if(t.lookahead===0)break}if(r=0,t.lookahead>=je&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+je-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=je-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-pn&&(t.match_length=l$(t,r),t.match_length<=5&&(t.strategy===vJ||t.match_length===je&&t.strstart-t.match_start>4096)&&(t.match_length=je-1)),t.prev_length>=je&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-je,n=Jr._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-je),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+je-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=je-1,t.strstart++,n&&(Xt(t,!1),t.strm.avail_out===0))return jt}else if(t.match_available){if(n=Jr._tr_tally(t,0,t.window[t.strstart-1]),n&&Xt(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return jt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Jr._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<je-1?t.strstart:je-1,e===is?(Xt(t,!0),t.strm.avail_out===0?Ks:Lo):t.last_lit&&(Xt(t,!1),t.strm.avail_out===0)?jt:jl}function FJ(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=Yi){if(Gs(t),t.lookahead<=Yi&&e===da)return jt;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=je&&t.strstart>0&&(i=t.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){s=t.strstart+Yi;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=Yi-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=je?(r=Jr._tr_tally(t,1,t.match_length-je),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Jr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Xt(t,!1),t.strm.avail_out===0))return jt}return t.insert=0,e===is?(Xt(t,!0),t.strm.avail_out===0?Ks:Lo):t.last_lit&&(Xt(t,!1),t.strm.avail_out===0)?jt:jl}function MJ(t,e){for(var r;;){if(t.lookahead===0&&(Gs(t),t.lookahead===0)){if(e===da)return jt;break}if(t.match_length=0,r=Jr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Xt(t,!1),t.strm.avail_out===0))return jt}return t.insert=0,e===is?(Xt(t,!0),t.strm.avail_out===0?Ks:Lo):t.last_lit&&(Xt(t,!1),t.strm.avail_out===0)?jt:jl}function In(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}var Fa;Fa=[new In(0,0,0,0,DJ),new In(4,4,8,4,op),new In(4,5,16,8,op),new In(4,6,32,32,op),new In(4,4,16,16,Pa),new In(8,16,32,32,Pa),new In(8,16,128,128,Pa),new In(8,32,128,256,Pa),new In(32,128,258,1024,Pa),new In(32,258,258,4096,Pa)];function jJ(t){t.window_size=2*t.w_size,Bi(t.head),t.max_lazy_match=Fa[t.level].max_lazy,t.good_match=Fa[t.level].good_length,t.nice_match=Fa[t.level].nice_length,t.max_chain_length=Fa[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=je-1,t.match_available=0,t.ins_h=0}function LJ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tf,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new yr.Buf16(xJ*2),this.dyn_dtree=new yr.Buf16((2*PJ+1)*2),this.bl_tree=new yr.Buf16((2*CJ+1)*2),Bi(this.dyn_ltree),Bi(this.dyn_dtree),Bi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new yr.Buf16(kJ+1),this.heap=new yr.Buf16(2*_m+1),Bi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new yr.Buf16(2*_m+1),Bi(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u$(t){var e;return!t||!t.state?Qi(t,Zr):(t.total_in=t.total_out=0,t.data_type=EJ,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?rf:Ms,t.adler=e.wrap===2?0:1,e.last_flush=da,Jr._tr_init(e),kn)}function d$(t){var e=u$(t);return e===kn&&jJ(t.state),e}function VJ(t,e){return!t||!t.state||t.state.wrap!==2?Zr:(t.state.gzhead=e,kn)}function h$(t,e,r,n,i,s){if(!t)return Zr;var a=1;if(e===yJ&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>SJ||r!==tf||n<8||n>15||e<0||e>9||s<0||s>wJ)return Qi(t,Zr);n===8&&(n=9);var o=new LJ;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+je-1)/je),o.window=new yr.Buf8(o.w_size*2),o.head=new yr.Buf16(o.hash_size),o.prev=new yr.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new yr.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,d$(t)}function UJ(t,e){return h$(t,e,tf,IJ,TJ,bJ)}function BJ(t,e){var r,n,i,s;if(!t||!t.state||e>F0||e<0)return t?Qi(t,Zr):Zr;if(n=t.state,!t.output||!t.input&&t.avail_in!==0||n.status===$c&&e!==is)return Qi(t,t.avail_out===0?ap:Zr);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===rf)if(n.wrap===2)t.adler=0,We(n,31),We(n,139),We(n,8),n.gzhead?(We(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),We(n,n.gzhead.time&255),We(n,n.gzhead.time>>8&255),We(n,n.gzhead.time>>16&255),We(n,n.gzhead.time>>24&255),We(n,n.level===9?2:n.strategy>=Bu||n.level<2?4:0),We(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(We(n,n.gzhead.extra.length&255),We(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Vi(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=wm):(We(n,0),We(n,0),We(n,0),We(n,0),We(n,0),We(n,n.level===9?2:n.strategy>=Bu||n.level<2?4:0),We(n,OJ),n.status=Ms);else{var a=tf+(n.w_bits-8<<4)<<8,o=-1;n.strategy>=Bu||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,a|=o<<6,n.strstart!==0&&(a|=RJ),a+=31-a%31,n.status=Ms,_c(n,a),n.strstart!==0&&(_c(n,t.adler>>>16),_c(n,t.adler&65535)),t.adler=1}if(n.status===wm)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Vi(t.adler,n.pending_buf,n.pending-i,i)),Ui(t),i=n.pending,n.pending===n.pending_buf_size));)We(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=Vi(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=hd)}else n.status=hd;if(n.status===hd)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Vi(t.adler,n.pending_buf,n.pending-i,i)),Ui(t),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,We(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Vi(t.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.gzindex=0,n.status=fd)}else n.status=fd;if(n.status===fd)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Vi(t.adler,n.pending_buf,n.pending-i,i)),Ui(t),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,We(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Vi(t.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.status=pd)}else n.status=pd;if(n.status===pd&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Ui(t),n.pending+2<=n.pending_buf_size&&(We(n,t.adler&255),We(n,t.adler>>8&255),t.adler=0,n.status=Ms)):n.status=Ms),n.pending!==0){if(Ui(t),t.avail_out===0)return n.last_flush=-1,kn}else if(t.avail_in===0&&j0(e)<=j0(r)&&e!==is)return Qi(t,ap);if(n.status===$c&&t.avail_in!==0)return Qi(t,ap);if(t.avail_in!==0||n.lookahead!==0||e!==da&&n.status!==$c){var c=n.strategy===Bu?MJ(n,e):n.strategy===_J?FJ(n,e):Fa[n.level].func(n,e);if((c===Ks||c===Lo)&&(n.status=$c),c===jt||c===Ks)return t.avail_out===0&&(n.last_flush=-1),kn;if(c===jl&&(e===pJ?Jr._tr_align(n):e!==F0&&(Jr._tr_stored_block(n,0,0,!1),e===mJ&&(Bi(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Ui(t),t.avail_out===0))return n.last_flush=-1,kn}return e!==is?kn:n.wrap<=0?M0:(n.wrap===2?(We(n,t.adler&255),We(n,t.adler>>8&255),We(n,t.adler>>16&255),We(n,t.adler>>24&255),We(n,t.total_in&255),We(n,t.total_in>>8&255),We(n,t.total_in>>16&255),We(n,t.total_in>>24&255)):(_c(n,t.adler>>>16),_c(n,t.adler&65535)),Ui(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?kn:M0)}function zJ(t){var e;return!t||!t.state?Zr:(e=t.state.status,e!==rf&&e!==wm&&e!==hd&&e!==fd&&e!==pd&&e!==Ms&&e!==$c?Qi(t,Zr):(t.state=null,e===Ms?Qi(t,gJ):kn))}function qJ(t,e){var r=e.length,n,i,s,a,o,c,l,u;if(!t||!t.state||(n=t.state,a=n.wrap,a===2||a===1&&n.status!==rf||n.lookahead))return Zr;for(a===1&&(t.adler=c$(t.adler,e,r,0)),n.wrap=0,r>=n.w_size&&(a===0&&(Bi(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new yr.Buf8(n.w_size),yr.arraySet(u,e,r-n.w_size,n.w_size,0),e=u,r=n.w_size),o=t.avail_in,c=t.next_in,l=t.input,t.avail_in=r,t.next_in=0,t.input=e,Gs(n);n.lookahead>=je;){i=n.strstart,s=n.lookahead-(je-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+je-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--s);n.strstart=i,n.lookahead=je-1,Gs(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=je-1,n.match_available=0,t.next_in=c,t.input=l,t.avail_in=o,n.wrap=a,kn}Hn.deflateInit=UJ;Hn.deflateInit2=h$;Hn.deflateReset=d$;Hn.deflateResetKeep=u$;Hn.deflateSetHeader=VJ;Hn.deflate=BJ;Hn.deflateEnd=zJ;Hn.deflateSetDictionary=qJ;Hn.deflateInfo="pako deflate (from Nodeca project)";var ha={},nf=_i,f$=!0,p$=!0;try{String.fromCharCode.apply(null,[0])}catch{f$=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p$=!1}var ol=new nf.Buf8(256);for(var Ni=0;Ni<256;Ni++)ol[Ni]=Ni>=252?6:Ni>=248?5:Ni>=240?4:Ni>=224?3:Ni>=192?2:1;ol[254]=ol[254]=1;ha.string2buf=function(t){var e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new nf.Buf8(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};function m$(t,e){if(e<65534&&(t.subarray&&p$||!t.subarray&&f$))return String.fromCharCode.apply(null,nf.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}ha.buf2binstring=function(t){return m$(t,t.length)};ha.binstring2buf=function(t){for(var e=new nf.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e};ha.buf2string=function(t,e){var r,n,i,s,a=e||t.length,o=new Array(a*2);for(n=0,r=0;r<a;){if(i=t[r++],i<128){o[n++]=i;continue}if(s=ol[i],s>4){o[n++]=65533,r+=s-1;continue}for(i&=s===2?31:s===3?15:7;s>1&&r<a;)i=i<<6|t[r++]&63,s--;if(s>1){o[n++]=65533;continue}i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|i&1023)}return m$(o,n)};ha.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+ol[t[r]]>e?r:e};function HJ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var g$=HJ,Uc=Hn,Bc=_i,bm=ha,Em=ev,KJ=g$,y$=Object.prototype.toString,GJ=0,cp=4,za=0,L0=1,V0=2,WJ=-1,YJ=0,QJ=8;function Ws(t){if(!(this instanceof Ws))return new Ws(t);this.options=Bc.assign({level:WJ,method:QJ,chunkSize:16384,windowBits:15,memLevel:8,strategy:YJ,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new KJ,this.strm.avail_out=0;var r=Uc.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==za)throw new Error(Em[r]);if(e.header&&Uc.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=bm.string2buf(e.dictionary):y$.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Uc.deflateSetDictionary(this.strm,n),r!==za)throw new Error(Em[r]);this._dict_set=!0}}Ws.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i,s;if(this.ended)return!1;s=e===~~e?e:e===!0?cp:GJ,typeof t=="string"?r.input=bm.string2buf(t):y$.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Bc.Buf8(n),r.next_out=0,r.avail_out=n),i=Uc.deflate(r,s),i!==L0&&i!==za)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(s===cp||s===V0))&&(this.options.to==="string"?this.onData(bm.buf2binstring(Bc.shrinkBuf(r.output,r.next_out))):this.onData(Bc.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==L0);return s===cp?(i=Uc.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===za):(s===V0&&(this.onEnd(za),r.avail_out=0),!0)};Ws.prototype.onData=function(t){this.chunks.push(t)};Ws.prototype.onEnd=function(t){t===za&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Bc.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function tv(t,e){var r=new Ws(e);if(r.push(t,!0),r.err)throw r.msg||Em[r.err];return r.result}function XJ(t,e){return e=e||{},e.raw=!0,tv(t,e)}function JJ(t,e){return e=e||{},e.gzip=!0,tv(t,e)}Fl.Deflate=Ws;Fl.deflate=tv;Fl.deflateRaw=XJ;Fl.gzip=JJ;var Ll={},vn={},zu=30,ZJ=12,eZ=function(e,r){var n,i,s,a,o,c,l,u,h,p,f,m,g,y,v,w,$,A,P,O,E,b,I,T,C;n=e.state,i=e.next_in,T=e.input,s=i+(e.avail_in-5),a=e.next_out,C=e.output,o=a-(r-e.avail_out),c=a+(e.avail_out-257),l=n.dmax,u=n.wsize,h=n.whave,p=n.wnext,f=n.window,m=n.hold,g=n.bits,y=n.lencode,v=n.distcode,w=(1<<n.lenbits)-1,$=(1<<n.distbits)-1;e:do{g<15&&(m+=T[i++]<<g,g+=8,m+=T[i++]<<g,g+=8),A=y[m&w];t:for(;;){if(P=A>>>24,m>>>=P,g-=P,P=A>>>16&255,P===0)C[a++]=A&65535;else if(P&16){O=A&65535,P&=15,P&&(g<P&&(m+=T[i++]<<g,g+=8),O+=m&(1<<P)-1,m>>>=P,g-=P),g<15&&(m+=T[i++]<<g,g+=8,m+=T[i++]<<g,g+=8),A=v[m&$];r:for(;;){if(P=A>>>24,m>>>=P,g-=P,P=A>>>16&255,P&16){if(E=A&65535,P&=15,g<P&&(m+=T[i++]<<g,g+=8,g<P&&(m+=T[i++]<<g,g+=8)),E+=m&(1<<P)-1,E>l){e.msg="invalid distance too far back",n.mode=zu;break e}if(m>>>=P,g-=P,P=a-o,E>P){if(P=E-P,P>h&&n.sane){e.msg="invalid distance too far back",n.mode=zu;break e}if(b=0,I=f,p===0){if(b+=u-P,P<O){O-=P;do C[a++]=f[b++];while(--P);b=a-E,I=C}}else if(p<P){if(b+=u+p-P,P-=p,P<O){O-=P;do C[a++]=f[b++];while(--P);if(b=0,p<O){P=p,O-=P;do C[a++]=f[b++];while(--P);b=a-E,I=C}}}else if(b+=p-P,P<O){O-=P;do C[a++]=f[b++];while(--P);b=a-E,I=C}for(;O>2;)C[a++]=I[b++],C[a++]=I[b++],C[a++]=I[b++],O-=3;O&&(C[a++]=I[b++],O>1&&(C[a++]=I[b++]))}else{b=a-E;do C[a++]=C[b++],C[a++]=C[b++],C[a++]=C[b++],O-=3;while(O>2);O&&(C[a++]=C[b++],O>1&&(C[a++]=C[b++]))}}else if(P&64){e.msg="invalid distance code",n.mode=zu;break e}else{A=v[(A&65535)+(m&(1<<P)-1)];continue r}break}}else if(P&64)if(P&32){n.mode=ZJ;break e}else{e.msg="invalid literal/length code",n.mode=zu;break e}else{A=y[(A&65535)+(m&(1<<P)-1)];continue t}break}}while(i<s&&a<c);O=g>>3,i-=O,g-=O<<3,m&=(1<<g)-1,e.next_in=i,e.next_out=a,e.avail_in=i<s?5+(s-i):5-(i-s),e.avail_out=a<c?257+(c-a):257-(a-c),n.hold=m,n.bits=g},U0=_i,Ca=15,B0=852,z0=592,q0=0,lp=1,H0=2,tZ=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],rZ=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],nZ=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],iZ=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],sZ=function(e,r,n,i,s,a,o,c){var l=c.bits,u=0,h=0,p=0,f=0,m=0,g=0,y=0,v=0,w=0,$=0,A,P,O,E,b,I=null,T=0,C,R=new U0.Buf16(Ca+1),x=new U0.Buf16(Ca+1),Q=null,re=0,Ee,_e,me;for(u=0;u<=Ca;u++)R[u]=0;for(h=0;h<i;h++)R[r[n+h]]++;for(m=l,f=Ca;f>=1&&R[f]===0;f--);if(m>f&&(m=f),f===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,c.bits=1,0;for(p=1;p<f&&R[p]===0;p++);for(m<p&&(m=p),v=1,u=1;u<=Ca;u++)if(v<<=1,v-=R[u],v<0)return-1;if(v>0&&(e===q0||f!==1))return-1;for(x[1]=0,u=1;u<Ca;u++)x[u+1]=x[u]+R[u];for(h=0;h<i;h++)r[n+h]!==0&&(o[x[r[n+h]]++]=h);if(e===q0?(I=Q=o,C=19):e===lp?(I=tZ,T-=257,Q=rZ,re-=257,C=256):(I=nZ,Q=iZ,C=-1),$=0,h=0,u=p,b=a,g=m,y=0,O=-1,w=1<<m,E=w-1,e===lp&&w>B0||e===H0&&w>z0)return 1;for(;;){Ee=u-y,o[h]<C?(_e=0,me=o[h]):o[h]>C?(_e=Q[re+o[h]],me=I[T+o[h]]):(_e=96,me=0),A=1<<u-y,P=1<<g,p=P;do P-=A,s[b+($>>y)+P]=Ee<<24|_e<<16|me|0;while(P!==0);for(A=1<<u-1;$&A;)A>>=1;if(A!==0?($&=A-1,$+=A):$=0,h++,--R[u]===0){if(u===f)break;u=r[n+o[h]]}if(u>m&&($&E)!==O){for(y===0&&(y=m),b+=p,g=u-y,v=1<<g;g+y<f&&(v-=R[g+y],!(v<=0));)g++,v<<=1;if(w+=1<<g,e===lp&&w>B0||e===H0&&w>z0)return 1;O=$&E,s[O]=m<<24|g<<16|b-a|0}}return $!==0&&(s[b+$]=u-y<<24|64<<16|0),c.bits=m,0},Lr=_i,Sm=a$,Tn=o$,aZ=eZ,zc=sZ,oZ=0,v$=1,_$=2,K0=4,cZ=5,qu=6,Ys=0,lZ=1,uZ=2,en=-2,w$=-3,b$=-4,dZ=-5,G0=8,E$=1,W0=2,Y0=3,Q0=4,X0=5,J0=6,Z0=7,eb=8,tb=9,rb=10,zd=11,Zn=12,up=13,nb=14,dp=15,ib=16,sb=17,ab=18,ob=19,Hu=20,Ku=21,cb=22,lb=23,ub=24,db=25,hb=26,hp=27,fb=28,pb=29,_t=30,S$=31,hZ=32,fZ=852,pZ=592,mZ=15,gZ=mZ;function mb(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function yZ(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Lr.Buf16(320),this.work=new Lr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I$(t){var e;return!t||!t.state?en:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=E$,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Lr.Buf32(fZ),e.distcode=e.distdyn=new Lr.Buf32(pZ),e.sane=1,e.back=-1,Ys)}function T$(t){var e;return!t||!t.state?en:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,I$(t))}function $$(t,e){var r,n;return!t||!t.state||(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?en:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,T$(t))}function A$(t,e){var r,n;return t?(n=new yZ,t.state=n,n.window=null,r=$$(t,e),r!==Ys&&(t.state=null),r):en}function vZ(t){return A$(t,gZ)}var gb=!0,fp,pp;function _Z(t){if(gb){var e;for(fp=new Lr.Buf32(512),pp=new Lr.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(zc(v$,t.lens,0,288,fp,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;zc(_$,t.lens,0,32,pp,0,t.work,{bits:5}),gb=!1}t.lencode=fp,t.lenbits=9,t.distcode=pp,t.distbits=5}function P$(t,e,r,n){var i,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Lr.Buf8(s.wsize)),n>=s.wsize?(Lr.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),Lr.arraySet(s.window,e,r-n,i,s.wnext),n-=i,n?(Lr.arraySet(s.window,e,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function wZ(t,e){var r,n,i,s,a,o,c,l,u,h,p,f,m,g,y=0,v,w,$,A,P,O,E,b,I=new Lr.Buf8(4),T,C,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return en;r=t.state,r.mode===Zn&&(r.mode=up),a=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,l=r.hold,u=r.bits,h=o,p=c,b=Ys;e:for(;;)switch(r.mode){case E$:if(r.wrap===0){r.mode=up;break}for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(r.wrap&2&&l===35615){r.check=0,I[0]=l&255,I[1]=l>>>8&255,r.check=Tn(r.check,I,2,0),l=0,u=0,r.mode=W0;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=_t;break}if((l&15)!==G0){t.msg="unknown compression method",r.mode=_t;break}if(l>>>=4,u-=4,E=(l&15)+8,r.wbits===0)r.wbits=E;else if(E>r.wbits){t.msg="invalid window size",r.mode=_t;break}r.dmax=1<<E,t.adler=r.check=1,r.mode=l&512?rb:Zn,l=0,u=0;break;case W0:for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(r.flags=l,(r.flags&255)!==G0){t.msg="unknown compression method",r.mode=_t;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=_t;break}r.head&&(r.head.text=l>>8&1),r.flags&512&&(I[0]=l&255,I[1]=l>>>8&255,r.check=Tn(r.check,I,2,0)),l=0,u=0,r.mode=Y0;case Y0:for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}r.head&&(r.head.time=l),r.flags&512&&(I[0]=l&255,I[1]=l>>>8&255,I[2]=l>>>16&255,I[3]=l>>>24&255,r.check=Tn(r.check,I,4,0)),l=0,u=0,r.mode=Q0;case Q0:for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}r.head&&(r.head.xflags=l&255,r.head.os=l>>8),r.flags&512&&(I[0]=l&255,I[1]=l>>>8&255,r.check=Tn(r.check,I,2,0)),l=0,u=0,r.mode=X0;case X0:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),r.flags&512&&(I[0]=l&255,I[1]=l>>>8&255,r.check=Tn(r.check,I,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=J0;case J0:if(r.flags&1024&&(f=r.length,f>o&&(f=o),f&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Lr.arraySet(r.head.extra,n,s,f,E)),r.flags&512&&(r.check=Tn(r.check,n,f,s)),o-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=Z0;case Z0:if(r.flags&2048){if(o===0)break e;f=0;do E=n[s+f++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E));while(E&&f<o);if(r.flags&512&&(r.check=Tn(r.check,n,f,s)),o-=f,s+=f,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=eb;case eb:if(r.flags&4096){if(o===0)break e;f=0;do E=n[s+f++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E));while(E&&f<o);if(r.flags&512&&(r.check=Tn(r.check,n,f,s)),o-=f,s+=f,E)break e}else r.head&&(r.head.comment=null);r.mode=tb;case tb:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(l!==(r.check&65535)){t.msg="header crc mismatch",r.mode=_t;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Zn;break;case rb:for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.adler=r.check=mb(l),l=0,u=0,r.mode=zd;case zd:if(r.havedict===0)return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,uZ;t.adler=r.check=1,r.mode=Zn;case Zn:if(e===cZ||e===qu)break e;case up:if(r.last){l>>>=u&7,u-=u&7,r.mode=hp;break}for(;u<3;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}switch(r.last=l&1,l>>>=1,u-=1,l&3){case 0:r.mode=nb;break;case 1:if(_Z(r),r.mode=Hu,e===qu){l>>>=2,u-=2;break e}break;case 2:r.mode=sb;break;case 3:t.msg="invalid block type",r.mode=_t}l>>>=2,u-=2;break;case nb:for(l>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=_t;break}if(r.length=l&65535,l=0,u=0,r.mode=dp,e===qu)break e;case dp:r.mode=ib;case ib:if(f=r.length,f){if(f>o&&(f=o),f>c&&(f=c),f===0)break e;Lr.arraySet(i,n,s,f,a),o-=f,s+=f,c-=f,a+=f,r.length-=f;break}r.mode=Zn;break;case sb:for(;u<14;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(r.nlen=(l&31)+257,l>>>=5,u-=5,r.ndist=(l&31)+1,l>>>=5,u-=5,r.ncode=(l&15)+4,l>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=_t;break}r.have=0,r.mode=ab;case ab:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}r.lens[R[r.have++]]=l&7,l>>>=3,u-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},b=zc(oZ,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,b){t.msg="invalid code lengths set",r.mode=_t;break}r.have=0,r.mode=ob;case ob:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[l&(1<<r.lenbits)-1],v=y>>>24,w=y>>>16&255,$=y&65535,!(v<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if($<16)l>>>=v,u-=v,r.lens[r.have++]=$;else{if($===16){for(C=v+2;u<C;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(l>>>=v,u-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=_t;break}E=r.lens[r.have-1],f=3+(l&3),l>>>=2,u-=2}else if($===17){for(C=v+3;u<C;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=v,u-=v,E=0,f=3+(l&7),l>>>=3,u-=3}else{for(C=v+7;u<C;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=v,u-=v,E=0,f=11+(l&127),l>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=_t;break}for(;f--;)r.lens[r.have++]=E}}if(r.mode===_t)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=_t;break}if(r.lenbits=9,T={bits:r.lenbits},b=zc(v$,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,b){t.msg="invalid literal/lengths set",r.mode=_t;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},b=zc(_$,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,b){t.msg="invalid distances set",r.mode=_t;break}if(r.mode=Hu,e===qu)break e;case Hu:r.mode=Ku;case Ku:if(o>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,aZ(t,p),a=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,l=r.hold,u=r.bits,r.mode===Zn&&(r.back=-1);break}for(r.back=0;y=r.lencode[l&(1<<r.lenbits)-1],v=y>>>24,w=y>>>16&255,$=y&65535,!(v<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(w&&!(w&240)){for(A=v,P=w,O=$;y=r.lencode[O+((l&(1<<A+P)-1)>>A)],v=y>>>24,w=y>>>16&255,$=y&65535,!(A+v<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=A,u-=A,r.back+=A}if(l>>>=v,u-=v,r.back+=v,r.length=$,w===0){r.mode=hb;break}if(w&32){r.back=-1,r.mode=Zn;break}if(w&64){t.msg="invalid literal/length code",r.mode=_t;break}r.extra=w&15,r.mode=cb;case cb:if(r.extra){for(C=r.extra;u<C;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=lb;case lb:for(;y=r.distcode[l&(1<<r.distbits)-1],v=y>>>24,w=y>>>16&255,$=y&65535,!(v<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(!(w&240)){for(A=v,P=w,O=$;y=r.distcode[O+((l&(1<<A+P)-1)>>A)],v=y>>>24,w=y>>>16&255,$=y&65535,!(A+v<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=A,u-=A,r.back+=A}if(l>>>=v,u-=v,r.back+=v,w&64){t.msg="invalid distance code",r.mode=_t;break}r.offset=$,r.extra=w&15,r.mode=ub;case ub:if(r.extra){for(C=r.extra;u<C;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=_t;break}r.mode=db;case db:if(c===0)break e;if(f=p-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=_t;break}f>r.wnext?(f-=r.wnext,m=r.wsize-f):m=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=i,m=a-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do i[a++]=g[m++];while(--f);r.length===0&&(r.mode=Ku);break;case hb:if(c===0)break e;i[a++]=r.length,c--,r.mode=Ku;break;case hp:if(r.wrap){for(;u<32;){if(o===0)break e;o--,l|=n[s++]<<u,u+=8}if(p-=c,t.total_out+=p,r.total+=p,p&&(t.adler=r.check=r.flags?Tn(r.check,i,p,a-p):Sm(r.check,i,p,a-p)),p=c,(r.flags?l:mb(l))!==r.check){t.msg="incorrect data check",r.mode=_t;break}l=0,u=0}r.mode=fb;case fb:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(l!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=_t;break}l=0,u=0}r.mode=pb;case pb:b=lZ;break e;case _t:b=w$;break e;case S$:return b$;case hZ:default:return en}return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,(r.wsize||p!==t.avail_out&&r.mode<_t&&(r.mode<hp||e!==K0))&&P$(t,t.output,t.next_out,p-t.avail_out),h-=t.avail_in,p-=t.avail_out,t.total_in+=h,t.total_out+=p,r.total+=p,r.wrap&&p&&(t.adler=r.check=r.flags?Tn(r.check,i,p,t.next_out-p):Sm(r.check,i,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Zn?128:0)+(r.mode===Hu||r.mode===dp?256:0),(h===0&&p===0||e===K0)&&b===Ys&&(b=dZ),b}function bZ(t){if(!t||!t.state)return en;var e=t.state;return e.window&&(e.window=null),t.state=null,Ys}function EZ(t,e){var r;return!t||!t.state||(r=t.state,!(r.wrap&2))?en:(r.head=e,e.done=!1,Ys)}function SZ(t,e){var r=e.length,n,i,s;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==zd)?en:n.mode===zd&&(i=1,i=Sm(i,e,r,0),i!==n.check)?w$:(s=P$(t,e,r,r),s?(n.mode=S$,b$):(n.havedict=1,Ys))}vn.inflateReset=T$;vn.inflateReset2=$$;vn.inflateResetKeep=I$;vn.inflateInit=vZ;vn.inflateInit2=A$;vn.inflate=wZ;vn.inflateEnd=bZ;vn.inflateGetHeader=EZ;vn.inflateSetDictionary=SZ;vn.inflateInfo="pako inflate (from Nodeca project)";var C$={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function IZ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var TZ=IZ,qa=vn,qc=_i,md=ha,xt=C$,Im=ev,$Z=g$,AZ=TZ,x$=Object.prototype.toString;function Qs(t){if(!(this instanceof Qs))return new Qs(t);this.options=qc.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $Z,this.strm.avail_out=0;var r=qa.inflateInit2(this.strm,e.windowBits);if(r!==xt.Z_OK)throw new Error(Im[r]);if(this.header=new AZ,qa.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=md.string2buf(e.dictionary):x$.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=qa.inflateSetDictionary(this.strm,e.dictionary),r!==xt.Z_OK)))throw new Error(Im[r])}Qs.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,s,a,o,c,l,u=!1;if(this.ended)return!1;a=e===~~e?e:e===!0?xt.Z_FINISH:xt.Z_NO_FLUSH,typeof t=="string"?r.input=md.binstring2buf(t):x$.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new qc.Buf8(n),r.next_out=0,r.avail_out=n),s=qa.inflate(r,xt.Z_NO_FLUSH),s===xt.Z_NEED_DICT&&i&&(s=qa.inflateSetDictionary(this.strm,i)),s===xt.Z_BUF_ERROR&&u===!0&&(s=xt.Z_OK,u=!1),s!==xt.Z_STREAM_END&&s!==xt.Z_OK)return this.onEnd(s),this.ended=!0,!1;r.next_out&&(r.avail_out===0||s===xt.Z_STREAM_END||r.avail_in===0&&(a===xt.Z_FINISH||a===xt.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=md.utf8border(r.output,r.next_out),c=r.next_out-o,l=md.buf2string(r.output,o),r.next_out=c,r.avail_out=n-c,c&&qc.arraySet(r.output,r.output,o,c,0),this.onData(l)):this.onData(qc.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(u=!0)}while((r.avail_in>0||r.avail_out===0)&&s!==xt.Z_STREAM_END);return s===xt.Z_STREAM_END&&(a=xt.Z_FINISH),a===xt.Z_FINISH?(s=qa.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===xt.Z_OK):(a===xt.Z_SYNC_FLUSH&&(this.onEnd(xt.Z_OK),r.avail_out=0),!0)};Qs.prototype.onData=function(t){this.chunks.push(t)};Qs.prototype.onEnd=function(t){t===xt.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qc.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function rv(t,e){var r=new Qs(e);if(r.push(t,!0),r.err)throw r.msg||Im[r.err];return r.result}function PZ(t,e){return e=e||{},e.raw=!0,rv(t,e)}Ll.Inflate=Qs;Ll.inflate=rv;Ll.inflateRaw=PZ;Ll.ungzip=rv;var CZ=_i.assign,xZ=Fl,kZ=Ll,RZ=C$,k$={};CZ(k$,xZ,kZ,RZ);var OZ=k$;const nv=Fe(OZ),yb=(t,e)=>function(...r){const n=e.promiseModule;return new n((i,s)=>{e.multiArgs?r.push((...a)=>{e.errorFirst?a[0]?s(a):(a.shift(),i(a)):i(a)}):e.errorFirst?r.push((a,o)=>{a?s(a):i(o)}):r.push(i),t.apply(this,r)})};var NZ=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const n=s=>{const a=o=>typeof o=="string"?s===o:o.test(s);return e.include?e.include.some(a):!e.exclude.some(a)};let i;r==="function"?i=function(...s){return e.excludeMain?t(...s):yb(t,e).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const a=t[s];i[s]=typeof a=="function"&&n(s)?yb(a,e):a}return i};const mp=Fe(NZ);var vb={};function _b(t){return Array.isArray(t)?t:[t]}const Tm="",wb=" ",gp="\\",DZ=/^\s+$/,FZ=/(?:[^\\]|^)\\$/,MZ=/^\\!/,jZ=/^\\#/,LZ=/\r?\n/g,VZ=/^\.*\/|^\.+$/,yp="/";let R$="node-ignore";typeof Symbol<"u"&&(R$=Symbol.for("node-ignore"));const bb=R$,UZ=(t,e,r)=>Object.defineProperty(t,e,{value:r}),BZ=/([0-z])-([0-z])/g,O$=()=>!1,zZ=t=>t.replace(BZ,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:Tm),qZ=t=>{const{length:e}=t;return t.slice(0,e-e%2)},HZ=[[/^\uFEFF/,()=>Tm],[/\\?\s+$/,t=>t.indexOf("\\")===0?wb:Tm],[/\\\s/g,()=>wb],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{const n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>gp],[/\\\\/g,()=>gp],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===gp?`\\[${r}${qZ(n)}${i}`:i==="]"&&n.length%2===0?`[${zZ(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Eb=Object.create(null),KZ=(t,e)=>{let r=Eb[t];return r||(r=HZ.reduce((n,i)=>n.replace(i[0],i[1].bind(t)),t),Eb[t]=r),e?new RegExp(r,"i"):new RegExp(r)},iv=t=>typeof t=="string",GZ=t=>t&&iv(t)&&!DZ.test(t)&&!FZ.test(t)&&t.indexOf("#")!==0,WZ=t=>t.split(LZ);class YZ{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}}const QZ=(t,e)=>{const r=t;let n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(MZ,"!").replace(jZ,"#");const i=KZ(t,e);return new YZ(r,t,n,i)},XZ=(t,e)=>{throw new e(t)},hi=(t,e,r)=>iv(t)?t?hi.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),N$=t=>VZ.test(t);hi.isNotRelative=N$;hi.convert=t=>t;class JZ{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){UZ(this,bb,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[bb]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(GZ(e)){const r=QZ(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,_b(iv(e)?WZ(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(s=>{const{negative:a}=s;if(i===a&&n!==i||a&&!n&&!i&&!r)return;s.regex.test(e)&&(n=!a,i=a)}),{ignored:n,unignored:i}}_test(e,r,n,i){const s=e&&hi.convert(e);return hi(s,e,this._allowRelativePaths?O$:XZ),this._t(s,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(yp)),i.pop(),!i.length)return r[e]=this._testOne(e,n);const s=this._t(i.join(yp)+yp,r,n,i);return r[e]=s.ignored?s:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return _b(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const qd=t=>new JZ(t),ZZ=t=>hi(t&&hi.convert(t),t,O$);qd.isPathValid=ZZ;qd.default=qd;var eee=qd;if(typeof cn<"u"&&(vb&&vb.IGNORE_TEST_WIN32||cn.platform==="win32")){const t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");hi.convert=t;const e=/^[a-z]:\//i;hi.isNotRelative=r=>e.test(r)||N$(r)}const tee=Fe(eee);function ree(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $n(t,e,r){return e=e instanceof RegExp?e:new RegExp(ree(e),"g"),t.replace(e,r)}var nee={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=$n(e,"./","/"),e=$n(e,"..","."),e=$n(e," ","-"),e=$n(e,/^[~^:?*\\\-]/g,""),e=$n(e,/[~^:?*\\]/g,"-"),e=$n(e,/[~^:?*\\\-]$/g,""),e=$n(e,"@{","-"),e=$n(e,/\.$/g,""),e=$n(e,/\/$/g,""),e=$n(e,/\.lock$/g,""),e}},iee=nee;const Mn=Fe(iee);var see=function(t,e){var r=t,n=e,i=r.length,s=n.length,a=!1,o=null,c=i+1,l=[],u=[],h=[],p="",f=-1,m=0,g=1,y,v,w=function(){i>=s&&(y=r,v=i,r=n,n=y,i=s,s=v,a=!0,c=i+1)},$=function(E,b,I){return{x:E,y:b,k:I}},A=function(E,b){return{elem:E,t:b}},P=function(E,b,I){var T,C,R;for(b>I?T=l[E-1+c]:T=l[E+1+c],R=Math.max(b,I),C=R-E;C<i&&R<s&&r[C]===n[R];)++C,++R;return l[E+c]=u.length,u[u.length]=new $(C,R,T),R},O=function(E){var b,I,T;for(b=I=0,T=E.length-1;T>=0;--T)for(;b<E[T].x||I<E[T].y;)E[T].y-E[T].x>I-b?(a?h[h.length]=new A(n[I],f):h[h.length]=new A(n[I],g),++I):E[T].y-E[T].x<I-b?(a?h[h.length]=new A(r[b],g):h[h.length]=new A(r[b],f),++b):(h[h.length]=new A(r[b],m),p+=r[b],++b,++I)};return w(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return p},getses:function(){return h},compose:function(){var E,b,I,T,C,R,x,Q;for(E=s-i,b=i+s+3,I={},x=0;x<b;++x)I[x]=-1,l[x]=-1;T=-1;do{for(++T,Q=-T;Q<=E-1;++Q)I[Q+c]=P(Q,I[Q-1+c]+1,I[Q+1+c]);for(Q=E+T;Q>=E+1;--Q)I[Q+c]=P(Q,I[Q-1+c]+1,I[Q+1+c]);I[E+c]=P(E,I[E-1+c]+1,I[E+1+c])}while(I[E+c]!==s);for(o=E+2*T,C=l[E+c],R=[];C!==-1;)R[R.length]=new $(u[C].x,u[C].y,null),C=u[C].k;O(R)}}},aee=see;function oee(t,e){var r=new aee(t,e);r.compose();for(var n=r.getses(),i,s,a=t.length-1,o=e.length-1,c=n.length-1;c>=0;--c)n[c].t===r.SES_COMMON?(s?(s.chain={file1index:a,file2index:o,chain:null},s=s.chain):(i={file1index:a,file2index:o,chain:null},s=i),a--,o--):n[c].t===r.SES_DELETE?a--:n[c].t===r.SES_ADD&&o--;var l={file1index:-1,file2index:-1,chain:null};return s?(s.chain=l,i):l}function Sb(t,e){for(var r=[],n=t.length,i=e.length,s=oee(t,e);s!==null;s=s.chain){var a=n-s.file1index-1,o=i-s.file2index-1;n=s.file1index,i=s.file2index,(a||o)&&r.push({file1:[n+1,a],file2:[i+1,o]})}return r.reverse(),r}function cee(t,e,r){var n,i=Sb(e,t),s=Sb(e,r),a=[];function o(x,Q){a.push([x.file1[0],Q,x.file1[1],x.file2[0],x.file2[1]])}for(n=0;n<i.length;n++)o(i[n],0);for(n=0;n<s.length;n++)o(s[n],2);a.sort(function(x,Q){return x[0]-Q[0]});var c=[],l=0;function u(x){x>l&&(c.push([1,l,x-l]),l=x)}for(var h=0;h<a.length;h++){for(var p=h,f=a[h],m=f[0],g=m+f[2];h<a.length-1;){var y=a[h+1],v=y[0];if(v>g)break;g=Math.max(g,v+y[2]),h++}if(u(m),p==h)f[4]>0&&c.push([f[1],f[3],f[4]]);else{var w={0:[t.length,-1,e.length,-1],2:[r.length,-1,e.length,-1]};for(n=p;n<=h;n++){f=a[n];var $=f[1],A=w[$],P=f[0],O=P+f[2],E=f[3],b=E+f[4];A[0]=Math.min(E,A[0]),A[1]=Math.max(b,A[1]),A[2]=Math.min(P,A[2]),A[3]=Math.max(O,A[3])}var I=w[0][0]+(m-w[0][2]),T=w[0][1]+(g-w[0][3]),C=w[2][0]+(m-w[2][2]),R=w[2][1]+(g-w[2][3]);c.push([-1,I,T-I,m,g-m,C,R-C])}l=g}return u(e.length),c}function lee(t,e,r){var n=[],i=[t,e,r],s=cee(t,e,r),a=[];function o(){a.length&&n.push({ok:a}),a=[]}function c(f){for(var m=0;m<f.length;m++)a.push(f[m])}function l(f){if(f[2]!=f[6])return!0;for(var m=f[1],g=f[5],y=0;y<f[2];y++)if(t[y+m]!=r[y+g])return!0;return!1}for(var u=0;u<s.length;u++){var h=s[u],p=h[0];p==-1?l(h)?(o(),n.push({conflict:{a:t.slice(h[1],h[1]+h[2]),aIndex:h[1],o:e.slice(h[3],h[3]+h[4]),oIndex:h[3],b:r.slice(h[5],h[5]+h[6]),bIndex:h[5]}})):c(i[0].slice(h[1],h[1]+h[2])):c(i[p].slice(h[1],h[1]+h[2]))}return o(),n}var uee=lee;const dee=Fe(uee);class Ke extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){const r=new Ke(e.message);return r.code=e.code,r.data=e.data,r.caller=e.caller,r.stack=e.stack,r}get isIsomorphicGitError(){return!0}}class Vl extends Ke{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=Vl.code,this.data={filepaths:e}}}Vl.code="UnmergedPathsError";class Pe extends Ke{constructor(e){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=Pe.code,this.data={message:e}}}Pe.code="InternalError";class Vo extends Ke{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=Vo.code,this.data={filepath:e}}}Vo.code="UnsafeFilepathError";class Rn{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){const r=this.buffer.slice(this._start,this._start+e);return this._start+=e,r}toString(e,r){const n=this.buffer.toString(e,this._start,this._start+r);return this._start+=r,n}write(e,r,n){const i=this.buffer.write(e,this._start,r,n);return this._start+=r,i}copy(e,r,n){const i=e.copy(this.buffer,this._start,r,n);return this._start+=i,i}readUInt8(){const e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){const r=this.buffer.writeUInt8(e,this._start);return this._start+=1,r}readUInt16BE(){const e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){const r=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,r}readUInt32BE(){const e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){const r=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,r}}function sf(t,e){return-(t<e)||+(t>e)}function D$(t,e){return sf(t.path,e.path)}function F$(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let r=t&511;return r&73?r=493:r=420,e!==8&&(r=0),(e<<12)+r}const An=2**32;function Ib(t,e,r,n){if(t!==void 0&&e!==void 0)return[t,e];r===void 0&&(r=n.valueOf());const i=Math.floor(r/1e3),s=(r-i*1e3)*1e6;return[i,s]}function ro(t){const[e,r]=Ib(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[n,i]=Ib(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%An,ctimeNanoseconds:r%An,mtimeSeconds:n%An,mtimeNanoseconds:i%An,dev:t.dev%An,ino:t.ino%An,mode:F$(t.mode%An),uid:t.uid%An,gid:t.gid%An,size:t.size>-1?t.size%An:0}}function hee(t){let e="";for(const r of new Uint8Array(t))r<16&&(e+="0"),e+=r.toString(16);return e}let vp=null;async function fi(t){return vp===null&&(vp=await pee()),vp?M$(t):fee(t)}function fee(t){return new zT().update(t).digest("hex")}async function M$(t){const e=await crypto.subtle.digest("SHA-1",t);return hee(e)}async function pee(){try{if(await M$(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function mee(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function gee(t){const e=t.flags;return e.extended=!1,e.nameLength=Math.min(oe.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}class Ds{constructor(e,r){this._dirty=!1,this._unmergedPaths=r||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let r=this._entries.get(e.path);r||(this._entries.set(e.path,e),r=e),r.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(oe.isBuffer(e))return Ds.fromBuffer(e);if(e===null)return new Ds(null);throw new Pe("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new Pe("Index file is empty (.git/index)");const r=new Ds,n=new Rn(e),i=n.toString("utf8",4);if(i!=="DIRC")throw new Pe(`Invalid dircache magic file number: ${i}`);const s=await fi(e.slice(0,-20)),a=e.slice(-20).toString("hex");if(a!==s)throw new Pe(`Invalid checksum in GitIndex buffer: expected ${a} but saw ${s}`);const o=n.readUInt32BE();if(o!==2)throw new Pe(`Unsupported dircache version: ${o}`);const c=n.readUInt32BE();let l=0;for(;!n.eof()&&l<c;){const u={};u.ctimeSeconds=n.readUInt32BE(),u.ctimeNanoseconds=n.readUInt32BE(),u.mtimeSeconds=n.readUInt32BE(),u.mtimeNanoseconds=n.readUInt32BE(),u.dev=n.readUInt32BE(),u.ino=n.readUInt32BE(),u.mode=n.readUInt32BE(),u.uid=n.readUInt32BE(),u.gid=n.readUInt32BE(),u.size=n.readUInt32BE(),u.oid=n.slice(20).toString("hex");const h=n.readUInt16BE();u.flags=mee(h);const p=e.indexOf(0,n.tell()+1)-n.tell();if(p<1)throw new Pe(`Got a path length of: ${p}`);if(u.path=n.toString("utf8",p),u.path.includes("..\\")||u.path.includes("../"))throw new Vo(u.path);let f=8-(n.tell()-12)%8;for(f===0&&(f=8);f--;){const m=n.readUInt8();if(m!==0)throw new Pe(`Expected 1-8 null characters but got '${m}' after ${u.path}`);if(n.eof())throw new Pe("Unexpected end of file")}u.stages=[],r._addEntry(u),l++}return r}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(D$)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(r=>r):e)}*[Symbol.iterator](){for(const e of this.entries)yield e}insert({filepath:e,stats:r,oid:n,stage:i=0}){r||(r={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),r=ro(r);const s=oe.from(e),a={ctimeSeconds:r.ctimeSeconds,ctimeNanoseconds:r.ctimeNanoseconds,mtimeSeconds:r.mtimeSeconds,mtimeNanoseconds:r.mtimeNanoseconds,dev:r.dev,ino:r.ino,mode:r.mode||33188,uid:r.uid,gid:r.gid,size:r.size,path:e,oid:n,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:s.length<4095?s.length:4095},stages:[]};this._addEntry(a),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(const r of this._entries.keys())r.startsWith(e+"/")&&this._entries.delete(r);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){const r=oe.from(e.path),n=Math.ceil((62+r.length+1)/8)*8,i=oe.alloc(n),s=new Rn(i),a=ro(e);return s.writeUInt32BE(a.ctimeSeconds),s.writeUInt32BE(a.ctimeNanoseconds),s.writeUInt32BE(a.mtimeSeconds),s.writeUInt32BE(a.mtimeNanoseconds),s.writeUInt32BE(a.dev),s.writeUInt32BE(a.ino),s.writeUInt32BE(a.mode),s.writeUInt32BE(a.uid),s.writeUInt32BE(a.gid),s.writeUInt32BE(a.size),s.write(e.oid,20,"hex"),s.writeUInt16BE(gee(e)),s.write(e.path,r.length,"utf8"),i}async toObject(){const e=oe.alloc(12),r=new Rn(e);r.write("DIRC",4,"utf8"),r.writeUInt32BE(2),r.writeUInt32BE(this.entriesFlat.length);let n=[];for(const o of this.entries)if(n.push(Ds._entryToBuffer(o)),o.stages.length>1)for(const c of o.stages)c&&c!==o&&n.push(Ds._entryToBuffer(c));n=await Promise.all(n);const i=oe.concat(n),s=oe.concat([e,i]),a=await fi(s);return oe.concat([s,oe.from(a,"hex")])}}function Hd(t,e,r=!0,n=!0){const i=ro(t),s=ro(e);return r&&i.mode!==s.mode||i.mtimeSeconds!==s.mtimeSeconds||i.ctimeSeconds!==s.ctimeSeconds||i.uid!==s.uid||i.gid!==s.gid||n&&i.ino!==s.ino||i.size!==s.size}let _p=null;const xa=Symbol("IndexCache");function yee(){return{map:new Map,stats:new Map}}async function vee(t,e,r){const n=await t.lstat(e),i=await t.read(e),s=await Ds.from(i);r.map.set(e,s),r.stats.set(e,n)}async function _ee(t,e,r){const n=r.stats.get(e);if(n===void 0)return!0;const i=await t.lstat(e);return n===null||i===null?!1:Hd(n,i)}class Jt{static async acquire({fs:e,gitdir:r,cache:n,allowUnmerged:i=!0},s){n[xa]||(n[xa]=yee());const a=`${r}/index`;_p===null&&(_p=new Ud({maxPending:1/0}));let o,c=[];return await _p.acquire(a,async()=>{await _ee(e,a,n[xa])&&await vee(e,a,n[xa]);const l=n[xa].map.get(a);if(c=l.unmergedPaths,c.length&&!i)throw new Vl(c);if(o=await s(l),l._dirty){const u=await l.toObject();await e.write(a,u),n[xa].stats.set(a,await e.lstat(a)),l._dirty=!1}}),o}}function Kd(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function no(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function j$(t){const e=new Map,r=function(i){if(!e.has(i)){const s={type:"tree",fullpath:i,basename:Kd(i),metadata:{},children:[]};e.set(i,s),s.parent=r(no(i)),s.parent&&s.parent!==s&&s.parent.children.push(s)}return e.get(i)},n=function(i,s){if(!e.has(i)){const a={type:"blob",fullpath:i,basename:Kd(i),metadata:s,parent:r(no(i)),children:[]};a.parent&&a.parent.children.push(a),e.set(i,a)}return e.get(i)};r(".");for(const i of t)n(i.path,i);return e}function wee(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Pe(`Unexpected GitTree entry mode: ${t.toString(8)}`)}class bee{constructor({fs:e,gitdir:r,cache:n}){this.treePromise=Jt.acquire({fs:e,gitdir:r,cache:n},async function(s){return j$(s.entries)});const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const r=e._fullpath,i=(await this.treePromise).get(r);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${r}'`);const s=i.children.map(a=>a.fullpath);return s.sort(sf),s}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const n=(await this.treePromise).get(e._fullpath);if(!n)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);const i=n.type==="tree"?{}:ro(n.metadata);e._type=n.type==="tree"?"tree":wee(i.mode),e._mode=i.mode,n.type==="tree"?e._stat=void 0:e._stat=i}return e._stat}async content(e){}async oid(e){if(e._oid===!1){const n=(await this.treePromise).get(e._fullpath);e._oid=n.metadata.oid}return e._oid}}const af=Symbol("GitWalkSymbol");function of(){const t=Object.create(null);return Object.defineProperty(t,af,{value:function({fs:e,gitdir:r,cache:n}){return new bee({fs:e,gitdir:r,cache:n})}}),Object.freeze(t),t}class mt extends Ke{constructor(e){super(`Could not find ${e}.`),this.code=this.name=mt.code,this.data={what:e}}}mt.code="NotFoundError";class br extends Ke{constructor(e,r,n,i){super(`Object ${e} ${i?`at ${i}`:""}was anticipated to be a ${n} but it is a ${r}.`),this.code=this.name=br.code,this.data={oid:e,actual:r,expected:n,filepath:i}}}br.code="ObjectTypeError";class hs extends Ke{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=hs.code,this.data={value:e}}}hs.code="InvalidOidError";class Ul extends Ke{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=Ul.code,this.data={remote:e}}}Ul.code="NoRefspecError";class Gd{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let r=null;this.parsedConfig=e.trim().split(`
`).map(n=>{if(/^\s*#/.test(n))return{line:n,comment:!0};const i=n.indexOf(" ");if(n.startsWith("^")){const s=n.slice(1);return this.refs.set(r+"^{}",s),{line:n,ref:r,peeled:s}}else{const s=n.slice(0,i);return r=n.slice(i+1),this.refs.set(r,s),{line:n,ref:r,oid:s}}})}return this}static from(e){return new Gd(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(r=>r.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}}class Wd{constructor({remotePath:e,localPath:r,force:n,matchPrefix:i}){Object.assign(this,{remotePath:e,localPath:r,force:n,matchPrefix:i})}static from(e){const[r,n,i,s,a]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=r==="+",c=i==="*";if(c!==(a==="*"))throw new Pe("Invalid refspec");return new Wd({remotePath:n,localPath:s,force:o,matchPrefix:c})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}}class sv{constructor(e=[]){this.rules=e}static from(e){const r=[];for(const n of e)r.push(Wd.from(n));return new sv(r)}add(e){const r=Wd.from(e);this.rules.push(r)}translate(e){const r=[];for(const n of this.rules)for(const i of e){const s=n.translate(i);s&&r.push([i,s])}return r}translateOne(e){let r=null;for(const n of this.rules){const i=n.translate(e);i&&(r=i)}return r}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}}function Eee(t,e){const r=t.replace(/\^\{\}$/,""),n=e.replace(/\^\{\}$/,""),i=-(r<n)||+(r>n);return i===0?t.endsWith("^{}")?1:-1:i}const Tb=new Map;function $b(t){let e=Tb.get(t);return e||(e=See(t),Tb.set(t,e)),e}function See(t){return t=t.split("/./").join("/").replace(/\/{2,}/g,"/"),t==="/."?"/":t==="./"||(t.startsWith("./")&&(t=t.slice(2)),t.endsWith("/.")&&(t=t.slice(0,-2)),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t==="")?".":t}function X(...t){return $b(t.map($b).join("/"))}const Iee=t=>{t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},wc=t=>{if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},Ab={core:{filemode:wc,bare:wc,logallrefupdates:wc,symlinks:wc,ignorecase:wc,bigFileThreshold:Iee}},Tee=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,$ee=/^[A-Za-z0-9-.]+$/,Aee=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Pee=/^[A-Za-z][A-Za-z-]*$/,Cee=/^(.*?)( *[#;].*)$/,xee=t=>{const e=Tee.exec(t);if(e!=null){const[r,n]=e.slice(1);return[r,n]}return null},kee=t=>{const e=Aee.exec(t);if(e!=null){const[r,n="true"]=e.slice(1),i=Ree(n),s=Oee(i);return[r,s]}return null},Ree=t=>{const e=Cee.exec(t);if(e==null)return t;const[r,n]=e.slice(1);return Pb(r)&&Pb(n)?`${r}${n}`:r},Pb=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Oee=t=>t.split("").reduce((e,r,n,i)=>{const s=r==='"'&&i[n-1]!=="\\",a=r==="\\"&&i[n+1]==='"';return s||a?e:e+r},""),Cb=t=>t!=null?t.toLowerCase():null,$m=(t,e,r)=>[Cb(t),e,Cb(r)].filter(n=>n!=null).join("."),xb=t=>{const e=t.split("."),r=e.shift(),n=e.pop(),i=e.length?e.join("."):void 0;return{section:r,subsection:i,name:n,path:$m(r,i,n),sectionPath:$m(r,i,null)}},Nee=(t,e)=>t.reduce((r,n,i)=>e(n)?i:r,-1);class av{constructor(e){let r=null,n=null;this.parsedConfig=e?e.split(`
`).map(i=>{let s=null,a=null;const o=i.trim(),c=xee(o),l=c!=null;if(l)[r,n]=c;else{const h=kee(o);h!=null&&([s,a]=h)}const u=$m(r,n,s);return{line:i,isSection:l,section:r,subsection:n,name:s,value:a,path:u}}):[]}static from(e){return new av(e)}async get(e,r=!1){const n=xb(e).path,i=this.parsedConfig.filter(s=>s.path===n).map(({section:s,name:a,value:o})=>{const c=Ab[s]&&Ab[s][a];return c?c(o):o});return r?i:i.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(r=>r.section===e&&r.isSection).map(r=>r.subsection)}async deleteSection(e,r){this.parsedConfig=this.parsedConfig.filter(n=>!(n.section===e&&n.subsection===r))}async append(e,r){return this.set(e,r,!0)}async set(e,r,n=!1){const{section:i,subsection:s,name:a,path:o,sectionPath:c}=xb(e),l=Nee(this.parsedConfig,u=>u.path===o);if(r==null)l!==-1&&this.parsedConfig.splice(l,1);else if(l!==-1){const u=this.parsedConfig[l],h=Object.assign({},u,{name:a,value:r,modified:!0});n?this.parsedConfig.splice(l+1,0,h):this.parsedConfig[l]=h}else{const u=this.parsedConfig.findIndex(p=>p.path===c),h={section:i,subsection:s,name:a,value:r,modified:!0,path:o};if($ee.test(i)&&Pee.test(a))if(u>=0)this.parsedConfig.splice(u+1,0,h);else{const p={section:i,subsection:s,modified:!0,path:c};this.parsedConfig.push(p,h)}}}toString(){return this.parsedConfig.map(({line:e,section:r,subsection:n,name:i,value:s,modified:a=!1})=>a?i!=null&&s!=null?typeof s=="string"&&/[#;]/.test(s)?`	${i} = "${s}"`:`	${i} = ${s}`:n!=null?`[${r} "${n}"]`:`[${r}]`:e).join(`
`)}}class Ut{static async get({fs:e,gitdir:r}){const n=await e.read(`${r}/config`,{encoding:"utf8"});return av.from(n)}static async save({fs:e,gitdir:r,config:n}){await e.write(`${r}/config`,n.toString(),{encoding:"utf8"})}}const Gu=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],Dee=["config","description","index","shallow","commondir"];let wp;async function Di(t,e){return wp===void 0&&(wp=new Ud),wp.acquire(t,e)}class te{static async updateRemoteRefs({fs:e,gitdir:r,remote:n,refs:i,symrefs:s,tags:a,refspecs:o=void 0,prune:c=!1,pruneTags:l=!1}){for(const y of i.values())if(!y.match(/[0-9a-f]{40}/))throw new hs(y);const u=await Ut.get({fs:e,gitdir:r});if(!o){if(o=await u.getall(`remote.${n}.fetch`),o.length===0)throw new Ul(n);o.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}const h=sv.from(o),p=new Map;if(l){const y=await te.listRefs({fs:e,gitdir:r,filepath:"refs/tags"});await te.deleteRefs({fs:e,gitdir:r,refs:y.map(v=>`refs/tags/${v}`)})}if(a){for(const y of i.keys())if(y.startsWith("refs/tags")&&!y.endsWith("^{}")&&!await te.exists({fs:e,gitdir:r,ref:y})){const v=i.get(y);p.set(y,v)}}const f=h.translate([...i.keys()]);for(const[y,v]of f){const w=i.get(y);p.set(v,w)}const m=h.translate([...s.keys()]);for(const[y,v]of m){const w=s.get(y),$=h.translateOne(w);$&&p.set(v,`ref: ${$}`)}const g=[];if(c){for(const y of h.localNamespaces()){const v=(await te.listRefs({fs:e,gitdir:r,filepath:y})).map(w=>`${y}/${w}`);for(const w of v)p.has(w)||g.push(w)}g.length>0&&await te.deleteRefs({fs:e,gitdir:r,refs:g})}for(const[y,v]of p)await Di(y,async()=>e.write(X(r,y),`${v.trim()}
`,"utf8"));return{pruned:g}}static async writeRef({fs:e,gitdir:r,ref:n,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new hs(i);await Di(n,async()=>e.write(X(r,n),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:r,ref:n,value:i}){await Di(n,async()=>e.write(X(r,n),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:r,ref:n}){return te.deleteRefs({fs:e,gitdir:r,refs:[n]})}static async deleteRefs({fs:e,gitdir:r,refs:n}){await Promise.all(n.map(o=>e.rm(X(r,o))));let i=await Di("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));const s=Gd.from(i),a=s.refs.size;for(const o of n)s.refs.has(o)&&s.delete(o);s.refs.size<a&&(i=s.toString(),await Di("packed-refs",async()=>e.write(`${r}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:r,ref:n,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return n;if(n.startsWith("ref: "))return n=n.slice(5),te.resolve({fs:e,gitdir:r,ref:n,depth:i});if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;const s=await te.packedRefs({fs:e,gitdir:r}),a=Gu(n).filter(o=>!Dee.includes(o));for(const o of a){const c=await Di(o,async()=>await e.read(`${r}/${o}`,{encoding:"utf8"})||s.get(o));if(c)return te.resolve({fs:e,gitdir:r,ref:c.trim(),depth:i})}throw new mt(n)}static async exists({fs:e,gitdir:r,ref:n}){try{return await te.expand({fs:e,gitdir:r,ref:n}),!0}catch{return!1}}static async expand({fs:e,gitdir:r,ref:n}){if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;const i=await te.packedRefs({fs:e,gitdir:r}),s=Gu(n);for(const a of s)if(await Di(a,async()=>e.exists(`${r}/${a}`))||i.has(a))return a;throw new mt(n)}static async expandAgainstMap({ref:e,map:r}){const n=Gu(e);for(const i of n)if(await r.has(i))return i;throw new mt(e)}static resolveAgainstMap({ref:e,fullref:r=e,depth:n=void 0,map:i}){if(n!==void 0&&(n--,n===-1))return{fullref:r,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),te.resolveAgainstMap({ref:e,fullref:r,depth:n,map:i});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:r,oid:e};const s=Gu(e);for(const a of s){const o=i.get(a);if(o)return te.resolveAgainstMap({ref:o.trim(),fullref:a,depth:n,map:i})}throw new mt(e)}static async packedRefs({fs:e,gitdir:r}){const n=await Di("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));return Gd.from(n).refs}static async listRefs({fs:e,gitdir:r,filepath:n}){const i=te.packedRefs({fs:e,gitdir:r});let s=null;try{s=await e.readdirDeep(`${r}/${n}`),s=s.map(a=>a.replace(`${r}/${n}/`,""))}catch{s=[]}for(let a of(await i).keys())a.startsWith(n)&&(a=a.replace(n+"/",""),s.includes(a)||s.push(a));return s.sort(Eee),s}static async listBranches({fs:e,gitdir:r,remote:n}){return n?te.listRefs({fs:e,gitdir:r,filepath:`refs/remotes/${n}`}):te.listRefs({fs:e,gitdir:r,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:r}){return(await te.listRefs({fs:e,gitdir:r,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}}function Fee(t,e){return sf(kb(t),kb(e))}function kb(t){return t.mode==="040000"?t.path+"/":t.path}function L$(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Pe(`Unexpected GitTree entry mode: ${t}`)}function Mee(t){const e=[];let r=0;for(;r<t.length;){const n=t.indexOf(32,r);if(n===-1)throw new Pe(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next space character.`);const i=t.indexOf(0,r);if(i===-1)throw new Pe(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next null character.`);let s=t.slice(r,n).toString("utf8");s==="40000"&&(s="040000");const a=L$(s),o=t.slice(n+1,i).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new Vo(o);const c=t.slice(i+1,i+21).toString("hex");r=i+21,e.push({mode:s,path:o,oid:c,type:a})}return e}function jee(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new Pe(`Could not understand file mode: ${t}`)}function Lee(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=jee(t.mode),t.type||(t.type=L$(t.mode)),t}class kr{constructor(e){if(oe.isBuffer(e))this._entries=Mee(e);else if(Array.isArray(e))this._entries=e.map(Lee);else throw new Pe("invalid type passed to GitTree constructor");this._entries.sort(D$)}static from(e){return new kr(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){const e=[...this._entries];return e.sort(Fee),oe.concat(e.map(r=>{const n=oe.from(r.mode.replace(/^0/,"")),i=oe.from(" "),s=oe.from(r.path,"utf8"),a=oe.from([0]),o=oe.from(r.oid,"hex");return oe.concat([n,i,s,a,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const e of this._entries)yield e}}class Uo{static wrap({type:e,object:r}){return oe.concat([oe.from(`${e} ${r.byteLength.toString()}\0`),oe.from(r)])}static unwrap(e){const r=e.indexOf(32),n=e.indexOf(0),i=e.slice(0,r).toString("utf8"),s=e.slice(r+1,n).toString("utf8"),a=e.length-(n+1);if(parseInt(s)!==a)throw new Pe(`Length mismatch: expected ${s} bytes but got ${a} instead.`);return{type:i,object:oe.from(e.slice(n+1))}}}async function Vee({fs:t,gitdir:e,oid:r}){const n=`objects/${r.slice(0,2)}/${r.slice(2)}`,i=await t.read(`${e}/${n}`);return i?{object:i,format:"deflated",source:n}:null}function Uee(t,e){const r=new Rn(t),n=Rb(r);if(n!==e.byteLength)throw new Pe(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${e.length} bytes`);const i=Rb(r);let s;const a=Nb(r,e);if(a.byteLength===i)s=a;else{s=oe.alloc(i);const o=new Rn(s);for(o.copy(a);!r.eof();)o.copy(Nb(r,e));const c=o.tell();if(i!==c)throw new Pe(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${c} bytes`)}return s}function Rb(t){let e=0,r=0,n=null;do n=t.readUInt8(),e|=(n&127)<<r,r+=7;while(n&128);return e}function Ob(t,e,r){let n=0,i=0;for(;r--;)e&1&&(n|=t.readUInt8()<<i),e>>=1,i+=8;return n}function Nb(t,e){const r=t.readUInt8(),n=128,i=15,s=112;if(r&n){const a=Ob(t,r&i,4);let o=Ob(t,(r&s)>>4,3);return o===0&&(o=65536),e.slice(a,a+o)}else return t.slice(r)}function Bee(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function V$(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:Bee(t)}class U${constructor(e){if(typeof oe>"u")throw new Error("Missing Buffer dependency");this.stream=V$(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:r}=await this.stream.next();return e&&(this._ended=!0,!r)?oe.alloc(0):(r&&(r=oe.from(r)),r)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;const r=[this.buffer];for(;this.cursor+e>zee(r);){const n=await this._next();if(this._ended)break;r.push(n)}this.buffer=oe.concat(r)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function zee(t){return t.reduce((e,r)=>e+r.length,0)}async function qee(t,e){const r=new U$(t);let n=await r.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new Pe(`Invalid PACK header '${n}'`);let i=await r.read(4);if(i=i.readUInt32BE(0),i!==2)throw new Pe(`Invalid packfile version: ${i}`);let s=await r.read(4);if(s=s.readUInt32BE(0),!(s<1))for(;!r.eof()&&s--;){const a=r.tell(),{type:o,length:c,ofs:l,reference:u}=await Hee(r),h=new nv.Inflate;for(;!h.result;){const p=await r.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new Pe(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==c)throw new Pe("Inflated object size is different from that stated in packfile.");await r.undo(),await r.read(p.length-h.strm.avail_in);const f=r.tell();await e({data:h.result,type:o,num:s,offset:a,end:f,reference:u,ofs:l})}}}}async function Hee(t){let e=await t.byte();const r=e>>4&7;let n=e&15;if(e&128){let a=4;do e=await t.byte(),n|=(e&127)<<a,a+=7;while(e&128)}let i,s;if(r===6){let a=0;i=0;const o=[];do e=await t.byte(),i|=(e&127)<<a,a+=7,o.push(e);while(e&128);s=oe.from(o)}return r===7&&(s=await t.read(20)),{type:r,length:n,ofs:i,reference:s}}async function B$(t){return nv.inflate(t)}function Kee(t){const e=[];let r=0,n=0;do{r=t.readUInt8();const i=r&127;e.push(i),n=r&128}while(n);return e.reduce((i,s)=>i+1<<7|s,-1)}function Gee(t,e){let r=e,n=4,i=null;do i=t.readUInt8(),r|=(i&127)<<n,n+=7;while(i&128);return r}class io{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:r}){const n=new Rn(e);if(n.slice(4).toString("hex")!=="ff744f63")return;const s=n.readUInt32BE();if(s!==2)throw new Pe(`Unable to read version ${s} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new Pe("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+4*255);const a=n.readUInt32BE(),o=[];for(let u=0;u<a;u++){const h=n.slice(20).toString("hex");o[u]=h}n.seek(n.tell()+4*a);const c=new Map;for(let u=0;u<a;u++)c.set(o[u],n.readUInt32BE());const l=n.slice(20).toString("hex");return new io({hashes:o,crcs:{},offsets:c,packfileSha:l,getExternalRefDelta:r})}static async fromPack({pack:e,getExternalRefDelta:r,onProgress:n}){const i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},s={},a=e.slice(-20).toString("hex"),o=[],c={},l=new Map;let u=null,h=null;await qee([e],async({data:y,type:v,reference:w,offset:$,num:A})=>{u===null&&(u=A);const P=Math.floor((u-A)*100/u);P!==h&&n&&await n({phase:"Receiving objects",loaded:u-A,total:u}),h=P,v=i[v],["commit","tree","blob","tag"].includes(v)?s[$]={type:v,offset:$}:v==="ofs-delta"?s[$]={type:v,offset:$}:v==="ref-delta"&&(s[$]={type:v,offset:$})});const p=Object.keys(s).map(Number);for(const[y,v]of p.entries()){const w=y+1===p.length?e.byteLength-20:p[y+1],$=s[v],A=UX.buf(e.slice(v,w))>>>0;$.end=w,$.crc=A}const f=new io({pack:Promise.resolve(e),packfileSha:a,crcs:c,hashes:o,offsets:l,getExternalRefDelta:r});h=null;let m=0;const g=[0,0,0,0,0,0,0,0,0,0,0,0];for(let y in s){y=Number(y);const v=Math.floor(m*100/u);v!==h&&n&&await n({phase:"Resolving deltas",loaded:m,total:u}),m++,h=v;const w=s[y];if(!w.oid)try{f.readDepth=0,f.externalReadDepth=0;const{type:$,object:A}=await f.readSlice({start:y});g[f.readDepth]+=1;const P=await fi(Uo.wrap({type:$,object:A}));w.oid=P,o.push(P),l.set(P,y),c[P]=w.crc}catch{continue}}return o.sort(),f}async toBuffer(){const e=[],r=(l,u)=>{e.push(oe.from(l,u))};r("ff744f63","hex"),r("00000002","hex");const n=new Rn(oe.alloc(256*4));for(let l=0;l<256;l++){let u=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=l&&u++;n.writeUInt32BE(u)}e.push(n.buffer);for(const l of this.hashes)r(l,"hex");const i=new Rn(oe.alloc(this.hashes.length*4));for(const l of this.hashes)i.writeUInt32BE(this.crcs[l]);e.push(i.buffer);const s=new Rn(oe.alloc(this.hashes.length*4));for(const l of this.hashes)s.writeUInt32BE(this.offsets.get(l));e.push(s.buffer),r(this.packfileSha,"hex");const a=oe.concat(e),o=await fi(a),c=oe.alloc(20);return c.write(o,"hex"),oe.concat([a,c])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new Pe(`Could not read object ${e} from packfile`)}const r=this.offsets.get(e);return this.readSlice({start:r})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;const r={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Pe("Tried to read from a GitPackIndex with no packfile loaded into memory");const n=(await this.pack).slice(e),i=new Rn(n),s=i.readUInt8(),a=s&112;let o=r[a];if(o===void 0)throw new Pe("Unrecognized type: 0b"+a.toString(2));const c=s&15;let l=c;s&128&&(l=Gee(i,c));let h=null,p=null;if(o==="ofs_delta"){const m=Kee(i),g=e-m;({object:h,type:o}=await this.readSlice({start:g}))}if(o==="ref_delta"){const m=i.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:m}))}const f=n.slice(i.tell());if(p=oe.from(await B$(f)),p.byteLength!==l)throw new Pe(`Packfile told us object would have length ${l} but it had length ${p.byteLength}`);return h&&(p=oe.from(Uee(p,h))),this.readDepth>3&&(this.offsetCache[e]={type:o,object:p}),{type:o,format:"content",object:p}}}const Wu=Symbol("PackfileCache");async function Wee({fs:t,filename:e,getExternalRefDelta:r,emitter:n,emitterPrefix:i}){const s=await t.read(e);return io.fromIdx({idx:s,getExternalRefDelta:r})}function ov({fs:t,cache:e,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:s}){e[Wu]||(e[Wu]=new Map);let a=e[Wu].get(r);return a||(a=Wee({fs:t,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:s}),e[Wu].set(r,a)),a}async function Yee({fs:t,cache:e,gitdir:r,oid:n,format:i="content",getExternalRefDelta:s}){let a=await t.readdir(X(r,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const c=`${r}/objects/pack/${o}`,l=await ov({fs:t,cache:e,filename:c,getExternalRefDelta:s});if(l.error)throw new Pe(l.error);if(l.offsets.has(n)){if(!l.pack){const h=c.replace(/idx$/,"pack");l.pack=t.read(h)}const u=await l.read({oid:n,getExternalRefDelta:s});return u.format="content",u.source=`objects/pack/${o.replace(/idx$/,"pack")}`,u}}return null}async function St({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){const s=o=>St({fs:t,cache:e,gitdir:r,oid:o});let a;if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(a={format:"wrapped",object:oe.from("tree 0\0")}),a||(a=await Vee({fs:t,gitdir:r,oid:n})),a||(a=await Yee({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:s})),!a)throw new mt(n);if(i==="deflated")return a;if(a.format==="deflated"&&(a.object=oe.from(await B$(a.object)),a.format="wrapped"),a.format==="wrapped"){if(i==="wrapped"&&a.format==="wrapped")return a;const o=await fi(a.object);if(o!==n)throw new Pe(`SHA check failed! Expected ${n}, computed ${o}`);const{object:c,type:l}=Uo.unwrap(a.object);a.type=l,a.object=c,a.format="content"}if(a.format==="content")return i==="content"?a:void 0;throw new Pe(`invalid format "${a.format}"`)}class _n extends Ke{constructor(e,r,n=!0){super(`Failed to create ${e} at ${r} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=_n.code,this.data={noun:e,where:r,canForce:n}}}_n.code="AlreadyExistsError";class Bl extends Ke{constructor(e,r,n){super(`Found multiple ${e} matching "${r}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Bl.code,this.data={nouns:e,short:r,matches:n}}}Bl.code="AmbiguousError";class zl extends Ke{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=zl.code,this.data={filepaths:e}}}zl.code="CheckoutConflictError";class ql extends Ke{constructor(e,r){super(`Failed to checkout "${e}" because commit ${r} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=ql.code,this.data={ref:e,oid:r}}}ql.code="CommitNotFetchedError";class Hl extends Ke{constructor(){super("Empty response from git server."),this.code=this.name=Hl.code,this.data={}}}Hl.code="EmptyServerResponseError";class Kl extends Ke{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Kl.code,this.data={}}}Kl.code="FastForwardError";class Gl extends Ke{constructor(e,r){super(`One or more branches were not updated: ${e}`),this.code=this.name=Gl.code,this.data={prettyDetails:e,result:r}}}Gl.code="GitPushError";class so extends Ke{constructor(e,r,n){super(`HTTP Error: ${e} ${r}`),this.code=this.name=so.code,this.data={statusCode:e,statusMessage:r,response:n}}}so.code="HttpError";class fs extends Ke{constructor(e){let r="invalid filepath";e==="leading-slash"||e==="trailing-slash"?r='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(r='"filepath" should not be a directory.'),super(r),this.code=this.name=fs.code,this.data={reason:e}}}fs.code="InvalidFilepathError";class pi extends Ke{constructor(e,r){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${r}".)`),this.code=this.name=pi.code,this.data={ref:e,suggestion:r}}}pi.code="InvalidRefNameError";class Wl extends Ke{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=Wl.code,this.data={depth:e}}}Wl.code="MaxDepthError";class Bo extends Ke{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Bo.code,this.data={}}}Bo.code="MergeNotSupportedError";class zo extends Ke{constructor(e,r,n,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=zo.code,this.data={filepaths:e,bothModified:r,deleteByUs:n,deleteByTheirs:i}}}zo.code="MergeConflictError";class wr extends Ke{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=wr.code,this.data={role:e}}}wr.code="MissingNameError";class Vr extends Ke{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=Vr.code,this.data={parameter:e}}}Vr.code="MissingParameterError";class Yl extends Ke{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Yl.code,this.data={errors:e},this.errors=e}}Yl.code="MultipleGitError";class fa extends Ke{constructor(e,r){super(`Expected "${e}" but received "${r}".`),this.code=this.name=fa.code,this.data={expected:e,actual:r}}}fa.code="ParseError";class ao extends Ke{constructor(e){let r="";e==="not-fast-forward"?r=" because it was not a simple fast-forward":e==="tag-exists"&&(r=" because tag already exists"),super(`Push rejected${r}. Use "force: true" to override.`),this.code=this.name=ao.code,this.data={reason:e}}}ao.code="PushRejectedError";class Xi extends Ke{constructor(e,r){super(`Remote does not support the "${e}" so the "${r}" parameter cannot be used.`),this.code=this.name=Xi.code,this.data={capability:e,parameter:r}}}Xi.code="RemoteCapabilityError";class Ql extends Ke{constructor(e,r){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=Ql.code,this.data={preview:e,response:r}}}Ql.code="SmartHttpError";class Xl extends Ke{constructor(e,r,n){super(`Git remote "${e}" uses an unrecognized transport protocol: "${r}"`),this.code=this.name=Xl.code,this.data={url:e,transport:r,suggestion:n}}}Xl.code="UnknownTransportError";class Jl extends Ke{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=Jl.code,this.data={url:e}}}Jl.code="UrlParseError";class Zl extends Ke{constructor(){super("The operation was canceled."),this.code=this.name=Zl.code,this.data={}}}Zl.code="UserCanceledError";class eu extends Ke{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=eu.code,this.data={filepath:e}}}eu.code="IndexResetError";var Qee=Object.freeze({__proto__:null,AlreadyExistsError:_n,AmbiguousError:Bl,CheckoutConflictError:zl,CommitNotFetchedError:ql,EmptyServerResponseError:Hl,FastForwardError:Kl,GitPushError:Gl,HttpError:so,InternalError:Pe,InvalidFilepathError:fs,InvalidOidError:hs,InvalidRefNameError:pi,MaxDepthError:Wl,MergeNotSupportedError:Bo,MergeConflictError:zo,MissingNameError:wr,MissingParameterError:Vr,MultipleGitError:Yl,NoRefspecError:Ul,NotFoundError:mt,ObjectTypeError:br,ParseError:fa,PushRejectedError:ao,RemoteCapabilityError:Xi,SmartHttpError:Ql,UnknownTransportError:Xl,UnsafeFilepathError:Vo,UrlParseError:Jl,UserCanceledError:Zl,UnmergedPathsError:Vl,IndexResetError:eu});function Am({name:t,email:e,timestamp:r,timezoneOffset:n}){return n=Xee(n),`${t} <${e}> ${r} ${n}`}function Xee(t){const e=Jee(Zee(t));t=Math.abs(t);const r=Math.floor(t/60);t-=r*60;let n=String(r),i=String(t);return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),(e===-1?"-":"+")+n+i}function Jee(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function Zee(t){return t===0?t:-t}function ri(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function Yd(t){const[,e,r,n,i]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:r,timestamp:Number(n),timezoneOffset:ete(i)}}function ete(t){let[,e,r,n]=t.match(/(\+|-)(\d\d)(\d\d)/);return n=(e==="+"?1:-1)*(Number(r)*60+Number(n)),tte(n)}function tte(t){return t===0?t:-t}class _r{constructor(e){if(typeof e=="string")this._tag=e;else if(oe.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=_r.render(e);else throw new Pe("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new _r(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${Am(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const e=this.justHeaders().split(`
`),r=[];for(const i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);const n={};for(const i of r){const s=i.slice(0,i.indexOf(" ")),a=i.slice(i.indexOf(" ")+1);Array.isArray(n[s])?n[s].push(a):n[s]=a}return n.tagger&&(n.tagger=Yd(n.tagger)),n.committer&&(n.committer=Yd(n.committer)),n}withoutSignature(){const e=ri(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return ri(e)}payload(){return this.withoutSignature()+`
`}toObject(){return oe.from(this._tag,"utf8")}static async sign(e,r,n){const i=e.payload();let{signature:s}=await r({payload:i,secretKey:n});s=ri(s);const a=i+s;return _r.from(a)}}function bp(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function rte(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}class wt{constructor(e){if(typeof e=="string")this._commit=e;else if(oe.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=wt.render(e);else throw new Pe("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:r}){const n=wt.justHeaders(e),i=wt.justMessage(e),s=ri(n+`
gpgsig`+bp(r)+`
`+i);return new wt(s)}static from(e){return new wt(e)}toObject(){return oe.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return wt.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return ri(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){const e=wt.justHeaders(this._commit).split(`
`),r=[];for(const i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);const n={parent:[]};for(const i of r){const s=i.slice(0,i.indexOf(" ")),a=i.slice(i.indexOf(" ")+1);Array.isArray(n[s])?n[s].push(a):n[s]=a}return n.author&&(n.author=Yd(n.author)),n.committer&&(n.committer=Yd(n.committer)),n}static renderHeaders(e){let r="";if(e.tree?r+=`tree ${e.tree}
`:r+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new Pe("commit 'parent' property should be an array");for(const s of e.parent)r+=`parent ${s}
`}const n=e.author;r+=`author ${Am(n)}
`;const i=e.committer||e.author;return r+=`committer ${Am(i)}
`,e.gpgsig&&(r+="gpgsig"+bp(e.gpgsig)),r}static render(e){return wt.renderHeaders(e)+`
`+ri(e.message)}render(){return this._commit}withoutSignature(){const e=ri(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;const r=e.slice(0,e.indexOf(`
gpgsig`)),n=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return ri(r+`
`+n)}isolateSignature(){const e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return rte(e)}static async sign(e,r,n){const i=e.withoutSignature(),s=wt.justMessage(e._commit);let{signature:a}=await r({payload:i,secretKey:n});a=ri(a);const c=wt.justHeaders(e._commit)+`
gpgsig`+bp(a)+`
`+s;return wt.from(c)}}async function oo({fs:t,cache:e,gitdir:r,oid:n}){if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:kr.from([]),oid:n};const{type:i,object:s}=await St({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=_r.from(s).parse().object,oo({fs:t,cache:e,gitdir:r,oid:n});if(i==="commit")return n=wt.from(s).parse().tree,oo({fs:t,cache:e,gitdir:r,oid:n});if(i!=="tree")throw new br(n,i,"tree");return{tree:kr.from(s),oid:n}}class nte{constructor({fs:e,gitdir:r,ref:n,cache:i}){this.fs=e,this.cache=i,this.gitdir=r,this.mapPromise=(async()=>{const a=new Map;let o;try{o=await te.resolve({fs:e,gitdir:r,ref:n})}catch(l){l instanceof mt&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const c=await oo({fs:e,cache:this.cache,gitdir:r,oid:o});return c.type="tree",c.mode="40000",a.set(".",c),a})();const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const r=e._fullpath,{fs:n,cache:i,gitdir:s}=this,a=await this.mapPromise,o=a.get(r);if(!o)throw new Error(`No obj for ${r}`);const c=o.oid;if(!c)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:l,object:u}=await St({fs:n,cache:i,gitdir:s,oid:c});if(l!==o.type)throw new br(c,l,o.type);const h=kr.from(u);for(const p of h)a.set(X(r,p.path),p);return h.entries().map(p=>X(r,p.path))}async type(e){if(e._type===!1){const r=await this.mapPromise,{type:n}=r.get(e._fullpath);e._type=n}return e._type}async mode(e){if(e._mode===!1){const r=await this.mapPromise,{mode:n}=r.get(e._fullpath);e._mode=F$(parseInt(n,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){const r=await this.mapPromise,{fs:n,cache:i,gitdir:s}=this,o=r.get(e._fullpath).oid,{type:c,object:l}=await St({fs:n,cache:i,gitdir:s,oid:o});c!=="blob"?e._content=void 0:e._content=new Uint8Array(l)}return e._content}async oid(e){if(e._oid===!1){const n=(await this.mapPromise).get(e._fullpath);e._oid=n.oid}return e._oid}}function Ji({ref:t="HEAD"}={}){const e=Object.create(null);return Object.defineProperty(e,af,{value:function({fs:r,gitdir:n,cache:i}){return new nte({fs:r,gitdir:n,ref:t,cache:i})}}),Object.freeze(e),e}class ite{constructor({fs:e,dir:r,gitdir:n,cache:i}){this.fs=e,this.cache=i,this.dir=r,this.gitdir=n;const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const r=e._fullpath,{fs:n,dir:i}=this,s=await n.readdir(X(i,r));return s===null?null:s.map(a=>X(r,a))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const{fs:r,dir:n}=this;let i=await r.lstat(`${n}/${e._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let s=i.isDirectory()?"tree":"blob";s==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(s="special"),e._type=s,i=ro(i),e._mode=i.mode,i.size===-1&&e._actualSize&&(i.size=e._actualSize),e._stat=i}return e._stat}async content(e){if(e._content===!1){const{fs:r,dir:n,gitdir:i}=this;if(await e.type()==="tree")e._content=void 0;else{const a=await(await Ut.get({fs:r,gitdir:i})).get("core.autocrlf"),o=await r.read(`${n}/${e._fullpath}`,{autocrlf:a});e._actualSize=o.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(o)}}return e._content}async oid(e){if(e._oid===!1){const{fs:r,gitdir:n,cache:i}=this;let s;await Jt.acquire({fs:r,gitdir:n,cache:i},async function(a){const o=a.entriesMap.get(e._fullpath),c=await e.stat(),u=await(await Ut.get({fs:r,gitdir:n})).get("core.filemode"),h=cn.platform!=="win32";!o||Hd(c,o,u,h)?await e.content()===void 0?s=void 0:(s=await fi(Uo.wrap({type:"blob",object:await e.content()})),o&&s===o.oid&&(!u||c.mode===o.mode)&&Hd(c,o,u,h)&&a.insert({filepath:e._fullpath,stats:c,oid:s})):s=o.oid}),e._oid=s}return e._oid}}function cf(){const t=Object.create(null);return Object.defineProperty(t,af,{value:function({fs:e,dir:r,gitdir:n,cache:i}){return new ite({fs:e,dir:r,gitdir:n,cache:i})}}),Object.freeze(t),t}function ste(t,e){const r=e-t;return Array.from({length:r},(n,i)=>t+i)}const z$=typeof Array.prototype.flat>"u"?t=>t.reduce((e,r)=>e.concat(r),[]):t=>t.flat();class ate{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}}function*ote(t){const e=new ate;let r;const n=[],i=t.length;for(let s=0;s<i;s++)n[s]=t[s].next().value,n[s]!==void 0&&e.consider(n[s]);if(e.value!==null)for(;;){const s=[];r=e.value,e.reset();for(let a=0;a<i;a++)n[a]!==void 0&&n[a]===r?(s[a]=n[a],n[a]=t[a].next().value):s[a]=null,n[a]!==void 0&&e.consider(n[a]);if(yield s,e.value===null)return}}async function co({fs:t,cache:e,dir:r,gitdir:n,trees:i,map:s=async(c,l)=>l,reduce:a=async(c,l)=>{const u=z$(l);return c!==void 0&&u.unshift(c),u},iterate:o=(c,l)=>Promise.all([...l].map(c))}){const c=i.map(f=>f[af]({fs:t,dir:r,gitdir:n,cache:e})),l=new Array(c.length).fill("."),u=ste(0,c.length),h=async f=>{u.map(y=>{f[y]=f[y]&&new c[y].ConstructEntry(f[y])});const g=(await Promise.all(u.map(y=>f[y]?c[y].readdir(f[y]):[]))).map(y=>y===null?[]:y).map(y=>y[Symbol.iterator]());return{entries:f,children:ote(g)}},p=async f=>{const{entries:m,children:g}=await h(f),y=m.find(w=>w&&w._fullpath)._fullpath,v=await s(y,m);if(v!==null){let w=await o(p,g);return w=w.filter($=>$!==void 0),a(v,w)}};return p(l)}async function Pm(t,e){const r=await t.readdir(e);r==null?await t.rm(e):r.length?await Promise.all(r.map(n=>{const i=X(e,n);return t.lstat(i).then(s=>{if(s)return s.isDirectory()?Pm(t,i):t.rm(i)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function cte(t){return lte(t)&&Db(t.then)&&Db(t.catch)}function lte(t){return t&&typeof t=="object"}function Db(t){return typeof t=="function"}function Fb(t){return cte((r=>{try{return r.readFile().catch(n=>n)}catch(n){return n}})(t))}const Mb=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function jb(t,e){if(Fb(e))for(const r of Mb)t[`_${r}`]=e[r].bind(e);else for(const r of Mb)t[`_${r}`]=mp(e[r].bind(e));Fb(e)?e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=Pm.bind(null,t):e.rm?t._rm=mp(e.rm.bind(e)):e.rmdir.length>2?t._rm=mp(e.rmdir.bind(e)):t._rm=Pm.bind(null,t)}class he{constructor(e){if(typeof e._original_unwrapped_fs<"u")return e;const r=Object.getOwnPropertyDescriptor(e,"promises");r&&r.enumerable?jb(this,e.promises):jb(this,e),this._original_unwrapped_fs=e}async exists(e,r={}){try{return await this._stat(e),!0}catch(n){if(n.code==="ENOENT"||n.code==="ENOTDIR")return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',n),n}}async read(e,r={}){try{let n=await this._readFile(e,r);if(r.autocrlf==="true")try{n=new TextDecoder("utf8",{fatal:!0}).decode(n),n=n.replace(/\r\n/g,`
`),n=new TextEncoder().encode(n)}catch{}return typeof n!="string"&&(n=oe.from(n)),n}catch{return null}}async write(e,r,n={}){try{await this._writeFile(e,r,n);return}catch{await this.mkdir(no(e)),await this._writeFile(e,r,n)}}async mkdir(e,r=!1){try{await this._mkdir(e);return}catch(n){if(n===null||n.code==="EEXIST")return;if(r)throw n;if(n.code==="ENOENT"){const i=no(e);if(i==="."||i==="/"||i===e)throw n;await this.mkdir(i),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(r){if(r.code!=="ENOENT")throw r}}async rmdir(e,r){try{r&&r.recursive?await this._rm(e,r):await this._rmdir(e)}catch(n){if(n.code!=="ENOENT")throw n}}async readdir(e){try{const r=await this._readdir(e);return r.sort(sf),r}catch(r){return r.code==="ENOTDIR"?null:[]}}async readdirDeep(e){const r=await this._readdir(e);return(await Promise.all(r.map(async i=>{const s=e+"/"+i;return(await this._stat(s)).isDirectory()?this.readdirDeep(s):s}))).reduce((i,s)=>i.concat(s),[])}async lstat(e){try{return await this._lstat(e)}catch(r){if(r.code==="ENOENT")return null;throw r}}async readlink(e,r={encoding:"buffer"}){try{const n=await this._readlink(e,r);return oe.isBuffer(n)?n:oe.from(n)}catch(n){if(n.code==="ENOENT")return null;throw n}}async writelink(e,r){return this._symlink(r.toString("utf8"),e)}}function B(t,e){if(e===void 0)throw new Vr(t)}async function Qd(t,e){return!t&&!e?!1:t&&!e||!t&&e?!0:!(await t.type()==="tree"&&await e.type()==="tree"||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid())}async function ute({fs:t,dir:e,gitdir:r=X(e,".git"),commit:n="HEAD",cache:i={}}){try{B("fs",t),B("dir",e),B("gitdir",r);const s=new he(t),a=[Ji({ref:n}),cf(),of()];let o=[];await Jt.acquire({fs:s,gitdir:r,cache:i},async function(l){o=l.unmergedPaths});const c=await co({fs:s,cache:i,dir:e,gitdir:r,trees:a,map:async function(l,[u,h,p]){const f=!await Qd(h,p),m=o.includes(l),g=!await Qd(p,u);if(f||m)return u?{path:l,mode:await u.mode(),oid:await u.oid(),type:await u.type(),content:await u.content()}:void 0;if(g)return!1;throw new eu(l)}});await Jt.acquire({fs:s,gitdir:r,cache:i},async function(l){for(const u of c)if(u!==!1){if(!u){await s.rmdir(`${e}/${u.path}`,{recursive:!0}),l.delete({filepath:u.path});continue}if(u.type==="blob"){const h=new TextDecoder().decode(u.content);await s.write(`${e}/${u.path}`,h,{mode:u.mode}),l.insert({filepath:u.path,oid:u.oid,stage:0})}}})}catch(s){throw s.caller="git.abortMerge",s}}class lf{static async isIgnored({fs:e,dir:r,gitdir:n=X(r,".git"),filepath:i}){if(Kd(i)===".git")return!0;if(i===".")return!1;let s="";const a=X(n,"info","exclude");await e.exists(a)&&(s=await e.read(a,"utf8"));const o=[{gitignore:X(r,".gitignore"),filepath:i}],c=i.split("/").filter(Boolean);for(let u=1;u<c.length;u++){const h=c.slice(0,u).join("/"),p=c.slice(u).join("/");o.push({gitignore:X(r,h,".gitignore"),filepath:p})}let l=!1;for(const u of o){let h;try{h=await e.read(u.gitignore,"utf8")}catch(m){if(m.code==="NOENT")continue}const p=tee().add(s);p.add(h);const f=no(u.filepath);if(f!=="."&&p.ignores(f))return!0;l?l=!p.test(u.filepath).unignored:l=p.test(u.filepath).ignored}return l}}async function dte({fs:t,gitdir:e,object:r,format:n,oid:i}){if(n!=="deflated")throw new Pe("GitObjectStoreLoose expects objects to write to be in deflated format");const s=`objects/${i.slice(0,2)}/${i.slice(2)}`,a=`${e}/${s}`;await t.exists(a)||await t.write(a,r)}let Ep=null;async function q$(t){return Ep===null&&(Ep=fte()),Ep?hte(t):nv.deflate(t)}async function hte(t){const e=new CompressionStream("deflate"),r=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(r).arrayBuffer())}function fte(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Br({fs:t,gitdir:e,type:r,object:n,format:i="content",oid:s=void 0,dryRun:a=!1}){return i!=="deflated"&&(i!=="wrapped"&&(n=Uo.wrap({type:r,object:n})),s=await fi(n),n=oe.from(await q$(n))),a||await dte({fs:t,gitdir:e,object:n,format:"deflated",oid:s}),s}function pte(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function mte({fs:t,dir:e,gitdir:r=X(e,".git"),filepath:n,cache:i={},force:s=!1,parallel:a=!0}){try{B("fs",t),B("dir",e),B("gitdir",r),B("filepath",n);const o=new he(t);await Jt.acquire({fs:o,gitdir:r,cache:i},async c=>Cm({dir:e,gitdir:r,fs:o,filepath:n,index:c,force:s,parallel:a}))}catch(o){throw o.caller="git.add",o}}async function Cm({dir:t,gitdir:e,fs:r,filepath:n,index:i,force:s,parallel:a}){n=Array.isArray(n)?n:[n];const o=n.map(async h=>{if(!s&&await lf.isIgnored({fs:r,dir:t,gitdir:e,filepath:h}))return;const p=await r.lstat(X(t,h));if(!p)throw new mt(h);if(p.isDirectory()){const f=await r.readdir(X(t,h));if(a){const m=f.map(g=>Cm({dir:t,gitdir:e,fs:r,filepath:[X(h,g)],index:i,force:s,parallel:a}));await Promise.all(m)}else for(const m of f)await Cm({dir:t,gitdir:e,fs:r,filepath:[X(h,m)],index:i,force:s,parallel:a})}else{const m=await(await Ut.get({fs:r,gitdir:e})).get("core.autocrlf"),g=p.isSymbolicLink()?await r.readlink(X(t,h)).then(pte):await r.read(X(t,h),{autocrlf:m});if(g===null)throw new mt(h);const y=await Br({fs:r,gitdir:e,type:"blob",object:g});i.insert({filepath:h,stats:p,oid:y})}}),c=await Promise.allSettled(o),l=c.filter(h=>h.status==="rejected").map(h=>h.reason);if(l.length>1)throw new Yl(l);if(l.length===1)throw l[0];return c.filter(h=>h.status==="fulfilled"&&h.value).map(h=>h.value)}async function uf({fs:t,cache:e,onSign:r,gitdir:n,message:i,author:s,committer:a,signingKey:o,dryRun:c=!1,noUpdateBranch:l=!1,ref:u,parent:h,tree:p}){return u||(u=await te.resolve({fs:t,gitdir:n,ref:"HEAD",depth:2})),Jt.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async function(f){const g=j$(f.entries).get(".");if(p||(p=await H$({fs:t,gitdir:n,inode:g,dryRun:c})),h)h=await Promise.all(h.map(w=>te.resolve({fs:t,gitdir:n,ref:w})));else try{h=[await te.resolve({fs:t,gitdir:n,ref:u})]}catch{h=[]}let y=wt.from({tree:p,parent:h,author:s,committer:a,message:i});o&&(y=await wt.sign(y,r,o));const v=await Br({fs:t,gitdir:n,type:"commit",object:y.toObject(),dryRun:c});return!l&&!c&&await te.writeRef({fs:t,gitdir:n,ref:u,value:v}),v})}async function H$({fs:t,gitdir:e,inode:r,dryRun:n}){const i=r.children;for(const c of i)c.type==="tree"&&(c.metadata.mode="040000",c.metadata.oid=await H$({fs:t,gitdir:e,inode:c,dryRun:n}));const s=i.map(c=>({mode:c.metadata.mode,path:c.basename,oid:c.metadata.oid,type:c.type})),a=kr.from(s);return await Br({fs:t,gitdir:e,type:"tree",object:a.toObject(),dryRun:n})}async function tu({fs:t,cache:e,gitdir:r,oid:n,filepath:i}){if(i.startsWith("/"))throw new fs("leading-slash");if(i.endsWith("/"))throw new fs("trailing-slash");const s=n,a=await oo({fs:t,cache:e,gitdir:r,oid:n}),o=a.tree;if(i==="")n=a.oid;else{const c=i.split("/");n=await K$({fs:t,cache:e,gitdir:r,tree:o,pathArray:c,oid:s,filepath:i})}return n}async function K$({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:s,filepath:a}){const o=i.shift();for(const c of n)if(c.path===o){if(i.length===0)return c.oid;{const{type:l,object:u}=await St({fs:t,cache:e,gitdir:r,oid:c.oid});if(l!=="tree")throw new br(s,l,"tree",a);return n=kr.from(u),K$({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:s,filepath:a})}}throw new mt(`file or directory found at "${s}:${a}"`)}async function qo({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){i!==void 0&&(n=await tu({fs:t,cache:e,gitdir:r,oid:n,filepath:i}));const{tree:s,oid:a}=await oo({fs:t,cache:e,gitdir:r,oid:n});return{oid:a,tree:s.entries()}}async function cv({fs:t,gitdir:e,tree:r}){const n=kr.from(r).toObject();return await Br({fs:t,gitdir:e,type:"tree",object:n,format:"content"})}async function gte({fs:t,cache:e,onSign:r,gitdir:n,ref:i,oid:s,note:a,force:o,author:c,committer:l,signingKey:u}){let h;try{h=await te.resolve({gitdir:n,fs:t,ref:i})}catch(v){if(!(v instanceof mt))throw v}let f=(await qo({fs:t,cache:e,gitdir:n,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)f=f.filter(v=>v.path!==s);else for(const v of f)if(v.path===s)throw new _n("note",s);typeof a=="string"&&(a=oe.from(a,"utf8"));const m=await Br({fs:t,gitdir:n,type:"blob",object:a,format:"content"});f.push({mode:"100644",path:s,oid:m,type:"blob"});const g=await cv({fs:t,gitdir:n,tree:f});return await uf({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:g,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:c,committer:l,signingKey:u})}async function xm({fs:t,gitdir:e,path:r}){return(await Ut.get({fs:t,gitdir:e})).get(r)}async function pa({fs:t,gitdir:e,author:r={}}){let{name:n,email:i,timestamp:s,timezoneOffset:a}=r;if(n=n||await xm({fs:t,gitdir:e,path:"user.name"}),i=i||await xm({fs:t,gitdir:e,path:"user.email"})||"",n!==void 0)return s=s??Math.floor(Date.now()/1e3),a=a??new Date(s*1e3).getTimezoneOffset(),{name:n,email:i,timestamp:s,timezoneOffset:a}}async function ru({fs:t,gitdir:e,author:r,committer:n}){return n=Object.assign({},n||r),r&&(n.timestamp=n.timestamp||r.timestamp,n.timezoneOffset=n.timezoneOffset||r.timezoneOffset),n=await pa({fs:t,gitdir:e,author:n}),n}async function yte({fs:t,onSign:e,dir:r,gitdir:n=X(r,".git"),ref:i="refs/notes/commits",oid:s,note:a,force:o,author:c,committer:l,signingKey:u,cache:h={}}){try{B("fs",t),B("gitdir",n),B("oid",s),B("note",a),u&&B("onSign",e);const p=new he(t),f=await pa({fs:p,gitdir:n,author:c});if(!f)throw new wr("author");const m=await ru({fs:p,gitdir:n,author:f,committer:l});if(!m)throw new wr("committer");return await gte({fs:new he(p),cache:h,onSign:e,gitdir:n,ref:i,oid:s,note:a,force:o,author:f,committer:m,signingKey:u})}catch(p){throw p.caller="git.addNote",p}}async function G$({fs:t,gitdir:e,remote:r,url:n,force:i}){if(r!==Mn.clean(r))throw new pi(r,Mn.clean(r));const s=await Ut.get({fs:t,gitdir:e});if(!i&&(await s.getSubsections("remote")).includes(r)&&n!==await s.get(`remote.${r}.url`))throw new _n("remote",r);await s.set(`remote.${r}.url`,n),await s.set(`remote.${r}.fetch`,`+refs/heads/*:refs/remotes/${r}/*`),await Ut.save({fs:t,gitdir:e,config:s})}async function vte({fs:t,dir:e,gitdir:r=X(e,".git"),remote:n,url:i,force:s=!1}){try{return B("fs",t),B("gitdir",r),B("remote",n),B("url",i),await G$({fs:new he(t),gitdir:r,remote:n,url:i,force:s})}catch(a){throw a.caller="git.addRemote",a}}async function _te({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tagger:s,message:a=i,gpgsig:o,object:c,signingKey:l,force:u=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!u&&await te.exists({fs:t,gitdir:n,ref:i}))throw new _n("tag",i);const h=await te.resolve({fs:t,gitdir:n,ref:c||"HEAD"}),{type:p}=await St({fs:t,cache:e,gitdir:n,oid:h});let f=_r.from({object:h,type:p,tag:i.replace("refs/tags/",""),tagger:s,message:a,gpgsig:o});l&&(f=await _r.sign(f,r,l));const m=await Br({fs:t,gitdir:n,type:"tag",object:f.toObject()});await te.writeRef({fs:t,gitdir:n,ref:i,value:m})}async function wte({fs:t,onSign:e,dir:r,gitdir:n=X(r,".git"),ref:i,tagger:s,message:a=i,gpgsig:o,object:c,signingKey:l,force:u=!1,cache:h={}}){try{B("fs",t),B("gitdir",n),B("ref",i),l&&B("onSign",e);const p=new he(t),f=await pa({fs:p,gitdir:n,author:s});if(!f)throw new wr("tagger");return await _te({fs:p,cache:h,onSign:e,gitdir:n,ref:i,tagger:f,message:a,gpgsig:o,object:c,signingKey:l,force:u})}catch(p){throw p.caller="git.annotatedTag",p}}async function bte({fs:t,gitdir:e,ref:r,object:n,checkout:i=!1,force:s=!1}){if(r!==Mn.clean(r))throw new pi(r,Mn.clean(r));const a=`refs/heads/${r}`;if(!s&&await te.exists({fs:t,gitdir:e,ref:a}))throw new _n("branch",r,!1);let o;try{o=await te.resolve({fs:t,gitdir:e,ref:n||"HEAD"})}catch{}o&&await te.writeRef({fs:t,gitdir:e,ref:a,value:o}),i&&await te.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:a})}async function Ete({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n,object:i,checkout:s=!1,force:a=!1}){try{return B("fs",t),B("gitdir",r),B("ref",n),await bte({fs:new he(t),gitdir:r,ref:n,object:i,checkout:s,force:a})}catch(o){throw o.caller="git.branch",o}}const W$=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function lv({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,remote:s,ref:a,filepaths:o,noCheckout:c,noUpdateHead:l,dryRun:u,force:h,track:p=!0}){let f;try{f=await te.resolve({fs:t,gitdir:i,ref:a})}catch(m){if(a==="HEAD")throw m;const g=`${s}/${a}`;if(f=await te.resolve({fs:t,gitdir:i,ref:g}),p){const y=await Ut.get({fs:t,gitdir:i});await y.set(`branch.${a}.remote`,s),await y.set(`branch.${a}.merge`,`refs/heads/${a}`),await Ut.save({fs:t,gitdir:i,config:y})}await te.writeRef({fs:t,gitdir:i,ref:`refs/heads/${a}`,value:f})}if(!c){let m;try{m=await Ste({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,ref:a,force:h,filepaths:o})}catch($){throw $ instanceof mt&&$.data.what===f?new ql(a,f):$}const g=m.filter(([$])=>$==="conflict").map(([$,A])=>A);if(g.length>0)throw new zl(g);const y=m.filter(([$])=>$==="error").map(([$,A])=>A);if(y.length>0)throw new Pe(y.join(", "));if(u)return;let v=0;const w=m.length;await Jt.acquire({fs:t,gitdir:i,cache:e},async function($){await Promise.all(m.filter(([A])=>A==="delete"||A==="delete-index").map(async function([A,P]){const O=`${n}/${P}`;A==="delete"&&await t.rm(O),$.delete({filepath:P}),r&&await r({phase:"Updating workdir",loaded:++v,total:w})}))}),await Jt.acquire({fs:t,gitdir:i,cache:e},async function($){for(const[A,P]of m)if(A==="rmdir"||A==="rmdir-index"){const O=`${n}/${P}`;try{A==="rmdir-index"&&$.delete({filepath:P}),await t.rmdir(O),r&&await r({phase:"Updating workdir",loaded:++v,total:w})}catch(E){if(E.code==="ENOTEMPTY")console.log(`Did not delete ${P} because directory is not empty`);else throw E}}}),await Promise.all(m.filter(([$])=>$==="mkdir"||$==="mkdir-index").map(async function([$,A]){const P=`${n}/${A}`;await t.mkdir(P),r&&await r({phase:"Updating workdir",loaded:++v,total:w})})),await Jt.acquire({fs:t,gitdir:i,cache:e},async function($){await Promise.all(m.filter(([A])=>A==="create"||A==="create-index"||A==="update"||A==="mkdir-index").map(async function([A,P,O,E,b]){const I=`${n}/${P}`;try{if(A!=="create-index"&&A!=="mkdir-index"){const{object:C}=await St({fs:t,cache:e,gitdir:i,oid:O});if(b&&await t.rm(I),E===33188)await t.write(I,C);else if(E===33261)await t.write(I,C,{mode:511});else if(E===40960)await t.writelink(I,C);else throw new Pe(`Invalid mode 0o${E.toString(8)} detected in blob ${O}`)}const T=await t.lstat(I);E===33261&&(T.mode=493),A==="mkdir-index"&&(T.mode=57344),$.insert({filepath:P,stats:T,oid:O}),r&&await r({phase:"Updating workdir",loaded:++v,total:w})}catch(T){console.log(T)}}))})}if(!l){const m=await te.expand({fs:t,gitdir:i,ref:a});m.startsWith("refs/heads")?await te.writeSymbolicRef({fs:t,gitdir:i,ref:"HEAD",value:m}):await te.writeRef({fs:t,gitdir:i,ref:"HEAD",value:f})}}async function Ste({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,ref:s,force:a,filepaths:o}){let c=0;return co({fs:t,cache:e,dir:n,gitdir:i,trees:[Ji({ref:s}),cf(),of()],map:async function(l,[u,h,p]){if(l===".")return;if(o&&!o.some(m=>W$(l,m)))return null;switch(r&&await r({phase:"Analyzing workdir",loaded:++c}),[!!p,!!u,!!h].map(Number).join("")){case"000":return;case"001":return a&&o&&o.includes(l)?["delete",l]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",l];case"blob":return["create",l,await u.oid(),await u.mode()];case"commit":return["mkdir-index",l,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",l];case"blob-blob":return await u.oid()!==await h.oid()?a?["update",l,await u.oid(),await u.mode(),await u.mode()!==await h.mode()]:["conflict",l]:await u.mode()!==await h.mode()?a?["update",l,await u.oid(),await u.mode(),!0]:["conflict",l]:["create-index",l,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",l];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",l];case"101":switch(await p.type()){case"tree":return["rmdir",l];case"blob":return await p.oid()!==await h.oid()?a?["delete",l]:["conflict",l]:["delete",l];case"commit":return["rmdir-index",l];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await u.oid()&&await p.mode()===await u.mode()&&!a)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await u.oid())return a?["update",l,await u.oid(),await u.mode(),await u.mode()!==await h.mode()]:["conflict",l]}else if(a)return["update",l,await u.oid(),await u.mode(),await u.mode()!==await p.mode()];return await u.mode()!==await p.mode()?["update",l,await u.oid(),await u.mode(),!0]:await u.oid()!==await p.oid()?["update",l,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",l,await u.oid()];case"blob-tree":return["update-blob-to-tree",l];case"commit-commit":return["mkdir-index",l,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await u.type()}`]}}},reduce:async function(l,u){return u=z$(u),l?l&&l[0]==="rmdir"?(u.push(l),u):(u.unshift(l),u):u}})}async function Ite({fs:t,onProgress:e,dir:r,gitdir:n=X(r,".git"),remote:i="origin",ref:s,filepaths:a,noCheckout:o=!1,noUpdateHead:c=s===void 0,dryRun:l=!1,force:u=!1,track:h=!0,cache:p={}}){try{B("fs",t),B("dir",r),B("gitdir",n);const f=s||"HEAD";return await lv({fs:new he(t),cache:p,onProgress:e,dir:r,gitdir:n,remote:i,ref:f,filepaths:a,noCheckout:o,noUpdateHead:c,dryRun:l,force:u,track:h})}catch(f){throw f.caller="git.checkout",f}}const Tte=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Ma(t){const e=Tte.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function ma({fs:t,gitdir:e,fullname:r=!1,test:n=!1}){const i=await te.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(n)try{await te.resolve({fs:t,gitdir:e,ref:i})}catch{return}if(i.startsWith("refs/"))return r?i:Ma(i)}function $te(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function Y$({username:t="",password:e=""}){return`Basic ${oe.from(`${t}:${e}`).toString("base64")}`}async function nu(t,e){const r=V$(t);for(;;){const{value:n,done:i}=await r.next();if(n&&await e(n),i)break}r.return&&r.return()}async function Xd(t){let e=0;const r=[];await nu(t,s=>{r.push(s),e+=s.byteLength});const n=new Uint8Array(e);let i=0;for(const s of r)n.set(s,i),i+=s.byteLength;return n}function Lb(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];const[r,n]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:r,password:n}}}function km(t,e){const r=e.toString(16);return"0".repeat(t-r.length)+r}class kt{static flush(){return oe.from("0000","utf8")}static delim(){return oe.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=oe.from(e));const r=e.length+4,n=km(4,r);return oe.concat([oe.from(n,"utf8"),e])}static streamReader(e){const r=new U$(e);return async function(){try{let i=await r.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;const s=await r.read(i-4);return s??!0}catch(i){return e.error=i,!0}}}}async function Vb(t){const e={};let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const n=r.indexOf("=");if(n>-1){const i=r.slice(0,n),s=r.slice(n+1);e[i]=s}else e[r]=!0}return{protocolVersion:2,capabilities2:e}}async function Ub(t,{service:e}){const r=new Set,n=new Map,i=new Map,s=kt.streamReader(t);let a=await s();for(;a===null;)a=await s();if(a===!0)throw new Hl;if(a.includes("version 2"))return Vb(s);if(a.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new fa(`# service=${e}\\n`,a.toString("utf8"));let o=await s();for(;o===null;)o=await s();if(o===!0)return{capabilities:r,refs:n,symrefs:i};if(o=o.toString("utf8"),o.includes("version 2"))return Vb(s);const[c,l]=Sp(o,"\0","\\x00");if(l.split(" ").map(u=>r.add(u)),c!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,h]=Sp(c," "," ");for(n.set(h,u);;){const p=await s();if(p===!0)break;if(p!==null){const[f,m]=Sp(p.toString("utf8")," "," ");n.set(m,f)}}}for(const u of r)if(u.startsWith("symref=")){const h=u.match(/symref=([^:]+):(.*)/);h.length===3&&i.set(h[1],h[2])}return{protocolVersion:1,capabilities:r,refs:n,symrefs:i}}function Sp(t,e,r){const n=t.trim().split(e);if(n.length!==2)throw new fa(`Two strings separated by '${r}'`,t.toString("utf8"));return n}const Bb=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,zb=(t,e)=>{(e.username||e.password)&&(t.Authorization=Y$(e)),e.headers&&Object.assign(t,e.headers)},Ip=async t=>{try{const e=oe.from(await Xd(t.body)),r=e.toString("utf8");return{preview:r.length<256?r:r.slice(0,256)+"...",response:r,data:e}}catch{return{}}};class Jd{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:r,onAuth:n,onAuthSuccess:i,onAuthFailure:s,corsProxy:a,service:o,url:c,headers:l,protocolVersion:u}){let{url:h,auth:p}=Lb(c);const f=a?Bb(a,h):h;(p.username||p.password)&&(l.Authorization=Y$(p)),u===2&&(l["Git-Protocol"]="version=2");let m,g,y=!1;do if(m=await e.request({onProgress:r,method:"GET",url:`${f}/info/refs?service=${o}`,headers:l}),g=!1,m.statusCode===401||m.statusCode===203){const v=y?s:n;if(v){if(p=await v(h,{...p,headers:{...l}}),p&&p.cancel)throw new Zl;p&&(zb(l,p),y=!0,g=!0)}}else m.statusCode===200&&y&&i&&await i(h,p);while(g);if(m.statusCode!==200){const{response:v}=await Ip(m);throw new so(m.statusCode,m.statusMessage,v)}if(m.headers["content-type"]===`application/x-${o}-advertisement`){const v=await Ub(m.body,{service:o});return v.auth=p,v}else{const{preview:v,response:w,data:$}=await Ip(m);try{const A=await Ub([$],{service:o});return A.auth=p,A}catch{throw new Ql(v,w)}}}static async connect({http:e,onProgress:r,corsProxy:n,service:i,url:s,auth:a,body:o,headers:c}){const l=Lb(s);l&&(s=l.url),n&&(s=Bb(n,s)),c["content-type"]=`application/x-${i}-request`,c.accept=`application/x-${i}-result`,zb(c,a);const u=await e.request({onProgress:r,method:"POST",url:`${s}/${i}`,body:o,headers:c});if(u.statusCode!==200){const{response:h}=Ip(u);throw new so(u.statusCode,u.statusMessage,h)}return u}}function Ate({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};const e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}class df{static getRemoteHelperFor({url:e}){const r=new Map;r.set("http",Jd),r.set("https",Jd);const n=Ate({url:e});if(!n)throw new Jl(e);if(r.has(n.transport))return r.get(n.transport);throw new Xl(e,n.transport,n.transport==="ssh"?$te(e):void 0)}}let As=null;class cl{static async read({fs:e,gitdir:r}){As===null&&(As=new Ud);const n=X(r,"shallow"),i=new Set;return await As.acquire(n,async function(){const s=await e.read(n,{encoding:"utf8"});if(s===null||s.trim()==="")return i;s.trim().split(`
`).map(a=>i.add(a))}),i}static async write({fs:e,gitdir:r,oids:n}){As===null&&(As=new Ud);const i=X(r,"shallow");if(n.size>0){const s=[...n].join(`
`)+`
`;await As.acquire(i,async function(){await e.write(i,s,{encoding:"utf8"})})}else await As.acquire(i,async function(){await e.rm(i)})}}async function Pte({fs:t,gitdir:e,oid:r}){const n=`objects/${r.slice(0,2)}/${r.slice(2)}`;return t.exists(`${e}/${n}`)}async function Cte({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){let s=await t.readdir(X(r,"objects/pack"));s=s.filter(a=>a.endsWith(".idx"));for(const a of s){const o=`${r}/objects/pack/${a}`,c=await ov({fs:t,cache:e,filename:o,getExternalRefDelta:i});if(c.error)throw new Pe(c.error);if(c.offsets.has(n))return!0}return!1}async function qb({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){const s=o=>St({fs:t,cache:e,gitdir:r,oid:o});let a=await Pte({fs:t,gitdir:r,oid:n});return a||(a=await Cte({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:s})),a}function xte(t){const i="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===i}function Q$(t,e){const r=t.map(n=>n.split("=",1)[0]);return e.filter(n=>{const i=n.split("=",1)[0];return r.includes(i)})}const hf={name:"isomorphic-git",version:"1.25.10",agent:"git/isomorphic-git@1.25.10"};class gd{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const r=this._waiting;this._waiting=null,r({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){const e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}}function kte(t){const e=t.indexOf("\r"),r=t.indexOf(`
`);return e===-1&&r===-1?-1:e===-1?r+1:r===-1?e+1:r===e+1?r+1:Math.min(e,r)+1}function X$(t){const e=new gd;let r="";return(async()=>(await nu(t,n=>{for(n=n.toString("utf8"),r+=n;;){const i=kte(r);if(i===-1)break;e.write(r.slice(0,i)),r=r.slice(i)}}),r.length>0&&e.write(r),e.end()))(),e}class J${static demux(e){const r=kt.streamReader(e),n=new gd,i=new gd,s=new gd,a=async function(){const o=await r();if(o===null)return a();if(o===!0){n.end(),s.end(),e.error?i.destroy(e.error):i.end();return}switch(o[0]){case 1:{i.write(o.slice(1));break}case 2:{s.write(o.slice(1));break}case 3:{const c=o.slice(1);s.write(c),n.end(),s.end(),i.destroy(new Error(c.toString("utf8")));return}default:n.write(o)}a()};return a(),{packetlines:n,packfile:i,progress:s}}}async function Rte(t){const{packetlines:e,packfile:r,progress:n}=J$.demux(t),i=[],s=[],a=[];let o=!1,c=!1;return new Promise((l,u)=>{nu(e,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const f=p.slice(-41).trim();f.length!==40&&u(new hs(f)),i.push(f)}else if(p.startsWith("unshallow")){const f=p.slice(-41).trim();f.length!==40&&u(new hs(f)),s.push(f)}else if(p.startsWith("ACK")){const[,f,m]=p.split(" ");a.push({oid:f,status:m}),m||(c=!0)}else p.startsWith("NAK")?(o=!0,c=!0):(c=!0,o=!0);c&&(t.error?u(t.error):l({shallows:i,unshallows:s,acks:a,nak:o,packfile:r,progress:n}))}).finally(()=>{c||(t.error?u(t.error):l({shallows:i,unshallows:s,acks:a,nak:o,packfile:r,progress:n}))})})}function Ote({capabilities:t=[],wants:e=[],haves:r=[],shallows:n=[],depth:i=null,since:s=null,exclude:a=[]}){const o=[];e=[...new Set(e)];let c=` ${t.join(" ")}`;for(const l of e)o.push(kt.encode(`want ${l}${c}
`)),c="";for(const l of n)o.push(kt.encode(`shallow ${l}
`));i!==null&&o.push(kt.encode(`deepen ${i}
`)),s!==null&&o.push(kt.encode(`deepen-since ${Math.floor(s.valueOf()/1e3)}
`));for(const l of a)o.push(kt.encode(`deepen-not ${l}
`));o.push(kt.flush());for(const l of r)o.push(kt.encode(`have ${l}
`));return o.push(kt.encode(`done
`)),o}async function uv({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:c,ref:l,remoteRef:u,remote:h,url:p,corsProxy:f,depth:m=null,since:g=null,exclude:y=[],relative:v=!1,tags:w=!1,singleBranch:$=!1,headers:A={},prune:P=!1,pruneTags:O=!1}){const E=l||await ma({fs:t,gitdir:c,test:!0}),b=await Ut.get({fs:t,gitdir:c}),I=h||E&&await b.get(`branch.${E}.remote`)||"origin",T=p||await b.get(`remote.${I}.url`);if(typeof T>"u")throw new Vr("remote OR url");const C=u||E&&await b.get(`branch.${E}.merge`)||l||"HEAD";f===void 0&&(f=await b.get("http.corsProxy"));const R=df.getRemoteHelperFor({url:T}),x=await R.discover({http:r,onAuth:s,onAuthSuccess:a,onAuthFailure:o,corsProxy:f,service:"git-upload-pack",url:T,headers:A,protocolVersion:1}),Q=x.auth,re=x.refs;if(re.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(m!==null&&!x.capabilities.has("shallow"))throw new Xi("shallow","depth");if(g!==null&&!x.capabilities.has("deepen-since"))throw new Xi("deepen-since","since");if(y.length>0&&!x.capabilities.has("deepen-not"))throw new Xi("deepen-not","exclude");if(v===!0&&!x.capabilities.has("deepen-relative"))throw new Xi("deepen-relative","relative");const{oid:Ee,fullref:_e}=te.resolveAgainstMap({ref:C,map:re});for(const $e of re.keys())$e===_e||$e==="HEAD"||$e.startsWith("refs/heads/")||w&&$e.startsWith("refs/tags/")||re.delete($e);const me=Q$([...x.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${hf.agent}`]);v&&me.push("deepen-relative");const le=$?[Ee]:re.values(),Y=$?[E]:await te.listRefs({fs:t,gitdir:c,filepath:"refs"});let V=[];for(let $e of Y)try{$e=await te.expand({fs:t,gitdir:c,ref:$e});const Qe=await te.resolve({fs:t,gitdir:c,ref:$e});await qb({fs:t,cache:e,gitdir:c,oid:Qe})&&V.push(Qe)}catch{}V=[...new Set(V)];const W=await cl.read({fs:t,gitdir:c}),U=x.capabilities.has("shallow")?[...W]:[],N=Ote({capabilities:me,wants:le,haves:V,shallows:U,depth:m,since:g,exclude:y}),M=oe.from(await Xd(N)),K=await R.connect({http:r,onProgress:n,corsProxy:f,service:"git-upload-pack",url:T,auth:Q,body:[M],headers:A}),Z=await Rte(K.body);K.headers&&(Z.headers=K.headers);for(const $e of Z.shallows)if(!W.has($e))try{const{object:Qe}=await St({fs:t,cache:e,gitdir:c,oid:$e}),ut=new wt(Qe),nt=await Promise.all(ut.headers().parent.map(dr=>qb({fs:t,cache:e,gitdir:c,oid:dr})));nt.length===0||nt.every(dr=>dr)||W.add($e)}catch{W.add($e)}for(const $e of Z.unshallows)W.delete($e);if(await cl.write({fs:t,gitdir:c,oids:W}),$){const $e=new Map([[_e,Ee]]),Qe=new Map;let ut=10,nt=_e;for(;ut--;){const Or=x.symrefs.get(nt);if(Or===void 0)break;Qe.set(nt,Or),nt=Or}const It=re.get(nt);It&&$e.set(nt,It);const{pruned:dr}=await te.updateRemoteRefs({fs:t,gitdir:c,remote:I,refs:$e,symrefs:Qe,tags:w,prune:P});P&&(Z.pruned=dr)}else{const{pruned:$e}=await te.updateRemoteRefs({fs:t,gitdir:c,remote:I,refs:re,symrefs:x.symrefs,tags:w,prune:P,pruneTags:O});P&&(Z.pruned=$e)}if(Z.HEAD=x.symrefs.get("HEAD"),Z.HEAD===void 0){const{oid:$e}=te.resolveAgainstMap({ref:"HEAD",map:re});for(const[Qe,ut]of re.entries())if(Qe!=="HEAD"&&ut===$e){Z.HEAD=Qe;break}}const ae=_e.startsWith("refs/tags")?"tag":"branch";if(Z.FETCH_HEAD={oid:Ee,description:`${ae} '${Ma(_e)}' of ${T}`},n||i){const $e=X$(Z.progress);nu($e,async Qe=>{if(i&&await i(Qe),n){const ut=Qe.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);ut&&await n({phase:ut[1].trim(),loaded:parseInt(ut[2],10),total:parseInt(ut[3],10)})}})}const Ie=oe.from(await Xd(Z.packfile));if(K.body.error)throw K.body.error;const Te=Ie.slice(-20).toString("hex"),Me={defaultBranch:Z.HEAD,fetchHead:Z.FETCH_HEAD.oid,fetchHeadDescription:Z.FETCH_HEAD.description};if(Z.headers&&(Me.headers=Z.headers),P&&(Me.pruned=Z.pruned),Te!==""&&!xte(Ie)){Me.packfile=`objects/pack/pack-${Te}.pack`;const $e=X(c,Me.packfile);await t.write($e,Ie);const Qe=nt=>St({fs:t,cache:e,gitdir:c,oid:nt}),ut=await io.fromPack({pack:Ie,getExternalRefDelta:Qe,onProgress:n});await t.write($e.replace(/\.pack$/,".idx"),await ut.toBuffer())}return Me}async function Z$({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:X(r,".git"),defaultBranch:i="master"}){if(await t.exists(n+"/config"))return;let s=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];s=s.map(a=>n+"/"+a);for(const a of s)await t.mkdir(a);await t.write(n+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(n+"/HEAD",`ref: refs/heads/${i}
`)}async function Nte({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,dir:c,gitdir:l,url:u,corsProxy:h,ref:p,remote:f,depth:m,since:g,exclude:y,relative:v,singleBranch:w,noCheckout:$,noTags:A,headers:P}){try{if(await Z$({fs:t,gitdir:l}),await G$({fs:t,gitdir:l,remote:f,url:u,force:!1}),h){const b=await Ut.get({fs:t,gitdir:l});await b.set("http.corsProxy",h),await Ut.save({fs:t,gitdir:l,config:b})}const{defaultBranch:O,fetchHead:E}=await uv({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:l,ref:p,remote:f,corsProxy:h,depth:m,since:g,exclude:y,relative:v,singleBranch:w,headers:P,tags:!A});if(E===null)return;p=p||O,p=p.replace("refs/heads/",""),await lv({fs:t,cache:e,onProgress:n,dir:c,gitdir:l,ref:p,remote:f,noCheckout:$})}catch(O){throw await t.rmdir(l,{recursive:!0,maxRetries:10}).catch(()=>{}),O}}async function Dte({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c=X(o,".git"),url:l,corsProxy:u=void 0,ref:h=void 0,remote:p="origin",depth:f=void 0,since:m=void 0,exclude:g=[],relative:y=!1,singleBranch:v=!1,noCheckout:w=!1,noTags:$=!1,headers:A={},cache:P={}}){try{return B("fs",t),B("http",e),B("gitdir",c),w||B("dir",o),B("url",l),await Nte({fs:new he(t),cache:P,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c,url:l,corsProxy:u,ref:h,remote:p,depth:f,since:m,exclude:g,relative:y,singleBranch:v,noCheckout:w,noTags:$,headers:A})}catch(O){throw O.caller="git.clone",O}}async function Fte({fs:t,onSign:e,dir:r,gitdir:n=X(r,".git"),message:i,author:s,committer:a,signingKey:o,dryRun:c=!1,noUpdateBranch:l=!1,ref:u,parent:h,tree:p,cache:f={}}){try{B("fs",t),B("message",i),o&&B("onSign",e);const m=new he(t),g=await pa({fs:m,gitdir:n,author:s});if(!g)throw new wr("author");const y=await ru({fs:m,gitdir:n,author:g,committer:a});if(!y)throw new wr("committer");return await uf({fs:m,cache:f,onSign:e,gitdir:n,message:i,author:g,committer:y,signingKey:o,dryRun:c,noUpdateBranch:l,ref:u,parent:h,tree:p})}catch(m){throw m.caller="git.commit",m}}async function Mte({fs:t,dir:e,gitdir:r=X(e,".git"),fullname:n=!1,test:i=!1}){try{return B("fs",t),B("gitdir",r),await ma({fs:new he(t),gitdir:r,fullname:n,test:i})}catch(s){throw s.caller="git.currentBranch",s}}async function jte({fs:t,gitdir:e,ref:r}){if(r=r.startsWith("refs/heads/")?r:`refs/heads/${r}`,!await te.exists({fs:t,gitdir:e,ref:r}))throw new mt(r);const i=await te.expand({fs:t,gitdir:e,ref:r}),s=await ma({fs:t,gitdir:e,fullname:!0});if(i===s){const a=await te.resolve({fs:t,gitdir:e,ref:i});await te.writeRef({fs:t,gitdir:e,ref:"HEAD",value:a})}await te.deleteRef({fs:t,gitdir:e,ref:i})}async function Lte({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n}){try{return B("fs",t),B("ref",n),await jte({fs:new he(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteBranch",i}}async function Vte({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n}){try{B("fs",t),B("ref",n),await te.deleteRef({fs:new he(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteRef",i}}async function Ute({fs:t,gitdir:e,remote:r}){const n=await Ut.get({fs:t,gitdir:e});await n.deleteSection("remote",r),await Ut.save({fs:t,gitdir:e,config:n})}async function Bte({fs:t,dir:e,gitdir:r=X(e,".git"),remote:n}){try{return B("fs",t),B("remote",n),await Ute({fs:new he(t),gitdir:r,remote:n})}catch(i){throw i.caller="git.deleteRemote",i}}async function zte({fs:t,gitdir:e,ref:r}){r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`,await te.deleteRef({fs:t,gitdir:e,ref:r})}async function qte({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n}){try{return B("fs",t),B("ref",n),await zte({fs:new he(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteTag",i}}async function Hte({fs:t,gitdir:e,oid:r}){const n=r.slice(0,2);return(await t.readdir(`${e}/objects/${n}`)).map(s=>`${n}${s}`).filter(s=>s.startsWith(r))}async function Kte({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){const s=[];let a=await t.readdir(X(r,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const c=`${r}/objects/pack/${o}`,l=await ov({fs:t,cache:e,filename:c,getExternalRefDelta:i});if(l.error)throw new Pe(l.error);for(const u of l.offsets.keys())u.startsWith(n)&&s.push(u)}return s}async function Gte({fs:t,cache:e,gitdir:r,oid:n}){const i=o=>St({fs:t,cache:e,gitdir:r,oid:o}),s=await Hte({fs:t,gitdir:r,oid:n}),a=await Kte({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i});for(const o of a)s.indexOf(o)===-1&&s.push(o);if(s.length===1)return s[0];throw s.length>1?new Bl("oids",n,s):new mt(`an object matching "${n}"`)}async function Wte({fs:t,dir:e,gitdir:r=X(e,".git"),oid:n,cache:i={}}){try{return B("fs",t),B("gitdir",r),B("oid",n),await Gte({fs:new he(t),cache:i,gitdir:r,oid:n})}catch(s){throw s.caller="git.expandOid",s}}async function Yte({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n}){try{return B("fs",t),B("gitdir",r),B("ref",n),await te.expand({fs:new he(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.expandRef",i}}async function dv({fs:t,cache:e,gitdir:r,oids:n}){const i={},s=n.length;let a=n.map((o,c)=>({index:c,oid:o}));for(;a.length;){const o=new Set;for(const{oid:l,index:u}of a)i[l]||(i[l]=new Set),i[l].add(u),i[l].size===s&&o.add(l);if(o.size>0)return[...o];const c=new Map;for(const{oid:l,index:u}of a)try{const{object:h}=await St({fs:t,cache:e,gitdir:r,oid:l}),p=wt.from(h),{parent:f}=p.parseHeaders();for(const m of f)(!i[m]||!i[m].has(u))&&c.set(m+":"+u,{oid:m,index:u})}catch{}a=Array.from(c.values())}return[]}const Tp=/^.*(\r?\n|$)/gm;function Qte({branches:t,contents:e}){const r=t[1],n=t[2],i=e[0],s=e[1],a=e[2],o=s.match(Tp),c=i.match(Tp),l=a.match(Tp),u=dee(o,c,l),h=7;let p="",f=!0;for(const m of u)m.ok&&(p+=m.ok.join("")),m.conflict&&(f=!1,p+=`${"<".repeat(h)} ${r}
`,p+=m.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=m.conflict.b.join(""),p+=`${">".repeat(h)} ${n}
`);return{cleanMerge:f,mergedText:p}}async function Xte({fs:t,cache:e,dir:r,gitdir:n=X(r,".git"),index:i,ourOid:s,baseOid:a,theirOid:o,ourName:c="ours",baseName:l="base",theirName:u="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:f}){const m=Ji({ref:s}),g=Ji({ref:a}),y=Ji({ref:o}),v=[],w=[],$=[],A=[],P=await co({fs:t,cache:e,dir:r,gitdir:n,trees:[m,g,y],map:async function(O,[E,b,I]){const T=Kd(O),C=await Qd(E,b),R=await Qd(I,b);switch(`${C}-${R}`){case"false-false":return{mode:await b.mode(),path:T,oid:await b.oid(),type:await b.type()};case"false-true":return I?{mode:await I.mode(),path:T,oid:await I.oid(),type:await I.type()}:void 0;case"true-false":return E?{mode:await E.mode(),path:T,oid:await E.oid(),type:await E.type()}:void 0;case"true-true":{if(E&&b&&I&&await E.type()==="blob"&&await b.type()==="blob"&&await I.type()==="blob")return Jte({fs:t,gitdir:n,path:T,ours:E,base:b,theirs:I,ourName:c,baseName:l,theirName:u,mergeDriver:f}).then(async x=>{if(x.cleanMerge)p||i.insert({filepath:O,oid:x.mergeResult.oid,stage:0});else if(v.push(O),w.push(O),!p){const Q=await b.oid(),re=await E.oid(),Ee=await I.oid();i.delete({filepath:O}),i.insert({filepath:O,oid:Q,stage:1}),i.insert({filepath:O,oid:re,stage:2}),i.insert({filepath:O,oid:Ee,stage:3})}return x.mergeResult});if(b&&!E&&I&&await b.type()==="blob"&&await I.type()==="blob"){if(v.push(O),$.push(O),!p){const x=await b.oid(),Q=await I.oid();i.delete({filepath:O}),i.insert({filepath:O,oid:x,stage:1}),i.insert({filepath:O,oid:Q,stage:3})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:T}}if(b&&E&&!I&&await b.type()==="blob"&&await E.type()==="blob"){if(v.push(O),A.push(O),!p){const x=await b.oid(),Q=await E.oid();i.delete({filepath:O}),i.insert({filepath:O,oid:x,stage:1}),i.insert({filepath:O,oid:Q,stage:2})}return{mode:await E.mode(),oid:await E.oid(),type:"blob",path:T}}if(b&&!E&&!I&&await b.type()==="blob")return;throw new Bo}}},reduce:v.length!==0&&(!r||p)?void 0:async(O,E)=>{const b=E.filter(Boolean);if(O&&!(O&&O.type==="tree"&&b.length===0)){if(b.length>0){const T=new kr(b).toObject(),C=await Br({fs:t,gitdir:n,type:"tree",object:T,dryRun:h});O.oid=C}return O}}});return v.length!==0?(r&&!p&&await co({fs:t,cache:e,dir:r,gitdir:n,trees:[Ji({ref:P.oid})],map:async function(O,[E]){const b=`${r}/${O}`;if(await E.type()==="blob"){const I=await E.mode(),T=new TextDecoder().decode(await E.content());await t.write(b,T,{mode:I})}return!0}}),new zo(v,w,$,A)):P.oid}async function Jte({fs:t,gitdir:e,path:r,ours:n,base:i,theirs:s,ourName:a,theirName:o,baseName:c,dryRun:l,mergeDriver:u=Qte}){const h="blob",p=await i.mode()===await n.mode()?await s.mode():await n.mode();if(await n.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:r,oid:await n.oid(),type:h}};if(await n.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:r,oid:await s.oid(),type:h}};if(await s.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:r,oid:await n.oid(),type:h}};const f=oe.from(await n.content()).toString("utf8"),m=oe.from(await i.content()).toString("utf8"),g=oe.from(await s.content()).toString("utf8"),{mergedText:y,cleanMerge:v}=await u({branches:[c,a,o],contents:[m,f,g],path:r}),w=await Br({fs:t,gitdir:e,type:"blob",object:oe.from(y,"utf8"),dryRun:l});return{cleanMerge:v,mergeResult:{mode:p,path:r,oid:w,type:h}}}async function eA({fs:t,cache:e,dir:r,gitdir:n,ours:i,theirs:s,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:c=!1,noUpdateBranch:l=!1,abortOnConflict:u=!0,message:h,author:p,committer:f,signingKey:m,onSign:g,mergeDriver:y}){i===void 0&&(i=await ma({fs:t,gitdir:n,fullname:!0})),i=await te.expand({fs:t,gitdir:n,ref:i}),s=await te.expand({fs:t,gitdir:n,ref:s});const v=await te.resolve({fs:t,gitdir:n,ref:i}),w=await te.resolve({fs:t,gitdir:n,ref:s}),$=await dv({fs:t,cache:e,gitdir:n,oids:[v,w]});if($.length!==1)throw new Bo;const A=$[0];if(A===w)return{oid:v,alreadyMerged:!0};if(a&&A===v)return!c&&!l&&await te.writeRef({fs:t,gitdir:n,ref:i,value:w}),{oid:w,fastForward:!0};{if(o)throw new Kl;const P=await Jt.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async E=>Xte({fs:t,cache:e,dir:r,gitdir:n,index:E,ourOid:v,theirOid:w,baseOid:A,ourName:Ma(i),baseName:"base",theirName:Ma(s),dryRun:c,abortOnConflict:u,mergeDriver:y}));if(P instanceof zo)throw P;return h||(h=`Merge branch '${Ma(s)}' into ${Ma(i)}`),{oid:await uf({fs:t,cache:e,gitdir:n,message:h,ref:i,tree:P,parent:[v,w],author:p,committer:f,signingKey:m,onSign:g,dryRun:c,noUpdateBranch:l}),tree:P,mergeCommit:!0}}}async function tA({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,dir:c,gitdir:l,ref:u,url:h,remote:p,remoteRef:f,prune:m,pruneTags:g,fastForward:y,fastForwardOnly:v,corsProxy:w,singleBranch:$,headers:A,author:P,committer:O,signingKey:E}){try{if(!u){const T=await ma({fs:t,gitdir:l});if(!T)throw new Vr("ref");u=T}const{fetchHead:b,fetchHeadDescription:I}=await uv({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:l,corsProxy:w,ref:u,url:h,remote:p,remoteRef:f,singleBranch:$,headers:A,prune:m,pruneTags:g});await eA({fs:t,cache:e,gitdir:l,ours:u,theirs:b,fastForward:y,fastForwardOnly:v,message:`Merge ${I}`,author:P,committer:O,signingKey:E,dryRun:!1,noUpdateBranch:!1}),await lv({fs:t,cache:e,onProgress:n,dir:c,gitdir:l,ref:u,remote:p,noCheckout:!1})}catch(b){throw b.caller="git.pull",b}}async function Zte({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c=X(o,".git"),ref:l,url:u,remote:h,remoteRef:p,corsProxy:f,singleBranch:m,headers:g={},cache:y={}}){try{B("fs",t),B("http",e),B("gitdir",c);const v={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await tA({fs:new he(t),cache:y,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c,ref:l,url:u,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:f,singleBranch:m,headers:g,author:v,committer:v})}catch(v){throw v.caller="git.fastForward",v}}async function ere({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c=X(o,".git"),ref:l,remote:u,remoteRef:h,url:p,corsProxy:f,depth:m=null,since:g=null,exclude:y=[],relative:v=!1,tags:w=!1,singleBranch:$=!1,headers:A={},prune:P=!1,pruneTags:O=!1,cache:E={}}){try{return B("fs",t),B("http",e),B("gitdir",c),await uv({fs:new he(t),cache:E,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,gitdir:c,ref:l,remote:u,remoteRef:h,url:p,corsProxy:f,depth:m,since:g,exclude:y,relative:v,tags:w,singleBranch:$,headers:A,prune:P,pruneTags:O})}catch(b){throw b.caller="git.fetch",b}}async function tre({fs:t,dir:e,gitdir:r=X(e,".git"),oids:n,cache:i={}}){try{return B("fs",t),B("gitdir",r),B("oids",n),await dv({fs:new he(t),cache:i,gitdir:r,oids:n})}catch(s){throw s.caller="git.findMergeBase",s}}async function rA({fs:t,filepath:e}){if(await t.exists(X(e,".git")))return e;{const r=no(e);if(r===e)throw new mt(`git root for ${e}`);return rA({fs:t,filepath:r})}}async function rre({fs:t,filepath:e}){try{return B("fs",t),B("filepath",e),await rA({fs:new he(t),filepath:e})}catch(r){throw r.caller="git.findRoot",r}}async function nre({fs:t,dir:e,gitdir:r=X(e,".git"),path:n}){try{return B("fs",t),B("gitdir",r),B("path",n),await xm({fs:new he(t),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfig",i}}async function ire({fs:t,gitdir:e,path:r}){return(await Ut.get({fs:t,gitdir:e})).getall(r)}async function sre({fs:t,dir:e,gitdir:r=X(e,".git"),path:n}){try{return B("fs",t),B("gitdir",r),B("path",n),await ire({fs:new he(t),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfigAll",i}}async function are({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:s,headers:a={},forPush:o=!1}){try{B("http",t),B("url",s);const l=await df.getRemoteHelperFor({url:s}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:1}),u={capabilities:[...l.capabilities]};for(const[h,p]of l.refs){const f=h.split("/"),m=f.pop();let g=u;for(const y of f)g[y]=g[y]||{},g=g[y];g[m]=p}for(const[h,p]of l.symrefs){const f=h.split("/"),m=f.pop();let g=u;for(const y of f)g[y]=g[y]||{},g=g[y];g[m]=p}return u}catch(c){throw c.caller="git.getRemoteInfo",c}}function nA(t,e,r,n){const i=[];for(const[s,a]of t.refs){if(e&&!s.startsWith(e))continue;if(s.endsWith("^{}")){if(n){const c=s.replace("^{}",""),l=i[i.length-1],u=l.ref===c?l:i.find(h=>h.ref===c);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=a}continue}const o={ref:s,oid:a};r&&t.symrefs.has(s)&&(o.target=t.symrefs.get(s)),i.push(o)}return i}async function ore({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:s,headers:a={},forPush:o=!1,protocolVersion:c=2}){try{B("http",t),B("url",s);const u=await df.getRemoteHelperFor({url:s}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:c});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};const h={};for(const p of u.capabilities){const[f,m]=p.split("=");m?h[f]=m:h[f]=!0}return{protocolVersion:1,capabilities:h,refs:nA(u,void 0,!0,!0)}}catch(l){throw l.caller="git.getRemoteInfo2",l}}async function cre({type:t,object:e,format:r="content",oid:n=void 0}){return r!=="deflated"&&(r!=="wrapped"&&(e=Uo.wrap({type:t,object:e})),n=await fi(e)),{oid:n,object:e}}async function lre({object:t}){try{B("object",t),typeof t=="string"?t=oe.from(t,"utf8"):t=oe.from(t);const e="blob",{oid:r,object:n}=await cre({type:"blob",format:"content",object:t});return{oid:r,type:e,object:new Uint8Array(n),format:"wrapped"}}catch(e){throw e.caller="git.hashBlob",e}}async function ure({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,filepath:s}){try{s=X(n,s);const a=await t.read(s),o=l=>St({fs:t,cache:e,gitdir:i,oid:l}),c=await io.fromPack({pack:a,getExternalRefDelta:o,onProgress:r});return await t.write(s.replace(/\.pack$/,".idx"),await c.toBuffer()),{oids:[...c.hashes]}}catch(a){throw a.caller="git.indexPack",a}}async function dre({fs:t,onProgress:e,dir:r,gitdir:n=X(r,".git"),filepath:i,cache:s={}}){try{return B("fs",t),B("dir",r),B("gitdir",r),B("filepath",i),await ure({fs:new he(t),cache:s,onProgress:e,dir:r,gitdir:n,filepath:i})}catch(a){throw a.caller="git.indexPack",a}}async function hre({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:X(r,".git"),defaultBranch:i="master"}){try{return B("fs",t),B("gitdir",n),e||B("dir",r),await Z$({fs:new he(t),bare:e,dir:r,gitdir:n,defaultBranch:i})}catch(s){throw s.caller="git.init",s}}async function iA({fs:t,cache:e,gitdir:r,oid:n,ancestor:i,depth:s}){const a=await cl.read({fs:t,gitdir:r});if(!n)throw new Vr("oid");if(!i)throw new Vr("ancestor");if(n===i)return!1;const o=[n],c=new Set;let l=0;for(;o.length;){if(l++===s)throw new Wl(s);const u=o.shift(),{type:h,object:p}=await St({fs:t,cache:e,gitdir:r,oid:u});if(h!=="commit")throw new br(u,h,"commit");const f=wt.from(p).parse();for(const m of f.parent)if(m===i)return!0;if(!a.has(u))for(const m of f.parent)c.has(m)||(o.push(m),c.add(m))}return!1}async function fre({fs:t,dir:e,gitdir:r=X(e,".git"),oid:n,ancestor:i,depth:s=-1,cache:a={}}){try{return B("fs",t),B("gitdir",r),B("oid",n),B("ancestor",i),await iA({fs:new he(t),cache:a,gitdir:r,oid:n,ancestor:i,depth:s})}catch(o){throw o.caller="git.isDescendent",o}}async function pre({fs:t,dir:e,gitdir:r=X(e,".git"),filepath:n}){try{return B("fs",t),B("dir",e),B("gitdir",r),B("filepath",n),lf.isIgnored({fs:new he(t),dir:e,gitdir:r,filepath:n})}catch(i){throw i.caller="git.isIgnored",i}}async function mre({fs:t,dir:e,gitdir:r=X(e,".git"),remote:n}){try{return B("fs",t),B("gitdir",r),te.listBranches({fs:new he(t),gitdir:r,remote:n})}catch(i){throw i.caller="git.listBranches",i}}async function gre({fs:t,gitdir:e,ref:r,cache:n}){if(r){const i=await te.resolve({gitdir:e,fs:t,ref:r}),s=[];return await sA({fs:t,cache:n,gitdir:e,oid:i,filenames:s,prefix:""}),s}else return Jt.acquire({fs:t,gitdir:e,cache:n},async function(i){return i.entries.map(s=>s.path)})}async function sA({fs:t,cache:e,gitdir:r,oid:n,filenames:i,prefix:s}){const{tree:a}=await qo({fs:t,cache:e,gitdir:r,oid:n});for(const o of a)o.type==="tree"?await sA({fs:t,cache:e,gitdir:r,oid:o.oid,filenames:i,prefix:X(s,o.path)}):i.push(X(s,o.path))}async function yre({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n,cache:i={}}){try{return B("fs",t),B("gitdir",r),await gre({fs:new he(t),cache:i,gitdir:r,ref:n})}catch(s){throw s.caller="git.listFiles",s}}async function vre({fs:t,cache:e,gitdir:r,ref:n}){let i;try{i=await te.resolve({gitdir:r,fs:t,ref:n})}catch(o){if(o instanceof mt)return[]}return(await qo({fs:t,cache:e,gitdir:r,oid:i})).tree.map(o=>({target:o.path,note:o.oid}))}async function _re({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n="refs/notes/commits",cache:i={}}){try{return B("fs",t),B("gitdir",r),B("ref",n),await vre({fs:new he(t),cache:i,gitdir:r,ref:n})}catch(s){throw s.caller="git.listNotes",s}}async function wre({fs:t,gitdir:e}){const r=await Ut.get({fs:t,gitdir:e}),n=await r.getSubsections("remote");return Promise.all(n.map(async s=>{const a=await r.get(`remote.${s}.url`);return{remote:s,url:a}}))}async function bre({fs:t,dir:e,gitdir:r=X(e,".git")}){try{return B("fs",t),B("gitdir",r),await wre({fs:new he(t),gitdir:r})}catch(n){throw n.caller="git.listRemotes",n}}async function Ere(t){const e=kt.streamReader(t),r=[];let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const[i,s,...a]=n.split(" "),o={ref:s,oid:i};for(const c of a){const[l,u]=c.split(":");l==="symref-target"?o.target=u:l==="peeled"&&(o.peeled=u)}r.push(o)}return r}async function Sre({prefix:t,symrefs:e,peelTags:r}){const n=[];return n.push(kt.encode(`command=ls-refs
`)),n.push(kt.encode(`agent=${hf.agent}
`)),(r||e||t)&&n.push(kt.delim()),r&&n.push(kt.encode("peel")),e&&n.push(kt.encode("symrefs")),t&&n.push(kt.encode(`ref-prefix ${t}`)),n.push(kt.flush()),n}async function Ire({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:s,headers:a={},forPush:o=!1,protocolVersion:c=2,prefix:l,symrefs:u,peelTags:h}){try{B("http",t),B("url",s);const p=await Jd.discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:c});if(p.protocolVersion===1)return nA(p,l,u,h);const f=await Sre({prefix:l,symrefs:u,peelTags:h}),m=await Jd.connect({http:t,auth:p.auth,headers:a,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,body:f});return Ere(m.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function Tre({fs:t,dir:e,gitdir:r=X(e,".git")}){try{return B("fs",t),B("gitdir",r),te.listTags({fs:new he(t),gitdir:r})}catch(n){throw n.caller="git.listTags",n}}async function aA({fs:t,cache:e,gitdir:r,oid:n}){const{type:i,object:s}=await St({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=_r.from(s).parse().object,aA({fs:t,cache:e,gitdir:r,oid:n});if(i!=="commit")throw new br(n,i,"commit");return{commit:wt.from(s),oid:n}}async function Rm({fs:t,cache:e,gitdir:r,oid:n}){const{commit:i,oid:s}=await aA({fs:t,cache:e,gitdir:r,oid:n});return{oid:s,commit:i.parse(),payload:i.withoutSignature()}}function $re(t,e){return t.committer.timestamp-e.committer.timestamp}const Are="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function Hb({fs:t,cache:e,gitdir:r,oid:n,fileId:i}){if(i===Are)return;const s=n;let a;const o=await oo({fs:t,cache:e,gitdir:r,oid:n}),c=o.tree;return i===o.oid?a=o.path:(a=await oA({fs:t,cache:e,gitdir:r,tree:c,fileId:i,oid:s}),Array.isArray(a)&&(a.length===0?a=void 0:a.length===1&&(a=a[0]))),a}async function oA({fs:t,cache:e,gitdir:r,tree:n,fileId:i,oid:s,filepaths:a=[],parentPath:o=""}){const c=n.entries().map(function(l){let u;return l.oid===i?(u=X(o,l.path),a.push(u)):l.type==="tree"&&(u=St({fs:t,cache:e,gitdir:r,oid:l.oid}).then(function({object:h}){return oA({fs:t,cache:e,gitdir:r,tree:kr.from(h),fileId:i,oid:s,filepaths:a,parentPath:X(o,l.path)})})),u});return await Promise.all(c),a}async function Pre({fs:t,cache:e,gitdir:r,filepath:n,ref:i,depth:s,since:a,force:o,follow:c}){const l=typeof a>"u"?void 0:Math.floor(a.valueOf()/1e3),u=[],h=await cl.read({fs:t,gitdir:r}),p=await te.resolve({fs:t,gitdir:r,ref:i}),f=[await Rm({fs:t,cache:e,gitdir:r,oid:p})];let m,g,y;function v(w){y&&n&&u.push(w)}for(;f.length>0;){const w=f.pop();if(l!==void 0&&w.commit.committer.timestamp<=l)break;if(n){let $;try{$=await tu({fs:t,cache:e,gitdir:r,oid:w.commit.tree,filepath:n}),g&&m!==$&&u.push(g),m=$,g=w,y=!0}catch(A){if(A instanceof mt){let P=c&&m;if(P&&(P=await Hb({fs:t,cache:e,gitdir:r,oid:w.commit.tree,fileId:m}),P))if(Array.isArray(P)){if(g){const O=await Hb({fs:t,cache:e,gitdir:r,oid:g.commit.tree,fileId:m});if(Array.isArray(O))if(P=P.filter(E=>O.indexOf(E)===-1),P.length===1)P=P[0],n=P,g&&u.push(g);else{P=!1,g&&u.push(g);break}}}else n=P,g&&u.push(g);if(!P){if(y&&m&&(u.push(g),!o))break;if(!o&&!c)throw A}g=w,y=!1}else throw A}}else u.push(w);if(s!==void 0&&u.length===s){v(w);break}if(!h.has(w.oid))for(const $ of w.commit.parent){const A=await Rm({fs:t,cache:e,gitdir:r,oid:$});f.map(P=>P.oid).includes(A.oid)||f.push(A)}f.length===0&&v(w),f.sort(($,A)=>$re($.commit,A.commit))}return u}async function Cre({fs:t,dir:e,gitdir:r=X(e,".git"),filepath:n,ref:i="HEAD",depth:s,since:a,force:o,follow:c,cache:l={}}){try{return B("fs",t),B("gitdir",r),B("ref",i),await Pre({fs:new he(t),cache:l,gitdir:r,filepath:n,ref:i,depth:s,since:a,force:o,follow:c})}catch(u){throw u.caller="git.log",u}}async function xre({fs:t,onSign:e,dir:r,gitdir:n=X(r,".git"),ours:i,theirs:s,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:c=!1,noUpdateBranch:l=!1,abortOnConflict:u=!0,message:h,author:p,committer:f,signingKey:m,cache:g={},mergeDriver:y}){try{B("fs",t),m&&B("onSign",e);const v=new he(t),w=await pa({fs:v,gitdir:n,author:p});if(!w&&(!o||!a))throw new wr("author");const $=await ru({fs:v,gitdir:n,author:w,committer:f});if(!$&&(!o||!a))throw new wr("committer");return await eA({fs:v,cache:g,dir:r,gitdir:n,ours:i,theirs:s,fastForward:a,fastForwardOnly:o,dryRun:c,noUpdateBranch:l,abortOnConflict:u,message:h,author:w,committer:$,signingKey:m,onSign:e,mergeDriver:y})}catch(v){throw v.caller="git.merge",v}}const kre={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function cA({fs:t,cache:e,dir:r,gitdir:n=X(r,".git"),oids:i}){const s=new zT,a=[];function o(u,h){const p=oe.from(u,h);a.push(p),s.update(p)}async function c({stype:u,object:h}){const p=kre[u];let f=h.length,m=f>15?128:0;const g=f&15;f=f>>>4;let y=(m|p|g).toString(16);for(o(y,"hex");m;)m=f>127?128:0,y=m|f&127,o(km(2,y),"hex"),f=f>>>7;o(oe.from(await q$(h)))}o("PACK"),o("00000002","hex"),o(km(8,i.length),"hex");for(const u of i){const{type:h,object:p}=await St({fs:t,cache:e,gitdir:n,oid:u});await c({write:o,object:p,stype:h})}const l=s.digest();return a.push(l),a}async function Rre({fs:t,cache:e,gitdir:r,oids:n,write:i}){const s=await cA({fs:t,cache:e,gitdir:r,oids:n}),a=oe.from(await Xd(s)),c=`pack-${a.slice(-20).toString("hex")}.pack`;return i?(await t.write(X(r,`objects/pack/${c}`),a),{filename:c}):{filename:c,packfile:new Uint8Array(a)}}async function Ore({fs:t,dir:e,gitdir:r=X(e,".git"),oids:n,write:i=!1,cache:s={}}){try{return B("fs",t),B("gitdir",r),B("oids",n),await Rre({fs:new he(t),cache:s,gitdir:r,oids:n,write:i})}catch(a){throw a.caller="git.packObjects",a}}async function Nre({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c=X(o,".git"),ref:l,url:u,remote:h,remoteRef:p,prune:f=!1,pruneTags:m=!1,fastForward:g=!0,fastForwardOnly:y=!1,corsProxy:v,singleBranch:w,headers:$={},author:A,committer:P,signingKey:O,cache:E={}}){try{B("fs",t),B("gitdir",c);const b=new he(t),I=await pa({fs:b,gitdir:c,author:A});if(!I)throw new wr("author");const T=await ru({fs:b,gitdir:c,author:I,committer:P});if(!T)throw new wr("committer");return await tA({fs:b,cache:E,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c,ref:l,url:u,remote:h,remoteRef:p,fastForward:g,fastForwardOnly:y,corsProxy:v,singleBranch:w,headers:$,author:I,committer:T,signingKey:O,prune:f,pruneTags:m})}catch(b){throw b.caller="git.pull",b}}async function Dre({fs:t,cache:e,dir:r,gitdir:n=X(r,".git"),start:i,finish:s}){const a=await cl.read({fs:t,gitdir:n}),o=new Set,c=new Set;for(const h of i)o.add(await te.resolve({fs:t,gitdir:n,ref:h}));for(const h of s)try{const p=await te.resolve({fs:t,gitdir:n,ref:h});c.add(p)}catch{}const l=new Set;async function u(h){l.add(h);const{type:p,object:f}=await St({fs:t,cache:e,gitdir:n,oid:h});if(p==="tag"){const g=_r.from(f).headers().object;return u(g)}if(p!=="commit")throw new br(h,p,"commit");if(!a.has(h)){const g=wt.from(f).headers().parent;for(h of g)!c.has(h)&&!l.has(h)&&await u(h)}}for(const h of o)await u(h);return l}async function $p({fs:t,cache:e,dir:r,gitdir:n=X(r,".git"),oids:i}){const s=new Set;async function a(o){if(s.has(o))return;s.add(o);const{type:c,object:l}=await St({fs:t,cache:e,gitdir:n,oid:o});if(c==="tag"){const h=_r.from(l).headers().object;await a(h)}else if(c==="commit"){const h=wt.from(l).headers().tree;await a(h)}else if(c==="tree"){const u=kr.from(l);for(const h of u)h.type==="blob"&&s.add(h.oid),h.type==="tree"&&await a(h.oid)}}for(const o of i)await a(o);return s}async function Fre(t){const e={};let r="";const n=kt.streamReader(t);let i=await n();for(;i!==!0;)i!==null&&(r+=i.toString("utf8")+`
`),i=await n();const s=r.toString("utf8").split(`
`);if(i=s.shift(),!i.startsWith("unpack "))throw new fa('unpack ok" or "unpack [error message]',i);e.ok=i==="unpack ok",e.ok||(e.error=i.slice(7)),e.refs={};for(const a of s){if(a.trim()==="")continue;const o=a.slice(0,2),c=a.slice(3);let l=c.indexOf(" ");l===-1&&(l=c.length);const u=c.slice(0,l),h=c.slice(l+1);e.refs[u]={ok:o==="ok",error:h}}return e}async function Mre({capabilities:t=[],triplets:e=[]}){const r=[];let n=`\0 ${t.join(" ")}`;for(const i of e)r.push(kt.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${n}
`)),n="";return r.push(kt.flush()),r}async function jre({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:c,ref:l,remoteRef:u,remote:h,url:p,force:f=!1,delete:m=!1,corsProxy:g,headers:y={}}){const v=l||await ma({fs:t,gitdir:c});if(typeof v>"u")throw new Vr("ref");const w=await Ut.get({fs:t,gitdir:c});h=h||await w.get(`branch.${v}.pushRemote`)||await w.get("remote.pushDefault")||await w.get(`branch.${v}.remote`)||"origin";const $=p||await w.get(`remote.${h}.pushurl`)||await w.get(`remote.${h}.url`);if(typeof $>"u")throw new Vr("remote OR url");const A=u||await w.get(`branch.${v}.merge`);if(typeof $>"u")throw new Vr("remoteRef");g===void 0&&(g=await w.get("http.corsProxy"));const P=await te.expand({fs:t,gitdir:c,ref:v}),O=m?"0000000000000000000000000000000000000000":await te.resolve({fs:t,gitdir:c,ref:P}),E=df.getRemoteHelperFor({url:$}),b=await E.discover({http:r,onAuth:s,onAuthSuccess:a,onAuthFailure:o,corsProxy:g,service:"git-receive-pack",url:$,headers:y,protocolVersion:1}),I=b.auth;let T;if(!A)T=P;else try{T=await te.expandAgainstMap({ref:A,map:b.refs})}catch(V){if(V instanceof mt)T=A.startsWith("refs/")?A:`refs/heads/${A}`;else throw V}const C=b.refs.get(T)||"0000000000000000000000000000000000000000",R=!b.capabilities.has("no-thin");let x=new Set;if(!m){const V=[...b.refs.values()];let W=new Set;if(C!=="0000000000000000000000000000000000000000"){const U=await dv({fs:t,cache:e,gitdir:c,oids:[O,C]});for(const N of U)V.push(N);R&&(W=await $p({fs:t,cache:e,gitdir:c,oids:U}))}if(!V.includes(O)){const U=await Dre({fs:t,cache:e,gitdir:c,start:[O],finish:V});x=await $p({fs:t,cache:e,gitdir:c,oids:U})}if(R){try{const U=await te.resolve({fs:t,gitdir:c,ref:`refs/remotes/${h}/HEAD`,depth:2}),{oid:N}=await te.resolveAgainstMap({ref:U.replace(`refs/remotes/${h}/`,""),fullref:U,map:b.refs}),M=[N];for(const K of await $p({fs:t,cache:e,gitdir:c,oids:M}))W.add(K)}catch{}for(const U of W)x.delete(U)}if(O===C&&(f=!0),!f){if(P.startsWith("refs/tags")&&C!=="0000000000000000000000000000000000000000")throw new ao("tag-exists");if(O!=="0000000000000000000000000000000000000000"&&C!=="0000000000000000000000000000000000000000"&&!await iA({fs:t,cache:e,gitdir:c,oid:O,ancestor:C,depth:-1}))throw new ao("not-fast-forward")}}const Q=Q$([...b.capabilities],["report-status","side-band-64k",`agent=${hf.agent}`]),re=await Mre({capabilities:Q,triplets:[{oldoid:C,oid:O,fullRef:T}]}),Ee=m?[]:await cA({fs:t,cache:e,gitdir:c,oids:[...x]}),_e=await E.connect({http:r,onProgress:n,corsProxy:g,service:"git-receive-pack",url:$,auth:I,headers:y,body:[...re,...Ee]}),{packfile:me,progress:le}=await J$.demux(_e.body);if(i){const V=X$(le);nu(V,async W=>{await i(W)})}const Y=await Fre(me);if(_e.headers&&(Y.headers=_e.headers),h&&Y.ok&&Y.refs[T].ok){const V=`refs/remotes/${h}/${T.replace("refs/heads","")}`;m?await te.deleteRef({fs:t,gitdir:c,ref:V}):await te.writeRef({fs:t,gitdir:c,ref:V,value:O})}if(Y.ok&&Object.values(Y.refs).every(V=>V.ok))return Y;{const V=Object.entries(Y.refs).filter(([W,U])=>!U.ok).map(([W,U])=>`
  - ${W}: ${U.error}`).join("");throw new Gl(V,Y)}}async function Lre({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:c=X(o,".git"),ref:l,remoteRef:u,remote:h="origin",url:p,force:f=!1,delete:m=!1,corsProxy:g,headers:y={},cache:v={}}){try{return B("fs",t),B("http",e),B("gitdir",c),await jre({fs:new he(t),cache:v,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:a,gitdir:c,ref:l,remoteRef:u,remote:h,url:p,force:f,delete:m,corsProxy:g,headers:y})}catch(w){throw w.caller="git.push",w}}async function lA({fs:t,cache:e,gitdir:r,oid:n}){const{type:i,object:s}=await St({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=_r.from(s).parse().object,lA({fs:t,cache:e,gitdir:r,oid:n});if(i!=="blob")throw new br(n,i,"blob");return{oid:n,blob:new Uint8Array(s)}}async function uA({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){return i!==void 0&&(n=await tu({fs:t,cache:e,gitdir:r,oid:n,filepath:i})),await lA({fs:t,cache:e,gitdir:r,oid:n})}async function Vre({fs:t,dir:e,gitdir:r=X(e,".git"),oid:n,filepath:i,cache:s={}}){try{return B("fs",t),B("gitdir",r),B("oid",n),await uA({fs:new he(t),cache:s,gitdir:r,oid:n,filepath:i})}catch(a){throw a.caller="git.readBlob",a}}async function Ure({fs:t,dir:e,gitdir:r=X(e,".git"),oid:n,cache:i={}}){try{return B("fs",t),B("gitdir",r),B("oid",n),await Rm({fs:new he(t),cache:i,gitdir:r,oid:n})}catch(s){throw s.caller="git.readCommit",s}}async function Bre({fs:t,cache:e,gitdir:r,ref:n="refs/notes/commits",oid:i}){const s=await te.resolve({gitdir:r,fs:t,ref:n}),{blob:a}=await uA({fs:t,cache:e,gitdir:r,oid:s,filepath:i});return a}async function zre({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n="refs/notes/commits",oid:i,cache:s={}}){try{return B("fs",t),B("gitdir",r),B("ref",n),B("oid",i),await Bre({fs:new he(t),cache:s,gitdir:r,ref:n,oid:i})}catch(a){throw a.caller="git.readNote",a}}async function qre({fs:t,dir:e,gitdir:r=X(e,".git"),oid:n,format:i="parsed",filepath:s=void 0,encoding:a=void 0,cache:o={}}){try{B("fs",t),B("gitdir",r),B("oid",n);const c=new he(t);s!==void 0&&(n=await tu({fs:c,cache:o,gitdir:r,oid:n,filepath:s}));const u=await St({fs:c,cache:o,gitdir:r,oid:n,format:i==="parsed"?"content":i});if(u.oid=n,i==="parsed")switch(u.format="parsed",u.type){case"commit":u.object=wt.from(u.object).parse();break;case"tree":u.object=kr.from(u.object).entries();break;case"blob":a?u.object=u.object.toString(a):(u.object=new Uint8Array(u.object),u.format="content");break;case"tag":u.object=_r.from(u.object).parse();break;default:throw new br(u.oid,u.type,"blob|commit|tag|tree")}else(u.format==="deflated"||u.format==="wrapped")&&(u.type=u.format);return u}catch(c){throw c.caller="git.readObject",c}}async function Hre({fs:t,cache:e,gitdir:r,oid:n}){const{type:i,object:s}=await St({fs:t,cache:e,gitdir:r,oid:n,format:"content"});if(i!=="tag")throw new br(n,i,"tag");const a=_r.from(s);return{oid:n,tag:a.parse(),payload:a.payload()}}async function Kre({fs:t,dir:e,gitdir:r=X(e,".git"),oid:n,cache:i={}}){try{return B("fs",t),B("gitdir",r),B("oid",n),await Hre({fs:new he(t),cache:i,gitdir:r,oid:n})}catch(s){throw s.caller="git.readTag",s}}async function Gre({fs:t,dir:e,gitdir:r=X(e,".git"),oid:n,filepath:i=void 0,cache:s={}}){try{return B("fs",t),B("gitdir",r),B("oid",n),await qo({fs:new he(t),cache:s,gitdir:r,oid:n,filepath:i})}catch(a){throw a.caller="git.readTree",a}}async function Wre({fs:t,dir:e,gitdir:r=X(e,".git"),filepath:n,cache:i={}}){try{B("fs",t),B("gitdir",r),B("filepath",n),await Jt.acquire({fs:new he(t),gitdir:r,cache:i},async function(s){s.delete({filepath:n})})}catch(s){throw s.caller="git.remove",s}}async function Yre({fs:t,cache:e,onSign:r,gitdir:n,ref:i="refs/notes/commits",oid:s,author:a,committer:o,signingKey:c}){let l;try{l=await te.resolve({gitdir:n,fs:t,ref:i})}catch(m){if(!(m instanceof mt))throw m}let h=(await qo({fs:t,gitdir:n,oid:l||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(m=>m.path!==s);const p=await cv({fs:t,gitdir:n,tree:h});return await uf({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:p,parent:l&&[l],message:`Note removed by 'isomorphic-git removeNote'
`,author:a,committer:o,signingKey:c})}async function Qre({fs:t,onSign:e,dir:r,gitdir:n=X(r,".git"),ref:i="refs/notes/commits",oid:s,author:a,committer:o,signingKey:c,cache:l={}}){try{B("fs",t),B("gitdir",n),B("oid",s);const u=new he(t),h=await pa({fs:u,gitdir:n,author:a});if(!h)throw new wr("author");const p=await ru({fs:u,gitdir:n,author:h,committer:o});if(!p)throw new wr("committer");return await Yre({fs:u,cache:l,onSign:e,gitdir:n,ref:i,oid:s,author:h,committer:p,signingKey:c})}catch(u){throw u.caller="git.removeNote",u}}async function Xre({fs:t,gitdir:e,oldref:r,ref:n,checkout:i=!1}){if(n!==Mn.clean(n))throw new pi(n,Mn.clean(n));if(r!==Mn.clean(r))throw new pi(r,Mn.clean(r));const s=`refs/heads/${r}`,a=`refs/heads/${n}`;if(await te.exists({fs:t,gitdir:e,ref:a}))throw new _n("branch",n,!1);const c=await te.resolve({fs:t,gitdir:e,ref:s,depth:1});await te.writeRef({fs:t,gitdir:e,ref:a,value:c}),await te.deleteRef({fs:t,gitdir:e,ref:s});const u=await ma({fs:t,gitdir:e,fullname:!0})===s;(i||u)&&await te.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:a})}async function Jre({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n,oldref:i,checkout:s=!1}){try{return B("fs",t),B("gitdir",r),B("ref",n),B("oldref",i),await Xre({fs:new he(t),gitdir:r,ref:n,oldref:i,checkout:s})}catch(a){throw a.caller="git.renameBranch",a}}async function dA({gitdir:t,type:e,object:r}){return fi(Uo.wrap({type:e,object:r}))}async function Zre({fs:t,dir:e,gitdir:r=X(e,".git"),filepath:n,ref:i,cache:s={}}){try{B("fs",t),B("gitdir",r),B("filepath",n);const a=new he(t);let o,c;try{o=await te.resolve({fs:a,gitdir:r,ref:i||"HEAD"})}catch(h){if(i)throw h}if(o)try{o=await tu({fs:a,cache:s,gitdir:r,oid:o,filepath:n})}catch{o=null}let l={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const u=e&&await a.read(X(e,n));u&&(c=await dA({gitdir:r,type:"blob",object:u}),o===c&&(l=await a.lstat(X(e,n)))),await Jt.acquire({fs:a,gitdir:r,cache:s},async function(h){h.delete({filepath:n}),o&&h.insert({filepath:n,stats:l,oid:o})})}catch(a){throw a.caller="git.reset",a}}async function ene({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n,depth:i}){try{return B("fs",t),B("gitdir",r),B("ref",n),await te.resolve({fs:new he(t),gitdir:r,ref:n,depth:i})}catch(s){throw s.caller="git.resolveRef",s}}async function tne({fs:t,dir:e,gitdir:r=X(e,".git"),path:n,value:i,append:s=!1}){try{B("fs",t),B("gitdir",r),B("path",n);const a=new he(t),o=await Ut.get({fs:a,gitdir:r});s?await o.append(n,i):await o.set(n,i),await Ut.save({fs:a,gitdir:r,config:o})}catch(a){throw a.caller="git.setConfig",a}}async function rne({fs:t,dir:e,gitdir:r=X(e,".git"),filepath:n,cache:i={}}){try{B("fs",t),B("gitdir",r),B("filepath",n);const s=new he(t);if(await lf.isIgnored({fs:s,gitdir:r,dir:e,filepath:n}))return"ignored";const o=await nne({fs:s,cache:i,gitdir:r}),c=await hA({fs:s,cache:i,gitdir:r,tree:o,path:n}),l=await Jt.acquire({fs:s,gitdir:r,cache:i},async function(g){for(const y of g)if(y.path===n)return y;return null}),u=await s.lstat(X(e,n)),h=c!==null,p=l!==null,f=u!==null,m=async()=>{if(p&&!Hd(l,u))return l.oid;{const g=await s.read(X(e,n)),y=await dA({gitdir:r,type:"blob",object:g});return p&&l.oid===y&&u.size!==-1&&Jt.acquire({fs:s,gitdir:r,cache:i},async function(v){v.insert({filepath:n,stats:u,oid:y})}),y}};if(!h&&!f&&!p)return"absent";if(!h&&!f&&p)return"*absent";if(!h&&f&&!p)return"*added";if(!h&&f&&p)return await m()===l.oid?"added":"*added";if(h&&!f&&!p)return"deleted";if(h&&!f&&p)return c===l.oid,"*deleted";if(h&&f&&!p)return await m()===c?"*undeleted":"*undeletemodified";if(h&&f&&p){const g=await m();return g===c?g===l.oid?"unmodified":"*unmodified":g===l.oid?"modified":"*modified"}}catch(s){throw s.caller="git.status",s}}async function hA({fs:t,cache:e,gitdir:r,tree:n,path:i}){typeof i=="string"&&(i=i.split("/"));const s=i.shift();for(const a of n)if(a.path===s){if(i.length===0)return a.oid;const{type:o,object:c}=await St({fs:t,cache:e,gitdir:r,oid:a.oid});if(o==="tree"){const l=kr.from(c);return hA({fs:t,cache:e,gitdir:r,tree:l,path:i})}if(o==="blob")throw new br(a.oid,o,"blob",i.join("/"))}return null}async function nne({fs:t,cache:e,gitdir:r}){let n;try{n=await te.resolve({fs:t,gitdir:r,ref:"HEAD"})}catch(s){if(s instanceof mt)return[]}const{tree:i}=await qo({fs:t,cache:e,gitdir:r,oid:n});return i}async function ine({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n="HEAD",filepaths:i=["."],filter:s,cache:a={},ignored:o=!1}){try{B("fs",t),B("gitdir",r),B("ref",n);const c=new he(t);return await co({fs:c,cache:a,dir:e,gitdir:r,trees:[Ji({ref:n}),cf(),of()],map:async function(l,[u,h,p]){if(!u&&!p&&h&&!o&&await lf.isIgnored({fs:c,dir:e,filepath:l})||!i.some(O=>W$(l,O)))return null;if(s&&!s(l))return;const[f,m,g]=await Promise.all([u&&u.type(),h&&h.type(),p&&p.type()]),y=[f,m,g].includes("blob");if((f==="tree"||f==="special")&&!y)return;if(f==="commit")return null;if((m==="tree"||m==="special")&&!y)return;if(g==="commit")return null;if((g==="tree"||g==="special")&&!y)return;const v=f==="blob"?await u.oid():void 0,w=g==="blob"?await p.oid():void 0;let $;f!=="blob"&&m==="blob"&&g!=="blob"?$="42":m==="blob"&&($=await h.oid());const A=[void 0,v,$,w],P=A.map(O=>A.indexOf(O));return P.shift(),[l,...P]}})}catch(c){throw c.caller="git.statusMatrix",c}}async function sne({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n,object:i,force:s=!1}){try{B("fs",t),B("gitdir",r),B("ref",n);const a=new he(t);if(n===void 0)throw new Vr("ref");n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`;const o=await te.resolve({fs:a,gitdir:r,ref:i||"HEAD"});if(!s&&await te.exists({fs:a,gitdir:r,ref:n}))throw new _n("tag",n);await te.writeRef({fs:a,gitdir:r,ref:n,value:o})}catch(a){throw a.caller="git.tag",a}}async function ane({fs:t,dir:e,gitdir:r=X(e,".git"),cache:n={},filepath:i,oid:s,mode:a,add:o,remove:c,force:l}){try{B("fs",t),B("gitdir",r),B("filepath",i);const u=new he(t);if(c)return await Jt.acquire({fs:u,gitdir:r,cache:n},async function(p){let f;if(!l&&(f=await u.lstat(X(e,i)),f)){if(f.isDirectory())throw new fs("directory");return}p.has({filepath:i})&&p.delete({filepath:i})});let h;if(!s){if(h=await u.lstat(X(e,i)),!h)throw new mt(`file at "${i}" on disk and "remove" not set`);if(h.isDirectory())throw new fs("directory")}return await Jt.acquire({fs:u,gitdir:r,cache:n},async function(p){if(!o&&!p.has({filepath:i}))throw new mt(`file at "${i}" in index and "add" not set`);let f={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:a,uid:0,gid:0,size:0};if(!s){f=h;const m=f.isSymbolicLink()?await u.readlink(X(e,i)):await u.read(X(e,i));s=await Br({fs:u,gitdir:r,type:"blob",format:"content",object:m})}return p.insert({filepath:i,oid:s,stats:f}),s})}catch(u){throw u.caller="git.updateIndex",u}}function one(){try{return hf.version}catch(t){throw t.caller="git.version",t}}async function cne({fs:t,dir:e,gitdir:r=X(e,".git"),trees:n,map:i,reduce:s,iterate:a,cache:o={}}){try{return B("fs",t),B("gitdir",r),B("trees",n),await co({fs:new he(t),cache:o,dir:e,gitdir:r,trees:n,map:i,reduce:s,iterate:a})}catch(c){throw c.caller="git.walk",c}}async function lne({fs:t,dir:e,gitdir:r=X(e,".git"),blob:n}){try{return B("fs",t),B("gitdir",r),B("blob",n),await Br({fs:new he(t),gitdir:r,type:"blob",object:n,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function une({fs:t,gitdir:e,commit:r}){const n=wt.from(r).toObject();return await Br({fs:t,gitdir:e,type:"commit",object:n,format:"content"})}async function dne({fs:t,dir:e,gitdir:r=X(e,".git"),commit:n}){try{return B("fs",t),B("gitdir",r),B("commit",n),await une({fs:new he(t),gitdir:r,commit:n})}catch(i){throw i.caller="git.writeCommit",i}}async function hne({fs:t,dir:e,gitdir:r=X(e,".git"),type:n,object:i,format:s="parsed",oid:a,encoding:o=void 0}){try{const c=new he(t);if(s==="parsed"){switch(n){case"commit":i=wt.from(i).toObject();break;case"tree":i=kr.from(i).toObject();break;case"blob":i=oe.from(i,o);break;case"tag":i=_r.from(i).toObject();break;default:throw new br(a||"",n,"blob|commit|tag|tree")}s="content"}return a=await Br({fs:c,gitdir:r,type:n,object:i,oid:a,format:s}),a}catch(c){throw c.caller="git.writeObject",c}}async function fne({fs:t,dir:e,gitdir:r=X(e,".git"),ref:n,value:i,force:s=!1,symbolic:a=!1}){try{B("fs",t),B("gitdir",r),B("ref",n),B("value",i);const o=new he(t);if(n!==Mn.clean(n))throw new pi(n,Mn.clean(n));if(!s&&await te.exists({fs:o,gitdir:r,ref:n}))throw new _n("ref",n);a?await te.writeSymbolicRef({fs:o,gitdir:r,ref:n,value:i}):(i=await te.resolve({fs:o,gitdir:r,ref:i}),await te.writeRef({fs:o,gitdir:r,ref:n,value:i}))}catch(o){throw o.caller="git.writeRef",o}}async function pne({fs:t,gitdir:e,tag:r}){const n=_r.from(r).toObject();return await Br({fs:t,gitdir:e,type:"tag",object:n,format:"content"})}async function mne({fs:t,dir:e,gitdir:r=X(e,".git"),tag:n}){try{return B("fs",t),B("gitdir",r),B("tag",n),await pne({fs:new he(t),gitdir:r,tag:n})}catch(i){throw i.caller="git.writeTag",i}}async function gne({fs:t,dir:e,gitdir:r=X(e,".git"),tree:n}){try{return B("fs",t),B("gitdir",r),B("tree",n),await cv({fs:new he(t),gitdir:r,tree:n})}catch(i){throw i.caller="git.writeTree",i}}var ei={Errors:Qee,STAGE:of,TREE:Ji,WORKDIR:cf,add:mte,abortMerge:ute,addNote:yte,addRemote:vte,annotatedTag:wte,branch:Ete,checkout:Ite,clone:Dte,commit:Fte,getConfig:nre,getConfigAll:sre,setConfig:tne,currentBranch:Mte,deleteBranch:Lte,deleteRef:Vte,deleteRemote:Bte,deleteTag:qte,expandOid:Wte,expandRef:Yte,fastForward:Zte,fetch:ere,findMergeBase:tre,findRoot:rre,getRemoteInfo:are,getRemoteInfo2:ore,hashBlob:lre,indexPack:dre,init:hre,isDescendent:fre,isIgnored:pre,listBranches:mre,listFiles:yre,listNotes:_re,listRemotes:bre,listServerRefs:Ire,listTags:Tre,log:Cre,merge:xre,packObjects:Ore,pull:Nre,push:Lre,readBlob:Vre,readCommit:Ure,readNote:zre,readObject:qre,readTag:Kre,readTree:Gre,remove:Wre,removeNote:Qre,renameBranch:Jre,resetIndex:Zre,updateIndex:ane,resolveRef:ene,status:rne,statusMatrix:ine,tag:sne,version:one,walk:cne,writeBlob:lne,writeCommit:dne,writeObject:hne,writeRef:fne,writeTag:mne,writeTree:gne};function yne(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function vne(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:yne(t)}async function _ne(t,e){const r=vne(t);for(;;){const{value:n,done:i}=await r.next();if(n&&await e(n),i)break}r.return&&r.return()}async function wne(t){let e=0;const r=[];await _ne(t,s=>{r.push(s),e+=s.byteLength});const n=new Uint8Array(e);let i=0;for(const s of r)n.set(s,i),i+=s.byteLength,console.log(i);return n}function bne(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next(){return e.read()},return(){return e.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function fA({onProgress:t,url:e,method:r="GET",headers:n={},body:i}){i&&(i=await wne(i));const s=await fetch(e,{method:r,headers:n,body:i}),a=s.headers.get("content-length"),o=parseInt(a,10);let c=0;const l=new Response(new ReadableStream({async start(h){const p=s.body.getReader();for(;;){const{done:f,value:m}=await p.read();if(f)break;c+=m.byteLength,fA.onProgress({loaded:c,total:o}),h.enqueue(m)}h.close()}})),u=s.body&&s.body.getReader?bne(l.body):[new Uint8Array(await s.arrayBuffer())];n={};for(const[h,p]of s.headers.entries())n[h]=p;return{url:s.url,method:s.method,statusCode:s.status,statusMessage:s.statusText,body:u,headers:n}}var bc={request:fA},Ene=Sne;function Sne(t){var e,r;if(typeof t!="function")throw new Error("expected a function but got "+t);return function(){return e||(e=!0,r=t.apply(this,arguments)),r}}(function(t){function e(v,w){var $;return v instanceof oe?$=v:$=oe.from(v.buffer,v.byteOffset,v.byteLength),$.toString(w)}var r=function(v){return oe.from(v)};function n(v){for(var w=0,$=Math.min(256*256,v.length+1),A=new Uint16Array($),P=[],O=0;;){var E=w<v.length;if(!E||O>=$-1){var b=A.subarray(0,O),I=b;if(P.push(String.fromCharCode.apply(null,I)),!E)return P.join("");v=v.subarray(w),w=0,O=0}var T=v[w++];if(!(T&128))A[O++]=T;else if((T&224)===192){var C=v[w++]&63;A[O++]=(T&31)<<6|C}else if((T&240)===224){var C=v[w++]&63,R=v[w++]&63;A[O++]=(T&31)<<12|C<<6|R}else if((T&248)===240){var C=v[w++]&63,R=v[w++]&63,x=v[w++]&63,Q=(T&7)<<18|C<<12|R<<6|x;Q>65535&&(Q-=65536,A[O++]=Q>>>10&1023|55296,Q=56320|Q&1023),A[O++]=Q}}}function i(v){for(var w=0,$=v.length,A=0,P=Math.max(32,$+($>>>1)+7),O=new Uint8Array(P>>>3<<3);w<$;){var E=v.charCodeAt(w++);if(E>=55296&&E<=56319){if(w<$){var b=v.charCodeAt(w);(b&64512)===56320&&(++w,E=((E&1023)<<10)+(b&1023)+65536)}if(E>=55296&&E<=56319)continue}if(A+4>O.length){P+=8,P*=1+w/v.length*2,P=P>>>3<<3;var I=new Uint8Array(P);I.set(O),O=I}if(E&4294967168)if(!(E&4294965248))O[A++]=E>>>6&31|192;else if(!(E&4294901760))O[A++]=E>>>12&15|224,O[A++]=E>>>6&63|128;else if(!(E&4292870144))O[A++]=E>>>18&7|240,O[A++]=E>>>12&63|128,O[A++]=E>>>6&63|128;else continue;else{O[A++]=E;continue}O[A++]=E&63|128}return O.slice?O.slice(0,A):O.subarray(0,A)}var s="Failed to ",a=function(v,w,$){if(v)throw new Error("".concat(s).concat(w,": the '").concat($,"' option is unsupported."))},o=typeof oe=="function"&&oe.from,c=o?r:i;function l(){this.encoding="utf-8"}l.prototype.encode=function(v,w){return a(w&&w.stream,"encode","stream"),c(v)};function u(v){var w;try{var $=new Blob([v],{type:"text/plain;charset=UTF-8"});w=URL.createObjectURL($);var A=new XMLHttpRequest;return A.open("GET",w,!1),A.send(),A.responseText}finally{w&&URL.revokeObjectURL(w)}}var h=!o&&typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function",p=["utf-8","utf8","unicode-1-1-utf-8"],f=n;o?f=e:h&&(f=function(v){try{return u(v)}catch{return n(v)}});var m="construct 'TextDecoder'",g="".concat(s," ").concat(m,": the ");function y(v,w){a(w&&w.fatal,m,"fatal"),v=v||"utf-8";var $;if(o?$=oe.isEncoding(v):$=p.indexOf(v.toLowerCase())!==-1,!$)throw new RangeError("".concat(g," encoding label provided ('").concat(v,"') is invalid."));this.encoding=v,this.fatal=!1,this.ignoreBOM=!1}y.prototype.decode=function(v,w){a(w&&w.stream,"decode","stream");var $;return v instanceof Uint8Array?$=v:v.buffer instanceof ArrayBuffer?$=new Uint8Array(v.buffer):$=new Uint8Array(v),f($,this.encoding)},t.TextEncoder=t.TextEncoder||l,t.TextDecoder=t.TextDecoder||y})(typeof window<"u"?window:typeof un<"u"?un:un);var Ine={encode:t=>new TextEncoder().encode(t),decode:t=>new TextDecoder().decode(t)},Tne=$ne;function $ne(t,e,r){var n;return function(){if(!e)return t.apply(this,arguments);var i=this,s=arguments,a=r&&!n;if(clearTimeout(n),n=setTimeout(function(){if(n=null,!a)return t.apply(i,s)},e),a)return t.apply(this,arguments)}}function pA(t){if(t.length===0)return".";let e=mA(t);return e=e.reduce(xne,[]),hv(...e)}function Ane(...t){let e="";for(let r of t)r.startsWith("/")?e=r:e=pA(hv(e,r));return e}function hv(...t){if(t.length===0)return"";let e=t.join("/");return e=e.replace(/\/{2,}/g,"/"),e}function mA(t){if(t.length===0)return[];if(t==="/")return["/"];let e=t.split("/");return e[e.length-1]===""&&e.pop(),t[0]==="/"?e[0]="/":e[0]!=="."&&e.unshift("."),e}function Pne(t){const e=t.lastIndexOf("/");if(e===-1)throw new Error(`Cannot get dirname of "${t}"`);return e===0?"/":t.slice(0,e)}function Cne(t){if(t==="/")throw new Error(`Cannot get basename of "${t}"`);const e=t.lastIndexOf("/");return e===-1?t:t.slice(e+1)}function xne(t,e){if(t.length===0)return t.push(e),t;if(e===".")return t;if(e===".."){if(t.length===1){if(t[0]==="/")throw new Error("Unable to normalize path - traverses above root directory");if(t[0]===".")return t.push(e),t}return t[t.length-1]===".."?(t.push(".."),t):(t.pop(),t)}return t.push(e),t}var fv={join:hv,normalize:pA,split:mA,basename:Cne,dirname:Pne,resolve:Ane};function iu(t){return class extends Error{constructor(...e){super(...e),this.code=t,this.message?this.message=t+": "+this.message:this.message=t}}}const kne=iu("EEXIST"),Rne=iu("ENOENT"),One=iu("ENOTDIR"),Nne=iu("ENOTEMPTY"),Dne=iu("ETIMEDOUT");var gA={EEXIST:kne,ENOENT:Rne,ENOTDIR:One,ENOTEMPTY:Nne,ETIMEDOUT:Dne};const pr=fv,{EEXIST:Kb,ENOENT:Fne,ENOTDIR:Gb,ENOTEMPTY:Mne}=gA,sr=0;var jne=class{constructor(){}_makeRoot(e=new Map){return e.set(sr,{mode:511,type:"dir",size:0,ino:0,mtimeMs:Date.now()}),e}activate(e=null){e===null?this._root=new Map([["/",this._makeRoot()]]):typeof e=="string"?this._root=new Map([["/",this._makeRoot(this.parse(e))]]):this._root=e}get activated(){return!!this._root}deactivate(){this._root=void 0}size(){return this._countInodes(this._root.get("/"))-1}_countInodes(e){let r=1;for(let[n,i]of e)n!==sr&&(r+=this._countInodes(i));return r}autoinc(){return this._maxInode(this._root.get("/"))+1}_maxInode(e){let r=e.get(sr).ino;for(let[n,i]of e)n!==sr&&(r=Math.max(r,this._maxInode(i)));return r}print(e=this._root.get("/")){let r="";const n=(i,s)=>{for(let[a,o]of i){if(a===0)continue;let c=o.get(sr),l=c.mode.toString(8);r+=`${"	".repeat(s)}${a}	${l}`,c.type==="file"?r+=`	${c.size}	${c.mtimeMs}
`:(r+=`
`,n(o,s+1))}};return n(e,0),r}parse(e){let r=0;function n(o){const c=++r,l=o.length===1?"dir":"file";let[u,h,p]=o;return u=parseInt(u,8),h=h?parseInt(h):0,p=p?parseInt(p):Date.now(),new Map([[sr,{mode:u,type:l,size:h,mtimeMs:p,ino:c}]])}let i=e.trim().split(`
`),s=this._makeRoot(),a=[{indent:-1,node:s},{indent:0,node:null}];for(let o of i){let l=o.match(/^\t*/)[0].length;o=o.slice(l);let[u,...h]=o.split("	"),p=n(h);if(l<=a[a.length-1].indent)for(;l<=a[a.length-1].indent;)a.pop();a.push({indent:l,node:p}),a[a.length-2].node.set(u,p)}return s}_lookup(e,r=!0){let n=this._root,i="/",s=pr.split(e);for(let a=0;a<s.length;++a){let o=s[a];if(n=n.get(o),!n)throw new Fne(e);if(r||a<s.length-1){const c=n.get(sr);if(c.type==="symlink"){let l=pr.resolve(i,c.target);n=this._lookup(l)}i?i=pr.join(i,o):i=o}}return n}mkdir(e,{mode:r}){if(e==="/")throw new Kb;let n=this._lookup(pr.dirname(e)),i=pr.basename(e);if(n.has(i))throw new Kb;let s=new Map,a={mode:r,type:"dir",size:0,mtimeMs:Date.now(),ino:this.autoinc()};s.set(sr,a),n.set(i,s)}rmdir(e){let r=this._lookup(e);if(r.get(sr).type!=="dir")throw new Gb;if(r.size>1)throw new Mne;let n=this._lookup(pr.dirname(e)),i=pr.basename(e);n.delete(i)}readdir(e){let r=this._lookup(e);if(r.get(sr).type!=="dir")throw new Gb;return[...r.keys()].filter(n=>typeof n=="string")}writeStat(e,r,{mode:n}){let i;try{let l=this.stat(e);n==null&&(n=l.mode),i=l.ino}catch{}n==null&&(n=438),i==null&&(i=this.autoinc());let s=this._lookup(pr.dirname(e)),a=pr.basename(e),o={mode:n,type:"file",size:r,mtimeMs:Date.now(),ino:i},c=new Map;return c.set(sr,o),s.set(a,c),o}unlink(e){let r=this._lookup(pr.dirname(e)),n=pr.basename(e);r.delete(n)}rename(e,r){let n=pr.basename(r),i=this._lookup(e);this._lookup(pr.dirname(r)).set(n,i),this.unlink(e)}stat(e){return this._lookup(e).get(sr)}lstat(e){return this._lookup(e,!1).get(sr)}readlink(e){return this._lookup(e,!1).get(sr).target}symlink(e,r){let n,i;try{let l=this.stat(r);i===null&&(i=l.mode),n=l.ino}catch{}i==null&&(i=40960),n==null&&(n=this.autoinc());let s=this._lookup(pr.dirname(r)),a=pr.basename(r),o={mode:i,type:"symlink",target:e,size:0,mtimeMs:Date.now(),ino:n},c=new Map;return c.set(sr,o),s.set(a,c),o}_du(e){let r=0;for(const[n,i]of e.entries())n===sr?r+=i.size:r+=this._du(i);return r}du(e){let r=this._lookup(e);return this._du(r)}};class yA{constructor(e="keyval-store",r="keyval"){this.storeName=r,this._dbName=e,this._storeName=r,this._init()}_init(){this._dbp||(this._dbp=new Promise((e,r)=>{const n=indexedDB.open(this._dbName);n.onerror=()=>r(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{n.result.createObjectStore(this._storeName)}}))}_withIDBStore(e,r){return this._init(),this._dbp.then(n=>new Promise((i,s)=>{const a=n.transaction(this.storeName,e);a.oncomplete=()=>i(),a.onabort=a.onerror=()=>s(a.error),r(a.objectStore(this.storeName))}))}_close(){return this._init(),this._dbp.then(e=>{e.close(),this._dbp=void 0})}}let Ap;function ga(){return Ap||(Ap=new yA),Ap}function Lne(t,e=ga()){let r;return e._withIDBStore("readwrite",n=>{r=n.get(t)}).then(()=>r.result)}function Vne(t,e,r=ga()){return r._withIDBStore("readwrite",n=>{n.put(e,t)})}function Une(t,e,r=ga()){return r._withIDBStore("readwrite",n=>{const i=n.get(t);i.onsuccess=()=>{n.put(e(i.result),t)}})}function Bne(t,e=ga()){return e._withIDBStore("readwrite",r=>{r.delete(t)})}function zne(t=ga()){return t._withIDBStore("readwrite",e=>{e.clear()})}function qne(t=ga()){const e=[];return t._withIDBStore("readwrite",r=>{(r.openKeyCursor||r.openCursor).call(r).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}}).then(()=>e)}function Hne(t=ga()){return t._close()}const Kne=Object.freeze(Object.defineProperty({__proto__:null,Store:yA,clear:zne,close:Hne,del:Bne,get:Lne,keys:qne,set:Vne,update:Une},Symbol.toStringTag,{value:"Module"})),vA=ng(Kne),Fi=vA;var Gne=class{constructor(e,r){this._database=e,this._storename=r,this._store=new Fi.Store(this._database,this._storename)}saveSuperblock(e){return Fi.set("!root",e,this._store)}loadSuperblock(){return Fi.get("!root",this._store)}readFile(e){return Fi.get(e,this._store)}writeFile(e,r){return Fi.set(e,r,this._store)}unlink(e){return Fi.del(e,this._store)}wipe(){return Fi.clear(this._store)}close(){return Fi.close(this._store)}},Wne=class{constructor(e){this._url=e}loadSuperblock(){return fetch(this._url+"/.superblock.txt").then(e=>e.ok?e.text():null)}async readFile(e){const r=await fetch(this._url+e);if(r.status===200)return r.arrayBuffer();throw new Error("ENOENT")}async sizeFile(e){const r=await fetch(this._url+e,{method:"HEAD"});if(r.status===200)return r.headers.get("content-length");throw new Error("ENOENT")}};const Ec=vA,Yne=t=>new Promise(e=>setTimeout(e,t));var Qne=class{constructor(e,r){this._id=Math.random(),this._database=e,this._storename=r,this._store=new Ec.Store(this._database,this._storename),this._lock=null}async has({margin:e=2e3}={}){if(this._lock&&this._lock.holder===this._id){const r=Date.now();return this._lock.expires>r+e?!0:await this.renew()}else return!1}async renew({ttl:e=5e3}={}){let r;return await Ec.update("lock",n=>{const s=Date.now()+e;return r=n&&n.holder===this._id,this._lock=r?{holder:this._id,expires:s}:n,this._lock},this._store),r}async acquire({ttl:e=5e3}={}){let r,n,i;if(await Ec.update("lock",s=>{const a=Date.now(),o=a+e;return n=s&&s.expires<a,r=s===void 0||n,i=s&&s.holder===this._id,this._lock=r?{holder:this._id,expires:o}:s,this._lock},this._store),i)throw new Error("Mutex double-locked");return r}async wait({interval:e=100,limit:r=6e3,ttl:n}={}){for(;r--;){if(await this.acquire({ttl:n}))return!0;await Yne(e)}throw new Error("Mutex timeout")}async release({force:e=!1}={}){let r,n,i;if(await Ec.update("lock",s=>(r=e||s&&s.holder===this._id,n=s===void 0,i=s&&s.holder!==this._id,this._lock=r?void 0:s,this._lock),this._store),await Ec.close(this._store),!r&&!e){if(n)throw new Error("Mutex double-freed");if(i)throw new Error("Mutex lost ownership")}return r}},Xne=class{constructor(e){this._id=Math.random(),this._database=e,this._has=!1,this._release=null}async has(){return this._has}async acquire(){return new Promise(e=>{navigator.locks.request(this._database+"_lock",{ifAvailable:!0},r=>(this._has=!!r,e(!!r),new Promise(n=>{this._release=n})))})}async wait({timeout:e=6e5}={}){return new Promise((r,n)=>{const i=new AbortController;setTimeout(()=>{i.abort(),n(new Error("Mutex timeout"))},e),navigator.locks.request(this._database+"_lock",{signal:i.signal},s=>(this._has=!!s,r(!!s),new Promise(a=>{this._release=a})))})}async release({force:e=!1}={}){this._has=!1,this._release?this._release():e&&navigator.locks.request(this._database+"_lock",{steal:!0},r=>!0)}};const{encode:Jne,decode:Wb}=Ine,Zne=Tne,eie=jne,{ENOENT:tie,ENOTEMPTY:rie,ETIMEDOUT:nie}=gA,iie=Gne,sie=Wne,aie=Qne,oie=Xne,Sc=fv;var cie=class{constructor(){this.saveSuperblock=Zne(()=>{this.flush()},500)}async init(e,{wipe:r,url:n,urlauto:i,fileDbName:s=e,db:a=null,fileStoreName:o=e+"_files",lockDbName:c=e+"_lock",lockStoreName:l=e+"_lock"}={}){this._name=e,this._idb=a||new iie(s,o),this._mutex=navigator.locks?new oie(e):new aie(c,l),this._cache=new eie(e),this._opts={wipe:r,url:n},this._needsWipe=!!r,n&&(this._http=new sie(n),this._urlauto=!!i)}async activate(){if(this._cache.activated)return;this._needsWipe&&(this._needsWipe=!1,await this._idb.wipe(),await this._mutex.release({force:!0})),await this._mutex.has()||await this._mutex.wait();const e=await this._idb.loadSuperblock();if(e)this._cache.activate(e);else if(this._http){const r=await this._http.loadSuperblock();this._cache.activate(r),await this._saveSuperblock()}else this._cache.activate();if(!await this._mutex.has())throw new nie}async deactivate(){await this._mutex.has()&&await this._saveSuperblock(),this._cache.deactivate();try{await this._mutex.release()}catch(e){console.log(e)}await this._idb.close()}async _saveSuperblock(){this._cache.activated&&(this._lastSavedAt=Date.now(),await this._idb.saveSuperblock(this._cache._root))}_writeStat(e,r,n){let i=Sc.split(Sc.dirname(e)),s=i.shift();for(let a of i){s=Sc.join(s,a);try{this._cache.mkdir(s,{mode:511})}catch{}}return this._cache.writeStat(e,r,n)}async readFile(e,r){const{encoding:n}=r;if(n&&n!=="utf8")throw new Error('Only "utf8" encoding is supported in readFile');let i=null,s=null;try{s=this._cache.stat(e),i=await this._idb.readFile(s.ino)}catch(a){if(!this._urlauto)throw a}if(!i&&this._http){let a=this._cache.lstat(e);for(;a.type==="symlink";)e=Sc.resolve(Sc.dirname(e),a.target),a=this._cache.lstat(e);i=await this._http.readFile(e)}if(i&&((!s||s.size!=i.byteLength)&&(s=await this._writeStat(e,i.byteLength,{mode:s?s.mode:438}),this.saveSuperblock()),n==="utf8"?i=Wb(i):i.toString=()=>Wb(i)),!s)throw new tie(e);return i}async writeFile(e,r,n){const{mode:i,encoding:s="utf8"}=n;if(typeof r=="string"){if(s!=="utf8")throw new Error('Only "utf8" encoding is supported in writeFile');r=Jne(r)}const a=await this._cache.writeStat(e,r.byteLength,{mode:i});await this._idb.writeFile(a.ino,r)}async unlink(e,r){const n=this._cache.lstat(e);this._cache.unlink(e),n.type!=="symlink"&&await this._idb.unlink(n.ino)}readdir(e,r){return this._cache.readdir(e)}mkdir(e,r){const{mode:n=511}=r;this._cache.mkdir(e,{mode:n})}rmdir(e,r){if(e==="/")throw new rie;this._cache.rmdir(e)}rename(e,r){this._cache.rename(e,r)}stat(e,r){return this._cache.stat(e)}lstat(e,r){return this._cache.lstat(e)}readlink(e,r){return this._cache.readlink(e)}symlink(e,r){this._cache.symlink(e,r)}async backFile(e,r){let n=await this._http.sizeFile(e);await this._writeStat(e,n,r)}du(e){return this._cache.du(e)}flush(){return this._saveSuperblock()}},lie=class{constructor(e){this.type=e.type,this.mode=e.mode,this.size=e.size,this.ino=e.ino,this.mtimeMs=e.mtimeMs,this.ctimeMs=e.ctimeMs||e.mtimeMs,this.uid=1,this.gid=1,this.dev=1}isFile(){return this.type==="file"}isDirectory(){return this.type==="dir"}isSymbolicLink(){return this.type==="symlink"}};const uie=cie,Yb=lie,Zd=fv;function Pn(t,e,...r){return t=Zd.normalize(t),(typeof e>"u"||typeof e=="function")&&(e={}),typeof e=="string"&&(e={encoding:e}),[t,e,...r]}function die(t,e,r,...n){return t=Zd.normalize(t),(typeof r>"u"||typeof r=="function")&&(r={}),typeof r=="string"&&(r={encoding:r}),[t,e,r,...n]}function Qb(t,e,...r){return[Zd.normalize(t),Zd.normalize(e),...r]}var hie=class{constructor(e,r={}){this.init=this.init.bind(this),this.readFile=this._wrap(this.readFile,Pn,!1),this.writeFile=this._wrap(this.writeFile,die,!0),this.unlink=this._wrap(this.unlink,Pn,!0),this.readdir=this._wrap(this.readdir,Pn,!1),this.mkdir=this._wrap(this.mkdir,Pn,!0),this.rmdir=this._wrap(this.rmdir,Pn,!0),this.rename=this._wrap(this.rename,Qb,!0),this.stat=this._wrap(this.stat,Pn,!1),this.lstat=this._wrap(this.lstat,Pn,!1),this.readlink=this._wrap(this.readlink,Pn,!1),this.symlink=this._wrap(this.symlink,Qb,!0),this.backFile=this._wrap(this.backFile,Pn,!0),this.du=this._wrap(this.du,Pn,!1),this._deactivationPromise=null,this._deactivationTimeout=null,this._activationPromise=null,this._operations=new Set,e&&this.init(e,r)}async init(...e){return this._initPromiseResolve&&await this._initPromise,this._initPromise=this._init(...e),this._initPromise}async _init(e,r={}){await this._gracefulShutdown(),this._activationPromise&&await this._deactivate(),this._backend&&this._backend.destroy&&await this._backend.destroy(),this._backend=r.backend||new uie,this._backend.init&&await this._backend.init(e,r),this._initPromiseResolve&&(this._initPromiseResolve(),this._initPromiseResolve=null),r.defer||this.stat("/")}async _gracefulShutdown(){this._operations.size>0&&(this._isShuttingDown=!0,await new Promise(e=>this._gracefulShutdownResolve=e),this._isShuttingDown=!1,this._gracefulShutdownResolve=null)}_wrap(e,r,n){return async(...i)=>{i=r(...i);let s={name:e.name,args:i};this._operations.add(s);try{return await this._activate(),await e.apply(this,i)}finally{this._operations.delete(s),n&&this._backend.saveSuperblock(),this._operations.size===0&&(this._deactivationTimeout||clearTimeout(this._deactivationTimeout),this._deactivationTimeout=setTimeout(this._deactivate.bind(this),500))}}}async _activate(){this._initPromise||console.warn(new Error(`Attempted to use LightningFS ${this._name} before it was initialized.`)),await this._initPromise,this._deactivationTimeout&&(clearTimeout(this._deactivationTimeout),this._deactivationTimeout=null),this._deactivationPromise&&await this._deactivationPromise,this._deactivationPromise=null,this._activationPromise||(this._activationPromise=this._backend.activate?this._backend.activate():Promise.resolve()),await this._activationPromise}async _deactivate(){return this._activationPromise&&await this._activationPromise,this._deactivationPromise||(this._deactivationPromise=this._backend.deactivate?this._backend.deactivate():Promise.resolve()),this._activationPromise=null,this._gracefulShutdownResolve&&this._gracefulShutdownResolve(),this._deactivationPromise}async readFile(e,r){return this._backend.readFile(e,r)}async writeFile(e,r,n){return await this._backend.writeFile(e,r,n),null}async unlink(e,r){return await this._backend.unlink(e,r),null}async readdir(e,r){return this._backend.readdir(e,r)}async mkdir(e,r){return await this._backend.mkdir(e,r),null}async rmdir(e,r){return await this._backend.rmdir(e,r),null}async rename(e,r){return await this._backend.rename(e,r),null}async stat(e,r){const n=await this._backend.stat(e,r);return new Yb(n)}async lstat(e,r){const n=await this._backend.lstat(e,r);return new Yb(n)}async readlink(e,r){return this._backend.readlink(e,r)}async symlink(e,r){return await this._backend.symlink(e,r),null}async backFile(e,r){return await this._backend.backFile(e,r),null}async du(e){return this._backend.du(e)}async flush(){return this._backend.flush()}};const fie=Ene,pie=hie;function Ir(t,e){return typeof t=="function"&&(e=t),e=fie(e),[(...n)=>e(null,...n),e]}var mie=class{constructor(...e){this.promises=new pie(...e),this.init=this.init.bind(this),this.readFile=this.readFile.bind(this),this.writeFile=this.writeFile.bind(this),this.unlink=this.unlink.bind(this),this.readdir=this.readdir.bind(this),this.mkdir=this.mkdir.bind(this),this.rmdir=this.rmdir.bind(this),this.rename=this.rename.bind(this),this.stat=this.stat.bind(this),this.lstat=this.lstat.bind(this),this.readlink=this.readlink.bind(this),this.symlink=this.symlink.bind(this),this.backFile=this.backFile.bind(this),this.du=this.du.bind(this),this.flush=this.flush.bind(this)}init(e,r){return this.promises.init(e,r)}readFile(e,r,n){const[i,s]=Ir(r,n);this.promises.readFile(e,r).then(i).catch(s)}writeFile(e,r,n,i){const[s,a]=Ir(n,i);this.promises.writeFile(e,r,n).then(s).catch(a)}unlink(e,r,n){const[i,s]=Ir(r,n);this.promises.unlink(e,r).then(i).catch(s)}readdir(e,r,n){const[i,s]=Ir(r,n);this.promises.readdir(e,r).then(i).catch(s)}mkdir(e,r,n){const[i,s]=Ir(r,n);this.promises.mkdir(e,r).then(i).catch(s)}rmdir(e,r,n){const[i,s]=Ir(r,n);this.promises.rmdir(e,r).then(i).catch(s)}rename(e,r,n){const[i,s]=Ir(n);this.promises.rename(e,r).then(i).catch(s)}stat(e,r,n){const[i,s]=Ir(r,n);this.promises.stat(e).then(i).catch(s)}lstat(e,r,n){const[i,s]=Ir(r,n);this.promises.lstat(e).then(i).catch(s)}readlink(e,r,n){const[i,s]=Ir(r,n);this.promises.readlink(e).then(i).catch(s)}symlink(e,r,n){const[i,s]=Ir(n);this.promises.symlink(e,r).then(i).catch(s)}backFile(e,r,n){const[i,s]=Ir(r,n);this.promises.backFile(e,r).then(i).catch(s)}du(e,r){const[n,i]=Ir(r);this.promises.du(e).then(n).catch(i)}flush(e){const[r,n]=Ir(e);this.promises.flush().then(r).catch(n)}};const gie=Fe(mie);class yie extends gie{constructor(r){super(r);Ze(this,"name","fs");this.name=r}async wipe(){await this.init(this.name,{wipe:!0})}async writeFileSync(r,n){return await this.promises.writeFile(r,n)}async mkdirSync(r,n={}){return n.recursive?await this.mkdirRecursiveSync(r):await this.promises.mkdir(r)}async existsSync(r){try{if(await this.promises.stat(r))return!0}catch{console.log(`lfs: ${r} not found`)}return!1}async statSync(r){return await this.promises.stat(r)}async readFileSync(r){return await this.promises.readFile(r)}async unlinkSync(r){return await this.promises.unlink(r)}async readdirSync(r){return await this.promises.readdir(r)}}var eh={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */eh.exports;(function(t,e){(function(r){var n=e,i=t&&t.exports==n&&t,s=typeof un=="object"&&un;(s.global===s||s.window===s)&&(r=s);var a=function(m){this.message=m};a.prototype=new Error,a.prototype.name="InvalidCharacterError";var o=function(m){throw new a(m)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u=function(m){m=String(m).replace(l,"");var g=m.length;g%4==0&&(m=m.replace(/==?$/,""),g=m.length),(g%4==1||/[^+a-zA-Z0-9/]/.test(m))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var y=0,v,w,$="",A=-1;++A<g;)w=c.indexOf(m.charAt(A)),v=y%4?v*64+w:w,y++%4&&($+=String.fromCharCode(255&v>>(-2*y&6)));return $},h=function(m){m=String(m),/[^\0-\xFF]/.test(m)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var g=m.length%3,y="",v=-1,w,$,A,P,O=m.length-g;++v<O;)w=m.charCodeAt(v)<<16,$=m.charCodeAt(++v)<<8,A=m.charCodeAt(++v),P=w+$+A,y+=c.charAt(P>>18&63)+c.charAt(P>>12&63)+c.charAt(P>>6&63)+c.charAt(P&63);return g==2?(w=m.charCodeAt(v)<<8,$=m.charCodeAt(++v),P=w+$,y+=c.charAt(P>>10)+c.charAt(P>>4&63)+c.charAt(P<<2&63)+"="):g==1&&(P=m.charCodeAt(v),y+=c.charAt(P>>2)+c.charAt(P<<4&63)+"=="),y},p={encode:h,decode:u,version:"1.0.0"};if(n&&!n.nodeType)if(i)i.exports=p;else for(var f in p)p.hasOwnProperty(f)&&(n[f]=p[f]);else r.base64=p})(un)})(eh,eh.exports);var vie=eh.exports;const _ie=Fe(vie);function wie(t){let e="";const r=new Uint8Array(t),n=r.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(r[i]);return _ie.encode(e)}function _A(t,e=0){return wA(t,e,2).getUint16(0,!0)}function Xb(t,e=0){return wA(t,e,4).getUint32(0,!0)}function pv(t,e=0,r=t.byteLength){const n=t.slice(e,e+r);return bie.decode(new Uint8Array(n))}function Jb(t,e,r=0){if(t.length<e.length+r)return!1;for(const[n,i]of e.entries())if(i!==null&&i!==t[n+r])return!1;return!0}function wA(t,e,r){const n=t.slice(e,e+r);return new DataView(new Uint8Array(n).buffer)}const bie=new TextDecoder("utf8"),Om=[["db","application/vnd.sqlite3",[83,81,76,105,116,101,32,102,111,114,109,97,116,32,51,0]],["woff","font/woff",[119,79,70,70]],["woff2","font/woff2",[119,79,70,50]],["bmp","image/bmp",[66,77]],["gif","image/gif",[71,73,70,56,55,97]],["gif","image/gif",[71,73,70,56,57,97]],["heic","image/heic",[102,116,121,112,104,101,105],{offset:4}],["heic","image/heic",[102,116,121,112,109],{offset:4}],["ico","image/x-icon",[0,0,1,0]],["jpg","image/jpeg",[255,216,255]],["pdf","application/pdf",[37,80,68,70,45]],["png","image/png",[137,80,78,71,13,10,26,10]],["7z","application/x-7z-compressed",[55,122,188,175,39,28]],["rar","application/x-rar-compressed",[82,97,114,33,26,7,0]],["rar","application/x-rar-compressed",[82,97,114,33,26,7,1,0]],["rtf","application/rtf",[123,92,114,116,102,49]],["bz2","application/x-bzip2",[66,90,104]],["gz","application/gzip",[31,139]],["tar","application/x-tar",[117,115,116,97,114,0,48,48],{offset:257}],["tar","application/x-tar",[117,115,116,97,114,32,32,0],{offset:257}],["tif","image/tiff",[73,73,42,0]],["tiff","image/tiff",[77,77,0,42]],["zip","application/zip",[80,75,3,4],{exact:!1}],["zip","application/zip",[80,75,5,6]],["mp3","audio/mp3",[255,251]],["mp3","audio/mp3",[255,243]],["mp3","audio/mp3",[255,242]],["mp3","audio/mp3",[73,68,51]],["mp4","video/mp4",[102,116,121,112,105,115,111,109],{offset:4}],["avi","video/x-msvideo",[82,73,70,70,null,null,null,null,65,86,73,32]],["wav","audio/wav",[82,73,70,70,null,null,null,null,87,65,86,69]],["ogx","application/ogg",[79,103,103,83],{exact:!1},[["oga","audio/ogg",[127,70,76,65,67],{offset:28}],["ogg","audio/ogg",[1,118,111,114,98,105,115],{offset:28}],["ogm","video/ogg",[1,118,105,100,101,111,0],{offset:28}],["ogv","video/ogg",[128,116,104,101,111,114,97],{offset:28}]]],["webp","image/webp",[82,73,70,70,null,null,null,null,87,69,66,80]],["psd","image/vnd.adobe.photoshop",[56,66,80,83]],["flac","audio/x-flac",[102,76,97,67]],["wasm","application/wasm",[0,97,115,109]],["deb","application/x-deb",[33,60,97,114,99,104,62,10]],["exe","application/x-msdownload",[77,90]],["exe","application/x-msdownload",[90,77]],["class","application/java-vm",[202,254,186,190]]];function Eie(t){for(let e=0;e<t.length;e++)try{const r=t.charCodeAt(e);if(r===65533||r<=8)return!1}catch{return!1}return!0}function Sie(t){try{const e=pv(t);if(!Eie(e))return;try{return JSON.parse(e),{ext:"json",mime:"application/json"}}catch{return{ext:"txt",mime:"text/plain"}}}catch{return}}function Iie(t){return bA(t).map(([e,r,n,{offset:i=0}={}])=>n.length+i).reduce((e,r)=>r>e?r:e,0)}function bA(t){return t.flatMap(([e,r,n,i={},s=[]])=>[[e,r,n,i],...s])}function Tie(t,{ext:e,mime:r}){return e||r?bA(t).filter(n=>n[0]===e||n[1]===r):[]}function $ie(t,e){const r=_A(t,26),n=pv(t,30,r),[i]=n.split("/"),s=n.endsWith(".xml");return i==="META-INF"?{ext:"jar",mime:"application/java-archive"}:i==="ppt"&&s?{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:i==="word"&&s?{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:i==="xl"&&s?{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}:i==="mimetype"?Aie(t,r)??e:e}function Aie(t,e){const r=Xb(t,18),n=Xb(t,22),i=_A(t,28);if(r===n){const s=pv(t,30+e+i,r);if(s==="application/vnd.oasis.opendocument.presentation")return{ext:"odp",mime:s};if(s==="application/vnd.oasis.opendocument.spreadsheet")return{ext:"ods",mime:s};if(s==="application/vnd.oasis.opendocument.text")return{ext:"odt",mime:s};if(s==="application/epub+zip")return{ext:"epub",mime:s}}}const Pie=Iie(Om);function Cie(t,{extra:e=!1,hint:r}={}){const n=new Uint8Array(t.slice(0,Pie));if(r){const s=Tie(Om,r);if(s.length>0){const a=Zb(n,s);if(a!==void 0)return a}}const i=Zb(n,Om);if(i)return i;if(e)return xie(t)}function Zb(t,e){for(const[r,n,i,{exact:s=!0,offset:a=0}={},o=[]]of e)if(Jb(t,i,a)){if(r==="zip"&&!s)return $ie(t.buffer,{ext:r,mime:n});if(!s&&o.length){for(const[c,l,u,{offset:h=0}={}]of o)if(Jb(t,u,h))return{ext:c,mime:l}}return{ext:r,mime:n}}}function xie(t){return Sie(t)}function kie(t){const e=t.split(".").pop(),n={aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",cda:"application/x-cdf",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",mid:"audio/midi audio/x-midi",midi:"audio/midi audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"}[e]||"application/octet-stream";return{ext:e,mime:n}}const Xs=globalThis||void 0||self;var e1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Rie=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},SA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let p=(o&15)<<2|l>>6,f=l&63;c||(f=64,a||(p=64)),n.push(r[u],r[h],r[p],r[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rie(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const l=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||l==null||h==null)throw new Oie;const p=s<<2|o>>4;if(n.push(p),l!==64){const f=o<<4&240|l>>2;if(n.push(f),h!==64){const m=l<<6&192|h;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Oie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nie=function(t){const e=EA(t);return SA.encodeByteArray(e,!0)},th=function(t){return Nie(t).replace(/\./g,"")},IA=function(t){try{return SA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Die(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Xs<"u")return Xs;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fie=()=>Die().__FIREBASE_DEFAULTS__,Mie=()=>{if(typeof cn>"u"||typeof e1>"u")return;const t=e1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IA(t[1]);return e&&JSON.parse(e)},ff=()=>{try{return Fie()||Mie()||jie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TA=t=>{var e,r;return(r=(e=ff())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Lie=t=>{const e=TA(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},$A=()=>{var t;return(t=ff())===null||t===void 0?void 0:t.config},AA=t=>{var e;return(e=ff())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uie(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[th(JSON.stringify(r)),th(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function zie(){var t;const e=(t=ff())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(Xs.process)==="[object process]"}catch{return!1}}function qie(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hie(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kie(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Gie(){return!zie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wie(){try{return typeof indexedDB=="object"}catch{return!1}}function Yie(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie="FirebaseError";class wi extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Qie,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Xie(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new wi(i,o,n)}}function Xie(t,e){return t.replace(Jie,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Jie=/\{\$([^}]+)}/g;function Zie(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(t1(s)&&t1(a)){if(!rh(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function t1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ac(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Pc(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function ese(t,e){const r=new tse(t,e);return r.subscribe.bind(r)}class tse{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");rse(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Pp),i.error===void 0&&(i.error=Pp),i.complete===void 0&&(i.complete=Pp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rse(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){return t&&t._delegate?t._delegate:t}class Js{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Vie;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sse(e))try{this.getOrInitializeService({instanceIdentifier:xs})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xs){return this.instances.has(e)}getOptions(e=xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ise(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=xs){return this.component?this.component.multipleInstances?e:xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ise(t){return t===xs?void 0:t}function sse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ase{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new nse(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const ose={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},cse=Le.INFO,lse={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},use=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=lse[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mv{constructor(e){this.name=e,this._logLevel=cse,this._logHandler=use,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ose[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const dse=(t,e)=>e.some(r=>t instanceof r);let r1,n1;function hse(){return r1||(r1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fse(){return n1||(n1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PA=new WeakMap,Nm=new WeakMap,CA=new WeakMap,Cp=new WeakMap,gv=new WeakMap;function pse(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(ss(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&PA.set(r,t)}).catch(()=>{}),gv.set(e,t),e}function mse(t){if(Nm.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Nm.set(t,e)}let Dm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CA.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ss(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gse(t){Dm=t(Dm)}function yse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(xp(this),e,...r);return CA.set(n,e.sort?e.sort():[e]),ss(n)}:fse().includes(t)?function(...e){return t.apply(xp(this),e),ss(PA.get(this))}:function(...e){return ss(t.apply(xp(this),e))}}function vse(t){return typeof t=="function"?yse(t):(t instanceof IDBTransaction&&mse(t),dse(t,hse())?new Proxy(t,Dm):t)}function ss(t){if(t instanceof IDBRequest)return pse(t);if(Cp.has(t))return Cp.get(t);const e=vse(t);return e!==t&&(Cp.set(t,e),gv.set(e,t)),e}const xp=t=>gv.get(t);function _se(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=ss(a);return n&&a.addEventListener("upgradeneeded",c=>{n(ss(a.result),c.oldVersion,c.newVersion,ss(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const wse=["get","getKey","getAll","getAllKeys","count"],bse=["put","add","delete","clear"],kp=new Map;function i1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kp.get(e))return kp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=bse.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||wse.includes(r)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[r](...o),i&&c.done]))[0]};return kp.set(e,s),s}gse(t=>({...t,get:(e,r,n)=>i1(e,r)||t.get(e,r,n),has:(e,r)=>!!i1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ese{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Sse(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Sse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",s1="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new mv("@firebase/app"),Ise="@firebase/app-compat",Tse="@firebase/analytics-compat",$se="@firebase/analytics",Ase="@firebase/app-check-compat",Pse="@firebase/app-check",Cse="@firebase/auth",xse="@firebase/auth-compat",kse="@firebase/database",Rse="@firebase/database-compat",Ose="@firebase/functions",Nse="@firebase/functions-compat",Dse="@firebase/installations",Fse="@firebase/installations-compat",Mse="@firebase/messaging",jse="@firebase/messaging-compat",Lse="@firebase/performance",Vse="@firebase/performance-compat",Use="@firebase/remote-config",Bse="@firebase/remote-config-compat",zse="@firebase/storage",qse="@firebase/storage-compat",Hse="@firebase/firestore",Kse="@firebase/vertexai-preview",Gse="@firebase/firestore-compat",Wse="firebase",Yse="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",Qse={[Fm]:"fire-core",[Ise]:"fire-core-compat",[$se]:"fire-analytics",[Tse]:"fire-analytics-compat",[Pse]:"fire-app-check",[Ase]:"fire-app-check-compat",[Cse]:"fire-auth",[xse]:"fire-auth-compat",[kse]:"fire-rtdb",[Rse]:"fire-rtdb-compat",[Ose]:"fire-fn",[Nse]:"fire-fn-compat",[Dse]:"fire-iid",[Fse]:"fire-iid-compat",[Mse]:"fire-fcm",[jse]:"fire-fcm-compat",[Lse]:"fire-perf",[Vse]:"fire-perf-compat",[Use]:"fire-rc",[Bse]:"fire-rc-compat",[zse]:"fire-gcs",[qse]:"fire-gcs-compat",[Hse]:"fire-fst",[Gse]:"fire-fst-compat",[Kse]:"fire-vertex","fire-js":"fire-js",[Wse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Map,Xse=new Map,jm=new Map;function a1(t,e){try{t.container.addComponent(e)}catch(r){Zs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function lo(t){const e=t.name;if(jm.has(e))return Zs.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,t);for(const r of nh.values())a1(r,t);for(const r of Xse.values())a1(r,t);return!0}function yv(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ni(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new su("app","Firebase",Jse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zse{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=Yse;function xA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Mm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw as.create("bad-app-name",{appName:String(i)});if(r||(r=$A()),!r)throw as.create("no-options");const s=nh.get(i);if(s){if(rh(r,s.options)&&rh(n,s.config))return s;throw as.create("duplicate-app",{appName:i})}const a=new ase(i);for(const c of jm.values())a.addComponent(c);const o=new Zse(r,n,a);return nh.set(i,o),o}function kA(t=Mm){const e=nh.get(t);if(!e&&t===Mm&&$A())return xA();if(!e)throw as.create("no-app",{appName:t});return e}function os(t,e,r){var n;let i=(n=Qse[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zs.warn(o.join(" "));return}lo(new Js(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eae="firebase-heartbeat-database",tae=1,ll="firebase-heartbeat-store";let Rp=null;function RA(){return Rp||(Rp=_se(eae,tae,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ll)}catch(r){console.warn(r)}}}}).catch(t=>{throw as.create("idb-open",{originalErrorMessage:t.message})})),Rp}async function rae(t){try{const r=(await RA()).transaction(ll),n=await r.objectStore(ll).get(OA(t));return await r.done,n}catch(e){if(e instanceof wi)Zs.warn(e.message);else{const r=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zs.warn(r.message)}}}async function o1(t,e){try{const n=(await RA()).transaction(ll,"readwrite");await n.objectStore(ll).put(e,OA(t)),await n.done}catch(r){if(r instanceof wi)Zs.warn(r.message);else{const n=as.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Zs.warn(n.message)}}}function OA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nae=1024,iae=30*24*60*60*1e3;class sae{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new oae(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=c1();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=iae}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=c1(),{heartbeatsToSend:n,unsentEntries:i}=aae(this._heartbeatsCache.heartbeats),s=th(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function c1(){return new Date().toISOString().substring(0,10)}function aae(t,e=nae){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),l1(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),l1(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class oae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wie()?Yie().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await rae(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return o1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return o1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function l1(t){return th(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cae(t){lo(new Js("platform-logger",e=>new Ese(e),"PRIVATE")),lo(new Js("heartbeat",e=>new sae(e),"PRIVATE")),os(Fm,s1,t),os(Fm,s1,"esm2017"),os("fire-js","")}cae("");var u1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Xs<"u"?Xs:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ls,NA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,b){function I(){}I.prototype=b.prototype,E.D=b.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(T,C,R){for(var x=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)x[Q-2]=arguments[Q];return b.prototype[C].apply(T,x)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,b,I){I||(I=0);var T=Array(16);if(typeof b=="string")for(var C=0;16>C;++C)T[C]=b.charCodeAt(I++)|b.charCodeAt(I++)<<8|b.charCodeAt(I++)<<16|b.charCodeAt(I++)<<24;else for(C=0;16>C;++C)T[C]=b[I++]|b[I++]<<8|b[I++]<<16|b[I++]<<24;b=E.g[0],I=E.g[1],C=E.g[2];var R=E.g[3],x=b+(R^I&(C^R))+T[0]+3614090360&4294967295;b=I+(x<<7&4294967295|x>>>25),x=R+(C^b&(I^C))+T[1]+3905402710&4294967295,R=b+(x<<12&4294967295|x>>>20),x=C+(I^R&(b^I))+T[2]+606105819&4294967295,C=R+(x<<17&4294967295|x>>>15),x=I+(b^C&(R^b))+T[3]+3250441966&4294967295,I=C+(x<<22&4294967295|x>>>10),x=b+(R^I&(C^R))+T[4]+4118548399&4294967295,b=I+(x<<7&4294967295|x>>>25),x=R+(C^b&(I^C))+T[5]+1200080426&4294967295,R=b+(x<<12&4294967295|x>>>20),x=C+(I^R&(b^I))+T[6]+2821735955&4294967295,C=R+(x<<17&4294967295|x>>>15),x=I+(b^C&(R^b))+T[7]+4249261313&4294967295,I=C+(x<<22&4294967295|x>>>10),x=b+(R^I&(C^R))+T[8]+1770035416&4294967295,b=I+(x<<7&4294967295|x>>>25),x=R+(C^b&(I^C))+T[9]+2336552879&4294967295,R=b+(x<<12&4294967295|x>>>20),x=C+(I^R&(b^I))+T[10]+4294925233&4294967295,C=R+(x<<17&4294967295|x>>>15),x=I+(b^C&(R^b))+T[11]+2304563134&4294967295,I=C+(x<<22&4294967295|x>>>10),x=b+(R^I&(C^R))+T[12]+1804603682&4294967295,b=I+(x<<7&4294967295|x>>>25),x=R+(C^b&(I^C))+T[13]+4254626195&4294967295,R=b+(x<<12&4294967295|x>>>20),x=C+(I^R&(b^I))+T[14]+2792965006&4294967295,C=R+(x<<17&4294967295|x>>>15),x=I+(b^C&(R^b))+T[15]+1236535329&4294967295,I=C+(x<<22&4294967295|x>>>10),x=b+(C^R&(I^C))+T[1]+4129170786&4294967295,b=I+(x<<5&4294967295|x>>>27),x=R+(I^C&(b^I))+T[6]+3225465664&4294967295,R=b+(x<<9&4294967295|x>>>23),x=C+(b^I&(R^b))+T[11]+643717713&4294967295,C=R+(x<<14&4294967295|x>>>18),x=I+(R^b&(C^R))+T[0]+3921069994&4294967295,I=C+(x<<20&4294967295|x>>>12),x=b+(C^R&(I^C))+T[5]+3593408605&4294967295,b=I+(x<<5&4294967295|x>>>27),x=R+(I^C&(b^I))+T[10]+38016083&4294967295,R=b+(x<<9&4294967295|x>>>23),x=C+(b^I&(R^b))+T[15]+3634488961&4294967295,C=R+(x<<14&4294967295|x>>>18),x=I+(R^b&(C^R))+T[4]+3889429448&4294967295,I=C+(x<<20&4294967295|x>>>12),x=b+(C^R&(I^C))+T[9]+568446438&4294967295,b=I+(x<<5&4294967295|x>>>27),x=R+(I^C&(b^I))+T[14]+3275163606&4294967295,R=b+(x<<9&4294967295|x>>>23),x=C+(b^I&(R^b))+T[3]+4107603335&4294967295,C=R+(x<<14&4294967295|x>>>18),x=I+(R^b&(C^R))+T[8]+1163531501&4294967295,I=C+(x<<20&4294967295|x>>>12),x=b+(C^R&(I^C))+T[13]+2850285829&4294967295,b=I+(x<<5&4294967295|x>>>27),x=R+(I^C&(b^I))+T[2]+4243563512&4294967295,R=b+(x<<9&4294967295|x>>>23),x=C+(b^I&(R^b))+T[7]+1735328473&4294967295,C=R+(x<<14&4294967295|x>>>18),x=I+(R^b&(C^R))+T[12]+2368359562&4294967295,I=C+(x<<20&4294967295|x>>>12),x=b+(I^C^R)+T[5]+4294588738&4294967295,b=I+(x<<4&4294967295|x>>>28),x=R+(b^I^C)+T[8]+2272392833&4294967295,R=b+(x<<11&4294967295|x>>>21),x=C+(R^b^I)+T[11]+1839030562&4294967295,C=R+(x<<16&4294967295|x>>>16),x=I+(C^R^b)+T[14]+4259657740&4294967295,I=C+(x<<23&4294967295|x>>>9),x=b+(I^C^R)+T[1]+2763975236&4294967295,b=I+(x<<4&4294967295|x>>>28),x=R+(b^I^C)+T[4]+1272893353&4294967295,R=b+(x<<11&4294967295|x>>>21),x=C+(R^b^I)+T[7]+4139469664&4294967295,C=R+(x<<16&4294967295|x>>>16),x=I+(C^R^b)+T[10]+3200236656&4294967295,I=C+(x<<23&4294967295|x>>>9),x=b+(I^C^R)+T[13]+681279174&4294967295,b=I+(x<<4&4294967295|x>>>28),x=R+(b^I^C)+T[0]+3936430074&4294967295,R=b+(x<<11&4294967295|x>>>21),x=C+(R^b^I)+T[3]+3572445317&4294967295,C=R+(x<<16&4294967295|x>>>16),x=I+(C^R^b)+T[6]+76029189&4294967295,I=C+(x<<23&4294967295|x>>>9),x=b+(I^C^R)+T[9]+3654602809&4294967295,b=I+(x<<4&4294967295|x>>>28),x=R+(b^I^C)+T[12]+3873151461&4294967295,R=b+(x<<11&4294967295|x>>>21),x=C+(R^b^I)+T[15]+530742520&4294967295,C=R+(x<<16&4294967295|x>>>16),x=I+(C^R^b)+T[2]+3299628645&4294967295,I=C+(x<<23&4294967295|x>>>9),x=b+(C^(I|~R))+T[0]+4096336452&4294967295,b=I+(x<<6&4294967295|x>>>26),x=R+(I^(b|~C))+T[7]+1126891415&4294967295,R=b+(x<<10&4294967295|x>>>22),x=C+(b^(R|~I))+T[14]+2878612391&4294967295,C=R+(x<<15&4294967295|x>>>17),x=I+(R^(C|~b))+T[5]+4237533241&4294967295,I=C+(x<<21&4294967295|x>>>11),x=b+(C^(I|~R))+T[12]+1700485571&4294967295,b=I+(x<<6&4294967295|x>>>26),x=R+(I^(b|~C))+T[3]+2399980690&4294967295,R=b+(x<<10&4294967295|x>>>22),x=C+(b^(R|~I))+T[10]+4293915773&4294967295,C=R+(x<<15&4294967295|x>>>17),x=I+(R^(C|~b))+T[1]+2240044497&4294967295,I=C+(x<<21&4294967295|x>>>11),x=b+(C^(I|~R))+T[8]+1873313359&4294967295,b=I+(x<<6&4294967295|x>>>26),x=R+(I^(b|~C))+T[15]+4264355552&4294967295,R=b+(x<<10&4294967295|x>>>22),x=C+(b^(R|~I))+T[6]+2734768916&4294967295,C=R+(x<<15&4294967295|x>>>17),x=I+(R^(C|~b))+T[13]+1309151649&4294967295,I=C+(x<<21&4294967295|x>>>11),x=b+(C^(I|~R))+T[4]+4149444226&4294967295,b=I+(x<<6&4294967295|x>>>26),x=R+(I^(b|~C))+T[11]+3174756917&4294967295,R=b+(x<<10&4294967295|x>>>22),x=C+(b^(R|~I))+T[2]+718787259&4294967295,C=R+(x<<15&4294967295|x>>>17),x=I+(R^(C|~b))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+b&4294967295,E.g[1]=E.g[1]+(C+(x<<21&4294967295|x>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+R&4294967295}n.prototype.u=function(E,b){b===void 0&&(b=E.length);for(var I=b-this.blockSize,T=this.B,C=this.h,R=0;R<b;){if(C==0)for(;R<=I;)i(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<b;)if(T[C++]=E.charCodeAt(R++),C==this.blockSize){i(this,T),C=0;break}}else for(;R<b;)if(T[C++]=E[R++],C==this.blockSize){i(this,T),C=0;break}}this.h=C,this.o+=b},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var b=1;b<E.length-8;++b)E[b]=0;var I=8*this.o;for(b=E.length-8;b<E.length;++b)E[b]=I&255,I/=256;for(this.u(E),E=Array(16),b=I=0;4>b;++b)for(var T=0;32>T;T+=8)E[I++]=this.g[b]>>>T&255;return E};function s(E,b){var I=o;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=b(E)}function a(E,b){this.h=b;for(var I=[],T=!0,C=E.length-1;0<=C;C--){var R=E[C]|0;T&&R==b||(I[C]=R,T=!1)}this.g=I}var o={};function c(E){return-128<=E&&128>E?s(E,function(b){return new a([b|0],0>b?-1:0)}):new a([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return y(l(-E));for(var b=[],I=1,T=0;E>=I;T++)b[T]=E/I|0,I*=4294967296;return new a(b,0)}function u(E,b){if(E.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(E.charAt(0)=="-")return y(u(E.substring(1),b));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(b,8)),T=h,C=0;C<E.length;C+=8){var R=Math.min(8,E.length-C),x=parseInt(E.substring(C,C+R),b);8>R?(R=l(Math.pow(b,R)),T=T.j(R).add(l(x))):(T=T.j(I),T=T.add(l(x)))}return T}var h=c(0),p=c(1),f=c(16777216);t=a.prototype,t.m=function(){if(g(this))return-y(this).m();for(var E=0,b=1,I=0;I<this.g.length;I++){var T=this.i(I);E+=(0<=T?T:4294967296+T)*b,b*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(m(this))return"0";if(g(this))return"-"+y(this).toString(E);for(var b=l(Math.pow(E,6)),I=this,T="";;){var C=A(I,b).g;I=v(I,C.j(b));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=C,m(I))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function m(E){if(E.h!=0)return!1;for(var b=0;b<E.g.length;b++)if(E.g[b]!=0)return!1;return!0}function g(E){return E.h==-1}t.l=function(E){return E=v(this,E),g(E)?-1:m(E)?0:1};function y(E){for(var b=E.g.length,I=[],T=0;T<b;T++)I[T]=~E.g[T];return new a(I,~E.h).add(p)}t.abs=function(){return g(this)?y(this):this},t.add=function(E){for(var b=Math.max(this.g.length,E.g.length),I=[],T=0,C=0;C<=b;C++){var R=T+(this.i(C)&65535)+(E.i(C)&65535),x=(R>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);T=x>>>16,R&=65535,x&=65535,I[C]=x<<16|R}return new a(I,I[I.length-1]&-2147483648?-1:0)};function v(E,b){return E.add(y(b))}t.j=function(E){if(m(this)||m(E))return h;if(g(this))return g(E)?y(this).j(y(E)):y(y(this).j(E));if(g(E))return y(this.j(y(E)));if(0>this.l(f)&&0>E.l(f))return l(this.m()*E.m());for(var b=this.g.length+E.g.length,I=[],T=0;T<2*b;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<E.g.length;C++){var R=this.i(T)>>>16,x=this.i(T)&65535,Q=E.i(C)>>>16,re=E.i(C)&65535;I[2*T+2*C]+=x*re,w(I,2*T+2*C),I[2*T+2*C+1]+=R*re,w(I,2*T+2*C+1),I[2*T+2*C+1]+=x*Q,w(I,2*T+2*C+1),I[2*T+2*C+2]+=R*Q,w(I,2*T+2*C+2)}for(T=0;T<b;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=b;T<2*b;T++)I[T]=0;return new a(I,0)};function w(E,b){for(;(E[b]&65535)!=E[b];)E[b+1]+=E[b]>>>16,E[b]&=65535,b++}function $(E,b){this.g=E,this.h=b}function A(E,b){if(m(b))throw Error("division by zero");if(m(E))return new $(h,h);if(g(E))return b=A(y(E),b),new $(y(b.g),y(b.h));if(g(b))return b=A(E,y(b)),new $(y(b.g),b.h);if(30<E.g.length){if(g(E)||g(b))throw Error("slowDivide_ only works with positive integers.");for(var I=p,T=b;0>=T.l(E);)I=P(I),T=P(T);var C=O(I,1),R=O(T,1);for(T=O(T,2),I=O(I,2);!m(T);){var x=R.add(T);0>=x.l(E)&&(C=C.add(I),R=x),T=O(T,1),I=O(I,1)}return b=v(E,C.j(b)),new $(C,b)}for(C=h;0<=E.l(b);){for(I=Math.max(1,Math.floor(E.m()/b.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=l(I),x=R.j(b);g(x)||0<x.l(E);)I-=T,R=l(I),x=R.j(b);m(R)&&(R=p),C=C.add(R),E=v(E,x)}return new $(C,E)}t.A=function(E){return A(this,E).h},t.and=function(E){for(var b=Math.max(this.g.length,E.g.length),I=[],T=0;T<b;T++)I[T]=this.i(T)&E.i(T);return new a(I,this.h&E.h)},t.or=function(E){for(var b=Math.max(this.g.length,E.g.length),I=[],T=0;T<b;T++)I[T]=this.i(T)|E.i(T);return new a(I,this.h|E.h)},t.xor=function(E){for(var b=Math.max(this.g.length,E.g.length),I=[],T=0;T<b;T++)I[T]=this.i(T)^E.i(T);return new a(I,this.h^E.h)};function P(E){for(var b=E.g.length+1,I=[],T=0;T<b;T++)I[T]=E.i(T)<<1|E.i(T-1)>>>31;return new a(I,E.h)}function O(E,b){var I=b>>5;b%=32;for(var T=E.g.length-I,C=[],R=0;R<T;R++)C[R]=0<b?E.i(R+I)>>>b|E.i(R+I+1)<<32-b:E.i(R+I);return new a(C,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,NA=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=u,Ls=a}).apply(typeof u1<"u"?u1:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Xs<"u"?Xs:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DA,FA,Cc,MA,yd,Lm,jA,LA,VA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,S){return d==Array.prototype||d==Object.prototype||(d[_]=S.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var _=0;_<d.length;++_){var S=d[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var n=r(this);function i(d,_){if(_)e:{var S=n;d=d.split(".");for(var k=0;k<d.length-1;k++){var z=d[k];if(!(z in S))break e;S=S[z]}d=d[d.length-1],k=S[d],_=_(k),_!=k&&_!=null&&e(S,d,{configurable:!0,writable:!0,value:_})}}function s(d,_){d instanceof String&&(d+="");var S=0,k=!1,z={next:function(){if(!k&&S<d.length){var G=S++;return{value:_(G,d[G]),done:!1}}return k=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(d){return d||function(){return s(this,function(_,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function l(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function u(d,_,S){return d.call.apply(d.bind,arguments)}function h(d,_,S){if(!d)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,k),d.apply(_,z)}}return function(){return d.apply(_,arguments)}}function p(d,_,S){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,p.apply(null,arguments)}function f(d,_){var S=Array.prototype.slice.call(arguments,1);return function(){var k=S.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function m(d,_){function S(){}S.prototype=_.prototype,d.aa=_.prototype,d.prototype=new S,d.prototype.constructor=d,d.Qb=function(k,z,G){for(var ne=Array(arguments.length-2),st=2;st<arguments.length;st++)ne[st-2]=arguments[st];return _.prototype[z].apply(k,ne)}}function g(d){const _=d.length;if(0<_){const S=Array(_);for(let k=0;k<_;k++)S[k]=d[k];return S}return[]}function y(d,_){for(let S=1;S<arguments.length;S++){const k=arguments[S];if(c(k)){const z=d.length||0,G=k.length||0;d.length=z+G;for(let ne=0;ne<G;ne++)d[z+ne]=k[ne]}else d.push(k)}}class v{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function w(d){return/^[\s\xa0]*$/.test(d)}function $(){var d=o.navigator;return d&&(d=d.userAgent)?d:""}function A(d){return A[" "](d),d}A[" "]=function(){};var P=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function O(d,_,S){for(const k in d)_.call(S,d[k],k,d)}function E(d,_){for(const S in d)_.call(void 0,d[S],S,d)}function b(d){const _={};for(const S in d)_[S]=d[S];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(d,_){let S,k;for(let z=1;z<arguments.length;z++){k=arguments[z];for(S in k)d[S]=k[S];for(let G=0;G<I.length;G++)S=I[G],Object.prototype.hasOwnProperty.call(k,S)&&(d[S]=k[S])}}function C(d){var _=1;d=d.split(":");const S=[];for(;0<_&&d.length;)S.push(d.shift()),_--;return d.length&&S.push(d.join(":")),S}function R(d){o.setTimeout(()=>{throw d},0)}function x(){var d=le;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class Q{constructor(){this.h=this.g=null}add(_,S){const k=re.get();k.set(_,S),this.h?this.h.next=k:this.g=k,this.h=k}}var re=new v(()=>new Ee,d=>d.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,me=!1,le=new Q,Y=()=>{const d=o.Promise.resolve(void 0);_e=()=>{d.then(V)}};var V=()=>{for(var d;d=x();){try{d.h.call(d.g)}catch(S){R(S)}var _=re;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}me=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};o.addEventListener("test",S,_),o.removeEventListener("test",S,_)}catch{}return d}();function M(d,_){if(U.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var S=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(P){e:{try{A(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else S=="mouseover"?_=d.fromElement:S=="mouseout"&&(_=d.toElement);this.relatedTarget=_,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:K[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&M.aa.h.call(this)}}m(M,U);var K={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),ae=0;function Ie(d,_,S,k,z){this.listener=d,this.proxy=null,this.src=_,this.type=S,this.capture=!!k,this.ha=z,this.key=++ae,this.da=this.fa=!1}function Te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Me(d){this.src=d,this.g={},this.h=0}Me.prototype.add=function(d,_,S,k,z){var G=d.toString();d=this.g[G],d||(d=this.g[G]=[],this.h++);var ne=Qe(d,_,k,z);return-1<ne?(_=d[ne],S||(_.fa=!1)):(_=new Ie(_,this.src,G,!!k,z),_.fa=S,d.push(_)),_};function $e(d,_){var S=_.type;if(S in d.g){var k=d.g[S],z=Array.prototype.indexOf.call(k,_,void 0),G;(G=0<=z)&&Array.prototype.splice.call(k,z,1),G&&(Te(_),d.g[S].length==0&&(delete d.g[S],d.h--))}}function Qe(d,_,S,k){for(var z=0;z<d.length;++z){var G=d[z];if(!G.da&&G.listener==_&&G.capture==!!S&&G.ha==k)return z}return-1}var ut="closure_lm_"+(1e6*Math.random()|0),nt={};function It(d,_,S,k,z){if(Array.isArray(_)){for(var G=0;G<_.length;G++)It(d,_[G],S,k,z);return null}return S=Ei(S),d&&d[Z]?d.K(_,S,l(k)?!!k.capture:!!k,z):dr(d,_,S,!1,k,z)}function dr(d,_,S,k,z,G){if(!_)throw Error("Invalid event type");var ne=l(z)?!!z.capture:!!z,st=Bt(d);if(st||(d[ut]=st=new Me(d)),S=st.add(_,S,k,ne,G),S.proxy)return S;if(k=Or(),S.proxy=k,k.src=d,k.listener=S,d.addEventListener)N||(z=ne),z===void 0&&(z=!1),d.addEventListener(_.toString(),k,z);else if(d.attachEvent)d.attachEvent(bi(_.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Or(){function d(S){return _.call(d.src,d.listener,S)}const _=zr;return d}function Gn(d,_,S,k,z){if(Array.isArray(_))for(var G=0;G<_.length;G++)Gn(d,_[G],S,k,z);else k=l(k)?!!k.capture:!!k,S=Ei(S),d&&d[Z]?(d=d.i,_=String(_).toString(),_ in d.g&&(G=d.g[_],S=Qe(G,S,k,z),-1<S&&(Te(G[S]),Array.prototype.splice.call(G,S,1),G.length==0&&(delete d.g[_],d.h--)))):d&&(d=Bt(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Qe(_,S,k,z)),(S=-1<d?_[d]:null)&&wn(S))}function wn(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Z])$e(_.i,d);else{var S=d.type,k=d.proxy;_.removeEventListener?_.removeEventListener(S,k,d.capture):_.detachEvent?_.detachEvent(bi(S),k):_.addListener&&_.removeListener&&_.removeListener(k),(S=Bt(_))?($e(S,d),S.h==0&&(S.src=null,_[ut]=null)):Te(d)}}}function bi(d){return d in nt?nt[d]:nt[d]="on"+d}function zr(d,_){if(d.da)d=!0;else{_=new M(_,this);var S=d.listener,k=d.ha||d.src;d.fa&&wn(d),d=S.call(k,_)}return d}function Bt(d){return d=d[ut],d instanceof Me?d:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ei(d){return typeof d=="function"?d:(d[bn]||(d[bn]=function(_){return d.handleEvent(_)}),d[bn])}function vt(){W.call(this),this.i=new Me(this),this.M=this,this.F=null}m(vt,W),vt.prototype[Z]=!0,vt.prototype.removeEventListener=function(d,_,S,k){Gn(this,d,_,S,k)};function Pt(d,_){var S,k=d.F;if(k)for(S=[];k;k=k.F)S.push(k);if(d=d.M,k=_.type||_,typeof _=="string")_=new U(_,d);else if(_ instanceof U)_.target=_.target||d;else{var z=_;_=new U(k,d),T(_,z)}if(z=!0,S)for(var G=S.length-1;0<=G;G--){var ne=_.g=S[G];z=Wn(ne,k,!0,_)&&z}if(ne=_.g=d,z=Wn(ne,k,!0,_)&&z,z=Wn(ne,k,!1,_)&&z,S)for(G=0;G<S.length;G++)ne=_.g=S[G],z=Wn(ne,k,!1,_)&&z}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var S=d.g[_],k=0;k<S.length;k++)Te(S[k]);delete d.g[_],d.h--}}this.F=null},vt.prototype.K=function(d,_,S,k){return this.i.add(String(d),_,!1,S,k)},vt.prototype.L=function(d,_,S,k){return this.i.add(String(d),_,!0,S,k)};function Wn(d,_,S,k){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var z=!0,G=0;G<_.length;++G){var ne=_[G];if(ne&&!ne.da&&ne.capture==S){var st=ne.listener,Gt=ne.ha||ne.src;ne.fa&&$e(d.i,ne),z=st.call(Gt,k)!==!1&&z}}return z&&!k.defaultPrevented}function hr(d,_,S){if(typeof d=="function")S&&(d=p(d,S));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:o.setTimeout(d,_||0)}function En(d){d.g=hr(()=>{d.g=null,d.i&&(d.i=!1,En(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class pu extends W{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:En(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(d){W.call(this),this.h=d,this.g={}}m(Si,W);var Ii=[];function Xo(d){O(d.g,function(_,S){this.g.hasOwnProperty(S)&&wn(_)},d),d.g={}}Si.prototype.N=function(){Si.aa.N.call(this),Xo(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jo=o.JSON.stringify,mu=o.JSON.parse,qr=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Zo(){}Zo.prototype.h=null;function gu(d){return d.h||(d.h=d.i())}function yu(){}var _s={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ec(){U.call(this,"d")}m(ec,U);function tc(){U.call(this,"c")}m(tc,U);var Er={},vu=null;function ws(){return vu=vu||new vt}Er.La="serverreachability";function _u(d){U.call(this,Er.La,d)}m(_u,U);function Yn(d){const _=ws();Pt(_,new _u(_))}Er.STAT_EVENT="statevent";function rc(d,_){U.call(this,Er.STAT_EVENT,d),this.stat=_}m(rc,U);function Kt(d){const _=ws();Pt(_,new rc(_,d))}Er.Ma="timingevent";function nc(d,_){U.call(this,Er.Ma,d),this.size=_}m(nc,U);function bs(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},_)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function j(d,_,S,k,z,G){d.info(function(){if(d.g)if(G)for(var ne="",st=G.split("&"),Gt=0;Gt<st.length;Gt++){var Ge=st[Gt].split("=");if(1<Ge.length){var rr=Ge[0];Ge=Ge[1];var nr=rr.split("_");ne=2<=nr.length&&nr[1]=="type"?ne+(rr+"="+Ge+"&"):ne+(rr+"=redacted&")}}else ne=null;else ne=G;return"XMLHTTP REQ ("+k+") [attempt "+z+"]: "+_+`
`+S+`
`+ne})}function D(d,_,S,k,z,G,ne){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+z+"]: "+_+`
`+S+`
`+G+" "+ne})}function L(d,_,S,k){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+q(d,S)+(k?" "+k:"")})}function H(d,_){d.info(function(){return"TIMEOUT: "+_})}Ti.prototype.info=function(){};function q(d,_){if(!d.g)return _;if(!_)return null;try{var S=JSON.parse(_);if(S){for(d=0;d<S.length;d++)if(Array.isArray(S[d])){var k=S[d];if(!(2>k.length)){var z=k[1];if(Array.isArray(z)&&!(1>z.length)){var G=z[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ne=1;ne<z.length;ne++)z[ne]=""}}}}return Jo(S)}catch{return _}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ge={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oe;function Xe(){}m(Xe,Zo),Xe.prototype.g=function(){return new XMLHttpRequest},Xe.prototype.i=function(){return{}},Oe=new Xe;function Je(d,_,S,k){this.j=d,this.i=_,this.l=S,this.R=k||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}var tt={},dt={};function we(d,_,S){d.L=1,d.v=Su(Qn(_)),d.m=S,d.P=!0,it(d,null)}function it(d,_){d.F=Date.now(),Nr(d),d.A=Qn(d.v);var S=d.A,k=d.R;Array.isArray(k)||(k=[String(k)]),r_(S.i,"t",k),d.C=0,S=d.j.J,d.h=new Re,d.g=w_(d.j,S?_:null,!d.m),0<d.O&&(d.M=new pu(p(d.Y,d,d.g),d.O)),_=d.U,S=d.g,k=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ii[0]=z.toString()),z=Ii);for(var G=0;G<z.length;G++){var ne=It(S,z[G],k||_.handleEvent,!1,_.h||_);if(!ne)break;_.g[ne.key]=ne}_=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Yn(),j(d.i,d.u,d.A,d.l,d.R,d.m)}Je.prototype.ca=function(d){d=d.target;const _=this.M;_&&Xn(d)==3?_.j():this.Y(d)},Je.prototype.Y=function(d){try{if(d==this.g)e:{const nr=Xn(this.g);var _=this.g.Ba();const Sa=this.g.Z();if(!(3>nr)&&(nr!=3||this.g&&(this.h.h||this.g.oa()||l_(this.g)))){this.J||nr!=4||_==7||(_==8||0>=Sa?Yn(3):Yn(2)),Sr(this);var S=this.g.Z();this.X=S;t:if(bt(this)){var k=l_(this.g);d="";var z=k.length,G=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fr(this),Hr(this);var ne="";break t}this.h.i=new o.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,d+=this.h.i.decode(k[_],{stream:!(G&&_==z-1)});k.length=0,this.h.g+=d,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=S==200,D(this.i,this.u,this.A,this.l,this.R,nr,S),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Gt=this.g;if((st=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(st)){var Ge=st;break t}}Ge=null}if(S=Ge)L(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tr(this,S);else{this.o=!1,this.s=3,Kt(12),fr(this),Hr(this);break e}}if(this.P){S=!0;let sn;for(;!this.J&&this.C<ne.length;)if(sn=ot(this,ne),sn==dt){nr==4&&(this.s=4,Kt(14),S=!1),L(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==tt){this.s=4,Kt(15),L(this.i,this.l,ne,"[Invalid Chunk]"),S=!1;break}else L(this.i,this.l,sn,null),tr(this,sn);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nr!=4||ne.length!=0||this.h.h||(this.s=1,Kt(16),S=!1),this.o=this.o&&S,!S)L(this.i,this.l,ne,"[Invalid Chunked Response]"),fr(this),Hr(this);else if(0<ne.length&&!this.W){this.W=!0;var rr=this.j;rr.g==this&&rr.ba&&!rr.M&&(rr.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),kf(rr),rr.M=!0,Kt(11))}}else L(this.i,this.l,ne,null),tr(this,ne);nr==4&&fr(this),this.o&&!this.J&&(nr==4?g_(this.j,this):(this.o=!1,Nr(this)))}else PC(this.g),S==400&&0<ne.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),fr(this),Hr(this)}}}catch{}finally{}};function bt(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function ot(d,_){var S=d.C,k=_.indexOf(`
`,S);return k==-1?dt:(S=Number(_.substring(S,k)),isNaN(S)?tt:(k+=1,k+S>_.length?dt:(_=_.slice(k,k+S),d.C=k+S,_)))}Je.prototype.cancel=function(){this.J=!0,fr(this)};function Nr(d){d.S=Date.now()+d.I,Dr(d,d.I)}function Dr(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=bs(p(d.ba,d),_)}function Sr(d){d.B&&(o.clearTimeout(d.B),d.B=null)}Je.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(H(this.i,this.A),this.L!=2&&(Yn(),Kt(17)),fr(this),this.s=2,Hr(this)):Dr(this,this.S-d)};function Hr(d){d.j.G==0||d.J||g_(d.j,d)}function fr(d){Sr(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,Xo(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function tr(d,_){try{var S=d.j;if(S.G!=0&&(S.g==d||va(S.h,d))){if(!d.K&&va(S.h,d)&&S.G==3){try{var k=S.Da.g.parse(_)}catch{k=null}if(Array.isArray(k)&&k.length==3){var z=k;if(z[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<d.F)Pu(S),$u(S);else break e;xf(S),Kt(18)}}else S.za=z[1],0<S.za-S.T&&37500>z[2]&&S.F&&S.v==0&&!S.C&&(S.C=bs(p(S.Za,S),6e3));if(1>=$i(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Ts(S,11)}else if((d.K||S.g==d)&&Pu(S),!w(_))for(z=S.Da.g.parse(_),_=0;_<z.length;_++){let Ge=z[_];if(S.T=Ge[0],Ge=Ge[1],S.G==2)if(Ge[0]=="c"){S.K=Ge[1],S.ia=Ge[2];const rr=Ge[3];rr!=null&&(S.la=rr,S.j.info("VER="+S.la));const nr=Ge[4];nr!=null&&(S.Aa=nr,S.j.info("SVER="+S.Aa));const Sa=Ge[5];Sa!=null&&typeof Sa=="number"&&0<Sa&&(k=1.5*Sa,S.L=k,S.j.info("backChannelRequestTimeoutMs_="+k)),k=S;const sn=d.g;if(sn){const xu=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xu){var G=k.h;G.g||xu.indexOf("spdy")==-1&&xu.indexOf("quic")==-1&&xu.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(_a(G,G.h),G.h=null))}if(k.D){const Rf=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(k.ya=Rf,ht(k.I,k.D,Rf))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-d.F,S.j.info("Handshake RTT: "+S.R+"ms")),k=S;var ne=d;if(k.qa=__(k,k.J?k.ia:null,k.W),ne.K){Es(k.h,ne);var st=ne,Gt=k.L;Gt&&(st.I=Gt),st.B&&(Sr(st),Nr(st)),k.g=ne}else p_(k);0<S.i.length&&Au(S)}else Ge[0]!="stop"&&Ge[0]!="close"||Ts(S,7);else S.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Ts(S,7):Cf(S):Ge[0]!="noop"&&S.l&&S.l.ta(Ge),S.v=0)}}Yn(4)}catch{}}var Kr=class{constructor(d,_){this.g=d,this.map=_}};function Sn(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gr(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function $i(d){return d.h?1:d.g?d.g.size:0}function va(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function _a(d,_){d.g?d.g.add(_):d.h=_}function Es(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Sn.prototype.cancel=function(){if(this.i=Ss(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ss(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const S of d.g.values())_=_.concat(S.D);return _}return g(d.i)}function wa(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var _=[],S=d.length,k=0;k<S;k++)_.push(d[k]);return _}_=[],S=0;for(k in d)_[S++]=d[k];return _}function wu(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var _=[];d=d.length;for(var S=0;S<d;S++)_.push(S);return _}_=[],S=0;for(const k in d)_[S++]=k;return _}}}function ic(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var S=wu(d),k=wa(d),z=k.length,G=0;G<z;G++)_.call(void 0,k[G],S&&S[G],d)}var Ai=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mC(d,_){if(d){d=d.split("&");for(var S=0;S<d.length;S++){var k=d[S].indexOf("="),z=null;if(0<=k){var G=d[S].substring(0,k);z=d[S].substring(k+1)}else G=d[S];_(G,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Is(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Is){this.h=d.h,bu(this,d.j),this.o=d.o,this.g=d.g,Eu(this,d.s),this.l=d.l;var _=d.i,S=new oc;S.i=_.i,_.g&&(S.g=new Map(_.g),S.h=_.h),Jv(this,S),this.m=d.m}else d&&(_=String(d).match(Ai))?(this.h=!1,bu(this,_[1]||"",!0),this.o=sc(_[2]||""),this.g=sc(_[3]||"",!0),Eu(this,_[4]),this.l=sc(_[5]||"",!0),Jv(this,_[6]||"",!0),this.m=sc(_[7]||"")):(this.h=!1,this.i=new oc(null,this.h))}Is.prototype.toString=function(){var d=[],_=this.j;_&&d.push(ac(_,Zv,!0),":");var S=this.g;return(S||_=="file")&&(d.push("//"),(_=this.o)&&d.push(ac(_,Zv,!0),"@"),d.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&d.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(ac(S,S.charAt(0)=="/"?vC:yC,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",ac(S,wC)),d.join("")};function Qn(d){return new Is(d)}function bu(d,_,S){d.j=S?sc(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Eu(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Jv(d,_,S){_ instanceof oc?(d.i=_,bC(d.i,d.h)):(S||(_=ac(_,_C)),d.i=new oc(_,d.h))}function ht(d,_,S){d.i.set(_,S)}function Su(d){return ht(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function sc(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ac(d,_,S){return typeof d=="string"?(d=encodeURI(d).replace(_,gC),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function gC(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zv=/[#\/\?@]/g,yC=/[#\?:]/g,vC=/[#\?]/g,_C=/[#\?@]/g,wC=/#/g;function oc(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Pi(d){d.g||(d.g=new Map,d.h=0,d.i&&mC(d.i,function(_,S){d.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}t=oc.prototype,t.add=function(d,_){Pi(this),this.i=null,d=ba(this,d);var S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(_),this.h+=1,this};function e_(d,_){Pi(d),_=ba(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function t_(d,_){return Pi(d),_=ba(d,_),d.g.has(_)}t.forEach=function(d,_){Pi(this),this.g.forEach(function(S,k){S.forEach(function(z){d.call(_,z,k,this)},this)},this)},t.na=function(){Pi(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),S=[];for(let k=0;k<_.length;k++){const z=d[k];for(let G=0;G<z.length;G++)S.push(_[k])}return S},t.V=function(d){Pi(this);let _=[];if(typeof d=="string")t_(this,d)&&(_=_.concat(this.g.get(ba(this,d))));else{d=Array.from(this.g.values());for(let S=0;S<d.length;S++)_=_.concat(d[S])}return _},t.set=function(d,_){return Pi(this),this.i=null,d=ba(this,d),t_(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},t.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function r_(d,_,S){e_(d,_),0<S.length&&(d.i=null,d.g.set(ba(d,_),g(S)),d.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var S=0;S<_.length;S++){var k=_[S];const G=encodeURIComponent(String(k)),ne=this.V(k);for(k=0;k<ne.length;k++){var z=G;ne[k]!==""&&(z+="="+encodeURIComponent(String(ne[k]))),d.push(z)}}return this.i=d.join("&")};function ba(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function bC(d,_){_&&!d.j&&(Pi(d),d.i=null,d.g.forEach(function(S,k){var z=k.toLowerCase();k!=z&&(e_(this,k),r_(this,z,S))},d)),d.j=_}function EC(d,_){const S=new Ti;if(o.Image){const k=new Image;k.onload=f(Ci,S,"TestLoadImage: loaded",!0,_,k),k.onerror=f(Ci,S,"TestLoadImage: error",!1,_,k),k.onabort=f(Ci,S,"TestLoadImage: abort",!1,_,k),k.ontimeout=f(Ci,S,"TestLoadImage: timeout",!1,_,k),o.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else _(!1)}function SC(d,_){const S=new Ti,k=new AbortController,z=setTimeout(()=>{k.abort(),Ci(S,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:k.signal}).then(G=>{clearTimeout(z),G.ok?Ci(S,"TestPingServer: ok",!0,_):Ci(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),Ci(S,"TestPingServer: error",!1,_)})}function Ci(d,_,S,k,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),k(S)}catch{}}function IC(){this.g=new qr}function TC(d,_,S){const k=S||"";try{ic(d,function(z,G){let ne=z;l(z)&&(ne=Jo(z)),_.push(k+G+"="+encodeURIComponent(ne))})}catch(z){throw _.push(k+"type="+encodeURIComponent("_badmap")),z}}function cc(d){this.l=d.Ub||null,this.j=d.eb||!1}m(cc,Zo),cc.prototype.g=function(){return new Iu(this.l,this.j)},cc.prototype.i=function(d){return function(){return d}}({});function Iu(d,_){vt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Iu,vt),t=Iu.prototype,t.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,uc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||o).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lc(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,uc(this)),this.g&&(this.readyState=3,uc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;n_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function n_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?lc(this):uc(this),this.readyState==3&&n_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,lc(this))},t.Qa=function(d){this.g&&(this.response=d,lc(this))},t.ga=function(){this.g&&lc(this)};function lc(d){d.readyState=4,d.l=null,d.j=null,d.v=null,uc(d)}t.setRequestHeader=function(d,_){this.u.append(d,_)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=_.next();return d.join(`\r
`)};function uc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function i_(d){let _="";return O(d,function(S,k){_+=k,_+=":",_+=S,_+=`\r
`}),_}function Pf(d,_,S){e:{for(k in S){var k=!1;break e}k=!0}k||(S=i_(S),typeof d=="string"?S!=null&&encodeURIComponent(String(S)):ht(d,_,S))}function Tt(d){vt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Tt,vt);var $C=/^https?$/i,AC=["POST","PUT"];t=Tt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,_,S,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?gu(this.o):gu(Oe),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(G){s_(this,G);return}if(d=S||"",S=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var z in k)S.set(z,k[z]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const G of k.keys())S.set(G,k.get(G));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(S.keys()).find(G=>G.toLowerCase()=="content-type"),z=o.FormData&&d instanceof o.FormData,!(0<=Array.prototype.indexOf.call(AC,_,void 0))||k||z||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ne]of S)this.g.setRequestHeader(G,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{c_(this),this.u=!0,this.g.send(d),this.u=!1}catch(G){s_(this,G)}};function s_(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,a_(d),Tu(d)}function a_(d){d.A||(d.A=!0,Pt(d,"complete"),Pt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Pt(this,"complete"),Pt(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),Tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?o_(this):this.bb())},t.bb=function(){o_(this)};function o_(d){if(d.h&&typeof a<"u"&&(!d.v[1]||Xn(d)!=4||d.Z()!=2)){if(d.u&&Xn(d)==4)hr(d.Ea,0,d);else if(Pt(d,"readystatechange"),Xn(d)==4){d.h=!1;try{const ne=d.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var k;if(k=ne===0){var z=String(d.D).match(Ai)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),k=!$C.test(z?z.toLowerCase():"")}S=k}if(S)Pt(d,"complete"),Pt(d,"success");else{d.m=6;try{var G=2<Xn(d)?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.Z()+"]",a_(d)}}finally{Tu(d)}}}}function Tu(d,_){if(d.g){c_(d);const S=d.g,k=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||Pt(d,"ready");try{S.onreadystatechange=k}catch{}}}function c_(d){d.I&&(o.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Xn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),mu(_)}};function l_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function PC(d){const _={};d=(d.g&&2<=Xn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(w(d[k]))continue;var S=C(d[k]);const z=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const G=_[z]||[];_[z]=G,G.push(S)}E(_,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dc(d,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||_}function u_(d){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dc("baseRetryDelayMs",5e3,d),this.cb=dc("retryDelaySeedMs",1e4,d),this.Wa=dc("forwardChannelMaxRetries",2,d),this.wa=dc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Sn(d&&d.concurrentRequestLimit),this.Da=new IC,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=u_.prototype,t.la=8,t.G=1,t.connect=function(d,_,S,k){Kt(0),this.W=d,this.H=_||{},S&&k!==void 0&&(this.H.OSID=S,this.H.OAID=k),this.F=this.X,this.I=__(this,null,this.W),Au(this)};function Cf(d){if(d_(d),d.G==3){var _=d.U++,S=Qn(d.I);if(ht(S,"SID",d.K),ht(S,"RID",_),ht(S,"TYPE","terminate"),hc(d,S),_=new Je(d,d.j,_),_.L=2,_.v=Su(Qn(S)),S=!1,o.navigator&&o.navigator.sendBeacon)try{S=o.navigator.sendBeacon(_.v.toString(),"")}catch{}!S&&o.Image&&(new Image().src=_.v,S=!0),S||(_.g=w_(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Nr(_)}v_(d)}function $u(d){d.g&&(kf(d),d.g.cancel(),d.g=null)}function d_(d){$u(d),d.u&&(o.clearTimeout(d.u),d.u=null),Pu(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&o.clearTimeout(d.s),d.s=null)}function Au(d){if(!Gr(d.h)&&!d.s){d.s=!0;var _=d.Ga;_e||Y(),me||(_e(),me=!0),le.add(_,d),d.B=0}}function CC(d,_){return $i(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=bs(p(d.Ga,d,_),y_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new Je(this,this.j,d);let G=this.o;if(this.S&&(G?(G=b(G),T(G,this.S)):G=this.S),this.m!==null||this.O||(z.H=G,G=null),this.P)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var k=this.i[S];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(_+=k,4096<_){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=f_(this,z,_),S=Qn(this.I),ht(S,"RID",d),ht(S,"CVER",22),this.D&&ht(S,"X-HTTP-Session-Id",this.D),hc(this,S),G&&(this.O?_="headers="+encodeURIComponent(String(i_(G)))+"&"+_:this.m&&Pf(S,this.m,G)),_a(this.h,z),this.Ua&&ht(S,"TYPE","init"),this.P?(ht(S,"$req",_),ht(S,"SID","null"),z.T=!0,we(z,S,null)):we(z,S,_),this.G=2}}else this.G==3&&(d?h_(this,d):this.i.length==0||Gr(this.h)||h_(this))};function h_(d,_){var S;_?S=_.l:S=d.U++;const k=Qn(d.I);ht(k,"SID",d.K),ht(k,"RID",S),ht(k,"AID",d.T),hc(d,k),d.m&&d.o&&Pf(k,d.m,d.o),S=new Je(d,d.j,S,d.B+1),d.m===null&&(S.H=d.o),_&&(d.i=_.D.concat(d.i)),_=f_(d,S,1e3),S.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),_a(d.h,S),we(S,k,_)}function hc(d,_){d.H&&O(d.H,function(S,k){ht(_,k,S)}),d.l&&ic({},function(S,k){ht(_,k,S)})}function f_(d,_,S){S=Math.min(d.i.length,S);var k=d.l?p(d.l.Na,d.l,d):null;e:{var z=d.i;let G=-1;for(;;){const ne=["count="+S];G==-1?0<S?(G=z[0].g,ne.push("ofs="+G)):G=0:ne.push("ofs="+G);let st=!0;for(let Gt=0;Gt<S;Gt++){let Ge=z[Gt].g;const rr=z[Gt].map;if(Ge-=G,0>Ge)G=Math.max(0,z[Gt].g-100),st=!1;else try{TC(rr,ne,"req"+Ge+"_")}catch{k&&k(rr)}}if(st){k=ne.join("&");break e}}}return d=d.i.splice(0,S),_.D=d,k}function p_(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;_e||Y(),me||(_e(),me=!0),le.add(_,d),d.v=0}}function xf(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=bs(p(d.Fa,d),y_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,m_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=bs(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),$u(this),m_(this))};function kf(d){d.A!=null&&(o.clearTimeout(d.A),d.A=null)}function m_(d){d.g=new Je(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Qn(d.qa);ht(_,"RID","rpc"),ht(_,"SID",d.K),ht(_,"AID",d.T),ht(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&ht(_,"TO",d.ja),ht(_,"TYPE","xmlhttp"),hc(d,_),d.m&&d.o&&Pf(_,d.m,d.o),d.L&&(d.g.I=d.L);var S=d.g;d=d.ia,S.L=1,S.v=Su(Qn(_)),S.m=null,S.P=!0,it(S,d)}t.Za=function(){this.C!=null&&(this.C=null,$u(this),xf(this),Kt(19))};function Pu(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function g_(d,_){var S=null;if(d.g==_){Pu(d),kf(d),d.g=null;var k=2}else if(va(d.h,_))S=_.D,Es(d.h,_),k=1;else return;if(d.G!=0){if(_.o)if(k==1){S=_.m?_.m.length:0,_=Date.now()-_.F;var z=d.B;k=ws(),Pt(k,new nc(k,S)),Au(d)}else p_(d);else if(z=_.s,z==3||z==0&&0<_.X||!(k==1&&CC(d,_)||k==2&&xf(d)))switch(S&&0<S.length&&(_=d.h,_.i=_.i.concat(S)),z){case 1:Ts(d,5);break;case 4:Ts(d,10);break;case 3:Ts(d,6);break;default:Ts(d,2)}}}function y_(d,_){let S=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(S*=2),S*_}function Ts(d,_){if(d.j.info("Error code "+_),_==2){var S=p(d.fb,d),k=d.Xa;const z=!k;k=new Is(k||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||bu(k,"https"),Su(k),z?EC(k.toString(),S):SC(k.toString(),S)}else Kt(2);d.G=0,d.l&&d.l.sa(_),v_(d),d_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function v_(d){if(d.G=0,d.ka=[],d.l){const _=Ss(d.h);(_.length!=0||d.i.length!=0)&&(y(d.ka,_),y(d.ka,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.ra()}}function __(d,_,S){var k=S instanceof Is?Qn(S):new Is(S);if(k.g!="")_&&(k.g=_+"."+k.g),Eu(k,k.s);else{var z=o.location;k=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var G=new Is(null);k&&bu(G,k),_&&(G.g=_),z&&Eu(G,z),S&&(G.l=S),k=G}return S=d.D,_=d.ya,S&&_&&ht(k,S,_),ht(k,"VER",d.la),hc(d,k),k}function w_(d,_,S){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new Tt(new cc({eb:S})):new Tt(d.pa),_.Ha(d.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function b_(){}t=b_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cu(){}Cu.prototype.g=function(d,_){return new Fr(d,_)};function Fr(d,_){vt.call(this),this.g=new u_(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!w(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!w(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Ea(this)}m(Fr,vt),Fr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fr.prototype.close=function(){Cf(this.g)},Fr.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.u&&(S={},S.__data__=Jo(d),d=S);_.i.push(new Kr(_.Ya++,d)),_.G==3&&Au(_)},Fr.prototype.N=function(){this.g.l=null,delete this.j,Cf(this.g),delete this.g,Fr.aa.N.call(this)};function E_(d){ec.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const S in _){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}m(E_,ec);function S_(){tc.call(this),this.status=1}m(S_,tc);function Ea(d){this.g=d}m(Ea,b_),Ea.prototype.ua=function(){Pt(this.g,"a")},Ea.prototype.ta=function(d){Pt(this.g,new E_(d))},Ea.prototype.sa=function(d){Pt(this.g,new S_)},Ea.prototype.ra=function(){Pt(this.g,"b")},Cu.prototype.createWebChannel=Cu.prototype.g,Fr.prototype.send=Fr.prototype.o,Fr.prototype.open=Fr.prototype.m,Fr.prototype.close=Fr.prototype.close,VA=function(){return new Cu},LA=function(){return ws()},jA=Er,Lm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,yd=ue,ge.COMPLETE="complete",MA=ge,yu.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Cc=yu,FA=cc,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,DA=Tt}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const d1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new mv("@firebase/firestore");function Ic(){return ea.logLevel}function de(t,...e){if(ea.logLevel<=Le.DEBUG){const r=e.map(vv);ea.debug(`Firestore (${Ko}): ${t}`,...r)}}function mi(t,...e){if(ea.logLevel<=Le.ERROR){const r=e.map(vv);ea.error(`Firestore (${Ko}): ${t}`,...r)}}function uo(t,...e){if(ea.logLevel<=Le.WARN){const r=e.map(vv);ea.warn(`Firestore (${Ko}): ${t}`,...r)}}function vv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+t;throw mi(e),new Error(e)}function Ft(t,e){t||xe()}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends wi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(cr.UNAUTHENTICATED))}shutdown(){}}class uae{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class dae{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vs,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vs)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ft(typeof n.accessToken=="string"),new UA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(e===null||typeof e=="string"),new cr(e)}}class hae{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fae{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new hae(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pae{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mae{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=s=>{s.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,de("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ft(typeof r.token=="string"),this.R=r.token,new pae(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gae(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=gae(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function et(t,e){return t<e?-1:t>e?1:0}function ho(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xr.fromMillis(Date.now())}static fromDate(e){return xr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new xr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new xr(0,0))}static max(){return new Ae(new xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,r,n){r===void 0?r=0:r>e.length&&xe(),n===void 0?n=e.length-r:n>e.length-r&&xe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ul.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ul?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),a=r.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class At extends ul{construct(e,r,n){return new At(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ve(se.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new At(r)}static emptyPath(){return new At([])}}const yae=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends ul{construct(e,r,n){return new vr(e,r,n)}static isValidIdentifier(e){return yae.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ve(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ve(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new ve(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(r)}static emptyPath(){return new vr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(At.fromString(e))}static fromName(e){return new ye(At.fromString(e).popFirst(5))}static empty(){return new ye(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return At.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new At(e.slice()))}}function vae(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(n===1e9?new xr(r+1,0):new xr(r,n));return new ps(i,ye.empty(),e)}function _ae(t){return new ps(t.readTime,t.key,-1)}class ps{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ps(Ae.min(),ye.empty(),-1)}static max(){return new ps(Ae.max(),ye.empty(),-1)}}function wae(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ye.comparator(t.documentKey,e.documentKey),r!==0?r:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bae="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Eae{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==bae)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new J((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof J?r:J.resolve(r)}catch(r){return J.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):J.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):J.reject(r)}static resolve(e){return new J((r,n)=>{r(e)})}static reject(e){return new J((r,n)=>{n(e)})}static waitFor(e){return new J((r,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&r()},c=>n(c))}),a=!0,s===i&&r()})}static or(e){let r=J.resolve(!1);for(const n of e)r=r.next(i=>i?J.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(e,r){return new J((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const l=c;r(e[l]).next(u=>{a[l]=u,++o,o===s&&n(a)},u=>i(u))}})}static doWhile(e,r){return new J((n,i)=>{const s=()=>{e()===!0?r().next(()=>{s()},i):n()};s()})}}function Sae(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ou(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wv.oe=-1;function pf(t){return t==null}function Vm(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function mf(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Iae(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,r){this.comparator=e,this.root=r||Yt.EMPTY}insert(e,r){return new Rt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??Yt.RED,this.left=i??Yt.EMPTY,this.right=s??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new Yt(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,r,n,i,s){return this}insert(e,r,n){return new Yt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new f1(this.data.getIterator())}getIteratorFrom(e){return new f1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Zt(this.comparator);return r.data=e,r}}class f1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Zi([])}unionWith(e){let r=new Zt(vr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Zi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zA("Invalid base64 string: "+s):s}}(e);return new ur(r)}static fromUint8Array(e){const r=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ur(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const Tae=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(Ft(!!t),typeof t=="string"){let e=0;const r=Tae.exec(t);if(Ft(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?ur.fromBase64String(t):ur.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ev(t){const e=t.mapValue.fields.__previous_value__;return bv(e)?Ev(e):e}function dl(t){const e=ms(t.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e,r,n,i,s,a,o,c,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=l}}class hl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ra(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bv(t)?4:Aae(t)?9007199254740991:10:xe()}function Un(t,e){if(t===e)return!0;const r=ra(t);if(r!==ra(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dl(t).isEqual(dl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ms(i.timestampValue),o=ms(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ta(i.bytesValue).isEqual(ta(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dt(i.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dt(i.integerValue)===Dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Dt(i.doubleValue),o=Dt(s.doubleValue);return a===o?Vm(a)===Vm(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(h1(a)!==h1(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Un(a[c],o[c])))return!1;return!0}(t,e);default:return xe()}}function fl(t,e){return(t.values||[]).find(r=>Un(r,e))!==void 0}function fo(t,e){if(t===e)return 0;const r=ra(t),n=ra(e);if(r!==n)return et(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Dt(s.integerValue||s.doubleValue),c=Dt(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return p1(t.timestampValue,e.timestampValue);case 4:return p1(dl(t),dl(e));case 5:return et(t.stringValue,e.stringValue);case 6:return function(s,a){const o=ta(s),c=ta(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let l=0;l<o.length&&l<c.length;l++){const u=et(o[l],c[l]);if(u!==0)return u}return et(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=et(Dt(s.latitude),Dt(a.latitude));return o!==0?o:et(Dt(s.longitude),Dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const o=s.values||[],c=a.values||[];for(let l=0;l<o.length&&l<c.length;++l){const u=fo(o[l],c[l]);if(u)return u}return et(o.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===Xu.mapValue&&a===Xu.mapValue)return 0;if(s===Xu.mapValue)return 1;if(a===Xu.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),l=a.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const p=et(c[h],u[h]);if(p!==0)return p;const f=fo(o[c[h]],l[u[h]]);if(f!==0)return f}return et(c.length,u.length)}(t.mapValue,e.mapValue);default:throw xe()}}function p1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const r=ms(t),n=ms(e),i=et(r.seconds,n.seconds);return i!==0?i:et(r.nanos,n.nanos)}function po(t){return Um(t)}function Um(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ms(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ta(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ye.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=Um(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${Um(r.fields[a])}`;return i+"}"}(t.mapValue):xe()}function Bm(t){return!!t&&"integerValue"in t}function Sv(t){return!!t&&"arrayValue"in t}function m1(t){return!!t&&"nullValue"in t}function g1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Op(t){return!!t&&"mapValue"in t}function Hc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return mf(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Hc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Hc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Aae(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Op(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(r)}setAll(e){let r=vr.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=Hc(a):i.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());Op(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Op(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){mf(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new On(Hc(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new lr(e,0,Ae.min(),Ae.min(),Ae.min(),On.empty(),0)}static newFoundDocument(e,r,n,i){return new lr(e,1,r,Ae.min(),n,i,0)}static newNoDocument(e,r){return new lr(e,2,r,Ae.min(),Ae.min(),On.empty(),0)}static newUnknownDocument(e,r){return new lr(e,3,r,Ae.min(),Ae.min(),On.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,r){this.position=e,this.inclusive=r}}function y1(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=ye.comparator(ye.fromName(a.referenceValue),r.key):n=fo(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function v1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Un(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,r="asc"){this.field=e,this.dir=r}}function Pae(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{}class Lt extends qA{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new xae(e,r,n):r==="array-contains"?new Oae(e,n):r==="in"?new Nae(e,n):r==="not-in"?new Dae(e,n):r==="array-contains-any"?new Fae(e,n):new Lt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new kae(e,n):new Rae(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(fo(r,this.value)):r!==null&&ra(this.value)===ra(r)&&this.matchesComparison(fo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends qA{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Bn(e,r)}matches(e){return HA(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HA(t){return t.op==="and"}function KA(t){return Cae(t)&&HA(t)}function Cae(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function zm(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+po(t.value);if(KA(t))return t.filters.map(e=>zm(e)).join(",");{const e=t.filters.map(r=>zm(r)).join(",");return`${t.op}(${e})`}}function GA(t,e){return t instanceof Lt?function(n,i){return i instanceof Lt&&n.op===i.op&&n.field.isEqual(i.field)&&Un(n.value,i.value)}(t,e):t instanceof Bn?function(n,i){return i instanceof Bn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&GA(a,i.filters[o]),!0):!1}(t,e):void xe()}function WA(t){return t instanceof Lt?function(r){return`${r.field.canonicalString()} ${r.op} ${po(r.value)}`}(t):t instanceof Bn?function(r){return r.op.toString()+" {"+r.getFilters().map(WA).join(" ,")+"}"}(t):"Filter"}class xae extends Lt{constructor(e,r,n){super(e,r,n),this.key=ye.fromName(n.referenceValue)}matches(e){const r=ye.comparator(e.key,this.key);return this.matchesComparison(r)}}class kae extends Lt{constructor(e,r){super(e,"in",r),this.keys=YA("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Rae extends Lt{constructor(e,r){super(e,"not-in",r),this.keys=YA("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function YA(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ye.fromName(n.referenceValue))}class Oae extends Lt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Sv(r)&&fl(r.arrayValue,this.value)}}class Nae extends Lt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&fl(this.value.arrayValue,r)}}class Dae extends Lt{constructor(e,r){super(e,"not-in",r)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!fl(this.value.arrayValue,r)}}class Fae extends Lt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Sv(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>fl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mae{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function _1(t,e=null,r=[],n=[],i=null,s=null,a=null){return new Mae(t,e,r,n,i,s,a)}function Iv(t){const e=He(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>zm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),pf(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>po(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>po(n)).join(",")),e.ue=r}return e.ue}function Tv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Pae(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!GA(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v1(t.startAt,e.startAt)&&v1(t.endAt,e.endAt)}function qm(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jae(t,e,r,n,i,s,a,o){return new gf(t,e,r,n,i,s,a,o)}function $v(t){return new gf(t)}function w1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lae(t){return t.collectionGroup!==null}function Kc(t){const e=He(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Zt(vr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(o=o.add(l.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new sh(s,n))}),r.has(vr.keyField().canonicalString())||e.ce.push(new sh(vr.keyField(),n))}return e.ce}function jn(t){const e=He(t);return e.le||(e.le=Vae(e,Kc(t))),e.le}function Vae(t,e){if(t.limitType==="F")return _1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new sh(i.field,s)});const r=t.endAt?new ih(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new ih(t.startAt.position,t.startAt.inclusive):null;return _1(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Hm(t,e,r){return new gf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function yf(t,e){return Tv(jn(t),jn(e))&&t.limitType===e.limitType}function QA(t){return`${Iv(jn(t))}|lt:${t.limitType}`}function Ra(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>WA(i)).join(", ")}]`),pf(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>po(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>po(i)).join(",")),`Target(${n})`}(jn(t))}; limitType=${t.limitType})`}function vf(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ye.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of Kc(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,o,c){const l=y1(a,o,c);return a.inclusive?l<=0:l<0}(n.startAt,Kc(n),i)||n.endAt&&!function(a,o,c){const l=y1(a,o,c);return a.inclusive?l>=0:l>0}(n.endAt,Kc(n),i))}(t,e)}function Uae(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XA(t){return(e,r)=>{let n=!1;for(const i of Kc(t)){const s=Bae(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function Bae(t,e,r){const n=t.field.isKeyField()?ye.comparator(e.key,r.key):function(s,a,o){const c=a.data.field(s),l=o.data.field(s);return c!==null&&l!==null?fo(c,l):xe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mf(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return Iae(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zae=new Rt(ye.comparator);function gs(){return zae}const JA=new Rt(ye.comparator);function xc(...t){let e=JA;for(const r of t)e=e.insert(r.key,r);return e}function qae(t){let e=JA;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function js(){return Gc()}function ZA(){return Gc()}function Gc(){return new Go(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hae=new Zt(ye.comparator);function qe(...t){let e=Hae;for(const r of t)e=e.add(r);return e}const Kae=new Zt(et);function Gae(){return Kae}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wae(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vm(e)?"-0":e}}function Yae(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this._=void 0}}function Qae(t,e,r){return t instanceof Km?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bv(s)&&(s=Ev(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(r,e):t instanceof ah?eP(t,e):t instanceof oh?tP(t,e):function(i,s){const a=Jae(i,s),o=b1(a)+b1(i.Pe);return Bm(a)&&Bm(i.Pe)?Yae(o):Wae(i.serializer,o)}(t,e)}function Xae(t,e,r){return t instanceof ah?eP(t,e):t instanceof oh?tP(t,e):r}function Jae(t,e){return t instanceof Gm?function(n){return Bm(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Km extends _f{}class ah extends _f{constructor(e){super(),this.elements=e}}function eP(t,e){const r=rP(e);for(const n of t.elements)r.some(i=>Un(i,n))||r.push(n);return{arrayValue:{values:r}}}class oh extends _f{constructor(e){super(),this.elements=e}}function tP(t,e){let r=rP(e);for(const n of t.elements)r=r.filter(i=>!Un(i,n));return{arrayValue:{values:r}}}class Gm extends _f{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function b1(t){return Dt(t.integerValue||t.doubleValue)}function rP(t){return Sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Zae(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof ah&&i instanceof ah||n instanceof oh&&i instanceof oh?ho(n.elements,i.elements,Un):n instanceof Gm&&i instanceof Gm?Un(n.Pe,i.Pe):n instanceof Km&&i instanceof Km}(t.transform,e.transform)}class Us{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Us}static exists(e){return new Us(void 0,e)}static updateTime(e){return new Us(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Av{}function nP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new toe(t.key,Us.none()):new Pv(t.key,t.data,Us.none());{const r=t.data,n=On.empty();let i=new Zt(vr.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new wf(t.key,n,new Zi(i.toArray()),Us.none())}}function eoe(t,e,r){t instanceof Pv?function(i,s,a){const o=i.value.clone(),c=S1(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof wf?function(i,s,a){if(!vd(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=S1(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(iP(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Wc(t,e,r,n){return t instanceof Pv?function(s,a,o,c){if(!vd(s.precondition,a))return o;const l=s.value.clone(),u=I1(s.fieldTransforms,c,a);return l.setAll(u),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof wf?function(s,a,o,c){if(!vd(s.precondition,a))return o;const l=I1(s.fieldTransforms,c,a),u=a.data;return u.setAll(iP(s)),u.setAll(l),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,a,o){return vd(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function E1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ho(n,i,(s,a)=>Zae(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pv extends Av{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wf extends Av{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iP(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function S1(t,e,r){const n=new Map;Ft(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,Xae(a,o,r[i]))}return n}function I1(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,Qae(s,a,e))}return n}class toe extends Av{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class roe{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&eoe(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Wc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Wc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=ZA();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const c=nP(a,o);c!==null&&n.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Ae.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),qe())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(r,n)=>E1(r,n))&&ho(this.baseMutations,e.baseMutations,(r,n)=>E1(r,n))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class noe{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ioe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ve;function sP(t){if(t===void 0)return mi("GRPC error has no .code"),se.UNKNOWN;switch(t){case Nt.OK:return se.OK;case Nt.CANCELLED:return se.CANCELLED;case Nt.UNKNOWN:return se.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return se.INTERNAL;case Nt.UNAVAILABLE:return se.UNAVAILABLE;case Nt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Nt.NOT_FOUND:return se.NOT_FOUND;case Nt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Nt.ABORTED:return se.ABORTED;case Nt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Nt.DATA_LOSS:return se.DATA_LOSS;default:return xe()}}(Ve=Nt||(Nt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function soe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aoe=new Ls([4294967295,4294967295],0);function T1(t){const e=soe().encode(t),r=new NA;return r.update(e),new Uint8Array(r.digest())}function $1(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ls([r,n],0),new Ls([i,s],0)]}class Cv{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new kc(`Invalid padding: ${r}`);if(n<0)throw new kc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new kc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ls.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Ls.fromNumber(n)));return i.compare(aoe)===1&&(i=new Ls([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=T1(e),[n,i]=$1(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Cv(s,i,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=T1(e),[n,i]=$1(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new bf(Ae.min(),i,new Rt(et),gs(),qe())}}class cu{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new cu(n,r,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class aP{constructor(e,r){this.targetId=e,this.me=r}}class oP{constructor(e,r,n=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class A1{constructor(){this.fe=0,this.ge=C1(),this.pe=ur.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=qe(),r=qe(),n=qe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:xe()}}),new cu(this.pe,this.ye,e,r,n)}ve(){this.we=!1,this.ge=C1()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ooe{constructor(e){this.Le=e,this.Be=new Map,this.ke=gs(),this.qe=P1(),this.Qe=new Rt(et)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const s=i.target;if(qm(s))if(n===0){const a=new ye(s.path);this.Ue(r,a,lr.newNoDocument(a,Ae.min()))}else Ft(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(r);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,l)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,o;try{a=ta(n).toUint8Array()}catch(c){if(c instanceof zA)return uo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new Cv(a,i,s)}catch(c){return uo(c instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,s,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&qm(o.target)){const c=new ye(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,lr.newNoDocument(c,e))}s.be&&(r.set(a,s.Ce()),s.ve())}});let n=qe();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new bf(e,r,this.Qe,this.ke,n);return this.ke=gs(),this.qe=P1(),this.Qe=new Rt(et),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new A1,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Zt(et),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||de("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new A1),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function P1(){return new Rt(ye.comparator)}function C1(){return new Rt(ye.comparator)}const coe={asc:"ASCENDING",desc:"DESCENDING"},loe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uoe={and:"AND",or:"OR"};class doe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Wm(t,e){return t.useProto3Json||pf(e)?e:{value:e}}function hoe(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function foe(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ha(t){return Ft(!!t),Ae.fromTimestamp(function(r){const n=ms(r);return new xr(n.seconds,n.nanos)}(t))}function poe(t,e){return Ym(t,e).canonicalString()}function Ym(t,e){const r=function(i){return new At(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function cP(t){const e=At.fromString(t);return Ft(fP(e)),e}function Np(t,e){const r=cP(e);if(r.get(1)!==t.databaseId.projectId)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ye(uP(r))}function lP(t,e){return poe(t.databaseId,e)}function moe(t){const e=cP(t);return e.length===4?At.emptyPath():uP(e)}function x1(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uP(t){return Ft(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function goe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(Ft(u===void 0||typeof u=="string"),ur.fromBase64String(u||"")):(Ft(u===void 0||u instanceof oe||u instanceof Uint8Array),ur.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(l){const u=l.code===void 0?se.UNKNOWN:sP(l.code);return new ve(u,l.message||"")}(a);r=new oP(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Np(t,n.document.name),s=Ha(n.document.updateTime),a=n.document.createTime?Ha(n.document.createTime):Ae.min(),o=new On({mapValue:{fields:n.document.fields}}),c=lr.newFoundDocument(i,s,a,o),l=n.targetIds||[],u=n.removedTargetIds||[];r=new _d(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Np(t,n.document),s=n.readTime?Ha(n.readTime):Ae.min(),a=lr.newNoDocument(i,s),o=n.removedTargetIds||[];r=new _d([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Np(t,n.document),s=n.removedTargetIds||[];r=new _d([],s,i,null)}else{if(!("filter"in e))return xe();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new ioe(i,s),o=n.targetId;r=new aP(o,a)}}return r}function yoe(t,e){return{documents:[lP(t,e.path)]}}function voe(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=lP(t,i);const s=function(l){if(l.length!==0)return hP(Bn.create(l,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const a=function(l){if(l.length!==0)return l.map(u=>function(p){return{field:Oa(p.field),direction:boe(p.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Wm(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:r,parent:i}}function _oe(t){let e=moe(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Ft(n===1);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];r.where&&(s=function(h){const p=dP(h);return p instanceof Bn&&KA(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(p=>function(m){return new sh(Na(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(h){let p;return p=typeof h=="object"?h.value:h,pf(p)?null:p}(r.limit));let c=null;r.startAt&&(c=function(h){const p=!!h.before,f=h.values||[];return new ih(f,p)}(r.startAt));let l=null;return r.endAt&&(l=function(h){const p=!h.before,f=h.values||[];return new ih(f,p)}(r.endAt)),jae(e,i,a,s,o,"F",c,l)}function woe(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function dP(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Na(r.unaryFilter.field);return Lt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Na(r.unaryFilter.field);return Lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Na(r.unaryFilter.field);return Lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Na(r.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(t):t.fieldFilter!==void 0?function(r){return Lt.create(Na(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Bn.create(r.compositeFilter.filters.map(n=>dP(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe()}}(r.compositeFilter.op))}(t):xe()}function boe(t){return coe[t]}function Eoe(t){return loe[t]}function Soe(t){return uoe[t]}function Oa(t){return{fieldPath:t.canonicalString()}}function Na(t){return vr.fromServerFormat(t.fieldPath)}function hP(t){return t instanceof Lt?function(r){if(r.op==="=="){if(g1(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NAN"}};if(m1(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(g1(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NOT_NAN"}};if(m1(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(r.field),op:Eoe(r.op),value:r.value}}}(t):t instanceof Bn?function(r){const n=r.getFilters().map(i=>hP(i));return n.length===1?n[0]:{compositeFilter:{op:Soe(r.op),filters:n}}}(t):xe()}function fP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,r,n,i,s=Ae.min(),a=Ae.min(),o=ur.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ioe{constructor(e){this.ct=e}}function Toe(t){const e=_oe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $oe{constructor(){this._n=new Aoe}addToCollectionParentIndex(e,r){return this._n.add(r),J.resolve()}getCollectionParents(e,r){return J.resolve(this._n.getEntries(r))}addFieldIndex(e,r){return J.resolve()}deleteFieldIndex(e,r){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,r){return J.resolve()}getDocumentsMatchingTarget(e,r){return J.resolve(null)}getIndexType(e,r){return J.resolve(0)}getFieldIndexes(e,r){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,r){return J.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,r){return J.resolve(ps.min())}updateCollectionGroup(e,r,n){return J.resolve()}updateIndexEntries(e,r){return J.resolve()}}class Aoe{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Zt(At.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Zt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new mo(0)}static Ln(){return new mo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{constructor(){this.changes=new Go(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?J.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Wc(n.mutation,i,Zi.empty(),xr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,qe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=qe()){const i=js();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(s=>{let a=xc();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=js();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,qe()))}populateOverlays(e,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,i){let s=gs();const a=Gc(),o=function(){return Gc()}();return r.forEach((c,l)=>{const u=n.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof wf)?s=s.insert(l.key,l):u!==void 0?(a.set(l.key,u.mutation.getFieldMask()),Wc(u.mutation,l,u.mutation.getFieldMask(),xr.now())):a.set(l.key,Zi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>a.set(l,u)),r.forEach((l,u)=>{var h;return o.set(l,new Coe(u,(h=a.get(l))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Gc();let i=new Rt((a,o)=>a-o),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(c=>{const l=r.get(c);if(l===null)return;let u=n.get(c)||Zi.empty();u=o.applyToLocalView(l,u),n.set(c,u);const h=(i.get(o.batchId)||qe()).add(c);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),l=c.key,u=c.value,h=ZA();u.forEach(p=>{if(!s.has(p)){const f=nP(r.get(p),n.get(p));f!==null&&h.set(p,f),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,l,h))}return J.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Lae(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):J.resolve(js());let o=-1,c=s;return a.next(l=>J.forEach(l,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?J.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,qe())).next(u=>({batchId:o,changes:qae(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ye(r)).next(n=>{let i=xc();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=xc();return this.indexManager.getCollectionParents(e,s).next(o=>J.forEach(o,c=>{const l=function(h,p){return new gf(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,n,i).next(u=>{u.forEach((h,p)=>{a=a.insert(h,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i))).next(a=>{s.forEach((c,l)=>{const u=l.getKey();a.get(u)===null&&(a=a.insert(u,lr.newInvalidDocument(u)))});let o=xc();return a.forEach((c,l)=>{const u=s.get(c);u!==void 0&&Wc(u.mutation,l,Zi.empty(),xr.now()),vf(r,l)&&(o=o.insert(c,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,r){return J.resolve(this.cr.get(r))}saveBundleMetadata(e,r){return this.cr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ha(i.createTime)}}(r)),J.resolve()}getNamedQuery(e,r){return J.resolve(this.lr.get(r))}saveNamedQuery(e,r){return this.lr.set(r.name,function(i){return{name:i.name,query:Toe(i.bundledQuery),readTime:Ha(i.readTime)}}(r)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Roe{constructor(){this.overlays=new Rt(ye.comparator),this.hr=new Map}getOverlay(e,r){return J.resolve(this.overlays.get(r))}getOverlays(e,r){const n=js();return J.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.ht(e,r,s)}),J.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.hr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),J.resolve()}getOverlaysForCollection(e,r,n){const i=js(),s=r.length+1,a=new ye(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,l=c.getKey();if(!r.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>n&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new Rt((l,u)=>l-u);const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===r&&l.largestBatchId>n){let u=s.get(l.largestBatchId);u===null&&(u=js(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const o=js(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>o.set(l,u)),!(o.size()>=i)););return J.resolve(o)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new noe(r,n));let s=this.hr.get(r);s===void 0&&(s=qe(),this.hr.set(r,s)),this.hr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.Pr=new Zt(zt.Ir),this.Tr=new Zt(zt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,r){const n=new zt(e,r);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Ar(new zt(e,r))}Rr(e,r){e.forEach(n=>this.removeReference(n,r))}Vr(e){const r=new ye(new At([])),n=new zt(r,e),i=new zt(r,e+1),s=[];return this.Tr.forEachInRange([n,i],a=>{this.Ar(a),s.push(a.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const r=new ye(new At([])),n=new zt(r,e),i=new zt(r,e+1);let s=qe();return this.Tr.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new zt(e,0),n=this.Pr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class zt{constructor(e,r){this.key=e,this.pr=r}static Ir(e,r){return ye.comparator(e.key,r.key)||et(e.pr,r.pr)}static Er(e,r){return et(e.pr,r.pr)||ye.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ooe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new Zt(zt.Ir)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new roe(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.wr=this.wr.add(new zt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return J.resolve(a)}lookupMutationBatch(e,r){return J.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.br(n),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new zt(r,0),i=new zt(r,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,i],a=>{const o=this.Sr(a.pr);s.push(o)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Zt(et);return r.forEach(i=>{const s=new zt(i,0),a=new zt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,a],o=>{n=n.add(o.pr)})}),J.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;ye.isDocumentKey(s)||(s=s.child(""));const a=new zt(new ye(s),0);let o=new Zt(et);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!n.isPrefixOf(l)&&(l.length===i&&(o=o.add(c.pr)),!0)},a),J.resolve(this.Dr(o))}Dr(e){const r=[];return e.forEach(n=>{const i=this.Sr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Ft(this.Cr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return J.forEach(r.mutations,i=>{const s=new zt(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=n})}Mn(e){}containsKey(e,r){const n=new zt(r,0),i=this.wr.firstAfterOrEqual(n);return J.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Cr(e,r){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const r=this.br(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Noe{constructor(e){this.vr=e,this.docs=function(){return new Rt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.vr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return J.resolve(n?n.document.mutableCopy():lr.newInvalidDocument(r))}getEntries(e,r){let n=gs();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():lr.newInvalidDocument(i))}),J.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=gs();const a=r.path,o=new ye(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||wae(_ae(u),n)<=0||(i.has(u.key)||vf(r,u))&&(s=s.insert(u.key,u.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,r,n,i){xe()}Fr(e,r){return J.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Doe(this)}getSize(e){return J.resolve(this.size)}}class Doe extends Poe{constructor(e){super(),this.ar=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)}),J.waitFor(r)}getFromCache(e,r){return this.ar.getEntry(e,r)}getAllFromCache(e,r){return this.ar.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Foe{constructor(e){this.persistence=e,this.Mr=new Go(r=>Iv(r),Tv),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new xv,this.targetCount=0,this.Lr=mo.Nn()}forEachTarget(e,r){return this.Mr.forEach((n,i)=>r(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Or&&(this.Or=r),J.resolve()}qn(e){this.Mr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Lr=new mo(r),this.highestTargetId=r),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,r){return this.qn(r),this.targetCount+=1,J.resolve()}updateTargetData(e,r){return this.qn(r),J.resolve()}removeTargetData(e,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Mr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Mr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,r){const n=this.Mr.get(r)||null;return J.resolve(n)}addMatchingKeys(e,r,n){return this.Nr.dr(r,n),J.resolve()}removeMatchingKeys(e,r,n){this.Nr.Rr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Nr.Vr(r),J.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Nr.gr(r);return J.resolve(n)}containsKey(e,r){return J.resolve(this.Nr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Moe{constructor(e,r){this.Br={},this.overlays={},this.kr=new wv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Foe(this),this.indexManager=new $oe,this.remoteDocumentCache=function(i){return new Noe(i)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Ioe(r),this.$r=new koe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Roe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Br[e.toKey()];return n||(n=new Ooe(r,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,r,n){de("MemoryPersistence","Starting transaction:",e);const i=new joe(this.kr.next());return this.referenceDelegate.Ur(),n(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,r){return J.or(Object.values(this.Br).map(n=>()=>n.containsKey(e,r)))}}class joe extends Eae{constructor(e){super(),this.currentSequenceNumber=e}}class kv{constructor(e){this.persistence=e,this.zr=new xv,this.jr=null}static Hr(e){return new kv(e)}get Jr(){if(this.jr)return this.jr;throw xe()}addReference(e,r,n){return this.zr.addReference(n,r),this.Jr.delete(n.toString()),J.resolve()}removeReference(e,r,n){return this.zr.removeReference(n,r),this.Jr.add(n.toString()),J.resolve()}markPotentiallyOrphaned(e,r){return this.Jr.add(r.toString()),J.resolve()}removeTarget(e,r){this.zr.Vr(r.targetId).forEach(i=>this.Jr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ur(){this.jr=new Set}Wr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Jr,n=>{const i=ye.fromPath(n);return this.Yr(e,i).next(s=>{s||r.removeEntry(i,Ae.min())})}).next(()=>(this.jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Yr(e,r).next(n=>{n?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(e){return 0}Yr(e,r){return J.or([()=>J.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.qi=n,this.Qi=i}static Ki(e,r){let n=qe(),i=qe();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Rv(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Loe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Voe{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Gie()?8:Sae(er())>0?6:4}()}initialize(e,r){this.zi=e,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.ji(e,r).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Hi(e,r,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Loe;return this.Ji(e,r,a).next(o=>{if(s.result=o,this.Ui)return this.Yi(e,r,a,o.size)})}).next(()=>s.result)}Yi(e,r,n,i){return n.documentReadCount<this.Wi?(Ic()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ra(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),J.resolve()):(Ic()<=Le.DEBUG&&de("QueryEngine","Query:",Ra(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Ic()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ra(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(r))):J.resolve())}ji(e,r){if(w1(r))return J.resolve(null);let n=jn(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Hm(r,null,"F"),n=jn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=qe(...s);return this.zi.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(c=>{const l=this.Zi(r,o);return this.Xi(r,l,a,c.readTime)?this.ji(e,Hm(r,null,"F")):this.es(e,l,r,c)}))})))}Hi(e,r,n,i){return w1(r)||i.isEqual(Ae.min())?J.resolve(null):this.zi.getDocuments(e,n).next(s=>{const a=this.Zi(r,s);return this.Xi(r,a,n,i)?J.resolve(null):(Ic()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ra(r)),this.es(e,a,r,vae(i,-1)).next(o=>o))})}Zi(e,r){let n=new Zt(XA(e));return r.forEach((i,s)=>{vf(e,s)&&(n=n.add(s))}),n}Xi(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,r,n){return Ic()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ra(r)),this.zi.getDocumentsMatchingQuery(e,r,ps.min(),n)}es(e,r,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next(s=>(r.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uoe{constructor(e,r,n,i){this.persistence=e,this.ts=r,this.serializer=i,this.ns=new Rt(et),this.rs=new Go(s=>Iv(s),Tv),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xoe(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ns))}}function Boe(t,e,r,n){return new Uoe(t,e,r,n)}async function pP(t,e){const r=He(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r._s(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let c=qe();for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return r.localDocuments.getDocuments(n,c).next(l=>({us:l,removedBatchIds:a,addedBatchIds:o}))})})}function mP(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Qr.getLastRemoteSnapshotVersion(r))}function zoe(t,e){const r=He(t),n=e.snapshotVersion;let i=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.os.newChangeBuffer({trackRemovals:!0});i=r.ns;const o=[];e.targetChanges.forEach((u,h)=>{const p=i.get(h);if(!p)return;o.push(r.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>r.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(ur.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,n)),i=i.insert(h,f),function(g,y,v){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,f,u)&&o.push(r.Qr.updateTargetData(s,f))});let c=gs(),l=qe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(qoe(s,a,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!n.isEqual(Ae.min())){const u=r.Qr.getLastRemoteSnapshotVersion(s).next(h=>r.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(u)}return J.waitFor(o).next(()=>a.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(r.ns=i,s))}function qoe(t,e,r){let n=qe(),i=qe();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let a=gs();return r.forEach((o,c)=>{const l=s.get(o);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):de("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",c.version)}),{cs:a,ls:i}})}function Hoe(t,e){const r=He(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Qr.getTargetData(n,e).next(s=>s?(i=s,J.resolve(i)):r.Qr.allocateTargetId(n).next(a=>(i=new es(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Qr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.ns.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ns=r.ns.insert(n.targetId,n),r.rs.set(e,n.targetId)),n})}async function Qm(t,e,r){const n=He(t),i=n.ns.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ou(a))throw a;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.ns=n.ns.remove(e),n.rs.delete(i.target)}function k1(t,e,r){const n=He(t);let i=Ae.min(),s=qe();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,l,u){const h=He(c),p=h.rs.get(u);return p!==void 0?J.resolve(h.ns.get(p)):h.Qr.getTargetData(l,u)}(n,a,jn(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>n.ts.getDocumentsMatchingQuery(a,e,r?i:Ae.min(),r?s:qe())).next(o=>(Koe(n,Uae(e),o),{documents:o,hs:s})))}function Koe(t,e,r){let n=t.ss.get(e)||Ae.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.ss.set(e,n)}class R1{constructor(){this.activeTargetIds=Gae()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Goe{constructor(){this.no=new R1,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,r,n){this.ro[e]=r}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new R1,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Woe{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function Dp(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yoe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qoe{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="WebChannelConnection";class Xoe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+r.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(r,n,i,s,a){const o=Dp(),c=this.vo(r,n.toUriEncodedString());de("RestConnection",`Sending RPC '${r}' ${o}:`,c,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,a),this.Mo(r,c,l,i).then(u=>(de("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw uo("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",c,"request:",i),u})}xo(r,n,i,s,a,o){return this.Co(r,n,i,s,a)}Fo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>r[a]=s),i&&i.headers.forEach((s,a)=>r[a]=s)}vo(r,n){const i=Yoe[r];return`${this.wo}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,r,n,i){const s=Dp();return new Promise((a,o)=>{const c=new DA;c.setWithCredentials(!0),c.listenOnce(MA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case yd.NO_ERROR:const u=c.getResponseJson();de(ar,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),a(u);break;case yd.TIMEOUT:de(ar,`RPC '${e}' ${s} timed out`),o(new ve(se.DEADLINE_EXCEEDED,"Request time out"));break;case yd.HTTP_ERROR:const h=c.getStatus();if(de(ar,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const f=p==null?void 0:p.error;if(f&&f.status&&f.message){const m=function(y){const v=y.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(v)>=0?v:se.UNKNOWN}(f.status);o(new ve(m,f.message))}else o(new ve(se.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new ve(se.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{de(ar,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);de(ar,`RPC '${e}' ${s} sending request:`,i),c.send(r,"POST",l,n,15)})}Oo(e,r,n){const i=Dp(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=VA(),o=LA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new FA({})),this.Fo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const u=s.join("");de(ar,`Creating RPC '${e}' stream ${i}: ${u}`,c);const h=a.createWebChannel(u,c);let p=!1,f=!1;const m=new Qoe({lo:y=>{f?de(ar,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(p||(de(ar,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),de(ar,`RPC '${e}' stream ${i} sending:`,y),h.send(y))},ho:()=>h.close()}),g=(y,v,w)=>{y.listen(v,$=>{try{w($)}catch(A){setTimeout(()=>{throw A},0)}})};return g(h,Cc.EventType.OPEN,()=>{f||(de(ar,`RPC '${e}' stream ${i} transport opened.`),m.mo())}),g(h,Cc.EventType.CLOSE,()=>{f||(f=!0,de(ar,`RPC '${e}' stream ${i} transport closed`),m.po())}),g(h,Cc.EventType.ERROR,y=>{f||(f=!0,uo(ar,`RPC '${e}' stream ${i} transport errored:`,y),m.po(new ve(se.UNAVAILABLE,"The operation could not be completed")))}),g(h,Cc.EventType.MESSAGE,y=>{var v;if(!f){const w=y.data[0];Ft(!!w);const $=w,A=$.error||((v=$[0])===null||v===void 0?void 0:v.error);if(A){de(ar,`RPC '${e}' stream ${i} received error:`,A);const P=A.status;let O=function(I){const T=Nt[I];if(T!==void 0)return sP(T)}(P),E=A.message;O===void 0&&(O=se.INTERNAL,E="Unknown error status: "+P+" with message "+A.message),f=!0,m.po(new ve(O,E)),h.close()}else de(ar,`RPC '${e}' stream ${i} received:`,w),m.yo(w)}}),g(o,jA.STAT_EVENT,y=>{y.stat===Lm.PROXY?de(ar,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===Lm.NOPROXY&&de(ar,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.fo()},0),m}}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t){return new doe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,r,n=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=r,this.No=n,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const r=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),i=Math.max(0,r-n);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Joe{constructor(e,r,n,i,s,a,o,c){this.oi=e,this.Go=n,this.zo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new yP(e,r)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,r){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():r&&r.code===se.RESOURCE_EXHAUSTED?(mi(r.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):r&&r.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(r)}__(){}auth(){this.state=1;const e=this.a_(this.jo),r=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.jo===r&&this.u_(n,i)},n=>{e(()=>{const i=new ve(se.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(i)})})}u_(e,r){const n=this.a_(this.jo);this.stream=this.l_(e,r),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{n(()=>this.c_(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return r=>{this.oi.enqueueAndForget(()=>this.jo===e?r():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zoe extends Joe{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}l_(e,r){return this.connection.Oo("Listen",e,r)}onMessage(e){this.Yo.reset();const r=goe(this.serializer,e),n=function(s){if(!("targetChange"in s))return Ae.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ae.min():a.readTime?Ha(a.readTime):Ae.min()}(e);return this.listener.h_(r,n)}P_(e){const r={};r.database=x1(this.serializer),r.addTarget=function(s,a){let o;const c=a.target;if(o=qm(c)?{documents:yoe(s,c)}:{query:voe(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=foe(s,a.resumeToken);const l=Wm(s,a.expectedCount);l!==null&&(o.expectedCount=l)}else if(a.snapshotVersion.compareTo(Ae.min())>0){o.readTime=hoe(s,a.snapshotVersion.toTimestamp());const l=Wm(s,a.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const n=woe(this.serializer,e);n&&(r.labels=n),this.i_(r)}I_(e){const r={};r.database=x1(this.serializer),r.removeTarget=e,this.i_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ece extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,r,n,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,Ym(r,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(se.UNKNOWN,s.toString())})}xo(e,r,n,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.xo(e,Ym(r,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(se.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class tce{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(mi(r),this.y_=!1):de("OnlineStateTracker",r)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rce{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{n.enqueueAndForget(async()=>{uu(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=He(c);l.M_.add(4),await lu(l),l.N_.set("Unknown"),l.M_.delete(4),await Ef(l)}(this))})}),this.N_=new tce(n,i)}}async function Ef(t){if(uu(t))for(const e of t.x_)await e(!0)}async function lu(t){for(const e of t.x_)await e(!1)}function vP(t,e){const r=He(t);r.F_.has(e.targetId)||(r.F_.set(e.targetId,e),Fv(r)?Dv(r):Wo(r).Xo()&&Nv(r,e))}function Ov(t,e){const r=He(t),n=Wo(r);r.F_.delete(e),n.Xo()&&_P(r,e),r.F_.size===0&&(n.Xo()?n.n_():uu(r)&&r.N_.set("Unknown"))}function Nv(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Wo(t).P_(e)}function _P(t,e){t.L_.xe(e),Wo(t).I_(e)}function Dv(t){t.L_=new ooe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wo(t).start(),t.N_.w_()}function Fv(t){return uu(t)&&!Wo(t).Zo()&&t.F_.size>0}function uu(t){return He(t).M_.size===0}function wP(t){t.L_=void 0}async function nce(t){t.N_.set("Online")}async function ice(t){t.F_.forEach((e,r)=>{Nv(t,e)})}async function sce(t,e){wP(t),Fv(t)?(t.N_.D_(e),Dv(t)):t.N_.set("Unknown")}async function ace(t,e,r){if(t.N_.set("Online"),e instanceof oP&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.F_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.F_.delete(o),i.L_.removeTarget(o))}(t,e)}catch(n){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await N1(t,n)}else if(e instanceof _d?t.L_.Ke(e):e instanceof aP?t.L_.He(e):t.L_.We(e),!r.isEqual(Ae.min()))try{const n=await mP(t.localStore);r.compareTo(n)>=0&&await function(s,a){const o=s.L_.rt(a);return o.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.F_.get(l);u&&s.F_.set(l,u.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,l)=>{const u=s.F_.get(c);if(!u)return;s.F_.set(c,u.withResumeToken(ur.EMPTY_BYTE_STRING,u.snapshotVersion)),_P(s,c);const h=new es(u.target,c,l,u.sequenceNumber);Nv(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){de("RemoteStore","Failed to raise snapshot:",n),await N1(t,n)}}async function N1(t,e,r){if(!ou(e))throw e;t.M_.add(1),await lu(t),t.N_.set("Offline"),r||(r=()=>mP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await r(),t.M_.delete(1),await Ef(t)})}async function D1(t,e){const r=He(t);r.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const n=uu(r);r.M_.add(3),await lu(r),n&&r.N_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.M_.delete(3),await Ef(r)}async function oce(t,e){const r=He(t);e?(r.M_.delete(2),await Ef(r)):e||(r.M_.add(2),await lu(r),r.N_.set("Unknown"))}function Wo(t){return t.B_||(t.B_=function(r,n,i){const s=He(r);return s.f_(),new Zoe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:nce.bind(null,t),To:ice.bind(null,t),Ao:sce.bind(null,t),h_:ace.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Fv(t)?Dv(t):t.N_.set("Unknown")):(await t.B_.stop(),wP(t))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new Mv(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bP(t,e){if(mi("AsyncQueue",`${e}: ${t}`),ou(t))return new ve(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ye.comparator(r.key,n.key):(r,n)=>ye.comparator(r.key,n.key),this.keyedMap=xc(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new Ka(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ka)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ka;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.q_=new Rt(ye.comparator)}track(e){const r=e.doc.key,n=this.q_.get(r);n?e.type!==0&&n.type===3?this.q_=this.q_.insert(r,e):e.type===3&&n.type!==1?this.q_=this.q_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.q_=this.q_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.q_=this.q_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.q_=this.q_.remove(r):e.type===1&&n.type===2?this.q_=this.q_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.q_=this.q_.insert(r,{type:2,doc:e.doc}):xe():this.q_=this.q_.insert(r,e)}Q_(){const e=[];return this.q_.inorderTraversal((r,n)=>{e.push(n)}),e}}class go{constructor(e,r,n,i,s,a,o,c,l){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new go(e,r,Ka.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cce{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class lce{constructor(){this.queries=new Go(e=>QA(e),yf),this.onlineState="Unknown",this.z_=new Set}}async function uce(t,e){const r=He(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.W_()&&e.G_()&&(n=2):(s=new cce,n=e.G_()?0:1);try{switch(n){case 0:s.K_=await r.onListen(i,!0);break;case 1:s.K_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const o=bP(a,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,s),s.U_.push(e),e.j_(r.onlineState),s.K_&&e.H_(s.K_)&&jv(r)}async function dce(t,e){const r=He(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.U_.indexOf(e);a>=0&&(s.U_.splice(a,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function hce(t,e){const r=He(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.U_)o.H_(i)&&(n=!0);a.K_=i}}n&&jv(r)}function fce(t,e,r){const n=He(t),i=n.queries.get(e);if(i)for(const s of i.U_)s.onError(r);n.queries.delete(e)}function jv(t){t.z_.forEach(e=>{e.next()})}var Xm,M1;(M1=Xm||(Xm={})).J_="default",M1.Cache="cache";class pce{constructor(e,r,n){this.query=e,this.Y_=r,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new go(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),r=!0):this.ta(e,this.onlineState)&&(this.na(e),r=!0),this.X_=e,r}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let r=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),r=!0),r}ta(e,r){if(!e.fromCache||!this.G_())return!0;const n=r!=="Offline";return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const r=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}na(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.key=e}}class SP{constructor(e){this.key=e}}class mce{constructor(e,r){this.query=e,this.la=r,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=qe(),this.mutatedKeys=qe(),this.Ia=XA(e),this.Ta=new Ka(this.Ia)}get Ea(){return this.la}da(e,r){const n=r?r.Aa:new F1,i=r?r.Ta:this.Ta;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const p=i.get(u),f=vf(this.query,h)?h:null,m=!!p&&this.mutatedKeys.has(p.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;p&&f?p.data.isEqual(f.data)?m!==g&&(n.track({type:3,doc:f}),y=!0):this.Ra(p,f)||(n.track({type:2,doc:f}),y=!0,(c&&this.Ia(f,c)>0||l&&this.Ia(f,l)<0)&&(o=!0)):!p&&f?(n.track({type:0,doc:f}),y=!0):p&&!f&&(n.track({type:1,doc:p}),y=!0,(c||l)&&(o=!0)),y&&(f?(a=a.add(f),s=g?s.add(u):s.delete(u)):(a=a.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),s=s.delete(u.key),n.track({type:1,doc:u})}return{Ta:a,Aa:n,Xi:o,mutatedKeys:s}}Ra(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const a=e.Aa.Q_();a.sort((u,h)=>function(f,m){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return g(f)-g(m)}(u.type,h.type)||this.Ia(u.doc,h.doc)),this.Va(n),i=i!=null&&i;const o=r&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,a.length!==0||l?{snapshot:new go(this.query,e.Ta,s,a,e.mutatedKeys,c===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new F1,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(r=>this.la=this.la.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.la=this.la.delete(r)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=qe(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const r=[];return e.forEach(n=>{this.Pa.has(n)||r.push(new SP(n))}),this.Pa.forEach(n=>{e.has(n)||r.push(new EP(n))}),r}pa(e){this.la=e.hs,this.Pa=qe();const r=this.da(e.documents);return this.applyChanges(r,!0)}ya(){return go.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class gce{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class yce{constructor(e){this.key=e,this.wa=!1}}class vce{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Go(o=>QA(o),yf),this.Da=new Map,this.Ca=new Set,this.va=new Rt(ye.comparator),this.Fa=new Map,this.Ma=new xv,this.xa={},this.Oa=new Map,this.Na=mo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function _ce(t,e,r=!0){const n=PP(t);let i;const s=n.ba.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await IP(n,e,r,!0),i}async function wce(t,e){const r=PP(t);await IP(r,e,!0,!1)}async function IP(t,e,r,n){const i=await Hoe(t.localStore,jn(e)),s=i.targetId,a=r?t.sharedClientState.addLocalQueryTarget(s):"not-current";let o;return n&&(o=await bce(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&vP(t.remoteStore,i),o}async function bce(t,e,r,n,i){t.Ba=(h,p,f)=>async function(g,y,v,w){let $=y.view.da(v);$.Xi&&($=await k1(g.localStore,y.query,!1).then(({documents:E})=>y.view.da(E,$)));const A=w&&w.targetChanges.get(y.targetId),P=w&&w.targetMismatches.get(y.targetId)!=null,O=y.view.applyChanges($,g.isPrimaryClient,A,P);return L1(g,y.targetId,O.fa),O.snapshot}(t,h,p,f);const s=await k1(t.localStore,e,!0),a=new mce(e,s.hs),o=a.da(s.documents),c=cu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),l=a.applyChanges(o,t.isPrimaryClient,c);L1(t,r,l.fa);const u=new gce(e,r,a);return t.ba.set(e,u),t.Da.has(r)?t.Da.get(r).push(e):t.Da.set(r,[e]),l.snapshot}async function Ece(t,e,r){const n=He(t),i=n.ba.get(e),s=n.Da.get(i.targetId);if(s.length>1)return n.Da.set(i.targetId,s.filter(a=>!yf(a,e))),void n.ba.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Qm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Ov(n.remoteStore,i.targetId),Jm(n,i.targetId)}).catch(_v)):(Jm(n,i.targetId),await Qm(n.localStore,i.targetId,!0))}async function Sce(t,e){const r=He(t),n=r.ba.get(e),i=r.Da.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ov(r.remoteStore,n.targetId))}async function TP(t,e){const r=He(t);try{const n=await zoe(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.Fa.get(s);a&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.wa=!0:i.modifiedDocuments.size>0?Ft(a.wa):i.removedDocuments.size>0&&(Ft(a.wa),a.wa=!1))}),await AP(r,n,e)}catch(n){await _v(n)}}function j1(t,e,r){const n=He(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ba.forEach((s,a)=>{const o=a.view.j_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=He(a);c.onlineState=o;let l=!1;c.queries.forEach((u,h)=>{for(const p of h.U_)p.j_(o)&&(l=!0)}),l&&jv(c)}(n.eventManager,e),i.length&&n.Sa.h_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Ice(t,e,r){const n=He(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Fa.get(e),s=i&&i.key;if(s){let a=new Rt(ye.comparator);a=a.insert(s,lr.newNoDocument(s,Ae.min()));const o=qe().add(s),c=new bf(Ae.min(),new Map,new Rt(et),a,o);await TP(n,c),n.va=n.va.remove(s),n.Fa.delete(e),Lv(n)}else await Qm(n.localStore,e,!1).then(()=>Jm(n,e,r)).catch(_v)}function Jm(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Da.get(e))t.ba.delete(n),r&&t.Sa.ka(n,r);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(n=>{t.Ma.containsKey(n)||$P(t,n)})}function $P(t,e){t.Ca.delete(e.path.canonicalString());const r=t.va.get(e);r!==null&&(Ov(t.remoteStore,r),t.va=t.va.remove(e),t.Fa.delete(r),Lv(t))}function L1(t,e,r){for(const n of r)n instanceof EP?(t.Ma.addReference(n.key,e),Tce(t,n)):n instanceof SP?(de("SyncEngine","Document no longer in limbo: "+n.key),t.Ma.removeReference(n.key,e),t.Ma.containsKey(n.key)||$P(t,n.key)):xe()}function Tce(t,e){const r=e.key,n=r.path.canonicalString();t.va.get(r)||t.Ca.has(n)||(de("SyncEngine","New document in limbo: "+r),t.Ca.add(n),Lv(t))}function Lv(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const r=new ye(At.fromString(e)),n=t.Na.next();t.Fa.set(n,new yce(r)),t.va=t.va.insert(r,n),vP(t.remoteStore,new es(jn($v(r.path)),n,"TargetPurposeLimboResolution",wv.oe))}}async function AP(t,e,r){const n=He(t),i=[],s=[],a=[];n.ba.isEmpty()||(n.ba.forEach((o,c)=>{a.push(n.Ba(c,e,r).then(l=>{if((l||r)&&n.isPrimaryClient){const u=l&&!l.fromCache;n.sharedClientState.updateQueryState(c.targetId,u?"current":"not-current")}if(l){i.push(l);const u=Rv.Ki(c.targetId,l);s.push(u)}}))}),await Promise.all(a),n.Sa.h_(i),await async function(c,l){const u=He(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>J.forEach(l,p=>J.forEach(p.qi,f=>u.persistence.referenceDelegate.addReference(h,p.targetId,f)).next(()=>J.forEach(p.Qi,f=>u.persistence.referenceDelegate.removeReference(h,p.targetId,f)))))}catch(h){if(!ou(h))throw h;de("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const p=h.targetId;if(!h.fromCache){const f=u.ns.get(p),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);u.ns=u.ns.insert(p,g)}}}(n.localStore,s))}async function $ce(t,e){const r=He(t);if(!r.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const n=await pP(r.localStore,e);r.currentUser=e,function(s,a){s.Oa.forEach(o=>{o.forEach(c=>{c.reject(new ve(se.CANCELLED,a))})}),s.Oa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await AP(r,n.us)}}function Ace(t,e){const r=He(t),n=r.Fa.get(e);if(n&&n.wa)return qe().add(n.key);{let i=qe();const s=r.Da.get(e);if(!s)return i;for(const a of s){const o=r.ba.get(a);i=i.unionWith(o.view.Ea)}return i}}function PP(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ace.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ice.bind(null,e),e.Sa.h_=hce.bind(null,e.eventManager),e.Sa.ka=fce.bind(null,e.eventManager),e}class V1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=gP(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return Boe(this.persistence,new Voe,e.initialUser,this.serializer)}createPersistence(e){return new Moe(kv.Hr,this.serializer)}createSharedClientState(e){return new Goe}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Pce{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>j1(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=$ce.bind(null,this.syncEngine),await oce(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lce}()}createDatastore(e){const r=gP(e.databaseInfo.databaseId),n=function(s){return new Xoe(s)}(e.databaseInfo);return function(s,a,o,c){return new ece(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,s,a,o){return new rce(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>j1(this.syncEngine,r,0),function(){return O1.D()?new O1:new Woe}())}createSyncEngine(e,r){return function(i,s,a,o,c,l,u){const h=new vce(i,s,a,o,c,l);return u&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e;await async function(n){const i=He(n);de("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await lu(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cce{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xce{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=cr.UNAUTHENTICATED,this.clientId=BA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{de("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(de("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=bP(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mp(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await pP(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U1(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Rce(t);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>D1(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>D1(e.remoteStore,i)),t._onlineComponents=e}function kce(t){return t.name==="FirebaseError"?t.code===se.FAILED_PRECONDITION||t.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Rce(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!kce(r))throw r;uo("Error using user provided cache. Falling back to memory cache: "+r),await Mp(t,new V1)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await Mp(t,new V1);return t._offlineComponents}async function Oce(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await U1(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await U1(t,new Pce))),t._onlineComponents}async function Nce(t){const e=await Oce(t),r=e.eventManager;return r.onListen=_ce.bind(null,e.syncEngine),r.onUnlisten=Ece.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=wce.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Sce.bind(null,e.syncEngine),r}function Dce(t,e,r={}){const n=new Vs;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,l){const u=new Cce({next:p=>{a.enqueueAndForget(()=>dce(s,h));const f=p.docs.has(o);!f&&p.fromCache?l.reject(new ve(se.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&c&&c.source==="server"?l.reject(new ve(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new pce($v(o.path),u,{includeMetadataChanges:!0,ra:!0});return uce(s,h)}(await Nce(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fce(t,e,r){if(!r)throw new ve(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Mce(t,e,r,n){if(e===!0&&n===!0)throw new ve(se.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function z1(t){if(!ye.isDocumentKey(t))throw new ve(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jce(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe()}function Zm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=jce(t);throw new ve(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mce("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CP((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vv{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ve(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ve(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q1(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new lae;switch(n.type){case"firstParty":return new fae(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=B1.get(r);n&&(de("ComponentProvider","Removing Datastore"),B1.delete(r),n.terminate())}(this),Promise.resolve()}}function Lce(t,e,r,n={}){var i;const s=(t=Zm(t,Vv))._getSettings(),a=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let o,c;if(typeof n.mockUserToken=="string")o=n.mockUserToken,c=cr.MOCK_USER;else{o=Uie(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new ve(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new cr(l)}t._authCredentials=new uae(new UA(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Uv(this.firestore,e,this._query)}}class ui{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ui(this.firestore,e,this._key)}}class pl extends Uv{constructor(e,r,n){super(e,r,$v(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ui(this.firestore,null,new ye(e))}withConverter(e){return new pl(this.firestore,e,this._path)}}function khe(t,e,...r){if(t=Kn(t),arguments.length===1&&(e=BA.newId()),Fce("doc","path",e),t instanceof Vv){const n=At.fromString(e,...r);return z1(n),new ui(t,null,new ye(n))}{if(!(t instanceof ui||t instanceof pl))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(At.fromString(e,...r));return z1(n),new ui(t.firestore,t instanceof pl?t.converter:null,new ye(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vce{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new yP(this,"async_queue_retry"),this.hu=()=>{const r=Fp();r&&de("AsyncQueue","Visibility state changed to "+r.visibilityState),this.Yo.Wo()};const e=Fp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const r=Fp();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const r=new Vs;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ou(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const r=this.iu.then(()=>(this.uu=!0,e().catch(n=>{this.au=n,this.uu=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw mi("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.uu=!1,n))));return this.iu=r,r}enqueueAfterDelay(e,r,n){this.Pu(),this.lu.indexOf(e)>-1&&(r=0);const i=Mv.createAndSchedule(this,e,r,n,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&xe()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const r of this._u)if(r.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this._u)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const r=this._u.indexOf(e);this._u.splice(r,1)}}class xP extends Vv{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new Vce}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kP(this),this._firestoreClient.terminate()}}function Uce(t,e){const r=typeof t=="object"?t:kA(),n=typeof t=="string"?t:"(default)",i=yv(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Lie("firestore");s&&Lce(i,...s)}return i}function Bce(t){return t._firestoreClient||kP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function kP(t){var e,r,n;const i=t._freezeSettings(),s=function(o,c,l,u){return new $ae(o,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,CP(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new xce(t._authCredentials,t._appCheckCredentials,t._queue,s),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ch(ur.fromBase64String(e))}catch(r){throw new ve(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ch(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ve(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zce{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ve(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ve(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}const qce=new RegExp("[~\\*/\\[\\]]");function Hce(t,e,r){if(e.search(qce)>=0)throw H1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new RP(...e.split("."))._internalPath}catch{throw H1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function H1(t,e,r,n,i){let s=`Function ${e}() called with invalid data`;s+=". ";let a="";return new ve(se.INVALID_ARGUMENT,s+t+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(NP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Kce extends OP{data(){return super.data()}}function NP(t,e){return typeof e=="string"?Hce(t,e):e instanceof RP?e._internalPath:e._delegate._internalPath}class Gce{convertValue(e,r="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw xe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return mf(e,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertGeoPoint(e){return new zce(Dt(e.latitude),Dt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ev(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){const r=ms(e);return new xr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=At.fromString(e);Ft(fP(n));const i=new hl(n.get(1),n.get(3)),s=new ye(n.popFirst(5));return i.isEqual(r)||mi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wce{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DP extends OP{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Yce(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(NP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Yce extends DP{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rhe(t){t=Zm(t,ui);const e=Zm(t.firestore,xP);return Dce(Bce(e),t._key).then(r=>Xce(e,t,r))}class Qce extends Gce{constructor(e){super(),this.firestore=e}convertBytes(e){return new ch(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ui(this.firestore,null,r)}}function Xce(t,e,r){const n=r.docs.get(e._key),i=new Qce(t);return new DP(t,i,e._key,n,new Wce(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(i){Ko=i})(Ho),lo(new Js("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new xP(new dae(n.getProvider("auth-internal")),new mae(n.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ve(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(l.options.projectId,u)}(a,i),a);return s=Object.assign({useFetchStreams:r},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),os(d1,"4.6.3",e),os(d1,"4.6.3","esm2017")})();var Jce="firebase",Zce="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os(Jce,Zce,"app");var K1=function(){return K1=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},K1.apply(this,arguments)};function Bv(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ohe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function FP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ele=FP,MP=new su("auth","Firebase",FP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new mv("@firebase/auth");function tle(t,...e){lh.logLevel<=Le.WARN&&lh.warn(`Auth (${Ho}): ${t}`,...e)}function wd(t,...e){lh.logLevel<=Le.ERROR&&lh.error(`Auth (${Ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw zv(t,...e)}function Ln(t,...e){return zv(t,...e)}function jP(t,e,r){const n=Object.assign(Object.assign({},ele()),{[e]:r});return new su("auth","Firebase",n).create(e,{appName:t.name})}function cs(t){return jP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zv(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return MP.create(t,...e)}function be(t,e,...r){if(!t)throw zv(e,...r)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wd(e),new Error(e)}function gi(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rle(){return G1()==="http:"||G1()==="https:"}function G1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rle()||qie()||"connection"in navigator)?navigator.onLine:!0}function ile(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,r){this.shortDelay=e,this.longDelay=r,gi(r>e,"Short delay should be less than long delay!"),this.isMobile=Bie()||Hie()}get(){return nle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e){gi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ale=new du(3e4,6e4);function ya(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vs(t,e,r,n,i={}){return VP(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=au(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),LP.fetch()(UP(t,t.config.apiHost,r,o),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function VP(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},sle),e);try{const i=new cle(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Zu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,l]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Zu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Zu(t,"user-disabled",a);const u=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jP(t,u,l);yn(t,u)}}catch(i){if(i instanceof wi)throw i;yn(t,"network-request-failed",{message:String(i)})}}async function Sf(t,e,r,n,i={}){const s=await vs(t,e,r,n,i);return"mfaPendingCredential"in s&&yn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function UP(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?qv(t.config,i):`${t.config.apiScheme}://${i}`}function ole(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cle{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ln(this.auth,"network-request-failed")),ale.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Ln(t,e,n);return i.customData._tokenResponse=r,i}function W1(t){return t!==void 0&&t.enterprise!==void 0}class lle{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return ole(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ule(t,e){return vs(t,"GET","/v2/recaptchaConfig",ya(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dle(t,e){return vs(t,"POST","/v1/accounts:delete",e)}async function BP(t,e){return vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hle(t,e=!1){const r=Kn(t),n=await r.getIdToken(e),i=Hv(n);be(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Yc(jp(i.auth_time)),issuedAtTime:Yc(jp(i.iat)),expirationTime:Yc(jp(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jp(t){return Number(t)*1e3}function Hv(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const i=IA(r);return i?JSON.parse(i):(wd("Failed to decode base64 JWT payload"),null)}catch(i){return wd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Y1(t){const e=Hv(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof wi&&fle(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function fle({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ple{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yc(this.lastLoginAt),this.creationTime=Yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(t){var e;const r=t.auth,n=await t.getIdToken(),i=await ml(t,BP(r,{idToken:n}));be(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zP(s.providerUserInfo):[],o=gle(t.providerData,a),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new tg(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function mle(t){const e=Kn(t);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gle(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function zP(t){return t.map(e=>{var{providerId:r}=e,n=Bv(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yle(t,e){const r=await VP(t,{},async()=>{const n=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=UP(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",LP.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function vle(t,e){return vs(t,"POST","/v2/accounts:revokeToken",ya(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Y1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){be(e.length!==0,"internal-error");const r=Y1(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await yle(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new Ga;return n&&(be(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(be(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=Bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ple(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await ml(this,this.stsTokenManager.getToken(this.auth,e));return be(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return hle(this,e)}reload(){return mle(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await uh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await ml(this,dle(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,o,c,l,u;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(i=r.email)!==null&&i!==void 0?i:void 0,f=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(a=r.photoURL)!==null&&a!==void 0?a:void 0,g=(o=r.tenantId)!==null&&o!==void 0?o:void 0,y=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,v=(l=r.createdAt)!==null&&l!==void 0?l:void 0,w=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:$,emailVerified:A,isAnonymous:P,providerData:O,stsTokenManager:E}=r;be($&&E,e,"internal-error");const b=Ga.fromJSON(this.name,E);be(typeof $=="string",e,"internal-error"),Mi(h,e.name),Mi(p,e.name),be(typeof A=="boolean",e,"internal-error"),be(typeof P=="boolean",e,"internal-error"),Mi(f,e.name),Mi(m,e.name),Mi(g,e.name),Mi(y,e.name),Mi(v,e.name),Mi(w,e.name);const I=new si({uid:$,auth:e,email:p,emailVerified:A,displayName:h,isAnonymous:P,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:b,createdAt:v,lastLoginAt:w});return O&&Array.isArray(O)&&(I.providerData=O.map(T=>Object.assign({},T))),y&&(I._redirectEventId=y),I}static async _fromIdTokenResponse(e,r,n=!1){const i=new Ga;i.updateFromServerResponse(r);const s=new si({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await uh(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?zP(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Ga;o.updateFromIdToken(n);const c=new si({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Map;function ai(t){gi(t instanceof Function,"Expected a class definition");let e=Q1.get(t);return e?(gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Q1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}qP.type="NONE";const X1=qP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t,e,r){return`firebase:${t}:${e}:${r}`}class Wa{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=bd(this.userKey,i.apiKey,s),this.fullPersistenceKey=bd("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?si._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Wa(ai(X1),e,n);const i=(await Promise.all(r.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||ai(X1);const a=bd(n,e.config.apiKey,e.name);let o=null;for(const l of r)try{const u=await l._get(a);if(u){const h=si._fromJSON(e,u);l!==s&&(o=h),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Wa(s,e,n):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async l=>{if(l!==s)try{await l._remove(a)}catch{}})),new Wa(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YP(e))return"Blackberry";if(QP(e))return"Webos";if(Kv(e))return"Safari";if((e.includes("chrome/")||KP(e))&&!e.includes("edge/"))return"Chrome";if(WP(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function HP(t=er()){return/firefox\//i.test(t)}function Kv(t=er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KP(t=er()){return/crios\//i.test(t)}function GP(t=er()){return/iemobile/i.test(t)}function WP(t=er()){return/android/i.test(t)}function YP(t=er()){return/blackberry/i.test(t)}function QP(t=er()){return/webos/i.test(t)}function If(t=er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _le(t=er()){var e;return If(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wle(){return Kie()&&document.documentMode===10}function XP(t=er()){return If(t)||WP(t)||QP(t)||YP(t)||/windows phone/i.test(t)||GP(t)}function ble(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t,e=[]){let r;switch(t){case"Browser":r=J1(er());break;case"Worker":r=`${J1(er())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ho}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ele{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sle(t,e={}){return vs(t,"GET","/v2/passwordPolicy",ya(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ile=6;class Tle{constructor(e){var r,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:Ile,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $le{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z1(this),this.idTokenSubscription=new Z1(this),this.beforeStateQueue=new Ele(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ai(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Wa.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await BP(this,{idToken:e}),n=await si._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ni(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ile()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(cs(this));const r=e?Kn(e):null;return r&&be(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sle(this),r=new Tle(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await vle(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ai(e)||this._popupRedirectResolver;be(r,this,"argument-error"),this.redirectPersistenceManager=await Wa.create(this,[ai(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{a=!0,c()}}else{const c=e.addObserver(r);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&tle(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Yo(t){return Kn(t)}class Z1{constructor(e){this.auth=e,this.observer=null,this.addObserver=ese(r=>this.observer=r)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ale(t){Tf=t}function ZP(t){return Tf.loadJS(t)}function Ple(){return Tf.recaptchaEnterpriseScript}function Cle(){return Tf.gapiScript}function xle(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kle="recaptcha-enterprise",Rle="NO_RECAPTCHA";class Ole{constructor(e){this.type=kle,this.auth=Yo(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{ule(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const l=new lle(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,a(l.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;W1(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{a(l)}).catch(()=>{a(Rle)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!r&&W1(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Ple();c.length!==0&&(c+=o),ZP(c).then(()=>{i(o,s,a)}).catch(l=>{a(l)})}}).catch(o=>{a(o)})})}}async function eE(t,e,r,n=!1){const i=new Ole(t);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function tE(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await eE(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await eE(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nle(t,e){const r=yv(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(rh(s,e??{}))return i;yn(i,"already-initialized")}return r.initialize({options:e})}function Dle(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Fle(t,e,r){const n=Yo(t);be(n._canInitEmulator,n,"emulator-config-failed"),be(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=eC(e),{host:a,port:o}=Mle(e),c=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),jle()}function eC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Mle(t){const e=eC(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:rE(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:rE(a)}}}function rE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jle(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,r){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function Lle(t,e){return vs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vle(t,e){return Sf(t,"POST","/v1/accounts:signInWithPassword",ya(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ule(t,e){return Sf(t,"POST","/v1/accounts:signInWithEmailLink",ya(t,e))}async function Ble(t,e){return Sf(t,"POST","/v1/accounts:signInWithEmailLink",ya(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends Gv{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new gl(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new gl(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tE(e,r,"signInWithPassword",Vle);case"emailLink":return Ule(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tE(e,n,"signUpPassword",Lle);case"emailLink":return Ble(e,{idToken:r,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t,e){return Sf(t,"POST","/v1/accounts:signInWithIdp",ya(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zle="http://localhost";class na extends Gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):yn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=Bv(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new na(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ya(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ya(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ya(e,r)}buildRequest(){const e={requestUri:zle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=au(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qle(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Hle(t){const e=Ac(Pc(t)).link,r=e?Ac(Pc(e)).deep_link_id:null,n=Ac(Pc(t)).deep_link_id;return(n?Ac(Pc(n)).link:null)||n||r||e||t}class Wv{constructor(e){var r,n,i,s,a,o;const c=Ac(Pc(e)),l=(r=c.apiKey)!==null&&r!==void 0?r:null,u=(n=c.oobCode)!==null&&n!==void 0?n:null,h=qle((i=c.mode)!==null&&i!==void 0?i:null);be(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=Hle(e);try{return new Wv(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,r){return gl._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Wv.parseLink(r);return be(n,"argument-error"),gl._fromEmailAndCode(e,n.code,n.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends tC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends hu{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return na._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return qi.credential(r,n)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends hu{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends hu{constructor(){super("twitter.com")}static credential(e,r){return na._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ki.credential(r,n)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await si._fromIdTokenResponse(e,n,i),a=nE(n);return new yo({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=nE(n);return new yo({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function nE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends wi{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new dh(e,r,n,i)}}function rC(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(t,s,e,n):s})}async function Kle(t,e,r=!1){const n=await ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return yo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gle(t,e,r=!1){const{auth:n}=t;if(ni(n.app))return Promise.reject(cs(n));const i="reauthenticate";try{const s=await ml(t,rC(n,i,e,t),r);be(s.idToken,n,"internal-error");const a=Hv(s.idToken);be(a,n,"internal-error");const{sub:o}=a;return be(t.uid===o,n,"user-mismatch"),yo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yn(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(t,e,r=!1){if(ni(t.app))return Promise.reject(cs(t));const n="signIn",i=await rC(t,n,e),s=await yo._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function Wle(t,e){return nC(Yo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yle(t){const e=Yo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Qle(t,e,r){return ni(t.app)?Promise.reject(cs(t)):Wle(Kn(t),Qo.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Yle(t),n})}function Xle(t,e,r,n){return Kn(t).onIdTokenChanged(e,r,n)}function Jle(t,e,r){return Kn(t).beforeAuthStateChanged(e,r)}function Zle(t,e,r,n){return Kn(t).onAuthStateChanged(e,r,n)}function eue(t){return Kn(t).signOut()}const hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tue(){const t=er();return Kv(t)||If(t)}const rue=1e3,nue=10;class sC extends iC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=tue()&&ble(),this.fallbackToPolling=XP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);wle()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nue):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},rue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}sC.type="LOCAL";const iue=sC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends iC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}aC.type="SESSION";const oC=aC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sue(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new $f(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async l=>l(r.origin,s)),c=await sue(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aue{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const l=Yv("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(p.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function oue(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function cue(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lue(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uue(){return cC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="firebaseLocalStorageDb",due=1,fh="firebaseLocalStorage",uC="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Af(t,e){return t.transaction([fh],e?"readwrite":"readonly").objectStore(fh)}function hue(){const t=indexedDB.deleteDatabase(lC);return new fu(t).toPromise()}function rg(){const t=indexedDB.open(lC,due);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(fh,{keyPath:uC})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(fh)?e(n):(n.close(),await hue(),e(await rg()))})})}async function iE(t,e,r){const n=Af(t,!0).put({[uC]:e,value:r});return new fu(n).toPromise()}async function fue(t,e){const r=Af(t,!1).get(e),n=await new fu(r).toPromise();return n===void 0?null:n.value}function sE(t,e){const r=Af(t,!0).delete(e);return new fu(r).toPromise()}const pue=800,mue=3;class dC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>mue)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(uue()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await cue(),!this.activeServiceWorker)return;this.sender=new aue(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lue()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await iE(e,hh,"1"),await sE(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>iE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>fue(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>sE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Af(i,!1).getAll();return new fu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dC.type="LOCAL";const gue=dC;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yue(t,e){return e?ai(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends Gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ya(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function vue(t){return nC(t.auth,new Qv(t),t.bypassAuthState)}function _ue(t){const{auth:e,user:r}=t;return be(r,e,"internal-error"),Gle(r,new Qv(t),t.bypassAuthState)}async function wue(t){const{auth:e,user:r}=t;return be(r,e,"internal-error"),Kle(r,new Qv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vue;case"linkViaPopup":case"linkViaRedirect":return wue;case"reauthViaPopup":case"reauthViaRedirect":return _ue;default:yn(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bue=new du(2e3,1e4);class ja extends hC{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=Yv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bue.get())};e()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eue="pendingRedirect",Ed=new Map;class Sue extends hC{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ed.get(this.auth._key());if(!e){try{const n=await Iue(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ed.set(this.auth._key(),e)}return this.bypassAuthState||Ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Iue(t,e){const r=Aue(e),n=$ue(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function Tue(t,e){Ed.set(t._key(),e)}function $ue(t){return ai(t._redirectPersistence)}function Aue(t){return bd(Eue,t.config.apiKey,t.name)}async function Pue(t,e,r=!1){if(ni(t.app))return Promise.reject(cs(t));const n=Yo(t),i=yue(n,e),a=await new Sue(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cue=10*60*1e3;class xue{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kue(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!fC(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ln(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Cue&&this.cachedEventUids.clear(),this.cachedEventUids.has(aE(e))}saveEventToCache(e){this.cachedEventUids.add(aE(e)),this.lastProcessedEventTime=Date.now()}}function aE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kue(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rue(t,e={}){return vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nue=/^https?/;async function Due(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Rue(t);for(const r of e)try{if(Fue(r))return}catch{}yn(t,"unauthorized-domain")}function Fue(t){const e=eg(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!Nue.test(r))return!1;if(Oue.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mue=new du(3e4,6e4);function oE(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function jue(t){return new Promise((e,r)=>{var n,i,s;function a(){oE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oE(),r(Ln(t,"network-request-failed"))},timeout:Mue.get()})}if(!((i=(n=Vn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vn().gapi)===null||s===void 0)&&s.load)a();else{const o=xle("iframefcb");return Vn()[o]=()=>{gapi.load?a():r(Ln(t,"network-request-failed"))},ZP(`${Cle()}?onload=${o}`).catch(c=>r(c))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function Lue(t){return Sd=Sd||jue(t),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vue=new du(5e3,15e3),Uue="__/auth/iframe",Bue="emulator/auth/iframe",zue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},que=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hue(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?qv(e,Bue):`https://${t.config.authDomain}/${Uue}`,n={apiKey:e.apiKey,appName:t.name,v:Ho},i=que.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${au(n).slice(1)}`}async function Kue(t){const e=await Lue(t),r=Vn().gapi;return be(r,t,"internal-error"),e.open({where:document.body,url:Hue(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zue,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Ln(t,"network-request-failed"),o=Vn().setTimeout(()=>{s(a)},Vue.get());function c(){Vn().clearTimeout(o),i(n)}n.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wue=500,Yue=600,Que="_blank",Xue="http://localhost";class cE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jue(t,e,r,n=Wue,i=Yue){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c=Object.assign(Object.assign({},Gue),{width:n.toString(),height:i.toString(),top:s,left:a}),l=er().toLowerCase();r&&(o=KP(l)?Que:r),HP(l)&&(e=e||Xue,c.scrollbars="yes");const u=Object.entries(c).reduce((p,[f,m])=>`${p}${f}=${m},`,"");if(_le(l)&&o!=="_self")return Zue(e||"",o),new cE(null);const h=window.open(e||"",o,u);be(h,t,"popup-blocked");try{h.focus()}catch{}return new cE(h)}function Zue(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ede="__/auth/handler",tde="emulator/auth/handler",rde=encodeURIComponent("fac");async function lE(t,e,r,n,i,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Ho,eventId:i};if(e instanceof tC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Zie(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))a[u]=h}if(e instanceof hu){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const c=await t._getAppCheckToken(),l=c?`#${rde}=${encodeURIComponent(c)}`:"";return`${nde(t)}?${au(o).slice(1)}${l}`}function nde({config:t}){return t.emulator?qv(t,tde):`https://${t.authDomain}/${ede}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="webStorageSupport";class ide{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oC,this._completeRedirectFn=Pue,this._overrideRedirectResult=Tue}async _openPopup(e,r,n,i){var s;gi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await lE(e,r,n,eg(),i);return Jue(e,a,Yv())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await lE(e,r,n,eg(),i);return oue(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(gi(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Kue(e),n=new xue(e);return r.register("authEvent",i=>(be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Lp,{type:Lp},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Lp];a!==void 0&&r(!!a),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Due(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return XP()||Kv()||If()}}const sde=ide;var uE="@firebase/auth",dE="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ode(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cde(t){lo(new Js("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JP(t)},l=new $le(n,i,s,c);return Dle(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),lo(new Js("auth-internal",e=>{const r=Yo(e.getProvider("auth").getImmediate());return(n=>new ade(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),os(uE,dE,ode(t)),os(uE,dE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lde=5*60,ude=AA("authIdTokenMaxAge")||lde;let hE=null;const dde=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>ude)return;const i=r==null?void 0:r.token;hE!==i&&(hE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hde(t=kA()){const e=yv(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Nle(t,{popupRedirectResolver:sde,persistence:[gue,iue,oC]}),n=AA("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=dde(s.toString());Jle(r,a,()=>a(r.currentUser)),Xle(r,o=>a(o))}}const i=TA("auth");return i&&Fle(r,`http://${i}`),r}function fde(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ale({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=Ln("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",fde().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cde("Browser");const pde="AIzaSyCUAUg5R8Wmoiblrz4f9A_ltGjdhZnwGLU",mde="ponpeskanzululumcirebon.firebaseapp.com",gde="ponpeskanzululumcirebon",yde="ponpeskanzululumcirebon.appspot.com",vde="156575228737",_de="1:156575228737:web:0547362f771d7721bd37c0",wde={apiKey:pde,authDomain:mde,projectId:gde,storageBucket:yde,messagingSenderId:vde,appId:_de},Xv=xA(wde),ed=hde(Xv),bde=Uce(Xv),Nhe={auth:()=>({signOut:async()=>await eue(ed),signInWithEmailAndPassword:async(t,e)=>await Qle(ed,t,e),onAuthStateChanged:t=>Zle(ed,t),currentUser:ed.currentUser,analytics:()=>analytics}),app:()=>Xv,firestore:()=>bde};let Ede={author:{name:"Purple Admin",email:"admin@ponpeskanzululumcirebon.com"},repoUrl:localStorage.repoUrl,token:localStorage.token,corsProxyUrl:localStorage.corsProxyUrl};class Rc{constructor(e){Ze(this,"dir","/repo");Ze(this,"fs",null);Ze(this,"repoUrl",null);Ze(this,"corsProxyUrl",null);Ze(this,"author",null);Ze(this,"token",null);Ze(this,"onDownloadProgress",e=>{console.log(e)});Ze(this,"onCloneCallback",e=>e);bc.request.onProgress=r=>{this.onDownloadProgress(r)},this.fs=new yie("fs"),this.initSetting(e)}setOnDownloadProgress(e){this.onDownloadProgress=e}getGit(){return ei}async getFile64Data(e,r=!1,n=!1){const i=n?e:`${this.dir}${e}`,s=i.split("/"),a=s[s.length-1];let o;try{o=await this.fs.readFileSync(i)}catch{console.log(`lfs: cant readFile ${i}`)}if(o)try{let c=Cie(o);c||(c=kie(a));let l="application/octet-stream";c&&(l=c.mime);let u=`data:${l};charset=utf-8;name=${a};base64,${wie(o)}`;return r?{info:{mime:c,filename:a},dataUrl:u}:u}catch(c){console.log("Error:getFile64Data",c)}return null}getRelativePath(e){return e.replace(`${this.dir}/`,"")}basePath(e){return`${this.dir}/${e}`}async initSetting(e){this.repoUrl=e.repoUrl,e.corsProxyUrl&&(this.corsProxyUrl=e.corsProxyUrl),this.dir=$X(this.repoUrl),this.token=e.token,this.author=e.author}async isCloned(){if(!await this.fs.existsSync(this.dir))return!1;try{if((await this.fs.readdirSync(this.dir)).length===0)return!1;if(await this.fs.existsSync(`${this.dir}/.git`))return!0}catch{console.log(`lfs: ${this.dir}/.git not found`)}return!1}cloneOption(){const e={fs:this.fs,http:bc,dir:this.dir,url:this.repoUrl,singleBranch:!0,onProgress:r=>{typeof this.onCloneCallback=="function"&&this.onCloneCallback(r)}};return this.corsProxyUrl&&(e.corsProxy=this.corsProxyUrl),e}fetchOption(){const e={fs:this.fs,http:bc,dir:this.dir,url:this.repoUrl,singleBranch:!0,tags:!1};return this.corsProxyUrl&&(e.corsProxy=this.corsProxyUrl),e}async commit(e,r=null){let n=[];for(const s of e){await ei.add({fs:this.fs,dir:this.dir,filepath:s});const a=new Date;n.push(`Edit ${s} at ${a}`)}return await ei.commit({fs:this.fs,dir:this.dir,author:this.author,message:r||n.join(`
`)})}async push(){let e={fs:this.fs,http:bc,dir:this.dir,onAuth:()=>({username:this.token})};return this.corsProxyUrl&&(e.corsProxy=this.corsProxyUrl),await ei.push(e)}async log(){return await ei.log({fs:this.fs,dir:this.dir,force:!0,follow:!0})}async fastForward(e=n=>n,r=n=>n){let n=!1,i="false",s={fs:this.fs,http:bc,dir:this.dir,singleBranch:!0};this.corsProxyUrl&&(s.corsProxy=this.corsProxyUrl);try{await ei.fastForward(s),n=!0}catch(a){i=a,console.error(a)}n||await confirm(`Couldn't pull git repo error:${i} , Would you like to restart git clone?`)&&(console.log("Restart git clone"),await this.cleanup(),await this.init(),await this.fastForward()),r(n)}async cleanup(){await this.fs.wipe()}setOnCloneProgressHandler(e,r,n){this.onCloneCallback=i=>{let s="";if(i.total){const a=(i.loaded/i.total).toFixed(2)*100;s=`${i.phase}  ${a} %`}else s="Sedang memproses ...";e(n(s))}}async init(e){typeof e=="function"&&(this.onCloneCallback=e),await this.isCloned()||(console.log("Cloning repo "),await this.fs.existsSync(this.dir)||await this.fs.mkdirSync(this.dir),await ei.clone(this.cloneOption()))}async remove(e){await ei.remove({fs:this.fs,dir:this.dir,filepath:e})}async add(e){await ei.add({fs:this.fs,dir:this.dir,filepath:e})}}Ze(Rc,"instance",null);function Dhe(){return Sde()}function Sde(){return Rc.instance||(Rc.instance=new Rc(Ede)),Rc.instance}class pC{constructor(e){this.dbInstance=e}report(e,r){const n=`DBGitError:${this.dbInstance.type}:(${e}) : ${r}`;console.log(n),alert(`${n}`)}}Ze(pC,"GET_DATA_FAILED",1);class Ide{constructor(e,r,n=null){Ze(this,"dbGitError",null);Ze(this,"git",null);Ze(this,"fs",null);Ze(this,"type",null);Ze(this,"defaultValue",null);Ze(this,"data",null);Ze(this,"path",null);Ze(this,"addQueues",[]);Ze(this,"commitQueues",[]);Ze(this,"commitMessageQueues",[]);Ze(this,"originalData",null);Ze(this,"pk","id");Ze(this,"dataRootField",null);Ze(this,"shadowFields",null);Ze(this,"shadowedFieldValues",{});Ze(this,"reservedFieldValues",["@path"]);this.git=e,this.fs=e.fs,n&&(this.path=n),this.initDefaultValue(r),this.dbGitError=new pC(this)}setDbErrorHandler(e){this.dbGitError=e}getFieldNames(){return Object.keys(this.defaultValue)}shouldIDoTransformField(e){try{return Object.keys(this.shadowFields).some(n=>e.includes(n))}catch{}return!1}async transformShadowFieldItemOnSave(e,r){for(const n of r)if(this.shadowFields[n]){e[this.pk]||(e[this.pk]=ku());const i=e[this.pk];this.shadowedFieldValues[i]||(this.shadowedFieldValues[i]={}),e[n]=await this.shadowFields[n].transformOnSave(e[n],e,this),this.shadowedFieldValues[i][n]=e[n]}return e}async transformShadowFieldItemOnload(e,r){for(const n of r)if(this.shadowFields[n]){e[this.pk]||(e[this.pk]=ku());const i=e[this.pk];this.shadowedFieldValues[i]||(this.shadowedFieldValues[i]={}),this.shadowedFieldValues[i][n]=e[n],e[n]=await this.shadowFields[n].transformOnLoad(e[n],e,this)}return e}async transformShadowFieldOnload(){if(this.shadowFields!==null){const e=this.getFieldNames();if(this.shouldIDoTransformField(e))if(this.type==="single")this.data=await this.transformShadowFieldItemOnload(this.data,e);else for(let n of this.data)n=await this.transformShadowFieldItemOnload(n,e)}}async transformShadowFieldOnSave(){let e=this.type==="single"?{...this.data}:[...this.data];if(this.shadowFields!==null){const r=this.getFieldNames();if(this.shouldIDoTransformField(r))if(this.type==="single")e=await this.transformShadowFieldItemOnSave(e,r);else for(let i of e)i=await this.transformShadowFieldItemOnSave(i,r)}return e}initDefaultValue(e){this.defaultValue={};for(const r of Object.keys(e.properties))this.defaultValue[r]=""}async getData(e=!1){if(e&&this.data)return this.data;if(this.data={},this.type==="files"){this.data=[];const r=this.getFilePath();if(await this.fs.existsSync(r)){const n=await this.fs.readdirSync(r);for(const i of n){if(!i.match(/\.json$/))continue;let s=null;const a=`${r}/${i}`;try{let o=ku();const c=i.replace(/\.json$/,""),l=await this.fs.readFileSync(a,"utf-8");s=JSON.parse(l),s={id:o,name:c,"@path":a,...s}}catch{const c=`lfs: can't get json data from ${a}`;this.dbGitError.report("GET_DATA",c)}s&&this.data.push(s)}}}else try{const r=await this.fs.readFileSync(this.getFilePath(),"utf-8");if(this.data=JSON.parse(r),this.dataRootField&&(this.originalData=Array.isArray(this.data)?[...this.data]:{...this.data},this.data=this.data[this.dataRootField]),this.type==="list")for(const n of this.data)n.id=ku()}catch{const n=`lfs:Could not get json data by reading file ${this.getFilePath()}`;this.dbGitError.report("GET_DATA",n),this.type==="single"?this.data={...this.defaultData}:this.data=[]}return this.data&&await this.transformShadowFieldOnload(),this.data}async push(){return await this.git.push()}getFilePath(){return`${this.git.dir}/${this.path}`}}class Tde extends Ide{constructor(){super(...arguments);Ze(this,"type","single")}async get(r=!1){return await this.getData()}async update(r,n=!1){let i=await this.get(n);i||(i=r);const s=this.getFieldNames();this.shouldIDoTransformField(s);for(const o of s)this.reservedFieldValues.includes(o)||(i[o]=r[o]);this.data=i;let a=await this.transformShadowFieldOnSave();if(this.dataRootField){let o={...this.originalData};o[this.dataRootField]={...a},a=o}await this.fs.writeFileSync(this.getFilePath(),JSON.stringify(a,null,2))}async commit(r=!1){const n=this.commitQueues;n.push(this.path);const i=`${this.commitMessageQueues.join(`
`)}
Edit file ${this.path}`;console.log({commitFileList:n,commitMessage:i});let s=await this.git.commit(n,i);return this.commitQueues=[],this.commitMessageQueues=[],r&&(s=await this.push()),s}}class Fhe extends Tde{constructor(){super(...arguments);Ze(this,"path","web/data/company.json")}}const $de=({length:t})=>{let e=Array(t).fill("");return F.jsx("span",{children:e.map((r,n)=>F.jsx("span",{children:"."},n))})},Mhe=({icons:t=[],message:e="Loading"})=>{let r=ie.useRef(null);const[n,i]=ie.useState(1),s=6,[a,o]=ie.useState(0),[c,l]=ie.useState(null),u=s-1;return ie.useEffect(()=>(r.current||(r.current=setInterval(()=>{i(h=>h>u?1:h+1)},250)),()=>{r.current&&(clearInterval(r.current),r.current=null)}),[i]),ie.useEffect(()=>{n%2===0&&o(h=>h>=t.length-1?0:h+1)},[n,o]),ie.useEffect(()=>{t.length>0&&l(t[a])},[a,l]),F.jsxs(F.Fragment,{children:[c," ",F.jsx("span",{className:"twx-px-4",children:e})," ",F.jsx($de,{length:n})]})},Ade="object",Pde=["title","cover","headline","content"],Cde={title:{title:"Title",type:"string"},cover:{title:"Cover Image",type:"string",format:"data-url"},headline:{title:"Headline",type:"string"},content:{title:"Content",type:"string"},tags:{title:"Tags",type:"string"},author:{title:"Penulis",type:"string"}},jhe={type:Ade,required:Pde,properties:Cde},xde={"ui:autofocus":!0},kde={"ui:options":{filePreview:!0}},Rde={"ui:widget":"textarea"},Ode={"ui:widget":"block"},Nde={},Lhe={title:xde,cover:kde,headline:Rde,content:Ode,tags:Nde},Dde="object",Fde=["name","phone"],Mde={name:{title:"Nama",type:"string"},phone:{title:"Nomor",type:"string"}},Vhe={type:Dde,required:Fde,properties:Mde},jde={"ui:autofocus":!0},Lde={"ui:options":{inputType:"tel"}},Uhe={name:jde,phone:Lde},Vde="object",Ude=["title","description","image"],Bde={title:{title:"Title",type:"string"},description:{title:"Keterangan",type:"string"},image:{title:"Image",type:"string",format:"data-url"}},Bhe={type:Vde,required:Ude,properties:Bde},zde={"ui:autofocus":!0},qde={},Hde={"ui:options":{filePreview:!0}},zhe={name:zde,description:qde,image:Hde},Kde="object",Gde=["fb","twitter","tiktok","youtube","ig"],Wde={fb:{title:"Facebook",type:"string"},twitter:{title:"Twitter",type:"string"},tiktok:{title:"Tiktok",type:"string"},youtube:{title:"Youtube",type:"string"},ig:{title:"Instagram",type:"string"}},qhe={type:Kde,required:Gde,properties:Wde},Yde={"ui:autofocus":!0},Qde={},Xde={},Jde={},Zde={},Hhe={fb:Yde,twitter:Qde,tiktok:Xde,youtube:Jde,ig:Zde},ehe="object",the=["title","content"],rhe={title:{title:"Title",type:"string"},content:{title:"Konten",type:"string"}},Khe={type:ehe,required:the,properties:rhe},nhe={"ui:autofocus":!0},ihe={"ui:widget":"block"},Ghe={title:nhe,content:ihe},she="object",ahe=["footerText"],ohe={footerText:{title:"Text Footer",type:"string"}},Whe={type:she,required:ahe,properties:ohe},che={"ui:autofocus":!0},Yhe={footerText:che};export{VT as $,Ot as A,GI as B,MI as C,rK as D,Cl as E,hhe as F,nn as G,X7 as H,WI as I,HI as J,sK as K,Mhe as L,Fhe as M,sy as N,kz as O,De as P,Be as Q,Xs as R,im as S,nK as T,mX as U,Tde as V,K1 as W,Ohe as X,Ide as Y,Dhe as Z,lt as _,phe as a,CX as a0,xX as a1,kX as a2,VX as a3,gt as a4,_ie as a5,mhe as b,Sde as c,jhe as d,Lhe as e,Vhe as f,Uhe as g,Bhe as h,zhe as i,Hhe as j,Ghe as k,Whe as l,Yhe as m,Rhe as n,khe as o,Nhe as p,KH as q,ze as r,qhe as s,yt as t,oK as u,fhe as v,Khe as w,Q7 as x,Z7 as y,eK as z};
//# sourceMappingURL=ui-5y7KCIwL.js.map
