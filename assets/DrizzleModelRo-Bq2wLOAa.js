var K=Object.defineProperty;var U=(g,d,t)=>d in g?K(g,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):g[d]=t;var S=(g,d,t)=>(U(g,typeof d!="symbol"?d+"":d,t),t);import{j as e,r as I,b as G,a as q,A as Y,D as J,G as X,H as Z,I as ee,J as te,K as se}from"./reachHideWarning-BuDFsbAY.js";import{d as ae,b as re,c as ne,e as ie,f as le,h as ce,l as V,o as oe,j as D,k as de,m as he}from"./slugify-qXYEE26i.js";const ue=({socialNetworkLinks:g})=>{const{fb:d,twitter:t,tiktok:l,ig:s,youtube:i}=g,r="cls-9 list-none mt-6",c="cls-10 inline",u="cls-11 size-8 inline-flex items-center justify-center tracking-wide align-middle text-base border border-gray-800 dark:border-slate-800 rounded-md hover:bg-red-500 hover:text-white text-slate-300",p="cls-12 size-4 align-middle";return e.jsxs("ul",{className:r,children:[d&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`${d}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"facebook",title:"facebook",className:p,children:" "})," "]})," "]}),t&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://twitter.com/${t}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"twitter",title:"twitter",className:p,children:" "})," "]})]}),l&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://www.tiktok.com/${l}`,target:"_blank",className:u,children:[" ",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:" cls-12 size-4 align-middle",title:"TikTok",children:e.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})})]})," "]}),s&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://www.instagram.com/${s}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"instagram",title:"instagram",className:p,children:" "})," "]})," "]}),i&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://www.youtube.com/${i}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"youtube",title:"youtube",className:p,children:" "})," "]})," "]})]})},me=({footerData:g,companyData:d,contactPersonList:t,socialNetworkLinks:l})=>{const{footerText:s}=g,i="cls-0 footer bg-dark-footer relative text-gray-200 dark:text-gray-200",r="cls-1 container relative",c="cls-2 grid grid-cols-12",u="cls-3 col-span-12",p="cls-4 py-[60px] px-0",w="cls-5 grid md:grid-cols-12 grid-cols-1 gap-6",v="cls-6 lg:col-span-4 md:col-span-12",x="cls-7 text-[22px] focus:outline-none",j="cls-8 mt-6 text-gray-300",L="cls-13 lg:col-span-4 md:col-span-12",_="cls-14 lg:ms-8",a="cls-15 tracking-[1px] text-gray-100 font-semibold",o="cls-16 tracking-[1px] text-gray-100 mt-6",f="cls-17 flex mt-4",h="cls-18 size-4 text-red-500 me-2 mt-1",y="cls-19 ",N="cls-20 text-gray-300",F="cls-21 text-slate-300 hover:text-slate-400 duration-500 ease-in-out";return e.jsxs(e.Fragment,{children:[e.jsxs("footer",{className:i,children:[e.jsxs("div",{className:r,children:[e.jsx("div",{className:c,children:e.jsxs("div",{className:u,children:[e.jsxs("div",{className:p,children:[e.jsxs("div",{className:w,children:[e.jsxs("div",{className:v,children:[e.jsx("a",{href:"/",className:x,children:e.jsx("img",{src:"/assets/images/logo/logo-light.png",alt:"Ponpes Kanzululum",className:"twx-max-w-[50%]"})}),e.jsx("p",{className:j,children:" Merencanakan pendidikan pesantren? Kami akan mengatur pendidikan Anda dengan kurikulum terbaik dan biaya yang terjangkau! "}),e.jsx(ue,{socialNetworkLinks:l})]})," ",e.jsx("div",{className:L,children:e.jsxs("div",{className:_,children:[e.jsx("h4",{className:a,children:" Alamat "}),e.jsx("h4",{className:o,children:" Yayasan Kanzululum"}),e.jsxs("div",{className:f,children:[e.jsx("i",{"data-feather":"map-pin",className:h,children:" "}),e.jsx("div",{className:y,children:e.jsxs("h5",{className:N,children:[" ",d.address]})})]})]})})," ",e.jsxs("div",{className:L,children:[e.jsx("h4",{className:a,children:" Kontak Person "}),e.jsx("p",{className:"cls-26 mt-6",children:" Anda bisa menghubungi kami kapan saja. "}),t.map((k,b)=>e.jsxs("div",{className:f,children:[e.jsx("i",{"data-feather":"phone",className:h,children:" "}),e.jsxs("div",{className:y,children:[e.jsxs("a",{href:`tel:${k.phone}`,className:F,children:[" ",k.phone," "]})," (",k.name,")"]})]},b)),e.jsxs("div",{className:f,children:[e.jsx("i",{"data-feather":"mail",className:h,children:" "}),e.jsx("div",{className:y,children:e.jsxs("a",{href:`mailto:${d.email}`,className:F,children:[" ",d.email," "]})})]})]})," "]})," "]})," "]})})," "]})," ",e.jsxs("div",{className:"cls-35 py-[30px] px-0 border-t border-slate-800",children:[e.jsxs("div",{className:"cls-36 container relative text-center",children:[e.jsx("div",{className:"cls-27 grid grid-cols-1",children:e.jsx("div",{className:"cls-37 text-center",children:e.jsxs("p",{className:"cls-38 mb-0",children:[" Â©",s]})})})," "]})," "]})]})," "]})},fe=({socialNetworkLinks:g})=>{const{fb:d,twitter:t,tiktok:l,ig:s,youtube:i}=g,r="list-none",c="inline-flex ms-2 mb-0",u="text-slate-300 hover:text-red-500",p="size-4 align-middle";return e.jsxs("ul",{className:r,children:[d&&e.jsxs("li",{className:"inline-flex mb-0",children:[" ",e.jsxs("a",{href:`${d}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"facebook",title:"facebook",className:p,children:" "})," "]})," "]}),t&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://twitter.com/${t}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"twitter",title:"twitter",className:p,children:" "})," "]})]}),l&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://www.tiktok.com/${l}`,target:"_blank",className:u,children:[" ",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:" cls-12 size-4 align-middle",title:"TikTok",children:e.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})})]})," "]}),s&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://www.instagram.com/${s}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"instagram",title:"instagram",className:p,children:" "})," "]})," "]}),i&&e.jsxs("li",{className:c,children:[" ",e.jsxs("a",{href:`https://www.youtube.com/${i}`,target:"_blank",className:u,children:[" ",e.jsx("i",{"data-feather":"youtube",title:"youtube",className:p,children:" "})," "]})," "]})]})};function ge({companyData:g,socialNetworkLinks:d}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"tagline bg-slate-900 !twx-pb-0 !twx-pt-[7px] twx-h-[47px]",children:e.jsx("div",{className:"container relative",children:e.jsx("div",{className:"grid grid-cols-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("ul",{className:"list-none twx-leading-8",children:[e.jsxs("li",{className:"inline-flex items-center",children:[e.jsx("i",{"data-feather":"award",className:"text-red-500 size-4"}),e.jsx("span",{className:"ms-2 text-slate-300",children:"Pondok Pesantren Kanzululum"})]}),e.jsxs("li",{className:"inline-flex items-center ms-2",children:[e.jsx("i",{"data-feather":"map-pin",className:"text-red-500 size-4"}),e.jsx("span",{className:"ms-2 text-slate-300",children:"Kesambi, Cirebon"})]})]}),e.jsxs("ul",{className:"list-none twx-leading-8",children:[e.jsxs("li",{className:"inline-flex items-center",children:[e.jsx("i",{"data-feather":"mail",className:"text-red-500 size-4"}),e.jsx("a",{href:`mailto:${g.email}`,className:"ms-2 text-slate-300 hover:text-slate-200",children:g.email})]}),e.jsx("li",{className:"inline-flex items-center ms-2",children:e.jsx(fe,{socialNetworkLinks:d})})]})]})})})})})}const pe=({webNavigationList:g})=>{const d="cls-29 navigation-menu justify-end nav-light",t="cls-33 sub-menu-item",l=s=>{let i=s.path==="/"?s.path===location.pathname:location.pathname.startsWith(s.path);if(s.path.includes("/index.html")&&(i=s.path==="/"?`${s.path}/index.html`==`${location.pathname}/index.html`:`${location.pathname}/index.html`.startsWith(`${s.path}/index.html`)),Array.isArray(s.children)){for(const r of s.children)if(l(r))return!0}return i};return I.useEffect(()=>{},[]),e.jsx("div",{id:"navigation",children:e.jsx("ul",{className:d,children:Array.isArray(g)&&g.map((s,i)=>{const r=Array.isArray(s.children);let c=l(s);return e.jsxs("li",{className:`${c?"active":""} ${r?"has-submenu parent-menu-item":""}`,children:[e.jsx("a",{href:`${s.path}`,className:`${t} ${r?"twx-mr-2":""}`,children:s.title}),r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"menu-arrow !twx-ml-2"}),e.jsx("ul",{className:"submenu",children:s.children.map((u,p)=>e.jsx("li",{children:e.jsx("a",{href:u.path,className:"sub-menu-item",children:u.title})},p))})]}):null]},i)})})})},xe=({webNavigationList:g})=>{const d="cls-0 defaultscroll tagline-height",t="cls-1 container relative",l="cls-2 logo",s="cls-3 inline-block dark:hidden",i="cls-4 h-7 l-dark",r="cls-5 h-7 l-light",c="cls-6 hidden dark:inline-block",u="cls-7 menu-extras",p="cls-8 menu-item",w="cls-9 navbar-toggle",v="cls-10 lines",x=()=>{document.getElementById("isToggle").classList.toggle("open");var j=document.getElementById("navigation");j.style.display==="block"?j.style.display="none":j.style.display="block"};return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{id:"topnav",className:d,children:[e.jsxs("div",{className:t,children:[e.jsxs("a",{href:"/",className:l,children:[e.jsxs("span",{className:s,children:[e.jsx("img",{src:"/assets/images/logo/logo-dark.png",alt:"",className:i}),e.jsx("img",{src:"/assets/images/logo/logo-light.png",alt:"",className:r})]}),e.jsx("img",{src:"/assets/images/logo/logo-white.png",alt:"",className:c})]}),e.jsx("div",{className:u,children:e.jsx("div",{className:p,children:e.jsx("a",{id:"isToggle",onClick:j=>x(),className:w,children:e.jsxs("div",{className:v,children:[e.jsx("span",{children:" "}),e.jsx("span",{children:" "}),e.jsx("span",{children:" "})]})})})}),e.jsx(pe,{webNavigationList:g})]})," "]})," "]})},ye=({companyData:g,webNavigationList:d,socialNetworkLinks:t})=>(I.useEffect(()=>{function l(){const s=document.getElementById("topnav");s!=null&&(document.body.scrollTop>=50||document.documentElement.scrollTop>=50?s.classList.add("nav-sticky"):s.classList.remove("nav-sticky"))}window.addEventListener("scroll",s=>{s.preventDefault(),l()})},[]),e.jsxs(e.Fragment,{children:[e.jsx(ge,{companyData:g,socialNetworkLinks:t}),e.jsx(xe,{webNavigationList:d})]})),Le=({children:g})=>{const d=G(),t=q(u=>u.company),l=q(u=>u.footer),s=q(u=>u.contactPerson),i=q(u=>u.socialNetworkLink),r=q(u=>u.webNavigation),{updateClientId:c}=Y.actions;return I.useEffect(()=>{d(c()),d(J()),d(X()),d(Z()),d(ee()),d(te())},[]),e.jsxs(e.Fragment,{children:[e.jsx(ye,{webNavigationList:r.data,companyData:t.data,contactPersonList:s.data,socialNetworkLinks:i.data}),g,e.jsx(me,{footerData:l.data,companyData:t.data,contactPersonList:s.data,socialNetworkLinks:i.data})]})};var H={exports:{}};(function(g,d){(function(t,l){g.exports=l()})(se,function(){return(()=>{var t={870:(i,r,c)=>{c.r(r),c.d(r,{createEndpoint:()=>p,expose:()=>L,proxy:()=>F,proxyMarker:()=>u,releaseProxy:()=>w,transfer:()=>N,transferHandlers:()=>j,windowEndpoint:()=>R,wrap:()=>a});const u=Symbol("Comlink.proxy"),p=Symbol("Comlink.endpoint"),w=Symbol("Comlink.releaseProxy"),v=Symbol("Comlink.thrown"),x=n=>typeof n=="object"&&n!==null||typeof n=="function",j=new Map([["proxy",{canHandle:n=>x(n)&&n[u],serialize(n){const{port1:m,port2:k}=new MessageChannel;return L(n,m),[k,[k]]},deserialize:n=>(n.start(),a(n))}],["throw",{canHandle:n=>x(n)&&v in n,serialize({value:n}){let m;return m=n instanceof Error?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[m,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}}]]);function L(n,m=self){m.addEventListener("message",function k(b){if(!b||!b.data)return;const{id:A,type:Q,path:z}=Object.assign({path:[]},b.data),P=(b.data.argumentList||[]).map($);let E;try{const O=z.slice(0,-1).reduce((C,T)=>C[T],n),M=z.reduce((C,T)=>C[T],n);switch(Q){case 0:E=M;break;case 1:O[z.slice(-1)[0]]=$(b.data.value),E=!0;break;case 2:E=M.apply(O,P);break;case 3:E=F(new M(...P));break;case 4:{const{port1:C,port2:T}=new MessageChannel;L(n,T),E=N(C,[C])}break;case 5:E=void 0}}catch(O){E={value:O,[v]:0}}Promise.resolve(E).catch(O=>({value:O,[v]:0})).then(O=>{const[M,C]=B(O);m.postMessage(Object.assign(Object.assign({},M),{id:A}),C),Q===5&&(m.removeEventListener("message",k),_(m))})}),m.start&&m.start()}function _(n){(function(m){return m.constructor.name==="MessagePort"})(n)&&n.close()}function a(n,m){return f(n,[],m)}function o(n){if(n)throw new Error("Proxy has been released and is not useable")}function f(n,m=[],k=function(){}){let b=!1;const A=new Proxy(k,{get(Q,z){if(o(b),z===w)return()=>W(n,{type:5,path:m.map(P=>P.toString())}).then(()=>{_(n),b=!0});if(z==="then"){if(m.length===0)return{then:()=>A};const P=W(n,{type:0,path:m.map(E=>E.toString())}).then($);return P.then.bind(P)}return f(n,[...m,z])},set(Q,z,P){o(b);const[E,O]=B(P);return W(n,{type:1,path:[...m,z].map(M=>M.toString()),value:E},O).then($)},apply(Q,z,P){o(b);const E=m[m.length-1];if(E===p)return W(n,{type:4}).then($);if(E==="bind")return f(n,m.slice(0,-1));const[O,M]=h(P);return W(n,{type:2,path:m.map(C=>C.toString()),argumentList:O},M).then($)},construct(Q,z){o(b);const[P,E]=h(z);return W(n,{type:3,path:m.map(O=>O.toString()),argumentList:P},E).then($)}});return A}function h(n){const m=n.map(B);return[m.map(b=>b[0]),(k=m.map(b=>b[1]),Array.prototype.concat.apply([],k))];var k}const y=new WeakMap;function N(n,m){return y.set(n,m),n}function F(n){return Object.assign(n,{[u]:!0})}function R(n,m=self,k="*"){return{postMessage:(b,A)=>n.postMessage(b,k,A),addEventListener:m.addEventListener.bind(m),removeEventListener:m.removeEventListener.bind(m)}}function B(n){for(const[m,k]of j)if(k.canHandle(n)){const[b,A]=k.serialize(n);return[{type:3,name:m,value:b},A]}return[{type:0,value:n},y.get(n)||[]]}function $(n){switch(n.type){case 3:return j.get(n.name).deserialize(n.value);case 0:return n.value}}function W(n,m,k){return new Promise(b=>{const A=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");n.addEventListener("message",function Q(z){z.data&&z.data.id&&z.data.id===A&&(n.removeEventListener("message",Q),b(z.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:A},m),k)})}},162:function(i,r,c){var u=this&&this.__createBinding||(Object.create?function(a,o,f,h){h===void 0&&(h=f),Object.defineProperty(a,h,{enumerable:!0,get:function(){return o[f]}})}:function(a,o,f,h){h===void 0&&(h=f),a[h]=o[f]}),p=this&&this.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),w=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var f in a)f!=="default"&&Object.prototype.hasOwnProperty.call(a,f)&&u(o,a,f);return p(o,a),o};Object.defineProperty(r,"__esModule",{value:!0}),r.createDbWorker=void 0;const v=w(c(870));async function x(a){if(a.data&&a.data.action==="eval"){const o=new Int32Array(a.data.notify,0,2),f=new Uint8Array(a.data.notify,8);let h;try{h={ok:await _(a.data.request)}}catch(N){console.error("worker request error",a.data.request,N),h={err:String(N)}}const y=new TextEncoder().encode(JSON.stringify(h));f.set(y,0),o[1]=y.length,Atomics.notify(o,0)}}function j(a){if(a.tagName==="BODY")return"body";const o=[];for(;a.parentElement&&a.tagName!=="BODY";){if(a.id){o.unshift("#"+a.id);break}{let f=1,h=a;for(;h.previousElementSibling;)h=h.previousElementSibling,f++;o.unshift(a.tagName.toLowerCase()+":nth-child("+f+")")}a=a.parentElement}return o.join(" > ")}function L(a){return Object.keys(a)}async function _(a){if(console.log("dom vtable request",a),a.type==="select")return[...document.querySelectorAll(a.selector)].map(o=>{const f={};for(const h of a.columns)h==="selector"?f.selector=j(o):h==="parent"?o.parentElement&&(f.parent=o.parentElement?j(o.parentElement):null):h==="idx"||(f[h]=o[h]);return f});if(a.type==="insert"){if(!a.value.parent)throw Error('"parent" column must be set when inserting');const o=document.querySelectorAll(a.value.parent);if(o.length===0)throw Error(`Parent element ${a.value.parent} could not be found`);if(o.length>1)throw Error(`Parent element ${a.value.parent} ambiguous (${o.length} results)`);const f=o[0];if(!a.value.tagName)throw Error("tagName must be set for inserting");const h=document.createElement(a.value.tagName);for(const y of L(a.value))if(a.value[y]!==null){if(y==="tagName"||y==="parent")continue;if(y==="idx"||y==="selector")throw Error(`${y} can't be set`);h[y]=a.value[y]}return f.appendChild(h),null}if(a.type==="update"){const o=document.querySelector(a.value.selector);if(!o)throw Error(`Element ${a.value.selector} not found!`);const f=[];for(const h of L(a.value)){const y=a.value[h];if(h!=="parent"){if(h!=="idx"&&h!=="selector"&&y!==o[h]){if(console.log("SETTING ",h,o[h],"->",y),h==="tagName")throw Error("can't change tagName");f.push(h)}}else if(y!==j(o.parentElement)){const N=document.querySelectorAll(y);if(N.length!==1)throw Error(`Invalid target parent: found ${N.length} matches`);N[0].appendChild(o)}}for(const h of f)o[h]=a.value[h];return null}throw Error(`unknown request ${a.type}`)}v.transferHandlers.set("WORKERSQLPROXIES",{canHandle:a=>!1,serialize(a){throw Error("no")},deserialize:a=>(a.start(),v.wrap(a))}),r.createDbWorker=async function(a,o,f,h=1/0){const y=new Worker(o),N=v.wrap(y),F=await N.SplitFileHttpDatabase(f,a,void 0,h);return y.addEventListener("message",x),{db:F,worker:N,configs:a}}},432:function(i,r,c){var u=this&&this.__createBinding||(Object.create?function(w,v,x,j){j===void 0&&(j=x),Object.defineProperty(w,j,{enumerable:!0,get:function(){return v[x]}})}:function(w,v,x,j){j===void 0&&(j=x),w[j]=v[x]}),p=this&&this.__exportStar||function(w,v){for(var x in w)x==="default"||Object.prototype.hasOwnProperty.call(v,x)||u(v,w,x)};Object.defineProperty(r,"__esModule",{value:!0}),p(c(162),r)}},l={};function s(i){var r=l[i];if(r!==void 0)return r.exports;var c=l[i]={exports:{}};return t[i].call(c.exports,c,c.exports,s),c.exports}return s.d=(i,r)=>{for(var c in r)s.o(r,c)&&!s.o(i,c)&&Object.defineProperty(i,c,{enumerable:!0,get:r[c]})},s.o=(i,r)=>Object.prototype.hasOwnProperty.call(i,r),s.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s(432)})()})})(H);var je=H.exports;const be=new URL("/assets/sqlite.worker-DMS32ee_.js",import.meta.url),we=new URL("/assets/sql-wasm-Bv7gRpUo.wasm",import.meta.url);class ve{constructor(d,t){S(this,"db",null);S(this,"prepareArgs",[]);S(this,"result",null);S(this,"cursorValue",0);this.db=d,this.prepareArgs=t}async bind(){const d=this.prepareArgs[0],[t]=await this.db.exec(d);this.result=t}step(){console.log("stmt.step()");const{values:d}=this.result;return console.log(this.cursorValue,d),this.cursorValue<d.length?(this.cursorValue+=1,!0):!1}get(){console.log("stmt.get()");const{values:d}=this.result;return d[this.cursorValue]}async free(){console.log("stmt.free()",arguments)}}class ke{constructor(d){S(this,"sqlite",null);S(this,"stmt",null);S(this,"db",null);this.sqlite=d.worker,this.db=d.db}prepare(){return this.stmt=new ve(this.db,arguments),this.stmt}}class Ne{constructor(){S(this,"dbUrl",null);S(this,"schema",null);S(this,"maxByteToRead",10*1024*1024);S(this,"config",null);S(this,"requestChunkSize",4096);S(this,"worker",null);S(this,"db",null);S(this,"ready",!1)}resetWorker(){this.worker.worker.bytesRead=0}setup(){this.config={from:"inline",config:{serverMode:"full",requestChunkSize:this.requestChunkSize,url:this.dbUrl}}}async initOrm(d=t=>t){this.setup(),this.worker=await je.createDbWorker([this.config],be.toString(),we.toString(),this.maxByteToRead);const t=new ke(this.worker);this.db=ae(t,{schema:re}),this.ready=!0,d(this)}async drizzleQuery(d){const{query:t}=d.prepare(),{sql:l,params:s}=t,i=await this.worker.db.query(l,s);return this.resetWorker(),i}async getAll(){return await this.drizzleQuery(this.db.select().from(this.schema).limit(6))}}class Fe extends Ne{constructor(){super(...arguments);S(this,"pk","id");S(this,"searchFields",[]);S(this,"selectList",{})}async get(t){let l;if(typeof t=="object"&&t!==null){const r=t;if(!this.isValidFilter(r))return null;l=this.addQueryFilter(r)}else l=this.addQueryFilter({[this.pk]:t});const s=await this.drizzleQuery(this.db.select().from(this.schema).where(l)),[i]=s;return i}buildSelectList(t=[]){const l=Object.keys(this.schema);this.selectList={};for(const s of l)t.includes(s)||(this.selectList[s]=this.schema[s])}getSearchFields(){const t=Object.keys(this.schema);if(this.searchFields.length===0)for(const l of t)this.schema[l].dataType==="string"&&this.searchFields.push(l);return this.searchFields}isValidOrder(t){if(!(typeof t=="object"&&t!==null))return!1;const s=Object.keys(this.schema),i=Object.keys(t);if(i.length>1&&console.log("Warning: order field > 1 left is unused"),i.length>0){const[r]=i,c=t[r];return s.includes(r)&&["asc","desc"].includes(c)}return!1}isValidFilter(t){return typeof t=="object"&&t!==null}isValidSearch(t){if(!(typeof t=="object"&&t!==null))return!1;const s=typeof t.query=="string"&&t.query.length>0,r=["single","all"].includes(t.type)?t.type:"all";let c=!0;const u=Object.keys(this.schema);return r==="single"&&(c=u.includes(t.field)),s&&c}isValidPage(t){return t&&t!==null}addQueryOrder(t){const l=Object.keys(t),[s]=l;return t[s]==="asc"?ne(this.schema[s]):ie(this.schema[s])}addQueryFilter(t){const l=Object.keys(this.schema),s=Object.keys(t);s.length>1&&console.log("Warning: filter field > 1 left is unused");let i=[];for(const r of s)l.includes(r)?i.push(le(this.schema[r],t[r])):console.log(`invalid filter ${r} not exists in [${l.join(",")}]`);return i.length>0?ce.apply(this,i):null}addQuerySearch(t,l){const s=[];for(const i of t)s.push(V(this.schema[i],`%${l}%`));return s.length>0?oe.apply(this,s):null}getListParam(t,l,s,i,r){if(typeof t=="object"&&t!==null){const o=t;t=o.limit??5,l=o.page??1,s=o.order??null,i=o.filter??null,r=o.search??null}const c=this.defaultOrder??{[this.pk]:"asc"},u=this.addQueryOrder(this.isValidOrder(s)?s:c),p=this.isValidSearch(r);let w,v,x;p&&(v=r.type,x=r.field,w=r.query);const j=this.isValidFilter(i),L=p,_=this.isValidPage(l);return{limit:t,page:l,order:s,filter:i,search:r,search:r,orderBy:u,validSearch:p,searchType:v,searchField:x,searchQuery:w,hasFilter:j,hasSearch:L,hasPage:_,hasSearchAndFilter:j&&L}}async count(t=null,l=null){let s=null;if(this.isValidFilter(t)){let i=this.addQueryFilter(t);s=await this.drizzleQuery(this.db.select({count:D(this.schema.id)}).from(this.schema).where(i));const[r]=s;return r?r[Object.keys(r).at(0)]:0}return await this.countAll()}async countAll(){const t=await this.drizzleQuery(this.db.select({count:D()}).from(this.schema)),[l]=t;return l?l[Object.keys(l).at(0)]:0}async getRecords(t){return await this.drizzleQuery(this.db.select(this.selectList).from(this.schema).orderBy(t))}async getRecords_withPage(t,l,s){return await this.drizzleQuery(this.db.select(this.selectList).from(this.schema).orderBy(t).limit(l).offset(s))}async getRecordsWithFilter(t,l){return await this.drizzleQuery(this.db.select(this.selectList).from(this.schema).where(l).orderBy(t))}async getRecordsWithFilter_withPage(t,l,s,i){return await this.drizzleQuery(this.db.select(this.selectList).from(this.schema).where(i).orderBy(t).limit(l).offset(s))}async getRecordsWithSearch(t,l,s,i){let r=[];if(l==="single")r=await this.drizzleQuery(this.db.select().from(this.schema).where(V(this.schema[s],`%${i}%`)).orderBy(t));else{const c=this.getSearchFields(),u=this.addQuerySearch(c,i);r=await this.drizzleQuery(this.db.select(this.selectList).from(this.schema).where(u).orderBy(t))}return r}async getRecordsWithSearch_withPage(t,l,s,i,r,c){let u=[];if(i==="single")u=await this.drizzleQuery(this.db.select().from(this.schema).where(V(this.schema[r],`%${c}%`)).orderBy(t).limit(l).offset(s));else{const p=this.getSearchFields(),w=this.addQuerySearch(p,c);u=await this.drizzleQuery(this.db.select(this.selectList).from(this.schema).where(w).orderBy(t).limit(l).offset(s))}return u}async getCountWithSearch(t,l,s){let i;t==="single"?i=await this.drizzleQuery(this.db.select({count:D(this.schema.id)}).from(this.schema).where(V(this.schema[l],`%${s}%`))):i=await this.drizzleQuery(this.db.select({count:D(this.schema.id)}).from(this.schema).where(searchCondition));const[r]=i;return r?r[Object.keys(r).at(0)]:0}async getList(t=5,l=1,s=null,i=null,r=null){let{limit:c,page:u,order:p,filter:w,search:v,orderBy:x,validSearch:j,searchType:L,searchField:_,searchQuery:a,hasFilter:o,hasSearch:f,hasPage:h,hasSearchAndFilter:y}=this.getListParam(t,l,s,i,r),N=0,F=[];const R=de(u,c);if(this.buildSelectList(["content"]),f)h?F=await this.getRecordsWithSearch_withPage(x,c,R,L,_,a):F=await this.getRecordsWithSearch(x,L,_,a),N=await this.getCountWithSearch(L,_,a);else if(o){let $=this.addQueryFilter(w);h?F=await this.getRecordsWithFilter_withPage(x,c,R,$):F=await this.getRecordsWithFilter(x,$)}else h?F=await this.getRecords_withPage(x,c,R):F=await this.getRecords(x),N=await this.countAll();const B=he(N,c);return{limit:c,totalPages:B,totalRecords:N,recordCount:F.length,records:F}}}export{Le as C,Fe as D};
//# sourceMappingURL=DrizzleModelRo-Bq2wLOAa.js.map
